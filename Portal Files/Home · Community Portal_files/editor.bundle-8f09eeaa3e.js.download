(function(t){var e=t("[data-ckeditor-basepath]").data("ckeditor-basepath");if(e){window.CKEDITOR_BASEPATH=e}})(jQuery);
/*
Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
*/
/*
Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
*/
(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var i=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,e={timestamp:"H0CG",version:"4.6.2",revision:"20af917",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:i},status:"unloaded",basePath:function(){var t=window.CKEDITOR_BASEPATH||"";if(!t)for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n++){var o=e[n].src.match(i);if(o){t=o[1];break}}-1==t.indexOf(":/")&&"//"!=t.slice(0,2)&&(t=0===t.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+t:location.href.match(/^[^\?]*\/(?:)/)[0]+t);if(!t)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return t}(),getUrl:function(t){-1==t.indexOf(":/")&&0!==t.indexOf("/")&&(t=this.basePath+t);this.timestamp&&"/"!=t.charAt(t.length-1)&&!/[&?]t=/.test(t)&&(t+=(0<=t.indexOf("?")?"&":"?")+"t="+this.timestamp);return t},domReady:function(){function n(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",n,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",n),t())}catch(t){}}function t(){for(var t;t=o.shift();)t()}var o=[];return function(t){function e(){try{document.documentElement.doScroll("left")}catch(t){setTimeout(e,1);return}n()}o.push(t);"complete"===document.readyState&&setTimeout(n,1);if(1==o.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",n);window.attachEvent("onload",n);t=!1;try{t=!window.frameElement}catch(t){}document.documentElement.doScroll&&t&&e()}}}()},n=window.CKEDITOR_GETURL;if(n){var o=e.getUrl;e.getUrl=function(t){return n.call(e,t)||o.call(e,t)}}return e}());CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(t){var e=CKEDITOR.event.prototype,n;for(n in e)null==t[n]&&(t[n]=e[n])},CKEDITOR.event.prototype=function(){function d(t){var e=m(this);return e[t]||(e[t]=new n(t))}var m=function(t){t=t.getPrivate&&t.getPrivate()||t._||(t._={});return t.events||(t.events={})},n=function(t){this.name=t;this.listeners=[]};n.prototype={getListenerIndex:function(t){for(var e=0,n=this.listeners;e<n.length;e++)if(n[e].fn==t)return e;return-1}};return{define:function(t,e){var n=d.call(this,t);CKEDITOR.tools.extend(n,e,!0)},on:function(i,r,a,s,t){function e(t,e,n,o){t={name:i,sender:this,editor:t,data:e,listenerData:s,stop:n,cancel:o,removeListener:l};return!1===r.call(a,t)?!1:t.data}function l(){o.removeListener(i,r)}var n=d.call(this,i);if(0>n.getListenerIndex(r)){n=n.listeners;a||(a=this);isNaN(t)&&(t=10);var o=this;e.fn=r;e.priority=t;for(var c=n.length-1;0<=c;c--)if(n[c].priority<=t)return n.splice(c+1,0,e),{removeListener:l};n.unshift(e)}return{removeListener:l}},once:function(){var t=Array.prototype.slice.call(arguments),e=t[1];t[1]=function(t){t.removeListener();return e.apply(this,arguments)};return this.on.apply(this,t)},capture:function(){CKEDITOR.event.useCapture=1;var t=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return t},fire:function(){var l=0,c=function(){l=1},d=0,u=function(){d=1};return function(t,e,n){var o=m(this)[t];t=l;var i=d;l=d=0;if(o){var r=o.listeners;if(r.length)for(var r=r.slice(0),a,s=0;s<r.length;s++){if(o.errorProof)try{a=r[s].call(this,n,e,c,u)}catch(t){}else a=r[s].call(this,n,e,c,u);!1===a?d=1:"undefined"!=typeof a&&(e=a);if(l||d)break}}e=d?!1:"undefined"==typeof e?!0:e;l=t;d=i;return e}}(),fireOnce:function(t,e,n){e=this.fire(t,e,n);delete m(this)[t];return e},removeListener:function(t,e){var n=m(this)[t];if(n){var o=n.getListenerIndex(e);0<=o&&n.listeners.splice(o,1)}},removeAllListeners:function(){var t=m(this),e;for(e in t)delete t[e]},hasListeners:function(t){return(t=m(this)[t])&&0<t.listeners.length}}}());CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(t,e){t in{instanceReady:1,loaded:1}&&(this[t]=!0);return CKEDITOR.event.prototype.fire.call(this,t,e,this)},CKEDITOR.editor.prototype.fireOnce=function(t,e){t in{instanceReady:1,loaded:1}&&(this[t]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,t,e,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));CKEDITOR.env||(CKEDITOR.env=function(){var t=navigator.userAgent.toLowerCase(),e=t.match(/edge[ \/](\d+.?\d*)/),n=-1<t.indexOf("trident/"),n=!(!e&&!n),n={ie:n,edge:!!e,webkit:!n&&-1<t.indexOf(" applewebkit/"),air:-1<t.indexOf(" adobeair/"),mac:-1<t.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<t.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(t),isCustomDomain:function(){if(!this.ie)return!1;var t=document.domain,e=window.location.hostname;return t!=e&&t!="["+e+"]"},secure:"https:"==location.protocol};n.gecko="Gecko"==navigator.product&&!n.webkit&&!n.ie;n.webkit&&(-1<t.indexOf("chrome")?n.chrome=!0:n.safari=!0);var o=0;n.ie&&(o=e?parseFloat(e[1]):n.quirks||!document.documentMode?parseFloat(t.match(/msie (\d+)/)[1]):document.documentMode,n.ie9Compat=9==o,n.ie8Compat=8==o,n.ie7Compat=7==o,n.ie6Compat=7>o||n.quirks);n.gecko&&(e=t.match(/rv:([\d\.]+)/))&&(e=e[1].split("."),o=1e4*e[0]+100*(e[1]||0)+1*(e[2]||0));n.air&&(o=parseFloat(t.match(/ adobeair\/(\d+)/)[1]));n.webkit&&(o=parseFloat(t.match(/ applewebkit\/(\d+)/)[1]));n.version=o;n.isCompatible=!(n.ie&&7>o)&&!(n.gecko&&4e4>o)&&!(n.webkit&&534>o);n.hidpi=2<=window.devicePixelRatio;n.needsBrFiller=n.gecko||n.webkit||n.ie&&10<o;n.needsNbspFiller=n.ie&&11>o;n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.webkit?"webkit":"unknown");n.quirks&&(n.cssClass+=" cke_browser_quirks");n.ie&&(n.cssClass+=" cke_browser_ie"+(n.quirks?"6 cke_browser_iequirks":n.version));n.air&&(n.cssClass+=" cke_browser_air");n.iOS&&(n.cssClass+=" cke_browser_ios");n.hidpi&&(n.cssClass+=" cke_hidpi");return n}());"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var t=document.createElement("script");t.type="text/javascript";t.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(t)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(t){(this._.pending||(this._.pending=[])).push(t)};(function(){CKEDITOR.domReady(function(){var t=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;t&&(CKEDITOR.status="basic_ready",t&&t._load?t():e&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*e))})})();CKEDITOR.status="basic_loaded"}();"use strict";CKEDITOR.VERBOSITY_WARN=1;CKEDITOR.VERBOSITY_ERROR=2;CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR;CKEDITOR.warn=function(t,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:t,additionalData:e})};CKEDITOR.error=function(t,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:t,additionalData:e})};CKEDITOR.on("log",function(t){if(window.console&&window.console.log){var e=console[t.data.type]?t.data.type:"log",n=t.data.errorCode;if(t=t.data.additionalData)console[e]("[CKEDITOR] Error code: "+n+".",t);else console[e]("[CKEDITOR] Error code: "+n+".");console[e]("[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+n)}},null,null,999);CKEDITOR.dom={};(function(){var n=[],o=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",e=/&/g,i=/>/g,r=/</g,a=/"/g,s=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,l={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},c=function(t,e){return"#"==e[0]?String.fromCharCode(parseInt(e.slice(1),10)):l[e]};CKEDITOR.on("reset",function(){n=[]});CKEDITOR.tools={arrayCompare:function(t,e){if(!t&&!e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0},getIndex:function(t,e){for(var n=0;n<t.length;++n)if(e(t[n]))return n;return-1},clone:function(t){var e;if(t&&t instanceof Array){e=[];for(var n=0;n<t.length;n++)e[n]=CKEDITOR.tools.clone(t[n]);return e}if(null===t||"object"!=typeof t||t instanceof String||t instanceof Number||t instanceof Boolean||t instanceof Date||t instanceof RegExp||t.nodeType||t.window===t)return t;e=new t.constructor;for(n in t)e[n]=CKEDITOR.tools.clone(t[n]);return e},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},extend:function(t){var e=arguments.length,n,o;"boolean"==typeof(n=arguments[e-1])?e--:"boolean"==typeof(n=arguments[e-2])&&(o=arguments[e-1],e-=2);for(var i=1;i<e;i++){var r=arguments[i],a;for(a in r)if(!0===n||null==t[a])if(!o||a in o)t[a]=r[a]}return t},prototypedCopy:function(t){var e=function(){};e.prototype=t;return new e},copy:function(t){var e={},n;for(n in t)e[n]=t[n];return e},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},cssVendorPrefix:function(t,e,n){if(n)return o+t+":"+e+";"+t+":"+e;n={};n[t]=e;n[o+t]=e;return n},cssStyleToDomStyle:function(){var t=document.createElement("div").style,e="undefined"!=typeof t.cssFloat?"cssFloat":"undefined"!=typeof t.styleFloat?"styleFloat":"float";return function(t){return"float"==t?e:t.replace(/-./g,function(t){return t.substr(1).toUpperCase()})}}(),buildStyleHtml:function(t){t=[].concat(t);for(var e,n=[],o=0;o<t.length;o++)if(e=t[o])/@import|[{}]/.test(e)?n.push("<style>"+e+"</style>"):n.push('<link type="text/css" rel=stylesheet href="'+e+'">');return n.join("")},htmlEncode:function(t){return void 0===t||null===t?"":String(t).replace(e,"&amp;").replace(i,"&gt;").replace(r,"&lt;")},htmlDecode:function(t){return t.replace(s,c)},htmlEncodeAttr:function(t){return CKEDITOR.tools.htmlEncode(t).replace(a,"&quot;")},htmlDecodeAttr:function(t){return CKEDITOR.tools.htmlDecode(t)},transformPlainTextToHtml:function(t,e){var n=e==CKEDITOR.ENTER_BR,o=this.htmlEncode(t.replace(/\r\n/g,"\n")),o=o.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),i=e==CKEDITOR.ENTER_P?"p":"div";if(!n){var r=/\n{2}/g;if(r.test(o))var a="<"+i+">",s="</"+i+">",o=a+o.replace(r,function(){return s+a})+s}o=o.replace(/\n/g,"<br>");n||(o=o.replace(new RegExp("<br>(?=</"+i+">)"),function(t){return CKEDITOR.tools.repeat(t,2)}));o=o.replace(/^ | $/g,"&nbsp;");return o=o.replace(/(>|\s) /g,function(t,e){return e+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var t=0;return function(){return++t}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var t="e",e=0;8>e;e++)t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t},override:function(t,e){var n=e(t);n.prototype=t.prototype;return n},setTimeout:function(t,e,n,o,i){i||(i=window);n||(n=i);return i.setTimeout(function(){o?t.apply(n,[].concat(o)):t.apply(n)},e||0)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(t,e){if("function"==typeof e)for(var n=0,o=t.length;n<o;n++){if(e(t[n]))return n}else{if(t.indexOf)return t.indexOf(e);n=0;for(o=t.length;n<o;n++)if(t[n]===e)return n}return-1},search:function(t,e){var n=CKEDITOR.tools.indexOf(t,e);return 0<=n?t[n]:null},bind:function(t,e){return function(){return t.apply(e,arguments)}},createClass:function(t){var e=t.$,n=t.base,o=t.privates||t._,i=t.proto;t=t.statics;!e&&(e=function(){n&&this.base.apply(this,arguments)});if(o)var r=e,e=function(){var t=this._||(this._={}),e;for(e in o){var n=o[e];t[e]="function"==typeof n?CKEDITOR.tools.bind(n,this):n}r.apply(this,arguments)};n&&(e.prototype=this.prototypedCopy(n.prototype),e.prototype.constructor=e,e.base=n,e.baseProto=n.prototype,e.prototype.base=function(){this.base=n.prototype.base;n.apply(this,arguments);this.base=arguments.callee});i&&this.extend(e.prototype,i,!0);t&&this.extend(e,t,!0);return e},addFunction:function(t,e){return n.push(function(){return t.apply(e||this,arguments)})-1},removeFunction:function(t){n[t]=null},callFunction:function(t){var e=n[t];return e&&e.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e=/^-?\d+\.?\d*px$/,n;return function(t){n=CKEDITOR.tools.trim(t+"")+"px";return e.test(n)?n:t||""}}(),convertToPx:function(){var e;return function(t){e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e));return/%$/.test(t)?t:(e.setStyle("width",t),e.$.clientWidth)}}(),repeat:function(t,e){return Array(e+1).join(t)},tryThese:function(){for(var t,e=0,n=arguments.length;e<n;e++){var o=arguments[e];try{t=o();break}catch(t){}}return t},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(n){return function(){var t=arguments,e=this;window.setTimeout(function(){n.apply(e,t)},0)}},normalizeCssText:function(t,e){var n=[],o,i=CKEDITOR.tools.parseCssText(t,!0,e);for(o in i)n.push(o+":"+i[o]);n.sort();return n.length?n.join(";")+";":""},convertRgbToHex:function(t){return t.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(t,e,n,o){t=[e,n,o];for(e=0;3>e;e++)t[e]=("0"+parseInt(t[e],10).toString(16)).slice(-2);return"#"+t.join("")})},normalizeHex:function(t){return t.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(t,e,n,o){t=e.toLowerCase();3==t.length&&(t=t.split(""),t=[t[0],t[0],t[1],t[1],t[2],t[2]].join(""));return"#"+t+o})},parseCssText:function(t,o,e){var i={};e&&(t=new CKEDITOR.dom.element("span").setAttribute("style",t).getAttribute("style")||"");t&&(t=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(t)));if(!t||";"==t)return i;t.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(t,e,n){o&&(e=e.toLowerCase(),"font-family"==e&&(n=n.replace(/\s*,\s*/g,",")),n=CKEDITOR.tools.trim(n));i[e]=n});return i},writeCssText:function(t,e){var n,o=[];for(n in t)o.push(n+":"+t[n]);e&&o.sort();return o.join("; ")},objectCompare:function(t,e,n){var o;if(!t&&!e)return!0;if(!t||!e)return!1;for(o in t)if(t[o]!=e[o])return!1;if(!n)for(o in e)if(t[o]!=e[o])return!1;return!0},objectKeys:function(t){var e=[],n;for(n in t)e.push(n);return e},convertArrayToObject:function(t,e){var n={};1==arguments.length&&(e=!0);for(var o=0,i=t.length;o<i;++o)n[t[o]]=e;return n},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){e=e?e.replace(/.+?(?:\.|$)/,""):document.domain;if(!e)break;document.domain=e}return!!e},eventsBuffer:function(e,t,n){function o(){r=(new Date).getTime();i=!1;n?t.call(n):t()}var i,r=0;return{input:function(){if(!i){var t=(new Date).getTime()-r;t<e?i=setTimeout(o,e-t):o()}},reset:function(){i&&clearTimeout(i);i=r=0}}},enableHtml5Elements:function(t,e){for(var n="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),o=n.length,i;o--;)i=t.createElement(n[o]),e&&t.appendChild(i)},checkIfAnyArrayItemMatches:function(t,e){for(var n=0,o=t.length;n<o;++n)if(t[n].match(e))return!0;return!1},checkIfAnyObjectPropertyMatches:function(t,e){for(var n in t)if(n.match(e))return!0;return!1},keystrokeToString:function(t,e){var n=e&16711680,o=e&65535,i=CKEDITOR.env.mac,r=[],a=[];n&CKEDITOR.CTRL&&(r.push(i?"⌘":t[17]),a.push(i?t[224]:t[17]));n&CKEDITOR.ALT&&(r.push(i?"⌥":t[18]),a.push(t[18]));n&CKEDITOR.SHIFT&&(r.push(i?"⇧":t[16]),a.push(t[16]));o&&(t[o]?(r.push(t[o]),a.push(t[o])):(r.push(String.fromCharCode(o)),a.push(String.fromCharCode(o))));return{display:r.join("+"),aria:a.join("+")}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(t){t=t.toLowerCase();for(var e=document.cookie.split(";"),n,o,i=0;i<e.length;i++)if(n=e[i].split("="),o=decodeURIComponent(CKEDITOR.tools.trim(n[0]).toLowerCase()),o===t)return decodeURIComponent(1<n.length?n[1]:"");return null},setCookie:function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+";path=/"},getCsrfToken:function(){var t=CKEDITOR.tools.getCookie("ckCsrfToken");if(!t||40!=t.length){var t=[],e="";if(window.crypto&&window.crypto.getRandomValues)t=new Uint8Array(40),window.crypto.getRandomValues(t);else for(var n=0;40>n;n++)t.push(Math.floor(256*Math.random()));for(n=0;n<t.length;n++)var o="abcdefghijklmnopqrstuvwxyz0123456789".charAt(t[n]%36),e=e+(.5<Math.random()?o.toUpperCase():o);t=e;CKEDITOR.tools.setCookie("ckCsrfToken",t)}return t},escapeCss:function(t){return t?window.CSS&&CSS.escape?CSS.escape(t):isNaN(parseInt(t.charAt(0),10))?t:"\\3"+t.charAt(0)+" "+t.substring(1,t.length):""},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(e){var t=[],n=[],n=this._findColor(e);n.length&&(t.color=n[0],CKEDITOR.tools.array.forEach(n,function(t){e=e.replace(t,"")}));if(e=CKEDITOR.tools.trim(e))t.unprocessed=e;return t},margin:function(t){function e(t){n.top=o[t[0]];n.right=o[t[1]];n.bottom=o[t[2]];n.left=o[t[3]]}var n={},o=t.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset)/g)||["0px"];switch(o.length){case 1:e([0,0,0,0]);break;case 2:e([0,1,0,1]);break;case 3:e([0,1,2,1]);break;case 4:e([0,1,2,3])}return n},_findColor:function(t){var e=[],n=CKEDITOR.tools.array,e=e.concat(t.match(this._rgbaRegExp)||[]),e=e.concat(t.match(this._hslaRegExp)||[]);return e=e.concat(n.filter(t.split(/\s+/),function(t){return t.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)?!0:t.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(n,o,i){var r=[];this.forEach(n,function(t,e){o.call(i,t,e,n)&&r.push(t)});return r},forEach:function(t,e,n){var o=t.length,i;for(i=0;i<o;i++)e.call(n,t[i],i,t)},map:function(t,e,n){for(var o=[],i=0;i<t.length;i++)o.push(e.call(n,t[i],i,t));return o},reduce:function(t,e,n,o){for(var i=0;i<t.length;i++)n=e.call(o,n,t[i],i,t);return n}}};CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf;CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray})();CKEDITOR.dtd=function(){var t=CKEDITOR.tools.extend,e=function(t,e){for(var n=CKEDITOR.tools.clone(t),o=1;o<arguments.length;o++){e=arguments[o];for(var i in e)delete n[i]}return n},n={},o={},i={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},r={command:1,link:1,meta:1,noscript:1,script:1,style:1},a={},s={"#":1},l={center:1,dir:1,noframes:1};t(n,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},s,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});t(o,i,n,l);e={a:e(n,{a:1,button:1}),abbr:n,address:o,area:a,article:o,aside:o,audio:t({source:1,track:1},o),b:n,base:a,bdi:n,bdo:n,blockquote:o,body:o,br:a,button:e(n,{a:1,button:1}),canvas:n,caption:o,cite:n,code:n,col:a,colgroup:{col:1},command:a,datalist:t({option:1},n),dd:o,del:n,details:t({summary:1},o),dfn:n,div:o,dl:{dt:1,dd:1},dt:o,em:n,embed:a,fieldset:t({legend:1},o),figcaption:o,figure:t({figcaption:1},o),footer:o,form:o,h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,head:t({title:1,base:1},r),header:o,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:a,html:t({head:1,body:1},o,r),i:n,iframe:s,img:a,input:a,ins:n,kbd:n,keygen:a,label:n,legend:n,li:o,link:a,main:o,map:o,mark:n,menu:t({li:1},o),meta:a,meter:e(n,{meter:1}),nav:o,noscript:t({link:1,meta:1,style:1},n),object:t({param:1},n),ol:{li:1},optgroup:{option:1},option:s,output:n,p:n,param:a,pre:n,progress:e(n,{progress:1}),q:n,rp:n,rt:n,ruby:t({rp:1,rt:1},n),s:n,samp:n,script:s,section:o,select:{optgroup:1,option:1},small:n,source:a,span:n,strong:n,style:s,sub:n,summary:t({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},n),sup:n,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:o,textarea:s,tfoot:{tr:1},th:o,thead:{tr:1},time:e(n,{time:1}),title:s,tr:{th:1,td:1},track:a,u:n,ul:{li:1},var:n,video:t({source:1,track:1},o),wbr:a,acronym:n,applet:t({param:1},o),basefont:a,big:n,center:o,dialog:a,dir:{li:1},font:n,isindex:a,noframes:o,strike:n,tt:n};t(e,{$block:t({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},i,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:n,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:t({body:1,head:1,html:1},e.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return e}();CKEDITOR.dom.event=function(t){this.$=t};CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var t=this.getKey();if(this.$.ctrlKey||this.$.metaKey)t+=CKEDITOR.CTRL;this.$.shiftKey&&(t+=CKEDITOR.SHIFT);this.$.altKey&&(t+=CKEDITOR.ALT);return t},preventDefault:function(t){var e=this.$;e.preventDefault?e.preventDefault():e.returnValue=!1;t&&this.stopPropagation()},stopPropagation:function(){var t=this.$;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getTarget:function(){var t=this.$.target||this.$.srcElement;return t?new CKEDITOR.dom.node(t):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var t=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(t.documentElement.scrollLeft||t.body.scrollLeft),y:this.$.pageY||this.$.clientY+(t.documentElement.scrollTop||t.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(t){t&&(this.$=t)};CKEDITOR.dom.domObject.prototype=function(){var n=function(e,n){return function(t){"undefined"!=typeof CKEDITOR&&e.fire(n,new CKEDITOR.dom.event(t))}};return{getPrivate:function(){var t;(t=this.getCustomData("_"))||this.setCustomData("_",t={});return t},on:function(t){var e=this.getCustomData("_cke_nativeListeners");e||(e={},this.setCustomData("_cke_nativeListeners",e));e[t]||(e=e[t]=n(this,t),this.$.addEventListener?this.$.addEventListener(t,e,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,e));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(t){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(t)){var e=this.getCustomData("_cke_nativeListeners"),n=e&&e[t];n&&(this.$.removeEventListener?this.$.removeEventListener(t,n,!1):this.$.detachEvent&&this.$.detachEvent("on"+t,n),delete e[t])}},removeAllListeners:function(){var t=this.getCustomData("_cke_nativeListeners"),e;for(e in t){var n=t[e];this.$.detachEvent?this.$.detachEvent("on"+e,n):this.$.removeEventListener&&this.$.removeEventListener(e,n,!1);delete t[e]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();(function(t){var i={};CKEDITOR.on("reset",function(){i={}});t.equals=function(t){try{return t&&t.$===this.$}catch(t){return!1}};t.setCustomData=function(t,e){var n=this.getUniqueId();(i[n]||(i[n]={}))[t]=e;return this};t.getCustomData=function(t){var e=this.$["data-cke-expando"];return(e=e&&i[e])&&t in e?e[t]:null};t.removeCustomData=function(t){var e=this.$["data-cke-expando"],e=e&&i[e],n,o;e&&(n=e[t],o=t in e,delete e[t]);return o?n:null};t.clearCustomData=function(){this.removeAllListeners();var t=this.$["data-cke-expando"];t&&delete i[t]};t.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(t)})(CKEDITOR.dom.domObject.prototype);CKEDITOR.dom.node=function(t){return t?new CKEDITOR.dom[t.nodeType==CKEDITOR.NODE_DOCUMENT?"document":t.nodeType==CKEDITOR.NODE_ELEMENT?"element":t.nodeType==CKEDITOR.NODE_TEXT?"text":t.nodeType==CKEDITOR.NODE_COMMENT?"comment":t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](t):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(t,e){t.append(this,e);return t},clone:function(n,o){function i(t){t["data-cke-expando"]&&(t["data-cke-expando"]=!1);if(t.nodeType==CKEDITOR.NODE_ELEMENT||t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)if(o||t.nodeType!=CKEDITOR.NODE_ELEMENT||t.removeAttribute("id",!1),n){t=t.childNodes;for(var e=0;e<t.length;e++)i(t[e])}}function r(t){if(t.type==CKEDITOR.NODE_ELEMENT||t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(t.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=t.getName();":"==e[0]&&t.renameNode(e.substring(1))}if(n)for(e=0;e<t.getChildCount();e++)r(t.getChild(e))}}var t=this.$.cloneNode(n);i(t);t=new CKEDITOR.dom.node(t);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&r(t);return t},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(t){t.$.parentNode.insertBefore(this.$,t.$.nextSibling);return t},insertBefore:function(t){t.$.parentNode.insertBefore(this.$,t.$);return t},insertBeforeMe:function(t){this.$.parentNode.insertBefore(t.$,this.$);return t},getAddress:function(t){for(var e=[],n=this.getDocument().$.documentElement,o=this.$;o&&o!=n;){var i=o.parentNode;i&&e.unshift(this.getIndex.call({$:o},t));o=i}return e},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(t){function o(t,e){var n=e?t.nextSibling:t.previousSibling;return n&&n.nodeType==CKEDITOR.NODE_TEXT?i(n)?o(n,e):n:null}function i(t){return!t.nodeValue||t.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var e=this.$,n=-1,r;if(!this.$.parentNode||t&&e.nodeType==CKEDITOR.NODE_TEXT&&i(e)&&!o(e)&&!o(e,!0))return-1;do{t&&e!=this.$&&e.nodeType==CKEDITOR.NODE_TEXT&&(r||i(e))||(n++,r=e.nodeType==CKEDITOR.NODE_TEXT)}while(e=e.previousSibling);return n},getNextSourceNode:function(t,e,n){if(n&&!n.call){var o=n;n=function(t){return!t.equals(o)}}t=!t&&this.getFirst&&this.getFirst();var i;if(!t){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;t=this.getNext()}for(;!t&&(i=(i||this).getParent());){if(n&&!1===n(i,!0))return null;t=i.getNext()}return!t||n&&!1===n(t)?null:e&&e!=t.type?t.getNextSourceNode(!1,e,n):t},getPreviousSourceNode:function(t,e,n){if(n&&!n.call){var o=n;n=function(t){return!t.equals(o)}}t=!t&&this.getLast&&this.getLast();var i;if(!t){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;t=this.getPrevious()}for(;!t&&(i=(i||this).getParent());){if(n&&!1===n(i,!0))return null;t=i.getPrevious()}return!t||n&&!1===n(t)?null:e&&t.type!=e?t.getPreviousSourceNode(!1,e,n):t},getPrevious:function(t){var e=this.$,n;do{n=(e=e.previousSibling)&&10!=e.nodeType&&new CKEDITOR.dom.node(e)}while(n&&t&&!t(n));return n},getNext:function(t){var e=this.$,n;do{n=(e=e.nextSibling)&&new CKEDITOR.dom.node(e)}while(n&&t&&!t(n));return n},getParent:function(t){var e=this.$.parentNode;return e&&(e.nodeType==CKEDITOR.NODE_ELEMENT||t&&e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(e):null},getParents:function(t){var e=this,n=[];do{n[t?"push":"unshift"](e)}while(e=e.getParent());return n},getCommonAncestor:function(t){if(t.equals(this))return this;if(t.contains&&t.contains(this))return t;var e=this.contains?this:this.getParent();do{if(e.contains(t))return e}while(e=e.getParent());return null},getPosition:function(t){var e=this.$,n=t.$;if(e.compareDocumentPosition)return e.compareDocumentPosition(n);if(e==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&t.type==CKEDITOR.NODE_ELEMENT){if(e.contains){if(e.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(e))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in e)return 0>e.sourceIndex||0>n.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:e.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}e=this.getAddress();t=t.getAddress();for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(e[o]!=t[o])return e[o]<t[o]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return e.length<t.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var n=this.$,o,i;t||(n=n.parentNode);"function"==typeof e?(i=!0,o=e):(i=!1,o=function(t){t="string"==typeof t.nodeName?t.nodeName.toLowerCase():"";return"string"==typeof e?t==e:t in e});for(;n;){if(o(i?new CKEDITOR.dom.node(n):n))return new CKEDITOR.dom.node(n);try{n=n.parentNode}catch(t){n=null}}return null},hasAscendant:function(t,e){var n=this.$;e||(n=n.parentNode);for(;n;){if(n.nodeName&&n.nodeName.toLowerCase()==t)return!0;n=n.parentNode}return!1},move:function(t,e){t.append(this.remove(),e)},remove:function(t){var e=this.$,n=e.parentNode;if(n){if(t)for(;t=e.firstChild;)n.insertBefore(e.removeChild(t),e);n.removeChild(e)}return this},replace:function(t){this.insertBefore(t);t.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var t;this.getFirst&&(t=this.getFirst());){if(t.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.ltrim(t.getText()),n=t.getLength();if(e)e.length<n&&(t.split(n-e.length),this.$.removeChild(this.$.firstChild));else{t.remove();continue}}break}},rtrim:function(){for(var t;this.getLast&&(t=this.getLast());){if(t.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.rtrim(t.getText()),n=t.getLength();if(e)e.length<n&&(t.split(e.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{t.remove();continue}}break}CKEDITOR.env.needsBrFiller&&(t=this.$.lastChild)&&1==t.type&&"br"==t.nodeName.toLowerCase()&&t.parentNode.removeChild(t)},isReadOnly:function(t){var e=this;this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent());CKEDITOR.env.edge&&e&&e.is("textarea","input")&&(t=!0);if(!t&&e&&"undefined"!=typeof e.$.isContentEditable)return!(e.$.isContentEditable||e.data("cke-editable"));for(;e;){if(e.data("cke-editable"))return!1;if(e.hasAttribute("contenteditable"))return"false"==e.getAttribute("contenteditable");e=e.getParent()}return!0}});CKEDITOR.dom.window=function(t){CKEDITOR.dom.domObject.call(this,t)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var t=this.$.document,e="CSS1Compat"==t.compatMode;return{width:(e?t.documentElement.clientWidth:t.body.clientWidth)||0,height:(e?t.documentElement.clientHeight:t.body.clientHeight)||0}},getScrollPosition:function(){var t=this.$;if("pageXOffset"in t)return{x:t.pageXOffset||0,y:t.pageYOffset||0};t=t.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},getFrame:function(){var t=this.$.frameElement;return t?new CKEDITOR.dom.element.get(t):null}});CKEDITOR.dom.document=function(t){CKEDITOR.dom.domObject.call(this,t)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(t){if(this.$.createStyleSheet)this.$.createStyleSheet(t);else{var e=new CKEDITOR.dom.element("link");e.setAttributes({rel:"stylesheet",type:"text/css",href:t});this.getHead().append(e)}},appendStyleText:function(t){if(this.$.createStyleSheet){var e=this.$.createStyleSheet("");e.cssText=t}else{var n=new CKEDITOR.dom.element("style",this);n.append(new CKEDITOR.dom.text(t,this));this.getHead().append(n)}return e||n.$.sheet},createElement:function(t,e){var n=new CKEDITOR.dom.element(t,this);e&&(e.attributes&&n.setAttributes(e.attributes),e.styles&&n.setStyles(e.styles));return n},createText:function(t){return new CKEDITOR.dom.text(t,this)},focus:function(){this.getWindow().focus()},getActive:function(){var t;try{t=this.$.activeElement}catch(t){return null}return new CKEDITOR.dom.element(t)},getById:function(t){return(t=this.$.getElementById(t))?new CKEDITOR.dom.element(t):null},getByAddress:function(t,e){for(var n=this.$.documentElement,o=0;n&&o<t.length;o++){var i=t[o];if(e)for(var r=-1,a=0;a<n.childNodes.length;a++){var s=n.childNodes[a];if(!0!==e||3!=s.nodeType||!s.previousSibling||3!=s.previousSibling.nodeType)if(r++,r==i){n=s;break}}else n=n.childNodes[i]}return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(t,e){CKEDITOR.env.ie&&8>=document.documentMode||!e||(t=e+":"+t);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(t))},getHead:function(){var t=this.$.getElementsByTagName("head")[0];return t=t?new CKEDITOR.dom.element(t):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(t){this.$.open("text/html","replace");CKEDITOR.env.ie&&(t=t.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>"));this.$.write(t);this.$.close()},find:function(t){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(t))},findOne:function(t){return(t=this.$.querySelector(t))?new CKEDITOR.dom.element(t):null},_getHtml5ShivFrag:function(){var t=this.getCustomData("html5ShivFrag");t||(t=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(t,!0),this.setCustomData("html5ShivFrag",t));return t}});CKEDITOR.dom.nodeList=function(t){this.$=t};CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(t){return 0>t||t>=this.$.length?null:(t=this.$[t])?new CKEDITOR.dom.node(t):null}};CKEDITOR.dom.element=function(t,e){"string"==typeof t&&(t=(e?e.$:document).createElement(t));CKEDITOR.dom.domObject.call(this,t)};CKEDITOR.dom.element.get=function(t){return(t="string"==typeof t?document.getElementById(t)||document.getElementsByName(t)[0]:t)&&(t.$?t:new CKEDITOR.dom.element(t))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(t,e){var n=new CKEDITOR.dom.element("div",e);n.setHtml(t);return n.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(t,e,n,o){var i=e.getCustomData("list_marker_id")||e.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),r=e.getCustomData("list_marker_names")||e.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");t[i]=e;r[n]=1;return e.setCustomData(n,o)};CKEDITOR.dom.element.clearAllMarkers=function(t){for(var e in t)CKEDITOR.dom.element.clearMarkers(t,t[e],1)};CKEDITOR.dom.element.clearMarkers=function(t,e,n){var o=e.getCustomData("list_marker_names"),i=e.getCustomData("list_marker_id"),r;for(r in o)e.removeCustomData(r);e.removeCustomData("list_marker_names");n&&(e.removeCustomData("list_marker_id"),delete t[i])};(function(){function n(t,e){return-1<(" "+t+" ").replace(a," ").indexOf(" "+e+" ")}function o(t){var e=!0;t.$.id||(t.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),e=!1);return function(){e||t.removeAttribute("id")}}function i(t,e){var n=CKEDITOR.tools.escapeCss(t.$.id);return"#"+n+" "+e.split(/,\s*/).join(", #"+n+" ")}function r(t){for(var e=0,n=0,o=s[t].length;n<o;n++)e+=parseFloat(this.getComputedStyle(s[t][n])||0,10)||0;return e}var t=document.createElement("_").classList,t="undefined"!==typeof t&&null!==String(t.add).match(/\[Native code\]/gi),a=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:t?function(t){this.$.classList.add(t);return this}:function(t){var e=this.$.className;e&&(n(e,t)||(e+=" "+t));this.$.className=e||t;return this},removeClass:t?function(t){var e=this.$;e.classList.remove(t);e.className||e.removeAttribute("class");return this}:function(t){var e=this.getAttribute("class");e&&n(e,t)&&((e=e.replace(new RegExp("(?:^|\\s+)"+t+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",e):this.removeAttribute("class"));return this},hasClass:function(t){return n(this.$.className,t)},append:function(t,e){"string"==typeof t&&(t=this.getDocument().createElement(t));e?this.$.insertBefore(t.$,this.$.firstChild):this.$.appendChild(t.$);return t},appendHtml:function(t){if(this.$.childNodes.length){var e=new CKEDITOR.dom.element("div",this.getDocument());e.setHtml(t);e.moveChildren(this)}else this.setHtml(t)},appendText:function(t){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=t:this.append(new CKEDITOR.dom.text(t))},appendBogus:function(t){if(t||CKEDITOR.env.needsBrFiller){for(t=this.getLast();t&&t.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(t.getText());)t=t.getPrevious();t&&t.is&&t.is("br")||(t=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&t.setAttribute("type","_moz"),this.append(t))}},breakParent:function(t,e){var n=new CKEDITOR.dom.range(this.getDocument());n.setStartAfter(this);n.setEndAfter(t);var o=n.extractContents(!1,e||!1),i;n.insertNode(this.remove());if(CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(n=new CKEDITOR.dom.element("div");i=o.getFirst();)i.$.style.backgroundColor&&(i.$.style.backgroundColor=i.$.style.backgroundColor),n.append(i);n.insertAfter(this);n.remove(!0)}else o.insertAfterNode(this)},contains:document.compareDocumentPosition?function(t){return!!(this.$.compareDocumentPosition(t.$)&16)}:function(t){var e=this.$;return t.type!=CKEDITOR.NODE_ELEMENT?e.contains(t.getParent().$):e!=t.$&&e.contains(t.$)},focus:function(){function e(){try{this.$.focus()}catch(t){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var t=this.$.innerHTML;return CKEDITOR.env.ie?t.replace(/<\?[^>]*>/g,""):t},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var t=this.$.ownerDocument.createElement("div");t.appendChild(this.$.cloneNode(!0));return t.innerHTML},getClientRect:function(){var t=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!t.width&&(t.width=t.right-t.left);!t.height&&(t.height=t.bottom-t.top);return t},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(e){try{var n=this.$;if(this.getParent())return n.innerHTML=e;var t=this.getDocument()._getHtml5ShivFrag();t.appendChild(n);n.innerHTML=e;t.removeChild(n);return e}catch(t){this.$.innerHTML="";n=new CKEDITOR.dom.element("body",this.getDocument());n.$.innerHTML=e;for(n=n.getChildren();n.count();)this.append(n.getItem(0));return e}}:function(t){return this.$.innerHTML=t},setText:function(){var e=document.createElement("p");e.innerHTML="x";e=e.textContent;return function(t){this.$[e?"textContent":"innerText"]=t}}(),getAttribute:function(){var t=function(t){return this.$.getAttribute(t,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t){switch(t){case"class":t="className";break;case"http-equiv":t="httpEquiv";break;case"name":return this.$.name;case"tabindex":return t=this.$.getAttribute(t,2),0!==t&&0===this.$.tabIndex&&(t=null),t;case"checked":return t=this.$.attributes.getNamedItem(t),(t.specified?t.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[t];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(t,2)}:t}(),getAttributes:function(t){var e={},n=this.$.attributes,o;t=CKEDITOR.tools.isArray(t)?t:[];for(o=0;o<n.length;o++)-1===CKEDITOR.tools.indexOf(t,n[o].name)&&(e[n[o].name]=n[o].value);return e},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(t){var e=this.getWindow().$.getComputedStyle(this.$,null);return e?e.getPropertyValue(t):""}:function(t){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(t)]},getDtd:function(){var t=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return t};return t},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var t=this.$.tabIndex;return 0!==t||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?t:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var t=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var e=this.$.scopeName;"HTML"!=e&&(t=e.toLowerCase()+":"+t)}this.getName=function(){return t};return this.getName()},getValue:function(){return this.$.value},getFirst:function(t){var e=this.$.firstChild;(e=e&&new CKEDITOR.dom.node(e))&&t&&!t(e)&&(e=e.getNext(t));return e},getLast:function(t){var e=this.$.lastChild;(e=e&&new CKEDITOR.dom.node(e))&&t&&!t(e)&&(e=e.getPrevious(t));return e},getStyle:function(t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(t)]},is:function(){var t=this.getName();if("object"==typeof arguments[0])return!!arguments[0][t];for(var e=0;e<arguments.length;e++)if(arguments[e]==t)return!0;return!1},isEditable:function(t){var e=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[e]||CKEDITOR.dtd.$empty[e]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==t?(t=CKEDITOR.dtd[e]||CKEDITOR.dtd.span,!(!t||!t["#"])):!0},isIdentical:function(t){var e=this.clone(0,1);t=t.clone(0,1);e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(e.$.isEqualNode)return e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.isEqualNode(t.$);e=e.getOuterHtml();t=t.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&(n=n.clone(),n.setHtml(e),e=n.getHtml(),n.setHtml(t),t=n.getHtml())}return e==t},isVisible:function(){var t=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),e,n;t&&CKEDITOR.env.webkit&&(e=this.getWindow(),!e.equals(CKEDITOR.document.getWindow())&&(n=e.$.frameElement)&&(t=new CKEDITOR.dom.element(n).isVisible()));return!!t},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var t=this.getChildren(),e=0,n=t.count();e<n;e++){var o=t.getItem(e);if(o.type!=CKEDITOR.NODE_ELEMENT||!o.data("cke-bookmark"))if(o.type==CKEDITOR.NODE_ELEMENT&&!o.isEmptyInlineRemoveable()||o.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(o.getText()))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var t=this.$.attributes,e=0;e<t.length;e++){var n=t[e];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var t=this.$.attributes,e=t.length,n={"data-cke-expando":1,_moz_dirty:1};return 0<e&&(2<e||!n[t[0].nodeName]||2==e&&!n[t[1].nodeName])},hasAttribute:function(){function e(t){var e=this.$.attributes.getNamedItem(t);if("input"==this.getName())switch(t){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return t=this.getAttribute("type"),"checkbox"==t||"radio"==t?"on"!=this.$.value:!!this.$.value}return e?e.specified:!1}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(t){return"name"==t?!!this.$.name:e.call(this,t)}:e:function(t){return!!this.$.attributes.getNamedItem(t)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(t,e){var n=this.$;t=t.$;if(n!=t){var o;if(e)for(;o=n.lastChild;)t.insertBefore(n.removeChild(o),t.firstChild);else for(;o=n.firstChild;)t.appendChild(n.removeChild(o))}},mergeSiblings:function(){function e(t,e,n){if(e&&e.type==CKEDITOR.NODE_ELEMENT){for(var o=[];e.data("cke-bookmark")||e.isEmptyInlineRemoveable();)if(o.push(e),e=n?e.getNext():e.getPrevious(),!e||e.type!=CKEDITOR.NODE_ELEMENT)return;if(t.isIdentical(e)){for(var i=n?t.getLast():t.getFirst();o.length;)o.shift().move(t,!n);e.moveChildren(t,!n);e.remove();i&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings()}}}return function(t){if(!1===t||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))e(this,this.getNext(),!0),e(this,this.getPrevious())}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var n=function(t,e){this.$.setAttribute(t,e);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,e){"class"==t?this.$.className=e:"style"==t?this.$.style.cssText=e:"tabindex"==t?this.$.tabIndex=e:"checked"==t?this.$.checked=e:"contenteditable"==t?n.call(this,"contentEditable",e):n.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,e){if("src"==t&&e.match(/^http:\/\//))try{n.apply(this,arguments)}catch(t){}else n.apply(this,arguments);return this}:n}(),setAttributes:function(t){for(var e in t)this.setAttribute(e,t[e]);return this},setValue:function(t){this.$.value=t;return this},removeAttribute:function(){var t=function(t){this.$.removeAttribute(t)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t){"class"==t?t="className":"tabindex"==t?t="tabIndex":"contenteditable"==t&&(t="contentEditable");this.$.removeAttribute(t)}:t}(),removeAttributes:function(t){if(CKEDITOR.tools.isArray(t))for(var e=0;e<t.length;e++)this.removeAttribute(t[e]);else for(e in t=t||this.getAttributes(),t)t.hasOwnProperty(e)&&this.removeAttribute(e)},removeStyle:function(t){var e=this.$.style;if(e.removeProperty||"border"!=t&&"margin"!=t&&"padding"!=t)e.removeProperty?e.removeProperty(t):e.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(t)),this.$.style.cssText||this.removeAttribute("style");else{var n=["top","left","right","bottom"],o;"border"==t&&(o=["color","style","width"]);for(var e=[],i=0;i<n.length;i++)if(o)for(var r=0;r<o.length;r++)e.push([t,n[i],o[r]].join("-"));else e.push([t,n[i]].join("-"));for(t=0;t<e.length;t++)this.removeStyle(e[t])}},setStyle:function(t,e){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(t)]=e;return this},setStyles:function(t){for(var e in t)this.setStyle(e,t[e]);return this},setOpacity:function(t){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(t=Math.round(100*t),this.setStyle("filter",100<=t?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+t+")")):this.setStyle("opacity",t)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var t,e=this.getElementsByTag("*"),n=0,o=e.count();n<o;n++)t=e.getItem(n),t.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var t=this;"html"!=t.getName();){if("static"!=t.getComputedStyle("position"))return t;t=t.getParent()}return null},getDocumentPosition:function(t){var e=0,n=0,o=this.getDocument(),i=o.getBody(),r="BackCompat"==o.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?8!==CKEDITOR.env.version:1)){var a=this.$.getBoundingClientRect(),s=o.$.documentElement,l=s.clientTop||i.$.clientTop||0,c=s.clientLeft||i.$.clientLeft||0,d=!0;CKEDITOR.env.ie&&(d=o.getDocumentElement().contains(this),o=o.getBody().contains(this),d=r&&o||!r&&d);d&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(e=i.$.scrollLeft||s.scrollLeft,n=i.$.scrollTop||s.scrollTop):(n=r?i.$:s,e=n.scrollLeft,n=n.scrollTop),e=a.left+e-c,n=a.top+n-l)}else for(l=this,c=null;l&&"body"!=l.getName()&&"html"!=l.getName();){e+=l.$.offsetLeft-l.$.scrollLeft;n+=l.$.offsetTop-l.$.scrollTop;l.equals(this)||(e+=l.$.clientLeft||0,n+=l.$.clientTop||0);for(;c&&!c.equals(l);)e-=c.$.scrollLeft,n-=c.$.scrollTop,c=c.getParent();c=l;l=(a=l.$.offsetParent)?new CKEDITOR.dom.element(a):null}t&&(a=this.getWindow(),l=t.getWindow(),!a.equals(l)&&a.$.frameElement&&(t=new CKEDITOR.dom.element(a.$.frameElement).getDocumentPosition(t),e+=t.x,n+=t.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||r||(e+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0);return{x:e,y:n}},scrollIntoView:function(t){var e=this.getParent();if(e){do{if((e.$.clientWidth&&e.$.clientWidth<e.$.scrollWidth||e.$.clientHeight&&e.$.clientHeight<e.$.scrollHeight)&&!e.is("body")&&this.scrollIntoParent(e,t,1),e.is("html")){var n=e.getWindow();try{var o=n.$.frameElement;o&&(e=new CKEDITOR.dom.element(o))}catch(t){}}}while(e=e.getParent())}},scrollIntoParent:function(n,t,e){var o,i,r,a;function s(t,e){/body|html/.test(n.getName())?n.getWindow().$.scrollBy(t,e):(n.$.scrollLeft+=t,n.$.scrollTop+=e)}function l(t,e){var n={x:0,y:0};if(!t.is(d?"body":"html")){var o=t.$.getBoundingClientRect();n.x=o.left;n.y=o.top}o=t.getWindow();o.equals(e)||(o=l(CKEDITOR.dom.element.get(o.$.frameElement),e),n.x+=o.x,n.y+=o.y);return n}function c(t,e){return parseInt(t.getComputedStyle("margin-"+e)||0,10)||0}!n&&(n=this.getWindow());r=n.getDocument();var d="BackCompat"==r.$.compatMode;n instanceof CKEDITOR.dom.window&&(n=d?r.getBody():r.getDocumentElement());CKEDITOR.env.webkit&&(r=this.getEditor(!1))&&(r._.previousScrollTop=null);r=n.getWindow();i=l(this,r);var u=l(n,r),m=this.$.offsetHeight;o=this.$.offsetWidth;var p=n.$.clientHeight,f=n.$.clientWidth;r=i.x-c(this,"left")-u.x||0;a=i.y-c(this,"top")-u.y||0;o=i.x+o+c(this,"right")-(u.x+f)||0;i=i.y+m+c(this,"bottom")-(u.y+p)||0;(0>a||0<i)&&s(0,!0===t?a:!1===t?i:0>a?a:i);e&&(0>r||0<o)&&s(0>r?r:o,0)},setState:function(t,e,n){e=e||"cke";switch(t){case CKEDITOR.TRISTATE_ON:this.addClass(e+"_on");this.removeClass(e+"_off");this.removeClass(e+"_disabled");n&&this.setAttribute("aria-pressed",!0);n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(e+"_disabled");this.removeClass(e+"_off");this.removeClass(e+"_on");n&&this.setAttribute("aria-disabled",!0);n&&this.removeAttribute("aria-pressed");break;default:this.addClass(e+"_off"),this.removeClass(e+"_on"),this.removeClass(e+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(t,e){var n=this.$.attributes;e=e||{};for(var o=0;o<n.length;o++){var i=n[o],r=i.nodeName.toLowerCase(),a;if(!(r in e))if("checked"==r&&(a=this.getAttribute(r)))t.setAttribute(r,a);else if(!CKEDITOR.env.ie||this.hasAttribute(r))a=this.getAttribute(r),null===a&&(a=i.nodeValue),t.setAttribute(r,a)}""!==this.$.style.cssText&&(t.$.style.cssText=this.$.style.cssText)},renameNode:function(t){if(this.getName()!=t){var e=this.getDocument();t=new CKEDITOR.dom.element(t,e);this.copyAttributes(t);this.moveChildren(t);this.getParent(!0)&&this.$.parentNode.replaceChild(t.$,this.$);t.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=t.$;delete this.getName}},getChild:function(){function n(t,e){var n=t.childNodes;if(0<=e&&e<n.length)return n[e]}return function(t){var e=this.$;if(t.slice)for(t=t.slice();0<t.length&&e;)e=n(e,t.shift());else e=n(e,t);return e?new CKEDITOR.dom.node(e):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function e(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(t){t.data.getTarget().getAscendant(e,!0)||t.data.preventDefault()})},getDirection:function(t){return t?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(t,e){t="data-"+t;if(void 0===e)return this.getAttribute(t);!1===e?this.removeAttribute(t):this.setAttribute(t,e);return null},getEditor:function(t){var e=CKEDITOR.instances,n,o,i;t=t||void 0===t;for(n in e)if(o=e[n],o.element.equals(this)&&o.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!t&&(i=o.editable())&&(i.equals(this)||i.contains(this)))return o;return null},find:function(t){var e=o(this);t=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(i(this,t)));e();return t},findOne:function(t){var e=o(this);t=this.$.querySelector(i(this,t));e();return t?new CKEDITOR.dom.element(t):null},forEach:function(t,e,n){if(!(n||e&&this.type!=e))var o=t(this);if(!1!==o){n=this.getChildren();for(var i=0;i<n.count();i++)o=n.getItem(i),o.type==CKEDITOR.NODE_ELEMENT?o.forEach(t,e):e&&o.type!=e||t(o)}}});var s={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(t,e,n){"number"==typeof e&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(e-=r.call(this,t)),this.setStyle(t,e+"px"))};CKEDITOR.dom.element.prototype.getSize=function(t,e){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(t)],this.$["client"+CKEDITOR.tools.capitalize(t)])||0;e&&(n-=r.call(this,t));return n}})();CKEDITOR.dom.documentFragment=function(t){t=t||CKEDITOR.document;this.$=t.type==CKEDITOR.NODE_DOCUMENT?t.$.createDocumentFragment():t};CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(t){t=t.$;t.parentNode.insertBefore(this.$,t.nextSibling)},getHtml:function(){var t=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(t);return t.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function o(t,e){var n=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(n.collapsed)return this.end(),null;n.optimize()}var o,i=n.startContainer;o=n.endContainer;var r=n.startOffset,a=n.endOffset,s,l=this.guard,c=this.type,d=t?"getPreviousSourceNode":"getNextSourceNode";if(!t&&!this._.guardLTR){var u=o.type==CKEDITOR.NODE_ELEMENT?o:o.getParent(),m=o.type==CKEDITOR.NODE_ELEMENT?o.getChild(a):o.getNext();this._.guardLTR=function(t,e){return(!e||!u.equals(t))&&(!m||!t.equals(m))&&(t.type!=CKEDITOR.NODE_ELEMENT||!e||!t.equals(n.root))}}if(t&&!this._.guardRTL){var p=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),f=i.type==CKEDITOR.NODE_ELEMENT?r?i.getChild(r-1):null:i.getPrevious();this._.guardRTL=function(t,e){return(!e||!p.equals(t))&&(!f||!t.equals(f))&&(t.type!=CKEDITOR.NODE_ELEMENT||!e||!t.equals(n.root))}}var h=t?this._.guardRTL:this._.guardLTR;s=l?function(t,e){return!1===h(t,e)?!1:l(t,e)}:h;this.current?o=this.current[d](!1,c,s):(t?o.type==CKEDITOR.NODE_ELEMENT&&(o=0<a?o.getChild(a-1):!1===s(o,!0)?null:o.getPreviousSourceNode(!0,c,s)):(o=i,o.type==CKEDITOR.NODE_ELEMENT&&((o=o.getChild(r))||(o=!1===s(i,!0)?null:i.getNextSourceNode(!0,c,s)))),o&&!1===s(o)&&(o=null));for(;o&&!this._.end;){this.current=o;if(!this.evaluator||!1!==this.evaluator(o)){if(!e)return o}else if(e&&this.evaluator)return!1;o=o[d](!1,c,s)}this.end();return this.current=null}function t(t){for(var e,n=null;e=o.call(this,t);)n=e;return n}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(t){this.range=t;this._={}},proto:{end:function(){this._.end=1},next:function(){return o.call(this)},previous:function(){return o.call(this,1)},checkForward:function(){return!1!==o.call(this,0,1)},checkBackward:function(){return!1!==o.call(this,1,1)},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current;this._={}}}});var e={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},n={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(t){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in n||!e[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||t&&this.is(t)):!0};CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=function(o,i){function r(t){return t&&t.getName&&"span"==t.getName()&&t.data("cke-bookmark")}return function(t){var e,n;e=t&&t.type!=CKEDITOR.NODE_ELEMENT&&(n=t.getParent())&&r(n);e=o?e:e||r(t);return!!(i^e)}};CKEDITOR.dom.walker.whitespaces=function(n){return function(t){var e;t&&t.type==CKEDITOR.NODE_TEXT&&(e=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return!!(n^e)}};CKEDITOR.dom.walker.invisible=function(e){var n=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.env.webkit?1:0;return function(t){n(t)?t=1:(t.type==CKEDITOR.NODE_TEXT&&(t=t.getParent()),t=t.$.offsetWidth<=o);return!!(e^t)}};CKEDITOR.dom.walker.nodeType=function(e,n){return function(t){return!!(n^t.type==e)}};CKEDITOR.dom.walker.bogus=function(n){function o(t){return!r(t)&&!a(t)}return function(t){var e=CKEDITOR.env.needsBrFiller?t.is&&t.is("br"):t.getText&&i.test(t.getText());e&&(e=t.getParent(),t=t.getNext(o),e=e.isBlockBoundary()&&(!t||t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()));return!!(n^e)}};CKEDITOR.dom.walker.temp=function(e){return function(t){t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());t=t&&t.hasAttribute("data-cke-temp");return!!(e^t)}};var i=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,r=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark(),s=CKEDITOR.dom.walker.temp(),l=function(t){return a(t)||r(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$inline)&&!t.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(e){return function(t){t=r(t)||a(t)||s(t);return!!(e^t)}};var c=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(o){return function(t){for(var e=0,n=t.getChildCount();e<n;++e)if(!c(t.getChild(e)))return!!o;return!o}};var d=CKEDITOR.dom.walker.empty(),u=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(t){var e={},n;for(n in t)CKEDITOR.dtd[n]["#"]&&(e[n]=1);return e}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(e){return function(t){t=c(t)?!1:t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&(t.is(CKEDITOR.dtd.$inline)||t.is("hr")||"false"==t.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&t.is(u)&&d(t))?!0:!1;return!!(e^t)}};CKEDITOR.dom.element.prototype.getBogus=function(){var t=this;do{t=t.getPreviousSourceNode()}while(l(t));return t&&(CKEDITOR.env.needsBrFiller?t.is&&t.is("br"):t.getText&&i.test(t.getText()))?t:!1}})();CKEDITOR.dom.range=function(t){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var e=t instanceof CKEDITOR.dom.document;this.document=e?t:t.getDocument();this.root=e?t.getBody():t};(function(){function n(t){t.collapsed=t.startContainer&&t.endContainer&&t.startContainer.equals(t.endContainer)&&t.startOffset==t.endOffset}function o(n,t,e,o,r){function i(t,e,n,o){var i=n?t.getPrevious():t.getNext();if(o&&l)return i;d||o?e.append(t.clone(!0,r),n):(t.remove(),c&&e.append(t));return i}function a(){var t,e,n,o=Math.min(b.length,y.length);for(t=0;t<o;t++)if(e=b[t],n=y[t],!e.equals(n))return t;return t-1}function s(){var t=T-1,e=C&&A&&!u.equals(m);t<k-1||t<I-1||e?(e?n.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START):I==t+1&&g?n.moveToPosition(y[t],CKEDITOR.POSITION_BEFORE_END):n.moveToPosition(y[t+1],CKEDITOR.POSITION_BEFORE_START),o&&(t=b[t+1])&&t.type==CKEDITOR.NODE_ELEMENT&&(e=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',n.document),e.insertAfter(t),t.mergeSiblings(!1),n.moveToBookmark({startNode:e}))):n.collapse(!0)}n.optimizeBookmark();var l=0===t,c=1==t,d=2==t;t=d||c;var u=n.startContainer,m=n.endContainer,p=n.startOffset,f=n.endOffset,h,g,C,A,E,v;if(d&&m.type==CKEDITOR.NODE_TEXT&&u.equals(m))u=n.document.createText(u.substring(p,f)),e.append(u);else{m.type==CKEDITOR.NODE_TEXT?d?v=!0:m=m.split(f):0<m.getChildCount()?f>=m.getChildCount()?(m=m.getChild(f-1),g=!0):m=m.getChild(f):A=g=!0;u.type==CKEDITOR.NODE_TEXT?d?E=!0:u.split(p):0<u.getChildCount()?0===p?(u=u.getChild(p),h=!0):u=u.getChild(p-1):C=h=!0;for(var b=u.getParents(),y=m.getParents(),T=a(),k=b.length-1,I=y.length-1,O=e,D,R,_,S=-1,w=T;w<=k;w++){R=b[w];_=R.getNext();for(w!=k||R.equals(y[w])&&k<I?t&&(D=O.append(R.clone(0,r))):h?i(R,O,!1,C):E&&O.append(n.document.createText(R.substring(p)));_;){if(_.equals(y[w])){S=w;break}_=i(_,O)}O=D}O=e;for(w=T;w<=I;w++)if(e=y[w],_=e.getPrevious(),e.equals(b[w]))t&&(O=O.getChild(0));else{w!=I||e.equals(b[w])&&I<k?t&&(D=O.append(e.clone(0,r))):g?i(e,O,!1,A):v&&O.append(n.document.createText(e.substring(0,f)));if(w>S)for(;_;)_=i(_,O,!0);O=D}d||s()}}function i(){var e=!1,n=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark(!0),i=CKEDITOR.dom.walker.bogus();return function(t){return o(t)||n(t)?!0:i(t)&&!e?e=!0:t.type==CKEDITOR.NODE_TEXT&&(t.hasAscendant("pre")||CKEDITOR.tools.trim(t.getText()).length)||t.type==CKEDITOR.NODE_ELEMENT&&!t.is(a)?!1:!0}}function r(e){var n=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark(1);return function(t){return o(t)||n(t)?!0:!e&&s(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$removeEmpty)}}function t(t){return function(){var e;return this[t?"getPreviousNode":"getNextNode"](function(t){!e&&d(t)&&(e=t);return c(t)&&!(s(t)&&t.equals(e))})}}var a={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},s=CKEDITOR.dom.walker.bogus(),l=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,c=CKEDITOR.dom.walker.editable(),d=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var t=new CKEDITOR.dom.range(this.root);t._setStartContainer(this.startContainer);t.startOffset=this.startOffset;t._setEndContainer(this.endContainer);t.endOffset=this.endOffset;t.collapsed=this.collapsed;return t},collapse:function(t){t?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(t){var e=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||o(this,2,e,!1,"undefined"==typeof t?!0:t);return e},deleteContents:function(t){this.collapsed||o(this,0,null,t)},extractContents:function(t,e){var n=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||o(this,1,n,t,"undefined"==typeof e?!0:e);return n},createBookmark:function(t){var e,n,o,i,r=this.collapsed;e=this.document.createElement("span");e.data("cke-bookmark",1);e.setStyle("display","none");e.setHtml("&nbsp;");t&&(o="cke_bm_"+CKEDITOR.tools.getNextNumber(),e.setAttribute("id",o+(r?"C":"S")));r||(n=e.clone(),n.setHtml("&nbsp;"),t&&n.setAttribute("id",o+"E"),i=this.clone(),i.collapse(),i.insertNode(n));i=this.clone();i.collapse(!0);i.insertNode(e);n?(this.setStartAfter(e),this.setEndBefore(n)):this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END);return{startNode:t?o+(r?"C":"S"):e,endNode:t?o+"E":n,serializable:t,collapsed:r}},createBookmark2:function(){function i(t){var e=t.container,n=t.offset,o;o=e;var i=n;o=o.type!=CKEDITOR.NODE_ELEMENT||0===i||i==o.getChildCount()?0:o.getChild(i-1).type==CKEDITOR.NODE_TEXT&&o.getChild(i).type==CKEDITOR.NODE_TEXT;o&&(e=e.getChild(n-1),n=e.getLength());if(e.type==CKEDITOR.NODE_ELEMENT&&0<n){t:{for(o=e;n--;)if(i=o.getChild(n).getIndex(!0),0<=i){n=i;break t}n=-1}n+=1}if(e.type==CKEDITOR.NODE_TEXT){o=e;for(i=0;(o=o.getPrevious())&&o.type==CKEDITOR.NODE_TEXT;)i+=o.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;o=i;e.getText()?n+=o:(i=e.getPrevious(a),o?(n=o,e=i?i.getNext():e.getParent().getFirst()):(e=e.getParent(),n=i?i.getIndex(!0)+1:0))}t.container=e;t.offset=n}function r(t,e){var n=e.getCustomData("cke-fillingChar");if(n){var o=t.container;n.equals(o)&&(t.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=t.offset&&(t.offset=o.getIndex(),t.container=o.getParent()))}}var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(t){var e=this.collapsed,n={container:this.startContainer,offset:this.startOffset},o={container:this.endContainer,offset:this.endOffset};t&&(i(n),r(n,this.root),e||(i(o),r(o,this.root)));return{start:n.container.getAddress(t),end:e?null:o.container.getAddress(t),startOffset:n.offset,endOffset:o.offset,normalized:t,collapsed:e,is2:!0}}}(),moveToBookmark:function(t){if(t.is2){var e=this.document.getByAddress(t.start,t.normalized),n=t.startOffset,o=t.end&&this.document.getByAddress(t.end,t.normalized);t=t.endOffset;this.setStart(e,n);o?this.setEnd(o,t):this.collapse(!0)}else e=(n=t.serializable)?this.document.getById(t.startNode):t.startNode,t=n?this.document.getById(t.endNode):t.endNode,this.setStartBefore(e),e.remove(),t?(this.setEndBefore(t),t.remove()):this.collapse(!0)},getBoundaryNodes:function(){var t=this.startContainer,e=this.endContainer,n=this.startOffset,o=this.endOffset,i;if(t.type==CKEDITOR.NODE_ELEMENT)if(i=t.getChildCount(),i>n)t=t.getChild(n);else if(1>i)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t);t=t.getNextSourceNode()||t}if(e.type==CKEDITOR.NODE_ELEMENT)if(i=e.getChildCount(),i>o)e=e.getChild(o).getPreviousSourceNode(!0);else if(1>i)e=e.getPreviousSourceNode();else{for(e=e.$;e.lastChild;)e=e.lastChild;e=new CKEDITOR.dom.node(e)}t.getPosition(e)&CKEDITOR.POSITION_FOLLOWING&&(t=e);return{startNode:t,endNode:e}},getCommonAncestor:function(t,e){var n=this.startContainer,o=this.endContainer,n=n.equals(o)?t&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?n.getChild(this.startOffset):n:n.getCommonAncestor(o);return e&&!n.is?n.getParent():n},optimize:function(){var t=this.startContainer,e=this.startOffset;t.type!=CKEDITOR.NODE_ELEMENT&&(e?e>=t.getLength()&&this.setStartAfter(t):this.setStartBefore(t));t=this.endContainer;e=this.endOffset;t.type!=CKEDITOR.NODE_ELEMENT&&(e?e>=t.getLength()&&this.setEndAfter(t):this.setEndBefore(t))},optimizeBookmark:function(){var t=this.startContainer,e=this.endContainer;t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setStartAt(t,CKEDITOR.POSITION_BEFORE_START);e&&e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setEndAt(e,CKEDITOR.POSITION_AFTER_END)},trim:function(t,e){var n=this.startContainer,o=this.startOffset,i=this.collapsed;if((!t||i)&&n&&n.type==CKEDITOR.NODE_TEXT){if(o)if(o>=n.getLength())o=n.getIndex()+1,n=n.getParent();else{var r=n.split(o),o=n.getIndex()+1,n=n.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(r,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset+=1)}else o=n.getIndex(),n=n.getParent();this.setStart(n,o);if(i){this.collapse(!0);return}}n=this.endContainer;o=this.endOffset;e||i||!n||n.type!=CKEDITOR.NODE_TEXT||(o?(o>=n.getLength()||n.split(o),o=n.getIndex()+1):o=n.getIndex(),n=n.getParent(),this.setEnd(n,o))},enlarge:function(t,e){function n(t){return t&&t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable")?null:t}var i=new RegExp(/[^\s\ufeff]/);switch(t){case CKEDITOR.ENLARGE_INLINE:var o=1;case CKEDITOR.ENLARGE_ELEMENT:var r=function(t,e){var n=new CKEDITOR.dom.range(s);n.setStart(t,e);n.setEndAt(s,CKEDITOR.POSITION_BEFORE_END);var n=new CKEDITOR.dom.walker(n),o;for(n.guard=function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary())};o=n.next();){if(o.type!=CKEDITOR.NODE_TEXT)return!1;h=o!=t?o.getText():o.substring(e);if(i.test(h))return!1}return!0};if(this.collapsed)break;var a=this.getCommonAncestor(),s=this.root,l,c,d,u,m,p=!1,f,h;f=this.startContainer;var g=this.startOffset;f.type==CKEDITOR.NODE_TEXT?(g&&(f=!CKEDITOR.tools.trim(f.substring(0,g)).length&&f,p=!!f),f&&((u=f.getPrevious())||(d=f.getParent()))):(g&&(u=f.getChild(g-1)||f.getLast()),u||(d=f));for(d=n(d);d||u;){if(d&&!u){!m&&d.equals(a)&&(m=!0);if(o?d.isBlockBoundary():!s.contains(d))break;p&&"inline"==d.getComputedStyle("display")||(p=!1,m?l=d:this.setStartBefore(d));u=d.getPrevious()}for(;u;)if(f=!1,u.type==CKEDITOR.NODE_COMMENT)u=u.getPrevious();else{if(u.type==CKEDITOR.NODE_TEXT)h=u.getText(),i.test(h)&&(u=null),f=/[\s\ufeff]$/.test(h);else if((u.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||e&&u.is("br"))&&!u.data("cke-bookmark"))if(p&&CKEDITOR.dtd.$removeEmpty[u.getName()]){h=u.getText();if(i.test(h))u=null;else for(var g=u.$.getElementsByTagName("*"),C=0,A;A=g[C++];)if(!CKEDITOR.dtd.$removeEmpty[A.nodeName.toLowerCase()]){u=null;break}u&&(f=!!h.length)}else u=null;f&&(p?m?l=d:d&&this.setStartBefore(d):p=!0);if(u){f=u.getPrevious();if(!d&&!f){d=u;u=null;break}u=f}else d=null}d&&(d=n(d.getParent()))}f=this.endContainer;g=this.endOffset;d=u=null;m=p=!1;f.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(f.substring(g)).length?p=!0:(p=!f.getLength(),g==f.getLength()?(u=f.getNext())||(d=f.getParent()):r(f,g)&&(d=f.getParent())):(u=f.getChild(g))||(d=f);for(;d||u;){if(d&&!u){!m&&d.equals(a)&&(m=!0);if(o?d.isBlockBoundary():!s.contains(d))break;p&&"inline"==d.getComputedStyle("display")||(p=!1,m?c=d:d&&this.setEndAfter(d));u=d.getNext()}for(;u;){f=!1;if(u.type==CKEDITOR.NODE_TEXT)h=u.getText(),r(u,0)||(u=null),f=/^[\s\ufeff]/.test(h);else if(u.type==CKEDITOR.NODE_ELEMENT){if((0<u.$.offsetWidth||e&&u.is("br"))&&!u.data("cke-bookmark"))if(p&&CKEDITOR.dtd.$removeEmpty[u.getName()]){h=u.getText();if(i.test(h))u=null;else for(g=u.$.getElementsByTagName("*"),C=0;A=g[C++];)if(!CKEDITOR.dtd.$removeEmpty[A.nodeName.toLowerCase()]){u=null;break}u&&(f=!!h.length)}else u=null}else f=1;f&&p&&(m?c=d:this.setEndAfter(d));if(u){f=u.getNext();if(!d&&!f){d=u;u=null;break}u=f}else d=null}d&&(d=n(d.getParent()))}l&&c&&(a=l.contains(c)?c:l,this.setStartBefore(a),this.setEndAfter(a));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:d=new CKEDITOR.dom.range(this.root);s=this.root;d.setStartAt(s,CKEDITOR.POSITION_AFTER_START);d.setEnd(this.startContainer,this.startOffset);d=new CKEDITOR.dom.walker(d);var E,v,b=CKEDITOR.dom.walker.blockBoundary(t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),y=null,T=function(t){if(t.type==CKEDITOR.NODE_ELEMENT&&"false"==t.getAttribute("contenteditable"))if(y){if(y.equals(t)){y=null;return}}else y=t;else if(y)return;var e=b(t);e||(E=t);return e},o=function(t){var e=T(t);!e&&t.is&&t.is("br")&&(v=t);return e};d.guard=T;d=d.lastBackward();E=E||s;this.setStartAt(E,!E.is("br")&&(!d&&this.checkStartOfBlock()||d&&E.contains(d))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){d=this.clone();d=new CKEDITOR.dom.walker(d);var k=CKEDITOR.dom.walker.whitespaces(),I=CKEDITOR.dom.walker.bookmark();d.evaluator=function(t){return!k(t)&&!I(t)};if((d=d.previous())&&d.type==CKEDITOR.NODE_ELEMENT&&d.is("br"))break}d=this.clone();d.collapse();d.setEndAt(s,CKEDITOR.POSITION_BEFORE_END);d=new CKEDITOR.dom.walker(d);d.guard=t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?o:T;E=y=v=null;d=d.lastForward();E=E||s;this.setEndAt(E,!d&&this.checkEndOfBlock()||d&&E.contains(d)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);v&&this.setEndAfter(v)}},shrink:function(n,t,o){if(!this.collapsed){n=n||CKEDITOR.SHRINK_TEXT;var e=this.clone(),i=this.startContainer,r=this.endContainer,a=this.startOffset,s=this.endOffset,l=1,c=1;i&&i.type==CKEDITOR.NODE_TEXT&&(a?a>=i.getLength()?e.setStartAfter(i):(e.setStartBefore(i),l=0):e.setStartBefore(i));r&&r.type==CKEDITOR.NODE_TEXT&&(s?s>=r.getLength()?e.setEndAfter(r):(e.setEndAfter(r),c=0):e.setEndBefore(r));var e=new CKEDITOR.dom.walker(e),d=CKEDITOR.dom.walker.bookmark();e.evaluator=function(t){return t.type==(n==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var u;e.guard=function(t,e){if(d(t))return!0;if(n==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||e&&t.equals(u)||!1===o&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable"))return!1;e||t.type!=CKEDITOR.NODE_ELEMENT||(u=t);return!0};l&&(i=e[n==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(i,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);c&&(e.reset(),(e=e[n==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return!(!l&&!c)}},insertNode:function(t){this.optimizeBookmark();this.trim(!1,!0);var e=this.startContainer,n=e.getChild(this.startOffset);n?t.insertBefore(n):e.append(t);t.getParent()&&t.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(t)},moveToPosition:function(t,e){this.setStartAt(t,e);this.collapse(!0)},moveToRange:function(t){this.setStart(t.startContainer,t.startOffset);this.setEnd(t.endContainer,t.endOffset)},selectNodeContents:function(t){this.setStart(t,0);this.setEnd(t,t.type==CKEDITOR.NODE_TEXT?t.getLength():t.getChildCount())},setStart:function(t,e){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(e=t.getIndex(),t=t.getParent());this._setStartContainer(t);this.startOffset=e;this.endContainer||(this._setEndContainer(t),this.endOffset=e);n(this)},setEnd:function(t,e){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(e=t.getIndex()+1,t=t.getParent());this._setEndContainer(t);this.endOffset=e;this.startContainer||(this._setStartContainer(t),this.startOffset=e);n(this)},setStartAfter:function(t){this.setStart(t.getParent(),t.getIndex()+1)},setStartBefore:function(t){this.setStart(t.getParent(),t.getIndex())},setEndAfter:function(t){this.setEnd(t.getParent(),t.getIndex()+1)},setEndBefore:function(t){this.setEnd(t.getParent(),t.getIndex())},setStartAt:function(t,e){switch(e){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)}n(this)},setEndAt:function(t,e){switch(e){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)}n(this)},fixBlock:function(t,e){var n=this.createBookmark(),o=this.document.createElement(e);this.collapse(t);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(o);o.trim();this.insertNode(o);var i=o.getBogus();i&&i.remove();o.appendBogus();this.moveToBookmark(n);return o},splitBlock:function(t,e){var n=new CKEDITOR.dom.elementPath(this.startContainer,this.root),o=new CKEDITOR.dom.elementPath(this.endContainer,this.root),i=n.block,r=o.block,a=null;if(!n.blockLimit.equals(o.blockLimit))return null;"br"!=t&&(i||(i=this.fixBlock(!0,t),r=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),r||(r=this.fixBlock(!1,t)));n=i&&this.checkStartOfBlock();o=r&&this.checkEndOfBlock();this.deleteContents();i&&i.equals(r)&&(o?(a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(r,CKEDITOR.POSITION_AFTER_END),r=null):n?(a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i=null):(r=this.splitElement(i,e||!1),i.is("ul","ol")||i.appendBogus()));return{previousBlock:i,nextBlock:r,wasStartOfBlock:n,wasEndOfBlock:o,elementPath:a}},splitElement:function(t,e){if(!this.collapsed)return null;this.setEndAt(t,CKEDITOR.POSITION_BEFORE_END);var n=this.extractContents(!1,e||!1),o=t.clone(!1,e||!1);n.appendTo(o);o.insertAfter(t);this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END);return o},removeEmptyBlocksAtEnd:function(){function r(e){return function(t){return n(t)||o(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.isEmptyInlineRemoveable()||e.is("table")&&t.is("caption")?!1:!0}}var n=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var e=this.createBookmark(),n=this[t?"endPath":"startPath"](),o=n.block||n.blockLimit,i;o&&!o.equals(n.root)&&!o.getFirst(r(o));)i=o.getParent(),this[t?"setEndAt":"setStartAt"](o,CKEDITOR.POSITION_AFTER_END),o.remove(1),o=i;this.moveToBookmark(e)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(t,e){var n=e==CKEDITOR.START,o=this.clone();o.collapse(n);o[n?"setStartAt":"setEndAt"](t,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);o=new CKEDITOR.dom.walker(o);o.evaluator=r(n);return o[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var t=this.startContainer,e=this.startOffset;CKEDITOR.env.ie&&e&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.ltrim(t.substring(0,e)),l.test(t)&&this.trim(0,1));this.trim();t=new CKEDITOR.dom.elementPath(this.startContainer,this.root);e=this.clone();e.collapse(!0);e.setStartAt(t.block||t.blockLimit,CKEDITOR.POSITION_AFTER_START);t=new CKEDITOR.dom.walker(e);t.evaluator=i();return t.checkBackward()},checkEndOfBlock:function(){var t=this.endContainer,e=this.endOffset;CKEDITOR.env.ie&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.rtrim(t.substring(e)),l.test(t)&&this.trim(1,0));this.trim();t=new CKEDITOR.dom.elementPath(this.endContainer,this.root);e=this.clone();e.collapse(!1);e.setEndAt(t.block||t.blockLimit,CKEDITOR.POSITION_BEFORE_END);t=new CKEDITOR.dom.walker(e);t.evaluator=i();return t.checkForward()},getPreviousNode:function(t,e,n){var o=this.clone();o.collapse(1);o.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START);n=new CKEDITOR.dom.walker(o);n.evaluator=t;n.guard=e;return n.previous()},getNextNode:function(t,e,n){var o=this.clone();o.collapse();o.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END);n=new CKEDITOR.dom.walker(o);n.evaluator=t;n.guard=e;return n.next()},checkReadOnly:function(){function n(t,e){for(;t;){if(t.type==CKEDITOR.NODE_ELEMENT){if("false"==t.getAttribute("contentEditable")&&!t.data("cke-editable"))return 0;if(t.is("html")||"true"==t.getAttribute("contentEditable")&&(t.contains(e)||t.equals(e)))break}t=t.getParent()}return 1}return function(){var t=this.startContainer,e=this.endContainer;return!(n(t,e)&&n(e,t))}}(),moveToElementEditablePosition:function(t,e){if(t.type==CKEDITOR.NODE_ELEMENT&&!t.isEditable(!1))return this.moveToPosition(t,e?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var n=0;t;){if(t.type==CKEDITOR.NODE_TEXT){e&&this.endContainer&&this.checkEndOfBlock()&&l.test(t.getText())?this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(t,e?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);n=1;break}if(t.type==CKEDITOR.NODE_ELEMENT)if(t.isEditable())this.moveToPosition(t,e?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),n=1;else if(e&&t.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START);else if("false"==t.getAttribute("contenteditable")&&t.is(CKEDITOR.dtd.$block))return this.setStartBefore(t),this.setEndAfter(t),!0;var o=t,i=n,r=void 0;o.type==CKEDITOR.NODE_ELEMENT&&o.isEditable(!1)&&(r=o[e?"getLast":"getFirst"](d));i||r||(r=o[e?"getPrevious":"getNext"](d));t=r}return!!n},moveToClosestEditablePosition:function(t,e){var n,o=0,i,r,a=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];t?(n=new CKEDITOR.dom.range(this.root),n.moveToPosition(t,a[e?0:1])):n=this.clone();if(t&&!t.is(CKEDITOR.dtd.$block))o=1;else if(i=n[e?"getNextEditableNode":"getPreviousEditableNode"]())o=1,(r=i.type==CKEDITOR.NODE_ELEMENT)&&i.is(CKEDITOR.dtd.$block)&&"false"==i.getAttribute("contenteditable")?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&r&&i.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(n.setEnd(i,0),n.collapse()):n.moveToPosition(i,a[e?1:0]);o&&this.moveToRange(n);return!!o},moveToElementEditStart:function(t){return this.moveToElementEditablePosition(t)},moveToElementEditEnd:function(t){return this.moveToElementEditablePosition(t,!0)},getEnclosedNode:function(){var t=this.clone();t.optimize();if(t.startContainer.type!=CKEDITOR.NODE_ELEMENT||t.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var t=new CKEDITOR.dom.walker(t),e=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.whitespaces(!0);t.evaluator=function(t){return n(t)&&e(t)};var o=t.next();t.reset();return o&&o.equals(t.previous())?o:null},getTouchedStartNode:function(){var t=this.startContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.startOffset)||t},getTouchedEndNode:function(){var t=this.endContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.endOffset-1)||t},getNextEditableNode:t(),getPreviousEditableNode:t(1),scrollIntoView:function(){var t=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),e,n,o,i=this.clone();i.optimize();(o=i.startContainer.type==CKEDITOR.NODE_TEXT)?(n=i.startContainer.getText(),e=i.startContainer.split(i.startOffset),t.insertAfter(i.startContainer)):i.insertNode(t);t.scrollIntoView();o&&(i.startContainer.setText(n),e.remove());t.remove()},_setStartContainer:function(t){this.startContainer=t},_setEndContainer:function(t){this.endContainer=t},_find:function(t,e){var n=this.getCommonAncestor(),o=this.getBoundaryNodes(),i=[],r,a,s,l;if(n&&n.find)for(a=n.find(t),r=0;r<a.count();r++)if(n=a.getItem(r),e||!n.isReadOnly())s=n.getPosition(o.startNode)&CKEDITOR.POSITION_FOLLOWING||o.startNode.equals(n),l=n.getPosition(o.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED,s&&l&&i.push(n);return i}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";(function(){function t(t){1>arguments.length||(this.range=t,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function r(t){var e=[];t.forEach(function(t){if("true"==t.getAttribute("contenteditable"))return e.push(t),!1},CKEDITOR.NODE_ELEMENT,!0);return e}function p(t,e,n,o){t:{null==o&&(o=r(n));for(var i;i=o.shift();)if(i.getDtd().p){o={element:i,remaining:o};break t}o=null}if(!o)return 0;if((i=CKEDITOR.filter.instances[o.element.data("cke-filter")])&&!i.check(e))return p(t,e,n,o.remaining);e=new CKEDITOR.dom.range(o.element);e.selectNodeContents(o.element);e=e.createIterator();e.enlargeBr=t.enlargeBr;e.enforceRealBlocks=t.enforceRealBlocks;e.activeFilter=e.filter=i;t._.nestedEditable={element:o.element,container:n,remaining:o.remaining,iterator:e};return 1}function f(t,e,n){if(!e)return!1;t=t.clone();t.collapse(!n);return t.checkBoundaryOfElement(e,n?CKEDITOR.START:CKEDITOR.END)}var h=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(!1,!0),e=CKEDITOR.dom.walker.whitespaces(!0),C=function(t){return g(t)&&e(t)},A={dd:1,dt:1,li:1};t.prototype={getNextParagraph:function(t){var e,n,o,i,r;t=t||"p";if(this._.nestedEditable){if(e=this._.nestedEditable.iterator.getNextParagraph(t))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,e;this.activeFilter=this.filter;if(p(this,t,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(t);this._.nestedEditable=null}if(!this.range.root.getDtd()[t])return null;if(!this._.started){var a=this.range.clone();n=a.startPath();var s=a.endPath(),l=!a.collapsed&&f(a,n.block),c=!a.collapsed&&f(a,s.block,1);a.shrink(CKEDITOR.SHRINK_ELEMENT,!0);l&&a.setStartAt(n.block,CKEDITOR.POSITION_BEFORE_END);c&&a.setEndAt(s.block,CKEDITOR.POSITION_AFTER_START);n=a.endContainer.hasAscendant("pre",!0)||a.startContainer.hasAscendant("pre",!0);a.enlarge(this.forceBrBreak&&!n||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);a.collapsed||(n=new CKEDITOR.dom.walker(a.clone()),s=CKEDITOR.dom.walker.bookmark(!0,!0),n.evaluator=s,this._.nextNode=n.next(),n=new CKEDITOR.dom.walker(a.clone()),n.evaluator=s,n=n.previous(),this._.lastNode=n.getNextSourceNode(!0,null,a.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(s=this.range.clone(),s.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),s.checkEndOfBlock()&&(s=new CKEDITOR.dom.elementPath(s.endContainer,s.root),this._.lastNode=(s.block||s.blockLimit).getNextSourceNode(!0))),this._.lastNode&&a.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=a.document.createText(""),this._.lastNode.insertAfter(n)),a=null);this._.started=1;n=a}s=this._.nextNode;a=this._.lastNode;for(this._.nextNode=null;s;){var l=0,c=s.hasAscendant("pre"),d=s.type!=CKEDITOR.NODE_ELEMENT,u=0;if(d)s.type==CKEDITOR.NODE_TEXT&&h.test(s.getText())&&(d=0);else{var m=s.getName();if(CKEDITOR.dtd.$block[m]&&"false"==s.getAttribute("contenteditable")){e=s;p(this,t,e);break}else if(s.isBlockBoundary(this.forceBrBreak&&!c&&{br:1})){if("br"==m)d=1;else if(!n&&!s.getChildCount()&&"hr"!=m){e=s;o=s.equals(a);break}n&&(n.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),"br"!=m&&(this._.nextNode=s));l=1}else{if(s.getFirst()){n||(n=this.range.clone(),n.setStartAt(s,CKEDITOR.POSITION_BEFORE_START));s=s.getFirst();continue}d=1}}d&&!n&&(n=this.range.clone(),n.setStartAt(s,CKEDITOR.POSITION_BEFORE_START));o=(!l||d)&&s.equals(a);if(n&&!l)for(;!s.getNext(C)&&!o;){m=s.getParent();if(m.isBlockBoundary(this.forceBrBreak&&!c&&{br:1})){l=1;d=0;o||m.equals(a);n.setEndAt(m,CKEDITOR.POSITION_BEFORE_END);break}s=m;d=1;o=s.equals(a);u=1}d&&n.setEndAt(s,CKEDITOR.POSITION_AFTER_END);s=this._getNextSourceNode(s,u,a);if((o=!s)||l&&n)break}if(!e){if(!n)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;e=new CKEDITOR.dom.elementPath(n.startContainer,n.root);s=e.blockLimit;l={div:1,th:1,td:1};e=e.block;!e&&s&&!this.enforceRealBlocks&&l[s.getName()]&&n.checkStartOfBlock()&&n.checkEndOfBlock()&&!s.equals(n.root)?e=s:!e||this.enforceRealBlocks&&e.is(A)?(e=this.range.document.createElement(t),n.extractContents().appendTo(e),e.trim(),n.insertNode(e),i=r=!0):"li"!=e.getName()?n.checkStartOfBlock()&&n.checkEndOfBlock()||(e=e.clone(!1),n.extractContents().appendTo(e),e.trim(),r=n.splitBlock(),i=!r.wasStartOfBlock,r=!r.wasEndOfBlock,n.insertNode(e)):o||(this._.nextNode=e.equals(a)?null:this._getNextSourceNode(n.getBoundaryNodes().endNode,1,a))}i&&(i=e.getPrevious())&&i.type==CKEDITOR.NODE_ELEMENT&&("br"==i.getName()?i.remove():i.getLast()&&"br"==i.getLast().$.nodeName.toLowerCase()&&i.getLast().remove());r&&(i=e.getLast())&&i.type==CKEDITOR.NODE_ELEMENT&&"br"==i.getName()&&(!CKEDITOR.env.needsBrFiller||i.getPrevious(g)||i.getNext(g))&&i.remove();this._.nextNode||(this._.nextNode=o||e.equals(a)||!a?null:this._getNextSourceNode(e,1,a));return e},_getNextSourceNode:function(t,e,n){function o(t){return!(t.equals(n)||t.equals(i))}var i=this.range.root;for(t=t.getNextSourceNode(e,null,o);!g(t);)t=t.getNextSourceNode(e,null,o);return t}};CKEDITOR.dom.range.prototype.createIterator=function(){return new t(this)}})();CKEDITOR.command=function(e,n){this.uiItems=[];this.exec=function(t){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())return!1;this.editorFocus&&e.focus();return!1===this.fire("exec")?!0:!1!==n.exec.call(this,e,t)};this.refresh=function(t,e){if(!this.readOnly&&t.readOnly)return!0;if(this.context&&!e.isContextFor(this.context)||!this.checkAllowed(!0))return this.disable(),!0;this.startDisabled||this.enable();this.modes&&!this.modes[t.mode]&&this.disable();return!1===this.fire("refresh",{editor:t,path:e})?!0:n.refresh&&!1!==n.refresh.apply(this,arguments)};var o;this.checkAllowed=function(t){return t||"boolean"!=typeof o?o=e.activeFilter.checkFeature(this):o};CKEDITOR.tools.extend(this,n,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!n.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(t){if(this.state==t||t!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())return!1;this.previousState=this.state;this.state=t;this.fire("state");return!0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};(function(){function r(t,e,n,o,i){var r,a;t=[];for(r in e){a=e[r];a="boolean"==typeof a?{}:"function"==typeof a?{match:a}:S(a);"$"!=r.charAt(0)&&(a.elements=r);n&&(a.featureName=n.toLowerCase());var s=a;s.elements=A(s.elements,/\s+/)||null;s.propertiesOnly=s.propertiesOnly||!0===s.elements;var l=/\s*,\s*/,c=void 0;for(c in x){s[c]=A(s[c],l)||null;var d=s,u=N[c],m=A(s[N[c]],l),p=s[c],f=[],h=!0,g=void 0;m?h=!1:m={};for(g in p)"!"==g.charAt(0)&&(g=g.slice(1),f.push(g),m[g]=!0,h=!1);for(;g=f.pop();)p[g]=p["!"+g],delete p["!"+g];d[u]=(h?!1:m)||null}s.match=s.match||null;o.push(a);t.push(a)}e=i.elements;i=i.generic;var C;n=0;for(o=t.length;n<o;++n){r=S(t[n]);a=!0===r.classes||!0===r.styles||!0===r.attributes;s=r;c=u=l=void 0;for(l in x)s[l]=k(s[l]);d=!0;for(c in N){l=N[c];u=s[l];m=[];p=void 0;for(p in u)-1<p.indexOf("*")?m.push(new RegExp("^"+p.replace(/\*/g,".*")+"$")):m.push(p);u=m;u.length&&(s[l]=u,d=!1)}s.nothingRequired=d;s.noProperties=!(s.attributes||s.classes||s.styles);if(!0===r.elements||null===r.elements)i[a?"unshift":"push"](r);else for(C in s=r.elements,delete r.elements,s)if(e[C])e[C][a?"unshift":"push"](r);else e[C]=[r]}}function E(t,e,n,o){if(!t.match||t.match(e))if(o||c(t,e))if(t.propertiesOnly||(n.valid=!0),n.allAttributes||(n.allAttributes=s(t.attributes,e.attributes,n.validAttributes)),n.allStyles||(n.allStyles=s(t.styles,e.styles,n.validStyles)),!n.allClasses){t=t.classes;e=e.classes;o=n.validClasses;if(t)if(!0===t)t=!0;else{for(var i=0,r=e.length,a;i<r;++i)a=e[i],o[a]||(o[a]=t(a));t=!1}else t=!1;n.allClasses=t}}function s(t,e,n){if(!t)return!1;if(!0===t)return!0;for(var o in e)n[o]||(n[o]=t(o));return!1}function v(t,e,n){if(!t.match||t.match(e)){if(t.noProperties)return!1;n.hadInvalidAttribute=a(t.attributes,e.attributes)||n.hadInvalidAttribute;n.hadInvalidStyle=a(t.styles,e.styles)||n.hadInvalidStyle;t=t.classes;e=e.classes;if(t){for(var o=!1,i=!0===t,r=e.length;r--;)if(i||t(e[r]))e.splice(r,1),o=!0;t=o}else t=!1;n.hadInvalidClass=t||n.hadInvalidClass}}function a(t,e){if(!t)return!1;var n=!1,o=!0===t,i;for(i in e)if(o||t(i))delete e[i],n=!0;return n}function l(t,e,n){if(t.disabled||t.customConfig&&!n||!e)return!1;t._.cachedChecks={};return!0}function A(t,e){if(!t)return!1;if(!0===t)return t;if("string"==typeof t)return t=w(t),"*"==t?!0:CKEDITOR.tools.convertArrayToObject(t.split(e));if(CKEDITOR.tools.isArray(t))return t.length?CKEDITOR.tools.convertArrayToObject(t):!1;var n={},o=0,i;for(i in t)n[i]=t[i],o++;return o?n:!1}function c(t,e){if(t.nothingRequired)return!0;var n,o,i,r;if(i=t.requiredClasses)for(r=e.classes,n=0;n<i.length;++n)if(o=i[n],"string"==typeof o){if(-1==CKEDITOR.tools.indexOf(r,o))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(r,o))return!1;return d(e.styles,t.requiredStyles)&&d(e.attributes,t.requiredAttributes)}function d(t,e){if(!e)return!0;for(var n=0,o;n<e.length;++n)if(o=e[n],"string"==typeof o){if(!(o in t))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(t,o))return!1;return!0}function u(t){if(!t)return{};t=t.split(/\s*,\s*/).sort();for(var e={};t.length;)e[t.shift()]="cke-test";return e}function m(t){var e,n,o,i,r={},a=1;for(t=w(t);e=t.match(L);)(n=e[2])?(o=p(n,"styles"),i=p(n,"attrs"),n=p(n,"classes")):o=i=n=null,r["$"+a++]={elements:e[1],classes:n,styles:o,attributes:i},t=t.slice(e[0].length);return r}function p(t,e){var n=t.match(o[e]);return n?w(n[1]):null}function b(t){var e=t.styleBackup=t.attributes.style,n=t.classBackup=t.attributes["class"];t.styles||(t.styles=CKEDITOR.tools.parseCssText(e||"",1));t.classes||(t.classes=n?n.split(/\s+/):[])}function f(t,e,n,o){var i=0,r;o.toHtml&&(e.name=e.name.replace(B,"$1"));if(o.doCallbacks&&t.elementCallbacks){t:{r=t.elementCallbacks;for(var a=0,s=r.length,l;a<s;++a)if(l=r[a](e)){r=l;break t}r=void 0}if(r)return r}if(o.doTransform&&(r=t._.transformations[e.name])){b(e);for(a=0;a<r.length;++a)I(t,e,r[a]);y(e)}if(o.doFilter){t:{a=e.name;s=t._;t=s.allowedRules.elements[a];r=s.allowedRules.generic;a=s.disallowedRules.elements[a];s=s.disallowedRules.generic;l=o.skipRequired;var c={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},d,u;if(t||r){b(e);if(a)for(d=0,u=a.length;d<u;++d)if(!1===v(a[d],e,c)){t=null;break t}if(s)for(d=0,u=s.length;d<u;++d)v(s[d],e,c);if(t)for(d=0,u=t.length;d<u;++d)E(t[d],e,c,l);if(r)for(d=0,u=r.length;d<u;++d)E(r[d],e,c,l);t=c}else t=null}if(!t||!t.valid)return n.push(e),1;u=t.validAttributes;var m=t.validStyles;r=t.validClasses;var a=e.attributes,p=e.styles,s=e.classes;l=e.classBackup;var f=e.styleBackup,h,g,C=[],c=[],A=/^data-cke-/;d=!1;delete a.style;delete a["class"];delete e.classBackup;delete e.styleBackup;if(!t.allAttributes)for(h in a)u[h]||(A.test(h)?h==(g=h.replace(/^data-cke-saved-/,""))||u[g]||(delete a[h],d=!0):(delete a[h],d=!0));if(!t.allStyles||t.hadInvalidStyle){for(h in p)t.allStyles||m[h]?C.push(h+":"+p[h]):d=!0;C.length&&(a.style=C.sort().join("; "))}else f&&(a.style=f);if(!t.allClasses||t.hadInvalidClass){for(h=0;h<s.length;++h)(t.allClasses||r[s[h]])&&c.push(s[h]);c.length&&(a["class"]=c.sort().join(" "));l&&c.length<l.split(/\s+/).length&&(d=!0)}else l&&(a["class"]=l);d&&(i=1);if(!o.skipFinalValidation&&!T(e))return n.push(e),1}o.toHtml&&(e.name=e.name.replace(M,"cke:$1"));return i}function t(t){var e=[],n;for(n in t)-1<n.indexOf("*")&&e.push(n.replace(/\*/g,".*"));return e.length?new RegExp("^(?:"+e.join("|")+")$"):null}function y(t){var e=t.attributes,n;delete e.style;delete e["class"];if(n=CKEDITOR.tools.writeCssText(t.styles,!0))e.style=n;t.classes.length&&(e["class"]=t.classes.sort().join(" "))}function T(t){switch(t.name){case"a":if(!(t.children.length||t.attributes.name||t.attributes.id))return!1;break;case"img":if(!t.attributes.src)return!1}return!0}function k(e){if(!e)return!1;if(!0===e)return!0;var n=t(e);return function(t){return t in e||n&&t.match(n)}}function h(){return new CKEDITOR.htmlParser.element("br")}function g(t){return t.type==CKEDITOR.NODE_ELEMENT&&("br"==t.name||_.$block[t.name])}function C(t,e,n){var o=t.name;if(_.$empty[o]||!t.children.length)"hr"==o&&"br"==e?t.replaceWith(h()):(t.parent&&n.push({check:"it",el:t.parent}),t.remove());else if(_.$block[o]||"tr"==o)if("br"==e)t.previous&&!g(t.previous)&&(e=h(),e.insertBefore(t)),t.next&&!g(t.next)&&(e=h(),e.insertAfter(t)),t.replaceWithChildren();else{var o=t.children,i;t:{i=_[e];for(var r=0,a=o.length,s;r<a;++r)if(s=o[r],s.type==CKEDITOR.NODE_ELEMENT&&!i[s.name]){i=!1;break t}i=!0}if(i)t.name=e,t.attributes={},n.push({check:"parent-down",el:t});else{i=t.parent;for(var r=i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==i.name,l,c,a=o.length;0<a;)s=o[--a],r&&(s.type==CKEDITOR.NODE_TEXT||s.type==CKEDITOR.NODE_ELEMENT&&_.$inline[s.name])?(l||(l=new CKEDITOR.htmlParser.element(e),l.insertAfter(t),n.push({check:"parent-down",el:l})),l.add(s,0)):(l=null,c=_[i.name]||_.span,s.insertAfter(t),i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||s.type!=CKEDITOR.NODE_ELEMENT||c[s.name]||n.push({check:"el-up",el:s}));t.remove()}}else o in{style:1,script:1}?t.remove():(t.parent&&n.push({check:"it",el:t.parent}),t.replaceWithChildren())}function I(t,e,n){var o,i;for(o=0;o<n.length;++o)if(i=n[o],!(i.check&&!t.check(i.check,!1)||i.left&&!i.left(e))){i.right(e,P);break}}function n(t,e){var n=e.getDefinition(),o=n.attributes,i=n.styles,r,a,s,l;if(t.name!=n.element)return!1;for(r in o)if("class"==r)for(n=o[r].split(/\s+/),s=t.classes.join("|");l=n.pop();){if(-1==s.indexOf(l))return!1}else if(t.attributes[r]!=o[r])return!1;for(a in i)if(t.styles[a]!=i[a])return!1;return!0}function O(t,n){var e,o;"string"==typeof t?e=t:t instanceof CKEDITOR.style?o=t:(e=t[0],o=t[1]);return[{element:e,left:o,right:function(t,e){e.transform(t,n)}}]}function D(e){return function(t){return n(t,e)}}function R(n){return function(t,e){e[n](t)}}var _=CKEDITOR.dtd,S=CKEDITOR.tools.copy,w=CKEDITOR.tools.trim,K=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(t){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(t instanceof CKEDITOR.editor){t=this.editor=t;this.customConfig=!0;var e=t.config.allowedContent;!0===e?this.disabled=!0:(e||(this.customConfig=!1),this.allow(e,"config",1),this.allow(t.config.extraAllowedContent,"extra",1),this.allow(K[t.enterMode]+" "+K[t.shiftEnterMode],"default",1),this.disallow(t.config.disallowedContent))}else this.customConfig=!1,this.allow(t,"default",1)};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(t,e,n){if(!l(this,t,n))return!1;var o,i;if("string"==typeof t)t=m(t);else if(t instanceof CKEDITOR.style){if(t.toAllowedContentRules)return this.allow(t.toAllowedContentRules(this.editor),e,n);o=t.getDefinition();t={};n=o.attributes;t[o.element]=o={styles:o.styles,requiredStyles:o.styles&&CKEDITOR.tools.objectKeys(o.styles)};n&&(n=S(n),o.classes=n["class"]?n["class"].split(/\s+/):null,o.requiredClasses=o.classes,delete n["class"],o.attributes=n,o.requiredAttributes=n&&CKEDITOR.tools.objectKeys(n))}else if(CKEDITOR.tools.isArray(t)){for(o=0;o<t.length;++o)i=this.allow(t[o],e,n);return i}r(this,t,e,this.allowedContent,this._.allowedRules);return!0},applyTo:function(t,a,e,n){if(this.disabled)return!1;var s=this,l=[],c=this.editor&&this.editor.config.protectedSource,d,u=!1,m={doFilter:!e,doTransform:!0,doCallbacks:!0,toHtml:a};t.forEach(function(t){if(t.type==CKEDITOR.NODE_ELEMENT){if("off"==t.attributes["data-cke-filter"])return!1;if(!a||"span"!=t.name||!~CKEDITOR.tools.objectKeys(t.attributes).join("|").indexOf("data-cke-"))if(d=f(s,t,l,m),d&1)u=!0;else if(d&2)return!1}else if(t.type==CKEDITOR.NODE_COMMENT&&t.value.match(/^\{cke_protected\}(?!\{C\})/)){var e;t:{var n=decodeURIComponent(t.value.replace(/^\{cke_protected\}/,""));e=[];var o,i,r;if(c)for(i=0;i<c.length;++i)if((r=n.match(c[i]))&&r[0].length==n.length){e=!0;break t}n=CKEDITOR.htmlParser.fragment.fromHtml(n);1==n.children.length&&(o=n.children[0]).type==CKEDITOR.NODE_ELEMENT&&f(s,o,e,m);e=!e.length}e||l.push(t)}},null,!0);l.length&&(u=!0);var o;t=[];n=K[n||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var i;e=l.pop();)e.type==CKEDITOR.NODE_ELEMENT?C(e,n,t):e.remove();for(;o=t.pop();)if(e=o.el,e.parent)switch(i=_[e.parent.name]||_.span,o.check){case"it":_.$removeEmpty[e.name]&&!e.children.length?C(e,n,t):T(e)||C(e,n,t);break;case"el-up":e.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||i[e.name]||C(e,n,t);break;case"parent-down":e.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||i[e.name]||C(e.parent,n,t)}return u},checkFeature:function(t){if(this.disabled||!t)return!0;t.toFeature&&(t=t.toFeature(this.editor));return!t.requiredContent||this.check(t.requiredContent)},disable:function(){this.disabled=!0},disallow:function(t){if(!l(this,t,!0))return!1;"string"==typeof t&&(t=m(t));r(this,t,null,this.disallowedContent,this._.disallowedRules);return!0},addContentForms:function(t){if(!this.disabled&&t){var e,n,o=[],i;for(e=0;e<t.length&&!i;++e)n=t[e],("string"==typeof n||n instanceof CKEDITOR.style)&&this.check(n)&&(i=n);if(i){for(e=0;e<t.length;++e)o.push(O(t[e],i));this.addTransformations(o)}}},addElementCallback:function(t){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(t)},addFeature:function(t){if(this.disabled||!t)return!0;t.toFeature&&(t=t.toFeature(this.editor));this.allow(t.allowedContent,t.name);this.addTransformations(t.contentTransformations);this.addContentForms(t.contentForms);return t.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(t.requiredContent):!0},addTransformations:function(t){var e,n;if(!this.disabled&&t){var o=this._.transformations,i;for(i=0;i<t.length;++i){e=t[i];var r=void 0,a=void 0,s=void 0,l=void 0,c=void 0,d=void 0;n=[];for(a=0;a<e.length;++a)s=e[a],"string"==typeof s?(s=s.split(/\s*:\s*/),l=s[0],c=null,d=s[1]):(l=s.check,c=s.left,d=s.right),r||(r=s,r=r.element?r.element:l?l.match(/^([a-z0-9]+)/i)[0]:r.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=D(c)),n.push({check:l==r?null:l,left:c,right:"string"==typeof d?R(d):d});e=r;o[e]||(o[e]=[]);o[e].push(n)}}},check:function(t,e,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(t)){for(var o=t.length;o--;)if(this.check(t[o],e,n))return!0;return!1}var i,r;if("string"==typeof t){r=t+"<"+(!1===e?"0":"1")+(n?"1":"0")+">";if(r in this._.cachedChecks)return this._.cachedChecks[r];o=m(t).$1;i=o.styles;var a=o.classes;o.name=o.elements;o.classes=a=a?a.split(/\s*,\s*/):[];o.styles=u(i);o.attributes=u(o.attributes);o.children=[];a.length&&(o.attributes["class"]=a.join(" "));i&&(o.attributes.style=CKEDITOR.tools.writeCssText(o.styles));i=o}else o=t.getDefinition(),i=o.styles,a=o.attributes||{},i&&!CKEDITOR.tools.isEmpty(i)?(i=S(i),a.style=CKEDITOR.tools.writeCssText(i,!0)):i={},i={name:o.element,attributes:a,classes:a["class"]?a["class"].split(/\s+/):[],styles:i,children:[]};var a=CKEDITOR.tools.clone(i),s=[],l;if(!1!==e&&(l=this._.transformations[i.name])){for(o=0;o<l.length;++o)I(this,i,l[o]);y(i)}f(this,a,s,{doFilter:!0,doTransform:!1!==e,skipRequired:!n,skipFinalValidation:!n});e=0<s.length?!1:CKEDITOR.tools.objectCompare(i.attributes,a.attributes,!0)?!0:!1;"string"==typeof t&&(this._.cachedChecks[r]=e);return e},getAllowedEnterMode:function(){var i=["p","div","br"],r={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(t,e){var n=i.slice(),o;if(this.check(K[t]))return t;for(e||(n=n.reverse());o=n.pop();)if(this.check(o))return r[o];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var x={styles:1,attributes:1,classes:1},N={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},L=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,o={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},B=/^cke:(object|embed|param)$/,M=/^(object|embed|param)$/,P;P=CKEDITOR.filter.transformationsTools={sizeToStyle:function(t){this.lengthToStyle(t,"width");this.lengthToStyle(t,"height")},sizeToAttribute:function(t){this.lengthToAttribute(t,"width");this.lengthToAttribute(t,"height")},lengthToStyle:function(t,e,n){n=n||e;if(!(n in t.styles)){var o=t.attributes[e];o&&(/^\d+$/.test(o)&&(o+="px"),t.styles[n]=o)}delete t.attributes[e]},lengthToAttribute:function(t,e,n){n=n||e;if(!(n in t.attributes)){var o=t.styles[e],i=o&&o.match(/^(\d+)(?:\.\d*)?px$/);i?t.attributes[n]=i[1]:"cke-test"==o&&(t.attributes[n]="cke-test")}delete t.styles[e]},alignmentToStyle:function(t){if(!("float"in t.styles)){var e=t.attributes.align;if("left"==e||"right"==e)t.styles["float"]=e}delete t.attributes.align},alignmentToAttribute:function(t){if(!("align"in t.attributes)){var e=t.styles["float"];if("left"==e||"right"==e)t.attributes.align=e}delete t.styles["float"]},splitBorderShorthand:function(e){function t(t){e.styles["border-top-width"]=n[t[0]];e.styles["border-right-width"]=n[t[1]];e.styles["border-bottom-width"]=n[t[2]];e.styles["border-left-width"]=n[t[3]]}if(e.styles.border){var n=e.styles.border.match(/([\.\d]+\w+)/g)||["0px"];switch(n.length){case 1:e.styles["border-width"]=n[0];break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}e.styles["border-style"]=e.styles["border-style"]||(e.styles.border.match(/(none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|initial|inherit)/)||[])[0];e.styles["border-style"]||delete e.styles["border-style"];delete e.styles.border}},listTypeToStyle:function(t){if(t.attributes.type)switch(t.attributes.type){case"a":t.styles["list-style-type"]="lower-alpha";break;case"A":t.styles["list-style-type"]="upper-alpha";break;case"i":t.styles["list-style-type"]="lower-roman";break;case"I":t.styles["list-style-type"]="upper-roman";break;case"1":t.styles["list-style-type"]="decimal";break;default:t.styles["list-style-type"]=t.attributes.type}},splitMarginShorthand:function(e){function t(t){e.styles["margin-top"]=n[t[0]];e.styles["margin-right"]=n[t[1]];e.styles["margin-bottom"]=n[t[2]];e.styles["margin-left"]=n[t[3]]}if(e.styles.margin){var n=e.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(n.length){case 1:e.styles.margin=n[0];break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}delete e.styles.margin}},matchesStyle:n,transform:function(t,e){if("string"==typeof e)t.name=e;else{var n=e.getDefinition(),o=n.styles,i=n.attributes,r,a,s,l;t.name=n.element;for(r in i)if("class"==r)for(n=t.classes.join("|"),s=i[r].split(/\s+/);l=s.pop();)-1==n.indexOf(l)&&t.classes.push(l);else t.attributes[r]=i[r];for(a in o)t.styles[a]=o[a]}}}})();(function(){CKEDITOR.focusManager=function(t){if(t.focusManager)return t.focusManager;this.hasFocus=!1;this.currentActive=null;this._={editor:t};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(t){this._.timer&&clearTimeout(this._.timer);t&&(this.currentActive=t);this.hasFocus||this._.locked||((t=CKEDITOR.currentInstance)&&t.focusManager.blur(1),this.hasFocus=!0,(t=this._.editor.container)&&t.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(t){function e(){var t=this._.editor;this.hasFocus&&(this.hasFocus=!1,CKEDITOR.env.chrome&&t.editable().isInline()&&t.window.$.getSelection().removeAllRanges(),(t=this._.editor.container)&&t.removeClass("cke_focus"),this._.editor.fire("blur"))}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var n=CKEDITOR.focusManager._.blurDelay;t||!n?e.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;e.call(this)},n,this)}},add:function(t,e){var n=t.getCustomData("focusmanager");if(!n||n!=this){n&&n.remove(t);var n="focus",o="blur";e&&(CKEDITOR.env.ie?(n="focusin",o="focusout"):CKEDITOR.event.useCapture=1);var i={blur:function(){t.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(t)}};t.on(n,i.focus,this);t.on(o,i.blur,this);e&&(CKEDITOR.event.useCapture=0);t.setCustomData("focusmanager",this);t.setCustomData("focusmanager_handlers",i)}},remove:function(t){t.removeCustomData("focusmanager");var e=t.removeCustomData("focusmanager_handlers");t.removeListener("blur",e.blur);t.removeListener("focus",e.focus)}}})();CKEDITOR.keystrokeHandler=function(t){if(t.keystrokeHandler)return t.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:t};return this};(function(){var i,e=function(t){t=t.data;var e=t.getKeystroke(),n=this.keystrokes[e],o=this._.editor;i=!1===o.fire("key",{keyCode:e,domEvent:t});i||(n&&(i=!1!==o.execCommand(n,{from:"keystrokeHandler"})),i||(i=!!this.blockedKeystrokes[e]));i&&t.preventDefault(!0);return!i},n=function(t){i&&(i=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(t){t.on("keydown",e,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac)t.on("keypress",n,this)}}})();(function(){CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(t,e,n){t&&CKEDITOR.lang.languages[t]||(t=this.detect(e,t));var o=this;e=function(){o[t].dir=o.rtl[t]?"rtl":"ltr";n(t,o[t])};this[t]?e():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+t+".js"),e,this)},detect:function(t,e){var n=this.languages;e=e||navigator.userLanguage||navigator.language||t;var o=e.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),i=o[1],o=o[2];n[i+"-"+o]?i=i+"-"+o:n[i]||(i=null);CKEDITOR.lang.detect=i?function(){return i}:function(t){return t};return i||t}}})();CKEDITOR.scriptLoader=function(){var p={},f={};return{load:function(t,o,e,n){var i="string"==typeof t;i&&(t=[t]);e||(e=CKEDITOR);var r=t.length,a=[],s=[],l=function(t){o&&(i?o.call(e,t):o.call(e,a,s))};if(0===r)l(!0);else{var c=function(t,e){(e?a:s).push(t);0>=--r&&(n&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),l(e))},d=function(t,e){p[t]=1;var n=f[t];delete f[t];for(var o=0;o<n.length;o++)n[o](t,e)},u=function(t){if(p[t])c(t,!0);else{var e=f[t]||(f[t]=[]);e.push(c);if(!(1<e.length)){var n=new CKEDITOR.dom.element("script");n.setAttributes({type:"text/javascript",src:t});o&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?n.$.onreadystatechange=function(){if("loaded"==n.$.readyState||"complete"==n.$.readyState)n.$.onreadystatechange=null,d(t,!0)}:(n.$.onload=function(){setTimeout(function(){d(t,!0)},0)},n.$.onerror=function(){d(t,!1)}));n.appendTo(CKEDITOR.document.getHead())}}};n&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var m=0;m<r;m++)u(t[m])}},queue:function(){function o(){var t;(t=i[0])&&this.load(t.scriptUrl,t.callback,CKEDITOR,0)}var i=[];return function(t,e){var n=this;i.push({scriptUrl:t,callback:function(){e&&e.apply(this,arguments);i.shift();o.call(n)}});1==i.length&&o.call(this)}}()}}();CKEDITOR.resourceManager=function(t,e){this.basePath=t;this.fileName=e;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};CKEDITOR.resourceManager.prototype={add:function(t,e){if(this.registered[t])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+t+'" is already registered.');var n=this.registered[t]=e||{};n.name=t;n.path=this.getPath(t);CKEDITOR.fire(t+CKEDITOR.tools.capitalize(this.fileName)+"Ready",n);return this.get(t)},get:function(t){return this.registered[t]||null},getPath:function(t){var e=this.externals[t];return CKEDITOR.getUrl(e&&e.dir||this.basePath+t+"/")},getFilePath:function(t){var e=this.externals[t];return CKEDITOR.getUrl(this.getPath(t)+(e?e.file:this.fileName+".js"))},addExternal:function(t,e,n){t=t.split(",");for(var o=0;o<t.length;o++){var i=t[o];n||(e=e.replace(/[^\/]+$/,function(t){n=t;return""}));this.externals[i]={dir:e,file:n||this.fileName+".js"}}},load:function(t,a,s){CKEDITOR.tools.isArray(t)||(t=t?[t]:[]);for(var l=this.loaded,e=this.registered,n=[],c={},d={},o=0;o<t.length;o++){var i=t[o];if(i)if(l[i]||e[i])d[i]=this.get(i);else{var r=this.getFilePath(i);n.push(r);r in c||(c[r]=[]);c[r].push(i)}}CKEDITOR.scriptLoader.load(n,function(t,e){if(e.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+c[e[0]].join(",")+'" was not found at "'+e[0]+'".');for(var n=0;n<t.length;n++)for(var o=c[t[n]],i=0;i<o.length;i++){var r=o[i];d[r]=this.get(r);l[r]=1}a.call(s,d)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var u={};return function(t,s,l){var c={},d=function(t){e.call(this,t,function(t){CKEDITOR.tools.extend(c,t);var e=[],n;for(n in t){var o=t[n],i=o&&o.requires;if(!u[n]){if(o.icons)for(var r=o.icons.split(","),a=r.length;a--;)CKEDITOR.skin.addIcon(r[a],o.path+"icons/"+(CKEDITOR.env.hidpi&&o.hidpi?"hidpi/":"")+r[a]+".png");u[n]=1}if(i)for(i.split&&(i=i.split(",")),o=0;o<i.length;o++)c[i[o]]||e.push(i[o])}if(e.length)d.call(this,e);else{for(n in c)o=c[n],o.onLoad&&!o.onLoad._called&&(!1===o.onLoad()&&delete c[n],o.onLoad._called=1);s&&s.call(l||window,c)}},this)};d.call(this,t)}});CKEDITOR.plugins.setLang=function(t,e,n){var o=this.get(t);t=o.langEntries||(o.langEntries={});o=o.lang||(o.lang=[]);o.split&&(o=o.split(","));-1==CKEDITOR.tools.indexOf(o,e)&&o.push(e);t[e]=n};CKEDITOR.ui=function(t){if(t.ui)return t.ui;this.items={};this.instances={};this.editor=t;this._={handlers:{}};return this};CKEDITOR.ui.prototype={add:function(t,e,n){n.name=t.toLowerCase();var o=this.items[t]={type:e,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(o,n)},get:function(t){return this.instances[t]},create:function(t){var e=this.items[t],n=e&&this._.handlers[e.type],o=e&&e.command&&this.editor.getCommand(e.command),n=n&&n.create.apply(this,e.args);this.instances[t]=n;o&&o.uiItems.push(n);n&&!n.type&&(n.type=e.type);return n},addHandler:function(t,e){this._.handlers[t]=e},space:function(t){return CKEDITOR.document.getById(this.spaceId(t))},spaceId:function(t){return this.editor.id+"_"+t}};CKEDITOR.event.implementOn(CKEDITOR.ui);(function(){function t(t,e,n){CKEDITOR.event.call(this);t=t&&CKEDITOR.tools.clone(t);if(void 0!==e){if(!(e instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!n)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&n==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!i(e,n))throw Error('The specified element mode is not supported on element: "'+e.getName()+'".');this.element=e;this.elementMode=n;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(e.getId()||e.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={};this.commands={};this.templates={};this.name=this.name||o();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",r);this.on("selectionChange",function(t){s(this,t.data.path)});this.on("activeFilterChange",function(){s(this,this.elementPath(),!0)});this.on("mode",r);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?c(this,t):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function o(){do{var t="editor"+ ++p}while(CKEDITOR.instances[t]);return t}function i(t,e){return e==CKEDITOR.ELEMENT_MODE_INLINE?t.is(CKEDITOR.dtd.$editable)||t.is("textarea"):e==CKEDITOR.ELEMENT_MODE_REPLACE?!t.is(CKEDITOR.dtd.$nonBodyContent):1}function r(){var t=this.commands,e;for(e in t)a(this,t[e])}function a(t,e){e[e.startDisabled?"disable":t.readOnly&&!e.readOnly?"disable":e.modes[t.mode]?"enable":"disable"]()}function s(t,e,n){if(e){var o,i,r=t.commands;for(i in r)o=r[i],(n||o.contextSensitive)&&o.refresh(t,e)}}function l(t){var e=t.config.customConfig;if(!e)return!1;var e=CKEDITOR.getUrl(e),n=f[e]||(f[e]={});n.fn?(n.fn.call(t,t.config),CKEDITOR.getUrl(t.config.customConfig)!=e&&l(t)||t.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(e,function(){n.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};l(t)});return!0}function c(e,n){e.on("customConfigLoaded",function(){if(n){if(n.on)for(var t in n.on)e.on(t,n.on[t]);CKEDITOR.tools.extend(e.config,n,!0);delete e.config.on}t=e.config;e.readOnly=t.readOnly?!0:e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):!1;e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(e.element.is("textarea")||CKEDITOR.dtd[e.element.getName()].p):!1;e.tabIndex=t.tabIndex||e.element&&e.element.getAttribute("tabindex")||0;e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:t.enterMode;e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:t.shiftEnterMode;t.skin&&(CKEDITOR.skinName=t.skin);e.fireOnce("configLoaded");e.dataProcessor=new CKEDITOR.htmlDataProcessor(e);e.filter=e.activeFilter=new CKEDITOR.filter(e);d(e)});n&&null!=n.customConfig&&(e.config.customConfig=n.customConfig);l(e)||e.fireOnce("customConfigLoaded")}function d(t){CKEDITOR.skin.loadPart("editor",function(){e(t)})}function e(o){CKEDITOR.lang.load(o.config.language,o.config.defaultLanguage,function(t,e){var n=o.config.title;o.langCode=t;o.lang=CKEDITOR.tools.prototypedCopy(e);o.title="string"==typeof n||!1===n?n:[o.lang.editor,o.name].join(", ");o.config.contentsLangDirection||(o.config.contentsLangDirection=o.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?o.element.getDirection(1):o.lang.dir);o.fire("langLoaded");u(o)})}function u(e){e.getStylesSet(function(t){e.once("loaded",function(){e.fire("stylesSet",{styles:t})},null,null,1);n(e)})}function n(d){var u=d.config,t=u.plugins,e=u.extraPlugins,n=u.removePlugins;if(e)var o=new RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),t=t.replace(o,""),t=t+(","+e);if(n)var m=new RegExp("(?:^|,)(?:"+n.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),t=t.replace(m,"");CKEDITOR.env.air&&(t+=",adobeair");CKEDITOR.plugins.load(t.split(","),function(t){var i=[],r=[],e=[];d.plugins=t;for(var n in t){var o=t[n],a=o.lang,s=null,l=o.requires,c;CKEDITOR.tools.isArray(l)&&(l=l.join(","));if(l&&(c=l.match(m)))for(;l=c.pop();)CKEDITOR.error("editor-plugin-required",{plugin:l.replace(",",""),requiredBy:n});a&&!d.lang[n]&&(a.split&&(a=a.split(",")),0<=CKEDITOR.tools.indexOf(a,d.langCode)?s=d.langCode:(s=d.langCode.replace(/-.*/,""),s=s!=d.langCode&&0<=CKEDITOR.tools.indexOf(a,s)?s:0<=CKEDITOR.tools.indexOf(a,"en")?"en":a[0]),o.langEntries&&o.langEntries[s]?(d.lang[n]=o.langEntries[s],s=null):e.push(CKEDITOR.getUrl(o.path+"lang/"+s+".js")));r.push(s);i.push(o)}CKEDITOR.scriptLoader.load(e,function(){for(var t=["beforeInit","init","afterInit"],e=0;e<t.length;e++)for(var n=0;n<i.length;n++){var o=i[n];0===e&&r[n]&&o.lang&&o.langEntries&&(d.lang[o.name]=o.langEntries[r[n]]);if(o[t[e]])o[t[e]](d)}d.fireOnce("pluginsLoaded");u.keystrokes&&d.setKeystroke(d.config.keystrokes);for(n=0;n<d.config.blockedKeystrokes.length;n++)d.keystrokeHandler.blockedKeystrokes[d.config.blockedKeystrokes[n]]=1;d.status="loaded";d.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,d)})})}function m(){var t=this.element;if(t&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var e=this.getData();this.config.htmlEncodeOutput&&(e=CKEDITOR.tools.htmlEncode(e));t.is("textarea")?t.setValue(e):t.setHtml(e);return!0}return!1}t.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=t;var p=0,f={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(t,e){e.name=t.toLowerCase();var n=new CKEDITOR.command(this,e);this.mode&&a(this,n);return this.commands[t]=n},_attachToForm:function(){function e(t){n.updateElement();n._.required&&!o.getValue()&&!1===n.fire("required")&&t.data.preventDefault()}function t(t){return!!(t&&t.call&&t.apply)}var n=this,o=n.element,i=new CKEDITOR.dom.element(o.$.form);o.is("textarea")&&i&&(i.on("submit",e),t(i.$.submit)&&(i.$.submit=CKEDITOR.tools.override(i.$.submit,function(t){return function(){e();t.apply?t.apply(this):t()}})),n.on("destroy",function(){i.removeListener("submit",e)}))},destroy:function(t){this.fire("beforeDestroy");!t&&m.call(this);this.editable(null);this.filter&&(this.filter.destroy(),delete this.filter);delete this.activeFilter;this.status="destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(t){if(!t){t=this.getSelection();if(!t)return null;t=t.getStartElement()}return t?new CKEDITOR.dom.elementPath(t,this.editable()):null},createRange:function(){var t=this.editable();return t?new CKEDITOR.dom.range(t):null},execCommand:function(t,e){var n=this.getCommand(t),o={name:t,commandData:e,command:n};return n&&n.state!=CKEDITOR.TRISTATE_DISABLED&&!1!==this.fire("beforeCommandExec",o)&&(o.returnValue=n.exec(o.commandData),!n.async&&!1!==this.fire("afterCommandExec",o))?o.returnValue:!1},getCommand:function(t){return this.commands[t]},getData:function(t){!t&&this.fire("beforeGetData");var e=this._.data;"string"!=typeof e&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is("textarea")?e.getValue():e.getHtml():"");e={dataValue:e};!t&&this.fire("getData",e);return e.dataValue},getSnapshot:function(){var t=this.fire("getSnapshot");"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():"");return t},loadSnapshot:function(t){this.fire("loadSnapshot",t)},setData:function(t,e,n){var o=!0,i=e;e&&"object"==typeof e&&(n=e.internal,i=e.callback,o=!e.noSnapshot);!n&&o&&this.fire("saveSnapshot");if(i||!n)this.once("dataReady",function(t){!n&&o&&this.fire("saveSnapshot");i&&i.call(t.editor)});t={dataValue:t};!n&&this.fire("setData",t);this._.data=t.dataValue;!n&&this.fire("afterSetData",t)},setReadOnly:function(t){t=null==t||t;this.readOnly!=t&&(this.readOnly=t,this.keystrokeHandler.blockedKeystrokes[8]=+t,this.editable().setReadOnly(t),this.fire("readOnly"))},insertHtml:function(t,e,n){this.fire("insertHtml",{dataValue:t,mode:e,range:n})},insertText:function(t){this.fire("insertText",t)},insertElement:function(t){this.fire("insertElement",t)},getSelectedHtml:function(t){var e=this.editable(),n=this.getSelection(),n=n&&n.getRanges();if(!e||!n||0===n.length)return null;for(var o=new CKEDITOR.dom.documentFragment,i,r,a,s=0;s<n.length;s++){var l=n[s],c=l.startContainer;c.getName&&"tr"==c.getName()?(i||(i=c.getAscendant("table").clone(),i.append(c.getAscendant("tbody").clone()),o.append(i),i=i.findOne("tbody")),r&&r.equals(c)||(r=c,a=c.clone(),i.append(a)),a.append(l.cloneContents())):o.append(l.cloneContents())}e=i?o:e.getHtmlFromRange(n[0]);return t?e.getHtml():e},extractSelectedHtml:function(t,e){var n=this.editable(),o=this.getSelection().getRanges();if(!n||0===o.length)return null;o=o[0];n=n.extractHtmlFromRange(o,e);e||this.getSelection().selectRanges([o]);return t?n.getHtml():n},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return m.call(this)},setKeystroke:function(){for(var t=this.keystrokeHandler.keystrokes,e=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],n,o,i=e.length;i--;)n=e[i],o=0,CKEDITOR.tools.isArray(n)&&(o=n[1],n=n[0]),o?t[n]=o:delete t[n]},getCommandKeystroke:function(t){var e=t.name,n=this.keystrokeHandler.keystrokes,o;if(t.fakeKeystroke)return t.fakeKeystroke;for(o in n)if(n.hasOwnProperty(o)&&n[o]==e)return o;return null},addFeature:function(t){return this.filter.addFeature(t)},setActiveFilter:function(t){t||(t=this.filter);this.activeFilter!==t&&(this.activeFilter=t,this.fire("activeFilterChange"),t===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(t.getAllowedEnterMode(this.enterMode),t.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(t,e){t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.enterMode;e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.shiftEnterMode;if(this.activeEnterMode!=t||this.activeShiftEnterMode!=e)this.activeEnterMode=t,this.activeShiftEnterMode=e,this.fire("activeEnterModeChange")},showNotification:function(t){alert(t)}})})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}};(function(){var c=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,d={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(t){for(var e,n,o=0,i;e=this._.htmlPartsRegex.exec(t);){n=e.index;if(n>o)if(o=t.substring(o,n),i)i.push(o);else this.onText(o);o=this._.htmlPartsRegex.lastIndex;if(n=e[1])if(n=n.toLowerCase(),i&&CKEDITOR.dtd.$cdata[n]&&(this.onCDATA(i.join("")),i=null),!i){this.onTagClose(n);continue}if(i)i.push(e[0]);else if(n=e[3]){if(n=n.toLowerCase(),!/="/.test(n)){var r={},a,s=e[4];e=!!e[5];if(s)for(;a=c.exec(s);){var l=a[1].toLowerCase();a=a[2]||a[3]||a[4]||"";r[l]=!a&&d[l]?l:CKEDITOR.tools.htmlDecodeAttr(a)}this.onTagOpen(n,r,e);!i&&CKEDITOR.dtd.$cdata[n]&&(i=[])}}else if(n=e[2])this.onComment(n)}if(t.length>o)this.onText(t.substring(o,t.length))}}})();CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(t){this._.output.push("<",t)},openTagClose:function(t,e){e?this._.output.push(" />"):this._.output.push(">")},attribute:function(t,e){"string"==typeof e&&(e=CKEDITOR.tools.htmlEncodeAttr(e));this._.output.push(" ",t,'="',e,'"')},closeTag:function(t){this._.output.push("</",t,">")},text:function(t){this._.output.push(t)},comment:function(t){this._.output.push("\x3c!--",t,"--\x3e")},write:function(t){this._.output.push(t)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(t){var e=this._.output.join("");t&&this.reset();return e}}});"use strict";(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var t=this.parent.children,e=CKEDITOR.tools.indexOf(t,this),n=this.previous,o=this.next;n&&(n.next=o);o&&(o.previous=n);t.splice(e,1);this.parent=null},replaceWith:function(t){var e=this.parent.children,n=CKEDITOR.tools.indexOf(e,this),o=t.previous=this.previous,i=t.next=this.next;o&&(o.next=t);i&&(i.previous=t);e[n]=t;t.parent=this.parent;this.parent=null},insertAfter:function(t){var e=t.parent.children,n=CKEDITOR.tools.indexOf(e,t),o=t.next;e.splice(n+1,0,this);this.next=t.next;this.previous=t;t.next=this;o&&(o.previous=this);this.parent=t.parent},insertBefore:function(t){var e=t.parent.children,n=CKEDITOR.tools.indexOf(e,t);e.splice(n,0,this);this.next=t;(this.previous=t.previous)&&(t.previous.next=this);t.previous=this;this.parent=t.parent},getAscendant:function(e){var t="function"==typeof e?e:"string"==typeof e?function(t){return t.name==e}:function(t){return t.name in e},n=this.parent;for(;n&&n.type==CKEDITOR.NODE_ELEMENT;){if(t(n))return n;n=n.parent}return null},wrapWith:function(t){this.replaceWith(t);t.add(this);return t},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(t){return t||{}}}})();"use strict";CKEDITOR.htmlParser.comment=function(t){this.value=t;this._={isBlockLike:!1}};CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(t,e){var n=this.value;if(!(n=t.onComment(e,n,this)))return this.remove(),!1;if("string"!=typeof n)return this.replaceWith(n),!1;this.value=n;return!0},writeHtml:function(t,e){e&&this.filter(e);t.comment(this.value)}});"use strict";(function(){CKEDITOR.htmlParser.text=function(t){this.value=t;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(t,e){if(!(this.value=t.onText(e,this.value,this)))return this.remove(),!1},writeHtml:function(t,e){e&&this.filter(e);t.text(this.value)}})})();"use strict";(function(){CKEDITOR.htmlParser.cdata=function(t){this.value=t};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(t){t.write(this.value)}})})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};(function(){function A(t){return t.attributes["data-cke-survive"]?!1:"a"==t.name&&t.attributes.href||CKEDITOR.dtd.$removeEmpty[t.name]}var E=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),v={ol:1,ul:1},b=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),o={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(t,e,a){function i(t){var e;if(0<p.length)for(var n=0;n<p.length;n++){var o=p[n],i=o.name,r=CKEDITOR.dtd[i],a=h.name&&CKEDITOR.dtd[h.name];a&&!a[i]||t&&r&&!r[t]&&CKEDITOR.dtd[t]?i==h.name&&(l(h,h.parent,1),n--):(e||(s(),e=1),o=o.clone(),o.parent=h,h=o,p.splice(n,1),n--)}}function s(){for(;f.length;)l(f.shift(),h)}function r(t){if(t._.isBlockLike&&"pre"!=t.name&&"textarea"!=t.name){var e=t.children.length,n=t.children[e-1],o;n&&n.type==CKEDITOR.NODE_TEXT&&((o=CKEDITOR.tools.rtrim(n.value))?n.value=o:t.children.length=e-1)}}function l(t,e,n){e=e||h||m;var o=h;void 0===t.previous&&(c(e,t)&&(h=e,u.onTagOpen(a,{}),t.returnPoint=e=h),r(t),A(t)&&!t.children.length||e.add(t),"pre"==t.name&&(C=!1),"textarea"==t.name&&(g=!1));t.returnPoint?(h=t.returnPoint,delete t.returnPoint):h=n?e:o}function c(t,e){if((t==m||"body"==t.name)&&a&&(!t.name||CKEDITOR.dtd[t.name][a])){var n,o;return(n=e.attributes&&(o=e.attributes["data-cke-real-element-type"])?o:e.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!e.isOrphan||e.type==CKEDITOR.NODE_TEXT}}function d(t,e){return t in CKEDITOR.dtd.$listItem||t in CKEDITOR.dtd.$tableContent?t==e||"dt"==t&&"dd"==e||"dd"==t&&"dt"==e:!1}var u=new CKEDITOR.htmlParser,m=e instanceof CKEDITOR.htmlParser.element?e:"string"==typeof e?new CKEDITOR.htmlParser.element(e):new CKEDITOR.htmlParser.fragment,p=[],f=[],h=m,g="textarea"==m.name,C="pre"==m.name;u.onTagOpen=function(t,e,n,o){e=new CKEDITOR.htmlParser.element(t,e);e.isUnknown&&n&&(e.isEmpty=!0);e.isOptionalClose=o;if(A(e))p.push(e);else{if("pre"==t)C=!0;else{if("br"==t&&C){h.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==t&&(g=!0)}if("br"==t)f.push(e);else{for(;!(o=(n=h.name)?CKEDITOR.dtd[n]||(h._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):b,e.isUnknown||h.isUnknown||o[t]);)if(h.isOptionalClose)u.onTagClose(n);else if(t in v&&n in v)n=h.children,(n=n[n.length-1])&&"li"==n.name||l(n=new CKEDITOR.htmlParser.element("li"),h),!e.returnPoint&&(e.returnPoint=h),h=n;else if(t in CKEDITOR.dtd.$listItem&&!d(t,n))u.onTagOpen("li"==t?"ul":"dl",{},0,1);else if(n in E&&!d(t,n))!e.returnPoint&&(e.returnPoint=h),h=h.parent;else if(n in CKEDITOR.dtd.$inline&&p.unshift(h),h.parent)l(h,h.parent,1);else{e.isOrphan=1;break}i(t);s();e.parent=h;e.isEmpty?l(e):h=e}}};u.onTagClose=function(t){for(var e=p.length-1;0<=e;e--)if(t==p[e].name){p.splice(e,1);return}for(var n=[],o=[],i=h;i!=m&&i.name!=t;)i._.isBlockLike||o.unshift(i),n.push(i),i=i.returnPoint||i.parent;if(i!=m){for(e=0;e<n.length;e++){var r=n[e];l(r,r.parent)}h=i;i._.isBlockLike&&s();l(i,i.parent);i==h&&(h=h.parent);p=p.concat(o)}"body"==t&&(a=!1)};u.onText=function(t){if(!(h._.hasInlineStarted&&!f.length||C||g)&&(t=CKEDITOR.tools.ltrim(t),0===t.length))return;var e=h.name,n=e?CKEDITOR.dtd[e]||(h._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):b;if(!g&&!n["#"]&&e in E)u.onTagOpen(o[e]||""),u.onText(t);else{s();i();C||g||(t=t.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));t=new CKEDITOR.htmlParser.text(t);if(c(h,t))this.onTagOpen(a,{},0,1);h.add(t)}};u.onCDATA=function(t){h.add(new CKEDITOR.htmlParser.cdata(t))};u.onComment=function(t){s();i();h.add(new CKEDITOR.htmlParser.comment(t))};u.parse(t);for(s();h!=m;)l(h,h.parent,1);r(m);return m};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(t,e){isNaN(e)&&(e=this.children.length);var n=0<e?this.children[e-1]:null;if(n){if(t._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT&&(n.value=CKEDITOR.tools.rtrim(n.value),0===n.value.length)){this.children.pop();this.add(t);return}n.next=t}t.previous=n;t.parent=this;this.children.splice(e,0,t);this._.hasInlineStarted||(this._.hasInlineStarted=t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&!t._.isBlockLike)},filter:function(t,e){e=this.getFilterContext(e);t.onRoot(e,this);this.filterChildren(t,!1,e)},filterChildren:function(t,e,n){if(this.childrenFilteredBy!=t.id){n=this.getFilterContext(n);if(e&&!this.parent)t.onRoot(n,this);this.childrenFilteredBy=t.id;for(e=0;e<this.children.length;e++)!1===this.children[e].filter(t,n)&&e--}},writeHtml:function(t,e){e&&this.filter(e);this.writeChildrenHtml(t)},writeChildrenHtml:function(t,e,n){var o=this.getFilterContext();if(n&&!this.parent&&e)e.onRoot(o,this);e&&this.filterChildren(e,!1,o);e=0;n=this.children;for(o=n.length;e<o;e++)n[e].writeHtml(t)},forEach:function(t,e,n){if(!(n||e&&this.type!=e))var o=t(this);if(!1!==o){n=this.children;for(var i=0;i<n.length;i++)o=n[i],o.type==CKEDITOR.NODE_ELEMENT?o.forEach(t,e):e&&o.type!=e||t(o)}},getFilterContext:function(t){return t||{}}}})();"use strict";(function(){function a(){this.rules=[]}function o(t,e,n,o){var i,r;for(i in e)(r=t[i])||(r=t[i]=new a),r.add(e[i],n,o)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new a;this.attributeNameRules=new a;this.elementsRules={};this.attributesRules={};this.textRules=new a;this.commentRules=new a;this.rootRules=new a;t&&this.addRules(t,10)},proto:{addRules:function(t,e){var n;"number"==typeof e?n=e:e&&"priority"in e&&(n=e.priority);"number"!=typeof n&&(n=10);"object"!=typeof e&&(e={});t.elementNames&&this.elementNameRules.addMany(t.elementNames,n,e);t.attributeNames&&this.attributeNameRules.addMany(t.attributeNames,n,e);t.elements&&o(this.elementsRules,t.elements,n,e);t.attributes&&o(this.attributesRules,t.attributes,n,e);t.text&&this.textRules.add(t.text,n,e);t.comment&&this.commentRules.add(t.comment,n,e);t.root&&this.rootRules.add(t.root,n,e)},applyTo:function(t){t.filter(this)},onElementName:function(t,e){return this.elementNameRules.execOnName(t,e)},onAttributeName:function(t,e){return this.attributeNameRules.execOnName(t,e)},onText:function(t,e,n){return this.textRules.exec(t,e,n)},onComment:function(t,e,n){return this.commentRules.exec(t,e,n)},onRoot:function(t,e){return this.rootRules.exec(t,e)},onElement:function(t,e){for(var n=[this.elementsRules["^"],this.elementsRules[e.name],this.elementsRules.$],o,i=0;3>i;i++)if(o=n[i]){o=o.exec(t,e,this);if(!1===o)return null;if(o&&o!=e)return this.onNode(t,o);if(e.parent&&!e.name)break}return e},onNode:function(t,e){var n=e.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(t,e):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(t,e.value)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(t,e.value)):null},onAttribute:function(t,e,n,o){return(n=this.attributesRules[n])?n.exec(t,o,e,this):o}}});CKEDITOR.htmlParser.filterRulesGroup=a;a.prototype={add:function(t,e,n){this.rules.splice(this.findIndex(e),0,{value:t,priority:e,options:n})},addMany:function(t,e,n){for(var o=[this.findIndex(e),0],i=0,r=t.length;i<r;i++)o.push({value:t[i],priority:e,options:n});this.rules.splice.apply(this.rules,o)},findIndex:function(t){for(var e=this.rules,n=e.length-1;0<=n&&t<e[n].priority;)n--;return n+1},exec:function(t,e){var n=e instanceof CKEDITOR.htmlParser.node||e instanceof CKEDITOR.htmlParser.fragment,o=Array.prototype.slice.call(arguments,1),i=this.rules,r=i.length,a,s,l,c;for(c=0;c<r;c++)if(n&&(a=e.type,s=e.name),l=i[c],!(t.nonEditable&&!l.options.applyToAll||t.nestedEditable&&l.options.excludeNestedEditable)){l=l.value.apply(null,o);if(!1===l||n&&l&&(l.name!=s||l.type!=a))return l;null!=l&&(o[0]=e=l)}return e},execOnName:function(t,e){for(var n=0,o=this.rules,i=o.length,r;e&&n<i;n++)r=o[n],t.nonEditable&&!r.options.applyToAll||t.nestedEditable&&r.options.excludeNestedEditable||(e=e.replace(r.value[0],r.value[1]));return e}}})();(function(){function n(t,e){function s(t){return t||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function n(r,a){return function(t){if(t.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=[],n=d(t),o,i;if(n)for(l(n,1)&&e.push(n);n;)m(n)&&(o=u(n))&&l(o)&&((i=u(o))&&!m(i)?e.push(o):(s(c).insertAfter(o),o.remove())),n=n.previous;for(n=0;n<e.length;n++)e[n].remove();if(e=!r||!1!==("function"==typeof a?a(t):a))c||CKEDITOR.env.needsBrFiller||t.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?c||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||t.name in CKEDITOR.dtd.tr||t.name in CKEDITOR.dtd.$listItem)?(e=d(t),e=!e||"form"==t.name&&"input"==e.name):e=!1:e=!1;e&&t.add(s(r))}}}function l(t,e){if((!c||CKEDITOR.env.needsBrFiller)&&t.type==CKEDITOR.NODE_ELEMENT&&"br"==t.name&&!t.attributes["data-cke-eol"])return!0;var n;return t.type==CKEDITOR.NODE_TEXT&&(n=t.value.match(A))&&(n.index&&(new CKEDITOR.htmlParser.text(t.value.substring(0,n.index)).insertBefore(t),t.value=n[0]),!CKEDITOR.env.needsBrFiller&&c&&(!e||t.parent.name in i)||!c&&((n=t.previous)&&"br"==n.name||!n||m(n)))?!0:!1}var o={elements:{}},c="html"==e,i=CKEDITOR.tools.extend({},b),r;for(r in i)"#"in v[r]||delete i[r];for(r in i)o.elements[r]=n(c,t.config.fillEmptyBlocks);o.root=n(c,!1);o.elements.br=function(o){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=t.attributes;if("data-cke-bogus"in e||"data-cke-eol"in e)delete e["data-cke-bogus"];else{for(e=t.next;e&&a(e);)e=e.next;var n=u(t);!e&&m(t.parent)?p(t.parent,s(o)):m(e)&&n&&!m(n)&&s(o).insertBefore(e)}}}}(c);return o}function r(t,e){return t!=CKEDITOR.ENTER_BR&&!1!==e?t==CKEDITOR.ENTER_DIV?"div":"p":!1}function d(t){for(t=t.children[t.children.length-1];t&&a(t);)t=t.previous;return t}function u(t){for(t=t.previous;t&&a(t);)t=t.previous;return t}function a(t){return t.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(t.value)||t.type==CKEDITOR.NODE_ELEMENT&&t.attributes["data-cke-bookmark"]}function m(t){return t&&(t.type==CKEDITOR.NODE_ELEMENT&&t.name in b||t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function p(t,e){var n=t.children[t.children.length-1];t.children.push(e);e.parent=t;n&&(n.next=e,e.previous=n)}function t(t){t=t.attributes;"false"!=t.contenteditable&&(t["data-cke-editable"]=t.contenteditable?"true":1);t.contenteditable="false"}function e(t){t=t.attributes;switch(t["data-cke-editable"]){case"true":t.contenteditable="true";break;case"1":delete t.contenteditable}}function s(t){return t.replace(o,function(t,e,n){return"<"+e+n.replace(O,function(t,e){return D.test(e)&&-1==n.indexOf("data-cke-saved-"+e)?" data-cke-saved-"+t+" data-cke-"+CKEDITOR.rnd+"-"+t:t})+">"})}function l(t,e){return t.replace(e,function(t,e,n){0===t.indexOf("<textarea")&&(t=e+h(n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>");return"<cke:encoded>"+encodeURIComponent(t)+"</cke:encoded>"})}function c(t){return t.replace(S,function(t,e){return decodeURIComponent(e)})}function f(t){return t.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(t){return"\x3c!--"+E+"{C}"+encodeURIComponent(t).replace(/--/g,"%2D%2D")+"--\x3e"})}function h(t){return t.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(t,e){return decodeURIComponent(e)})}function g(t,e){var n=e._.dataStore;return t.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(t,e){return decodeURIComponent(e)}).replace(/\{cke_protected_(\d+)\}/g,function(t,e){return n&&n[e]||""})}function C(t,i){var o=[],e=i.config.protectedSource,n=i._.dataStore||(i._.dataStore={id:1}),r=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,e=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(e);t=t.replace(/\x3c!--[\s\S]*?--\x3e/g,function(t){return"\x3c!--{cke_tempcomment}"+(o.push(t)-1)+"--\x3e"});for(var a=0;a<e.length;a++)t=t.replace(e[a],function(t){t=t.replace(r,function(t,e,n){return o[n]});return/cke_temp(comment)?/.test(t)?t:"\x3c!--{cke_temp}"+(o.push(t)-1)+"--\x3e"});t=t.replace(r,function(t,e,n){return"\x3c!--"+E+(e?"{C}":"")+encodeURIComponent(o[n]).replace(/--/g,"%2D%2D")+"--\x3e"});t=t.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(t){return t.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(t,e){n[n.id]=decodeURIComponent(e);return"{cke_protected_"+n.id+++"}"})});return t=t.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(t,e,n,o){return"<"+e+n+">"+g(h(o),i)+"</"+e+">"})}CKEDITOR.htmlDataProcessor=function(i){var t,e,o=this;this.editor=i;this.dataFilter=t=new CKEDITOR.htmlParser.filter;this.htmlFilter=e=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;t.addRules(y);t.addRules(T,{applyToAll:!0});t.addRules(n(i,"data"),{applyToAll:!0});e.addRules(k);e.addRules(I,{applyToAll:!0});e.addRules(n(i,"html"),{applyToAll:!0});i.on("toHtml",function(t){t=t.data;var e=t.dataValue,n,e=C(e,i),e=l(e,_),e=s(e),e=l(e,R),e=e.replace(w,"$1cke:$2"),e=e.replace(x,"<cke:$1$2></cke:$1>"),e=e.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),e=e.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");n=t.context||i.editable().getName();var o;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==n&&(n="div",e="<pre>"+e+"</pre>",o=1);n=i.document.createElement(n);n.setHtml("a"+e);e=n.getHtml().substr(1);e=e.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");o&&(e=e.replace(/^<pre>|<\/pre>$/gi,""));e=e.replace(K,"$1$2");e=c(e);e=h(e);n=!1===t.fixForBody?!1:r(t.enterMode,i.config.autoParagraph);e=CKEDITOR.htmlParser.fragment.fromHtml(e,t.context,n);n&&(o=e,!o.children.length&&CKEDITOR.dtd[o.name][n]&&(n=new CKEDITOR.htmlParser.element(n),o.add(n)));t.dataValue=e},null,null,5);i.on("toHtml",function(t){t.data.filter.applyTo(t.data.dataValue,!0,t.data.dontFilter,t.data.enterMode)&&i.fire("dataFiltered")},null,null,6);i.on("toHtml",function(t){t.data.dataValue.filterChildren(o.dataFilter,!0)},null,null,10);i.on("toHtml",function(t){t=t.data;var e=t.dataValue,n=new CKEDITOR.htmlParser.basicWriter;e.writeChildrenHtml(n);e=n.getHtml(!0);t.dataValue=f(e)},null,null,15);i.on("toDataFormat",function(t){var e=t.data.dataValue;t.data.enterMode!=CKEDITOR.ENTER_BR&&(e=e.replace(/^<br *\/?>/i,""));t.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(e,t.data.context,r(t.data.enterMode,i.config.autoParagraph))},null,null,5);i.on("toDataFormat",function(t){t.data.dataValue.filterChildren(o.htmlFilter,!0)},null,null,10);i.on("toDataFormat",function(t){t.data.filter.applyTo(t.data.dataValue,!1,!0)},null,null,11);i.on("toDataFormat",function(t){var e=t.data.dataValue,n=o.writer;n.reset();e.writeChildrenHtml(n);e=n.getHtml(!0);e=h(e);e=g(e,i);t.data.dataValue=e},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(t,e,n,o){var i=this.editor,r,a,s,l;e&&"object"==typeof e?(r=e.context,n=e.fixForBody,o=e.dontFilter,a=e.filter,s=e.enterMode,l=e.protectedWhitespaces):r=e;r||null===r||(r=i.editable().getName());return i.fire("toHtml",{dataValue:t,context:r,fixForBody:n,dontFilter:o,filter:a||i.filter,enterMode:s||i.enterMode,protectedWhitespaces:l}).dataValue},toDataFormat:function(t,e){var n,o,i;e&&(n=e.context,o=e.filter,i=e.enterMode);n||null===n||(n=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:t,filter:o||this.editor.filter,context:n,enterMode:i||this.editor.enterMode}).dataValue}};var A=/(?:&nbsp;|\xa0)$/,E="{cke_protected}",v=CKEDITOR.dtd,i="caption colgroup col thead tfoot tbody".split(" "),b=CKEDITOR.tools.extend({},v.$blockLimit,v.$block),y={elements:{input:t,textarea:t}},T={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},k={elements:{embed:function(t){var e=t.parent;if(e&&"object"==e.name){var n=e.attributes.width,e=e.attributes.height;n&&(t.attributes.width=n);e&&(t.attributes.height=e)}},a:function(t){var e=t.attributes;if(!(t.children.length||e.name||e.id||t.attributes["data-cke-saved-name"]))return!1}}},I={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(t){var e=t.attributes;if(e){if(e["data-cke-temp"])return!1;for(var n=["name","href","src"],o,i=0;i<n.length;i++)o="data-cke-saved-"+n[i],o in e&&delete e[n[i]]}return t},table:function(t){t.children.slice(0).sort(function(t,e){var n,o;t.type==CKEDITOR.NODE_ELEMENT&&e.type==t.type&&(n=CKEDITOR.tools.indexOf(i,t.name),o=CKEDITOR.tools.indexOf(i,e.name));-1<n&&-1<o&&n!=o||(n=t.parent?t.getIndex():-1,o=e.parent?e.getIndex():-1);return n>o?1:-1})},param:function(t){t.children=[];t.isEmpty=!0;return t},span:function(t){"Apple-style-span"==t.attributes["class"]&&delete t.name},html:function(t){delete t.attributes.contenteditable;delete t.attributes["class"]},body:function(t){delete t.attributes.spellcheck;delete t.attributes.contenteditable},style:function(t){var e=t.children[0];e&&e.value&&(e.value=CKEDITOR.tools.trim(e.value));t.attributes.type||(t.attributes.type="text/css")},title:function(t){var e=t.children[0];!e&&p(t,e=new CKEDITOR.htmlParser.text);e.value=t.attributes["data-cke-title"]||""},input:e,textarea:e},attributes:{class:function(t){return CKEDITOR.tools.ltrim(t.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(I.attributes.style=function(t){return t.replace(/(^|;)([^\:]+)/g,function(t){return t.toLowerCase()})});var o=/<(a|area|img|input|source)\b([^>]*)>/gi,O=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,D=/^(href|src|name)$/i,R=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,_=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,S=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,w=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,K=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,x=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi})();"use strict";CKEDITOR.htmlParser.element=function(t,e){this.name=t;this.attributes=e||{};this.children=[];var n=t||"",o=n.match(/^cke:(.*)/);o&&(n=o[1]);n=!!(CKEDITOR.dtd.$nonBodyContent[n]||CKEDITOR.dtd.$block[n]||CKEDITOR.dtd.$listItem[n]||CKEDITOR.dtd.$tableContent[n]||CKEDITOR.dtd.$nonEditable[n]||"br"==n);this.isEmpty=!!CKEDITOR.dtd.$empty[t];this.isUnknown=!CKEDITOR.dtd[t];this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}};CKEDITOR.htmlParser.cssStyle=function(t){var o={};((t instanceof CKEDITOR.htmlParser.element?t.attributes.style:t)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(t,e,n){"font-family"==e&&(n=n.replace(/["']/g,""));o[e.toLowerCase()]=n});return{rules:o,populate:function(t){var e=this.toString();e&&(t instanceof CKEDITOR.dom.element?t.setAttribute("style",e):t instanceof CKEDITOR.htmlParser.element?t.attributes.style=e:t.style=e)},toString:function(){var t=[],e;for(e in o)o[e]&&t.push(e,":",o[e],";");return t.join("")}}};(function(){function o(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof e?t.name==e:t.name in e)}}var s=function(t,e){t=t[0];e=e[0];return t<e?-1:t>e?1:0},t=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:t.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(t,e){var n=this,o,i;e=n.getFilterContext(e);if(e.off)return!0;if(!n.parent)t.onRoot(e,n);for(;;){o=n.name;if(!(i=t.onElementName(e,o)))return this.remove(),!1;n.name=i;if(!(n=t.onElement(e,n)))return this.remove(),!1;if(n!==this)return this.replaceWith(n),!1;if(n.name==o)break;if(n.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(n),!1;if(!n.name)return this.replaceWithChildren(),!1}o=n.attributes;var r,a;for(r in o){for(i=o[r];;)if(a=t.onAttributeName(e,r))if(a!=r)delete o[r],r=a;else break;else{delete o[r];break}a&&(!1===(i=t.onAttribute(e,n,a,i))?delete o[a]:o[a]=i)}n.isEmpty||this.filterChildren(t,!1,e);return!0},filterChildren:t.filterChildren,writeHtml:function(t,e){e&&this.filter(e);var n=this.name,o=[],i=this.attributes,r,a;t.openTag(n,i);for(r in i)o.push([r,i[r]]);t.sortAttributes&&o.sort(s);r=0;for(a=o.length;r<a;r++)i=o[r],t.attribute(i[0],i[1]);t.openTagClose(n,this.isEmpty);this.writeChildrenHtml(t);this.isEmpty||t.closeTag(n)},writeChildrenHtml:t.writeChildrenHtml,replaceWithChildren:function(){for(var t=this.children,e=t.length;e;)t[--e].insertAfter(this);this.remove()},forEach:t.forEach,getFirst:function(t){if(!t)return this.children.length?this.children[0]:null;"function"!=typeof t&&(t=o(t));for(var e=0,n=this.children.length;e<n;++e)if(t(this.children[e]))return this.children[e];return null},getHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(t);return t.getHtml()},setHtml:function(t){t=this.children=CKEDITOR.htmlParser.fragment.fromHtml(t).children;for(var e=0,n=t.length;e<n;++e)t[e].parent=this},getOuterHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;this.writeHtml(t);return t.getHtml()},split:function(t){for(var e=this.children.splice(t,this.children.length-t),n=this.clone(),o=0;o<e.length;++o)e[o].parent=n;n.children=e;e[0]&&(e[0].previous=null);0<t&&(this.children[t-1].next=null);this.parent.add(n,this.getIndex()+1);return n},find:function(t,e){void 0===e&&(e=!1);var n=[],o;for(o=0;o<this.children.length;o++){var i=this.children[o];"function"==typeof t&&t(i)?n.push(i):"string"==typeof t&&i.name===t&&n.push(i);e&&i.find&&(n=n.concat(i.find(t,e)))}return n},addClass:function(t){if(!this.hasClass(t)){var e=this.attributes["class"]||"";this.attributes["class"]=e+(e?" ":"")+t}},removeClass:function(t){var e=this.attributes["class"];e&&((e=CKEDITOR.tools.trim(e.replace(new RegExp("(?:\\s+|^)"+t+"(?:\\s+|$)")," ")))?this.attributes["class"]=e:delete this.attributes["class"])},hasClass:function(t){var e=this.attributes["class"];return e?new RegExp("(?:^|\\s)"+t+"(?=\\s|$)").test(e):!1},getFilterContext:function(t){var e=[];t||(t={off:!1,nonEditable:!1,nestedEditable:!1});t.off||"off"!=this.attributes["data-cke-processor"]||e.push("off",!0);t.nonEditable||"false"!=this.attributes.contenteditable?t.nonEditable&&!t.nestedEditable&&"true"==this.attributes.contenteditable&&e.push("nestedEditable",!0):e.push("nonEditable",!0);if(e.length){t=CKEDITOR.tools.copy(t);for(var n=0;n<e.length;n+=2)t[e[n]]=e[n+1]}return t}},!0)})();(function(){var n={},o=/{([^}]+)}/g,i=/([\\'])/g,r=/\n/g,a=/\r/g;CKEDITOR.template=function(t){if(n[t])this.output=n[t];else{var e=t.replace(i,"\\$1").replace(r,"\\n").replace(a,"\\r").replace(o,function(t,e){return"',data['"+e+"']==undefined?'{"+e+"}':data['"+e+"'],'"});this.output=n[t]=Function("data","buffer","return buffer?buffer.push('"+e+"'):['"+e+"'].join('');")}}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(t){CKEDITOR.instances[t.name]=t;t.on("focus",function(){CKEDITOR.currentInstance!=t&&(CKEDITOR.currentInstance=t,CKEDITOR.fire("currentInstance"))});t.on("blur",function(){CKEDITOR.currentInstance==t&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))});CKEDITOR.fire("instance",null,t)};CKEDITOR.remove=function(t){delete CKEDITOR.instances[t.name]};(function(){var o={};CKEDITOR.addTemplate=function(t,e){var n=o[t];if(n)return n;n={name:t,source:e};CKEDITOR.fire("template",n);return o[t]=new CKEDITOR.template(n.source)};CKEDITOR.getTemplate=function(t){return o[t]}})();(function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)};CKEDITOR.getCss=function(){return e.join("\n")}})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;(function(){CKEDITOR.inline=function(t,e){if(!CKEDITOR.env.isCompatible)return null;t=CKEDITOR.dom.element.get(t);if(t.getEditor())throw'The editor instance "'+t.getEditor().name+'" is already attached to the provided element.';var n=new CKEDITOR.editor(e,t,CKEDITOR.ELEMENT_MODE_INLINE),o=t.is("textarea")?t:null;o?(n.setData(o.getValue(),null,!0),t=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!n.readOnly+'" class="cke_textarea_inline">'+o.getValue()+"</div>",CKEDITOR.document),t.insertAfter(o),o.hide(),o.$.form&&n._attachToForm()):n.setData(t.getHtml(),null,!0);n.on("loaded",function(){n.fire("uiReady");n.editable(t);n.container=t;n.ui.contentsElement=t;n.setData(n.getData(1));n.resetDirty();n.fire("contentDom");n.mode="wysiwyg";n.fire("mode");n.status="ready";n.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,n)},null,null,1e4);n.on("destroy",function(){o&&(n.container.clearCustomData(),n.container.remove(),o.show());n.element.clearCustomData();delete n.element});return n};CKEDITOR.inlineAll=function(){var t,e,n;for(n in CKEDITOR.dtd.$editable)for(var o=CKEDITOR.document.getElementsByTag(n),i=0,r=o.count();i<r;i++)t=o.getItem(i),"true"==t.getAttribute("contenteditable")&&(e={element:t,config:{}},!1!==CKEDITOR.fire("inline",e)&&CKEDITOR.inline(t,e.config))};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass="ckeditor";(function(){function o(t,e,n,o){if(!CKEDITOR.env.isCompatible)return null;t=CKEDITOR.dom.element.get(t);if(t.getEditor())throw'The editor instance "'+t.getEditor().name+'" is already attached to the provided element.';var i=new CKEDITOR.editor(e,t,o);o==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.setStyle("visibility","hidden"),i._.required=t.hasAttribute("required"),t.removeAttribute("required"));n&&i.setData(n,null,!0);i.on("loaded",function(){a(i);o==CKEDITOR.ELEMENT_MODE_REPLACE&&i.config.autoUpdateElement&&t.$.form&&i._attachToForm();i.setMode(i.config.startupMode,function(){i.resetDirty();i.status="ready";i.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,i)})});i.on("destroy",r);return i}function r(){var t=this.container,e=this.element;t&&(t.clearCustomData(),t.remove());e&&(e.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.show(),this._.required&&e.setAttribute("required","required")),delete this.element)}function a(t){var e=t.name,n=t.element,o=t.elementMode,i=t.fire("uiSpace",{space:"top",html:""}).html,r=t.fire("uiSpace",{space:"bottom",html:""}).html,a=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(t.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(t.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),e=CKEDITOR.dom.element.createFromHtml(a.output({id:t.id,name:e,langDir:t.lang.dir,langCode:t.langCode,voiceLabel:t.title,topHtml:i?'<span id="'+t.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+i+"</span>":"",contentId:t.ui.spaceId("contents"),bottomHtml:r?'<span id="'+t.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+r+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));o==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),e.insertAfter(n)):n.append(e);t.container=e;t.ui.contentsElement=t.ui.space("contents");i&&t.ui.space("top").unselectable();r&&t.ui.space("bottom").unselectable();n=t.config.width;o=t.config.height;n&&e.setStyle("width",CKEDITOR.tools.cssLength(n));o&&t.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(o));e.disableContextMenu();CKEDITOR.env.webkit&&e.on("focus",function(){t.focus()});t.fireOnce("uiReady")}CKEDITOR.replace=function(t,e){return o(t,e,null,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.appendTo=function(t,e,n){return o(t,e,n,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var t=document.getElementsByTagName("textarea"),e=0;e<t.length;e++){var n=null,o=t[e];if(o.name||o.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(o.className))continue}else if("function"==typeof arguments[0]&&(n={},!1===arguments[0](o,n)))continue;this.replace(o,n)}}};CKEDITOR.editor.prototype.addMode=function(t,e){(this._.modes||(this._.modes={}))[t]=e};CKEDITOR.editor.prototype.setMode=function(t,e){var n=this,o=this._.modes;if(t!=n.mode&&o&&o[t]){n.fire("beforeSetMode",t);if(n.mode){var i=n.checkDirty(),o=n._.previousModeData,r,a=0;n.fire("beforeModeUnload");n.editable(0);n._.previousMode=n.mode;n._.previousModeData=r=n.getData(1);"source"==n.mode&&o==r&&(n.fire("lockSnapshot",{forceUpdate:!0}),a=1);n.ui.space("contents").setHtml("");n.mode=""}else n._.previousModeData=n.getData(1);this._.modes[t](function(){n.mode=t;void 0!==i&&!i&&n.resetDirty();a?n.fire("unlockSnapshot"):"wysiwyg"==t&&n.fire("saveSnapshot");setTimeout(function(){n.fire("mode");e&&e.call(n)},0)})}};CKEDITOR.editor.prototype.resize=function(t,e,n,o){var i=this.container,r=this.ui.space("contents"),a=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;o=o?this.container.getFirst(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_inner")}):i;o.setSize("width",t,!0);a&&(a.style.width="1%");var s=(o.$.offsetHeight||0)-(r.$.clientHeight||0),i=Math.max(e-(n?0:s),0);e=n?e+s:e;r.setStyle("height",i+"px");a&&(a.style.width="100%");this.fire("resize",{outerHeight:e,contentsHeight:i,outerWidth:t||o.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(t){return t?this.ui.space("contents"):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode="wysiwyg";(function(){function o(t){var e=t.editor,n=t.data.path,o=n.blockLimit,i=t.data.selection,r=i.getRanges()[0],a;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(i=s(i,n))i.appendBogus(),a=CKEDITOR.env.ie;M(e,n.block,o)&&r.collapsed&&!r.getCommonAncestor().isReadOnly()&&(n=r.clone(),n.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),o=new CKEDITOR.dom.walker(n),o.guard=function(t){return!B(t)||t.type==CKEDITOR.NODE_COMMENT||t.isReadOnly()},!o.checkForward()||n.checkStartOfBlock()&&n.checkEndOfBlock())&&(e=r.fixBlock(!0,e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(e=e.getFirst(B))&&e.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(e.getText()).match(/^(?:&nbsp;|\xa0)$/)&&e.remove(),a=1,t.cancel());a&&r.select()}function s(t,e){if(t.isFake)return 0;var n=e.block||e.blockLimit,o=n&&n.getLast(B);if(!(!n||!n.isBlockBoundary()||o&&o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()||n.is("pre")||n.getBogus()))return n}function r(t){var e=t.data.getTarget();e.is("input")&&(e=e.getAttribute("type"),"submit"!=e&&"reset"!=e||t.data.preventDefault())}function B(t){return m(t)&&c(t)}function i(n,o){return function(t){var e=t.data.$.toElement||t.data.$.fromElement||t.data.$.relatedTarget;(e=e&&e.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(e):null)&&(o.equals(e)||o.contains(e))||n.call(this,t)}}function u(t){function e(n){return function(t,e){e&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(i)&&(o=t);if(!(e||!B(t)||n&&d(t)))return!1}}var o,n=t.getRanges()[0];t=t.root;var i={table:1,ul:1,ol:1,dl:1};if(n.startPath().contains(i)){var r=n.clone();r.collapse(1);r.setStartAt(t,CKEDITOR.POSITION_AFTER_START);t=new CKEDITOR.dom.walker(r);t.guard=e();t.checkBackward();if(o)return r=n.clone(),r.collapse(),r.setEndAt(o,CKEDITOR.POSITION_AFTER_END),t=new CKEDITOR.dom.walker(r),t.guard=e(!0),o=!1,t.checkForward(),o}return null}function M(t,e,n){return!1!==t.config.autoParagraph&&t.activeEnterMode!=CKEDITOR.ENTER_BR&&(t.editable().equals(n)&&!e||e&&"true"==e.getAttribute("contenteditable"))}function P(t){return t.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==t.config.autoParagraph?t.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function a(t){var e=t.editor;e.getSelection().scrollIntoView();setTimeout(function(){e.fire("saveSnapshot")},0)}function l(t,e,n){var o=t.getCommonAncestor(e);for(e=t=n?e:t;(t=t.getParent())&&!o.equals(t)&&1==t.getChildCount();)e=t;e.remove()}var m,c,p,d,f,h,g,C,e,A;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(t,e){this.base(e.$||e);this.editor=t;this.status="unloaded";this.hasFocus=!1;this.setup()},proto:{focus:function(){var t;if(CKEDITOR.env.webkit&&!this.hasFocus&&(t=this.editor._.previousActive||this.getDocument().getActive(),this.contains(t))){t.focus();return}CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document)?this.$.focus():this.$.setActive()}catch(t){if(!CKEDITOR.env.ie)throw t}CKEDITOR.env.safari&&!this.isInline()&&(t=CKEDITOR.document.getActive(),t.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(t,e){var n=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(t)&&(t="focus"==t?"focusin":"focusout",e=i(e,this),n[0]=t,n[1]=e);return CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(t){!this._.listeners&&(this._.listeners=[]);var e=Array.prototype.slice.call(arguments,1),e=t.on.apply(t,e);this._.listeners.push(e);return e},clearListeners:function(){var t=this._.listeners;try{for(;t.length;)t.pop().removeListener()}catch(t){}},restoreAttrs:function(){var t=this._.attrChanges,e,n;for(n in t)t.hasOwnProperty(n)&&(e=t[n],null!==e?this.setAttribute(n,e):this.removeAttribute(n))},attachClass:function(t){var e=this.getCustomData("classes");this.hasClass(t)||(!e&&(e=[]),e.push(t),this.setCustomData("classes",e),this.addClass(t))},changeAttr:function(t,e){var n=this.getAttribute(t);e!==n&&(!this._.attrChanges&&(this._.attrChanges={}),t in this._.attrChanges||(this._.attrChanges[t]=n),this.setAttribute(t,e))},insertText:function(t){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(t),"text")},transformPlainTextToHtml:function(t){var e=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(t,e)},insertHtml:function(t,e,n){var o=this.editor;o.focus();o.fire("saveSnapshot");n||(n=o.getSelection().getRanges()[0]);h(this,e||"html",t,n);n.select();a(this);this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(t,e,n){h(this,n||"html",t,e);this.editor.fire("afterInsertHtml",{intoRange:e})},insertElement:function(t,e){var n=this.editor;n.focus();n.fire("saveSnapshot");var o=n.activeEnterMode,n=n.getSelection(),i=t.getName(),i=CKEDITOR.dtd.$block[i];e||(e=n.getRanges()[0]);this.insertElementIntoRange(t,e)&&(e.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),i&&((i=t.getNext(function(t){return B(t)&&!d(t)}))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$block)?i.getDtd()["#"]?e.moveToElementEditStart(i):e.moveToElementEditEnd(t):i||o==CKEDITOR.ENTER_BR||(i=e.fixBlock(!0,o==CKEDITOR.ENTER_DIV?"div":"p"),e.moveToElementEditStart(i))));n.selectRanges([e]);a(this)},insertElementIntoSelection:function(t){this.insertElement(t)},insertElementIntoRange:function(t,e){var n=this.editor,o=n.config.enterMode,i=t.getName(),r=CKEDITOR.dtd.$block[i];if(e.checkReadOnly())return!1;e.deleteContents(1);e.startContainer.type==CKEDITOR.NODE_ELEMENT&&(e.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?g(e):e.startContainer.is(CKEDITOR.dtd.$list)&&C(e));var a,s;if(r)for(;(a=e.getCommonAncestor(0,1))&&(s=CKEDITOR.dtd[a.getName()])&&(!s||!s[i]);)a.getName()in CKEDITOR.dtd.span?e.splitElement(a):e.checkStartOfBlock()&&e.checkEndOfBlock()?(e.setStartBefore(a),e.collapse(!0),a.remove()):e.splitBlock(o==CKEDITOR.ENTER_DIV?"div":"p",n.editable());e.insertNode(t);return!0},setData:function(t,e){e||(t=this.editor.dataProcessor.toHtml(t));this.setHtml(t);this.fixInitialSelection();"unloaded"==this.status&&(this.status="ready");this.editor.fire("dataReady")},getData:function(t){var e=this.getHtml();t||(e=this.editor.dataProcessor.toDataFormat(e));return e},setReadOnly:function(t){this.setAttribute("contenteditable",!t)},detach:function(){this.removeClass("cke_editable");this.status="detached";var t=this.editor;this._.detach();delete t.document;delete t.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function t(){var t=o.getDocument().$,e=t.getSelection(),n;t:if(e.anchorNode&&e.anchorNode==o.$)n=!0;else{if(CKEDITOR.env.webkit&&(n=o.getDocument().getActive())&&n.equals(o)&&!e.anchorNode){n=!0;break t}n=void 0}n&&(n=new CKEDITOR.dom.range(o),n.moveToElementEditStart(o),t=t.createRange(),t.setStart(n.startContainer.$,n.startOffset),t.collapse(!0),e.removeAllRanges(),e.addRange(t))}function e(){var t=o.getDocument().$,e=t.selection,n=o.getDocument().getActive();"None"==e.type&&n.equals(o)&&(e=new CKEDITOR.dom.range(o),t=t.body.createTextRange(),e.moveToElementEditStart(o),e=e.startContainer,e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent()),t.moveToElementText(e.$),t.collapse(!0),t.select())}var o=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks))this.hasFocus&&(this.focus(),e());else if(this.hasFocus)this.focus(),t();else this.once("focus",function(){t()},null,null,-999)},getHtmlFromRange:function(t){if(t.collapsed)return new CKEDITOR.dom.documentFragment(t.document);t={doc:this.getDocument(),range:t.clone()};e.eol.detect(t,this);e.bogus.exclude(t);e.cell.shrink(t);t.fragment=t.range.cloneContents();e.tree.rebuild(t,this);e.eol.fix(t,this);return new CKEDITOR.dom.documentFragment(t.fragment.$)},extractHtmlFromRange:function(t,e){var n=A,o={range:t,doc:t.document},i=this.getHtmlFromRange(t);if(t.collapsed)return t.optimize(),i;t.enlarge(CKEDITOR.ENLARGE_INLINE,1);n.table.detectPurge(o);o.bookmark=t.createBookmark();delete o.range;var r=this.editor.createRange();r.moveToPosition(o.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);o.targetBookmark=r.createBookmark();n.list.detectMerge(o,this);n.table.detectRanges(o,this);n.block.detectMerge(o,this);o.tableContentsRanges?(n.table.deleteRanges(o),t.moveToBookmark(o.bookmark),o.range=t):(t.moveToBookmark(o.bookmark),o.range=t,t.extractContents(n.detectExtractMerge(o)));t.moveToBookmark(o.targetBookmark);t.optimize();n.fixUneditableRangePosition(t);n.list.merge(o,this);n.table.purge(o,this);n.block.merge(o,this);if(e){n=t.startPath();if(o=t.checkStartOfBlock()&&t.checkEndOfBlock()&&n.block&&!t.root.equals(n.block)){t:{var o=n.block.getElementsByTag("span"),r=0,a;if(o)for(;a=o.getItem(r++);)if(!c(a)){o=!0;break t}o=!1}o=!o}o&&(t.moveToPosition(n.block,CKEDITOR.POSITION_BEFORE_START),n.block.remove())}else n.autoParagraph(this.editor,t),p(t.startContainer)&&t.startContainer.appendBogus();t.startContainer.mergeSiblings();return i},setup:function(){var c=this.editor;this.attachListener(c,"beforeGetData",function(){var t=this.getData();this.is("textarea")||!1!==c.config.ignoreEmptyParagraph&&(t=t.replace(f,function(t,e){return e}));c.setData(t,null,1)},this);this.attachListener(c,"getSnapshot",function(t){t.data=this.getData(1)},this);this.attachListener(c,"afterSetData",function(){this.setData(c.getData(1))},this);this.attachListener(c,"loadSnapshot",function(t){this.setData(t.data,1)},this);this.attachListener(c,"beforeFocus",function(){var t=c.getSelection();(t=t&&t.getNative())&&"Control"==t.type||this.focus()},this);this.attachListener(c,"insertHtml",function(t){this.insertHtml(t.data.dataValue,t.data.mode,t.data.range)},this);this.attachListener(c,"insertElement",function(t){this.insertElement(t.data)},this);this.attachListener(c,"insertText",function(t){this.insertText(t.data)},this);this.setReadOnly(c.readOnly);this.attachClass("cke_editable");c.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):c.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&c.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+c.config.contentsLangDirection);c.keystrokeHandler.blockedKeystrokes[8]=+c.readOnly;c.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);if(CKEDITOR.env.webkit)this.on("scroll",function(){c._.previousScrollTop=c.editable().$.scrollTop},null,null,-1);if(CKEDITOR.env.edge&&14<CKEDITOR.env.version){var e=function(){var t=c.editable();null!=c._.previousScrollTop&&t.getDocument().equals(CKEDITOR.document)&&(t.$.scrollTop=c._.previousScrollTop,c._.previousScrollTop=null,this.removeListener("scroll",e))};this.on("scroll",e)}c.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,c.once("contentDom",function(){c.focusManager.focus(this)},this));this.isInline()&&this.changeAttr("tabindex",c.tabIndex);if(!this.is("textarea")){c.document=this.getDocument();c.window=this.getWindow();var t=c.document;this.changeAttr("spellcheck",!c.config.disableNativeSpellChecker);var n=c.config.contentsLangDirection;this.getDirection(1)!=n&&this.changeAttr("dir",n);var o=CKEDITOR.getCss();if(o){var n=t.getHead(),i=n.getCustomData("stylesheet");i?o!=i.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?i.$.styleSheet.cssText=o:i.setText(o)):(o=t.appendStyleText(o),o=new CKEDITOR.dom.element(o.ownerNode||o.owningElement),n.setCustomData("stylesheet",o),o.data("cke-temp",1))}n=t.getCustomData("stylesheet_ref")||0;t.setCustomData("stylesheet_ref",n+1);this.setCustomData("cke_includeReadonly",!c.config.disableReadonlyStyling);this.attachListener(this,"click",function(t){t=t.data;var e=new CKEDITOR.dom.elementPath(t.getTarget(),this).contains("a");e&&2!=t.$.button&&e.isReadOnly()&&t.preventDefault()});var d={8:1,46:1};this.attachListener(c,"key",function(t){if(c.readOnly)return!0;var e=t.data.domEvent.getKey(),n;if(e in d){t=c.getSelection();var o,i=t.getRanges()[0],r=i.startPath(),a,s,l,e=8==e;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(o=t.getSelectedElement())||(o=u(t))?(c.fire("saveSnapshot"),i.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o.remove(),i.select(),c.fire("saveSnapshot"),n=1):i.collapsed&&((a=r.block)&&(l=a[e?"getPrevious":"getNext"](m))&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("table")&&i[e?"checkStartOfBlock":"checkEndOfBlock"]()?(c.fire("saveSnapshot"),i[e?"checkEndOfBlock":"checkStartOfBlock"]()&&a.remove(),i["moveToElementEdit"+(e?"End":"Start")](l),i.select(),c.fire("saveSnapshot"),n=1):r.blockLimit&&r.blockLimit.is("td")&&(s=r.blockLimit.getAscendant("table"))&&i.checkBoundaryOfElement(s,e?CKEDITOR.START:CKEDITOR.END)&&(l=s[e?"getPrevious":"getNext"](m))?(c.fire("saveSnapshot"),i["moveToElementEdit"+(e?"End":"Start")](l),i.checkStartOfBlock()&&i.checkEndOfBlock()?l.remove():i.select(),c.fire("saveSnapshot"),n=1):(s=r.contains(["td","th","caption"]))&&i.checkBoundaryOfElement(s,e?CKEDITOR.START:CKEDITOR.END)&&(n=1))}return!n});c.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(t){t.data.getKeystroke()in d&&!this.getFirst(B)&&(this.appendBogus(),t=c.createRange(),t.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())});this.attachListener(this,"dblclick",function(t){if(c.readOnly)return!1;t={element:t.data.getTarget()};c.fire("doubleclick",t)});CKEDITOR.env.ie&&this.attachListener(this,"click",r);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(t){var e=t.data.getTarget();e.is("img","hr","input","textarea","select")&&!e.isReadOnly()&&(c.getSelection().selectElement(e),e.is("input","textarea","select")&&t.data.preventDefault())});CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(t){(t=t.data.getTarget())&&t.is("img")&&c.getSelection().selectElement(t)});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(t){if(2==t.data.$.button&&(t=t.data.getTarget(),!t.getOuterHtml().replace(f,""))){var e=c.createRange();e.moveToElementEditStart(t);e.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(t){t.data.getTarget().is("input","select")&&t.data.preventDefault()}),this.attachListener(this,"mouseup",function(t){t.data.getTarget().is("input","textarea")&&t.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(c,"key",function(t){if(c.readOnly)return!0;t=t.data.domEvent.getKey();if(t in d){var e=8==t,n=c.getSelection().getRanges()[0];t=n.startPath();if(n.collapsed)t:{var o=t.block;if(o&&n[e?"checkStartOfBlock":"checkEndOfBlock"]()&&n.moveToClosestEditablePosition(o,!e)&&n.collapsed){if(n.startContainer.type==CKEDITOR.NODE_ELEMENT){var i=n.startContainer.getChild(n.startOffset-(e?1:0));if(i&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("hr")){c.fire("saveSnapshot");i.remove();t=!0;break t}}n=n.startPath().block;if(!n||n&&n.contains(o))t=void 0;else{c.fire("saveSnapshot");var r;(r=(e?n:o).getBogus())&&r.remove();r=c.getSelection();i=r.createBookmarks();(e?o:n).moveChildren(e?n:o,!1);t.lastElement.mergeSiblings();l(o,n,!e);r.selectBookmarks(i);t=!0}}else t=!1}else e=n,r=t.block,n=e.endPath().block,r&&n&&!r.equals(n)?(c.fire("saveSnapshot"),(o=r.getBogus())&&o.remove(),e.enlarge(CKEDITOR.ENLARGE_INLINE),e.deleteContents(),n.getParent()&&(n.moveChildren(r,!1),t.lastElement.mergeSiblings(),l(r,n,!0)),e=c.getSelection().getRanges()[0],e.collapse(1),e.optimize(),""===e.startContainer.getHtml()&&e.startContainer.appendBogus(),e.select(),t=!0):t=!1;if(!t)return;c.getSelection().scrollIntoView();c.fire("saveSnapshot");return!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var t;if(t=this.removeCustomData("classes"))for(;t.length;)this.removeClass(t.pop());if(!this.is("textarea")){t=this.getDocument();var e=t.getHead();if(e.getCustomData("stylesheet")){var n=t.getCustomData("stylesheet_ref");--n?t.setCustomData("stylesheet_ref",n):(t.removeCustomData("stylesheet_ref"),e.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(t){var e=this._.editable;if(e&&t)return 0;arguments.length&&(e=this._.editable=t?t instanceof CKEDITOR.editable?t:new CKEDITOR.editable(this,t):(e&&e.detach(),null));return e};CKEDITOR.on("instanceLoaded",function(t){var n=t.editor;n.on("insertElement",function(t){t=t.data;t.type==CKEDITOR.NODE_ELEMENT&&(t.is("input")||t.is("textarea"))&&("false"!=t.getAttribute("contentEditable")&&t.data("cke-editable",t.hasAttribute("contenteditable")?"true":"1"),t.setAttribute("contentEditable",!1))});n.on("selectionChange",function(t){if(!n.readOnly){var e=n.getSelection();e&&!e.isLocked&&(e=n.checkDirty(),n.fire("lockSnapshot"),o(t),n.fire("unlockSnapshot"),!e&&n.resetDirty())}})});CKEDITOR.on("instanceCreated",function(t){var i=t.editor;i.on("mode",function(){var t=i.editable();if(t&&t.isInline()){var e=i.title;t.changeAttr("role","textbox");t.changeAttr("aria-label",e);e&&t.changeAttr("title",e);var n=i.fire("ariaEditorHelpLabel",{}).label;if(n&&(e=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var o=CKEDITOR.tools.getNextId(),n=CKEDITOR.dom.element.createFromHtml('<span id="'+o+'" class="cke_voice_label">'+n+"</span>");e.append(n);t.changeAttr("aria-describedby",o)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");m=CKEDITOR.dom.walker.whitespaces(!0);c=CKEDITOR.dom.walker.bookmark(!1,!0);p=CKEDITOR.dom.walker.empty();d=CKEDITOR.dom.walker.bogus();f=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi;h=function(){function O(t){return t.type==CKEDITOR.NODE_ELEMENT}function D(t,e){var n,o,i,r,a=[],s=e.range.startContainer;n=e.range.startPath();for(var s=x[s.getName()],l=0,c=t.getChildren(),d=c.count(),u=-1,m=-1,p=0,f=n.contains(x.$list);l<d;++l)n=c.getItem(l),O(n)?(i=n.getName(),f&&i in CKEDITOR.dtd.$list?a=a.concat(D(n,e)):(r=!!s[i],"br"!=i||!n.data("cke-eol")||l&&l!=d-1||(p=(o=l?a[l-1].node:c.getItem(l+1))&&(!O(o)||!o.is("br")),o=o&&O(o)&&x.$block[o.getName()]),-1!=u||r||(u=l),r||(m=l),a.push({isElement:1,isLineBreak:p,isBlock:n.isBlockBoundary(),hasBlockSibling:o,node:n,name:i,allowed:r}),o=p=0)):a.push({isElement:0,node:n,allowed:1});-1<u&&(a[u].firstNotAllowed=1);-1<m&&(a[m].lastNotAllowed=1);return a}function R(t,e){var n=[],o=t.getChildren(),i=o.count(),r,a=0,s=x[e],l=!t.is(x.$inline)||t.is("br");for(l&&n.push(" ");a<i;a++)r=o.getItem(a),O(r)&&!r.is(s)?n=n.concat(R(r,e)):n.push(r);l&&n.push(" ");return n}function _(t){return O(t.startContainer)&&t.startContainer.getChild(t.startOffset-1)}function S(t){return t&&O(t)&&(t.is(x.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function w(t,e,n,o){var i=t.clone(),r,a;i.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);(r=new CKEDITOR.dom.walker(i).next())&&O(r)&&s[r.getName()]&&(a=r.getPrevious())&&O(a)&&!a.getParent().equals(t.startContainer)&&n.contains(a)&&o.contains(r)&&r.isIdentical(a)&&(r.moveChildren(a),r.remove(),w(t,e,n,o))}function K(t,e){function n(t,e){if(e.isBlock&&e.isElement&&!e.node.is("br")&&O(t)&&t.is("br"))return t.remove(),1}var o=e.endContainer.getChild(e.endOffset),i=e.endContainer.getChild(e.endOffset-1);o&&n(o,t[t.length-1]);i&&n(i,t[0])&&(e.setEnd(e.endContainer,e.endOffset-1),e.collapse())}var x=CKEDITOR.dtd,s={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},N={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},L=CKEDITOR.tools.extend({},x.$inline);delete L.br;return function(t,e,n,o){var i=t.editor,r=!1;"unfiltered_html"==e&&(e="html",r=!0);if(!o.checkReadOnly()){var a=new CKEDITOR.dom.elementPath(o.startContainer,o.root).blockLimit||o.root;t={type:e,dontFilter:r,editable:t,editor:i,range:o,blockLimit:a,mergeCandidates:[],zombies:[]};e=t.range;o=t.mergeCandidates;var s,l;"text"==t.type&&e.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(s=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",e.document),e.insertNode(s),e.setStartAfter(s));r=new CKEDITOR.dom.elementPath(e.startContainer);t.endPath=a=new CKEDITOR.dom.elementPath(e.endContainer);if(!e.collapsed){var i=a.block||a.blockLimit,c=e.getCommonAncestor();i&&!i.equals(c)&&!i.contains(c)&&e.checkEndOfBlock()&&t.zombies.push(i);e.deleteContents()}for(;(l=_(e))&&O(l)&&l.isBlockBoundary()&&r.contains(l);)e.moveToPosition(l,CKEDITOR.POSITION_BEFORE_END);w(e,t.blockLimit,r,a);s&&(e.setEndBefore(s),e.collapse(),s.remove());s=e.startPath();if(i=s.contains(S,!1,1))e.splitElement(i),t.inlineStylesRoot=i,t.inlineStylesPeak=s.lastElement;s=e.createBookmark();(i=s.startNode.getPrevious(B))&&O(i)&&S(i)&&o.push(i);(i=s.startNode.getNext(B))&&O(i)&&S(i)&&o.push(i);for(i=s.startNode;(i=i.getParent())&&S(i);)o.push(i);e.moveToBookmark(s);if(s=n){s=t.range;if("text"==t.type&&t.inlineStylesRoot){l=t.inlineStylesPeak;e=l.getDocument().createText("{cke-peak}");for(o=t.inlineStylesRoot.getParent();!l.equals(o);)e=e.appendTo(l.clone()),l=l.getParent();n=e.getOuterHtml().split("{cke-peak}").join(n)}l=t.blockLimit.getName();if(/^\s+|\s+$/.test(n)&&"span"in CKEDITOR.dtd[l]){var d='<span data-cke-marker="1">&nbsp;</span>';n=d+n+d}n=t.editor.dataProcessor.toHtml(n,{context:null,fixForBody:!1,protectedWhitespaces:!!d,dontFilter:t.dontFilter,filter:t.editor.activeFilter,enterMode:t.editor.activeEnterMode});l=s.document.createElement("body");l.setHtml(n);d&&(l.getFirst().remove(),l.getLast().remove());if((d=s.startPath().block)&&(1!=d.getChildCount()||!d.getBogus()))t:{var u;if(1==l.getChildCount()&&O(u=l.getFirst())&&u.is(N)&&!u.hasAttribute("contenteditable")){d=u.getElementsByTag("*");s=0;for(o=d.count();s<o;s++)if(e=d.getItem(s),!e.is(L))break t;u.moveChildren(u.getParent(1));u.remove()}}t.dataWrapper=l;s=n}if(s){u=t.range;s=u.document;var m;l=t.blockLimit;o=0;var p,d=[],f,h;n=i=0;var g,C;e=u.startContainer;var r=t.endPath.elements[0],A,a=r.getPosition(e),c=!!r.getCommonAncestor(e)&&a!=CKEDITOR.POSITION_IDENTICAL&&!(a&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);e=D(t.dataWrapper,t);for(K(e,u);o<e.length;o++){a=e[o];if(m=a.isLineBreak){m=u;g=l;var E=void 0,v=void 0;a.hasBlockSibling?m=1:(E=m.startContainer.getAscendant(x.$block,1))&&E.is({div:1,p:1})?(v=E.getPosition(g),v==CKEDITOR.POSITION_IDENTICAL||v==CKEDITOR.POSITION_CONTAINS?m=0:(g=m.splitElement(E),m.moveToPosition(g,CKEDITOR.POSITION_AFTER_START),m=1)):m=0}if(m)n=0<o;else{m=u.startPath();!a.isBlock&&M(t.editor,m.block,m.blockLimit)&&(h=P(t.editor))&&(h=s.createElement(h),h.appendBogus(),u.insertNode(h),CKEDITOR.env.needsBrFiller&&(p=h.getBogus())&&p.remove(),u.moveToPosition(h,CKEDITOR.POSITION_BEFORE_END));if((m=u.startPath().block)&&!m.equals(f)){if(p=m.getBogus())p.remove(),d.push(m);f=m}a.firstNotAllowed&&(i=1);if(i&&a.isElement){m=u.startContainer;for(g=null;m&&!x[m.getName()][a.name];){if(m.equals(l)){m=null;break}g=m;m=m.getParent()}if(m)g&&(C=u.splitElement(g),t.zombies.push(C),t.zombies.push(g));else{g=l.getName();A=!o;m=o==e.length-1;g=R(a.node,g);for(var E=[],v=g.length,b=0,y=void 0,T=0,k=-1;b<v;b++)y=g[b]," "==y?(T||A&&!b||(E.push(new CKEDITOR.dom.text(" ")),k=E.length),T=1):(E.push(y),T=0);m&&k==E.length&&E.pop();A=E}}if(A){for(;m=A.pop();)u.insertNode(m);A=0}else u.insertNode(a.node);a.lastNotAllowed&&o<e.length-1&&((C=c?r:C)&&u.setEndAt(C,CKEDITOR.POSITION_AFTER_START),i=0);u.collapse()}}1!=e.length?p=!1:(p=e[0],p=p.isElement&&"false"==p.node.getAttribute("contenteditable"));p&&(n=!0,m=e[0].node,u.setStartAt(m,CKEDITOR.POSITION_BEFORE_START),u.setEndAt(m,CKEDITOR.POSITION_AFTER_END));t.dontMoveCaret=n;t.bogusNeededBlocks=d}p=t.range;var I;C=t.bogusNeededBlocks;for(A=p.createBookmark();f=t.zombies.pop();)f.getParent()&&(h=p.clone(),h.moveToElementEditStart(f),h.removeEmptyBlocksAtEnd());if(C)for(;f=C.pop();)CKEDITOR.env.needsBrFiller?f.appendBogus():f.append(p.document.createText(" "));for(;f=t.mergeCandidates.pop();)f.mergeSiblings();p.moveToBookmark(A);if(!t.dontMoveCaret){for(f=_(p);f&&O(f)&&!f.is(x.$empty);){if(f.isBlockBoundary())p.moveToPosition(f,CKEDITOR.POSITION_BEFORE_END);else{if(S(f)&&f.getHtml().match(/(\s|&nbsp;)$/g)){I=null;break}I=p.clone();I.moveToPosition(f,CKEDITOR.POSITION_BEFORE_END)}f=f.getLast(B)}I&&p.moveToRange(I)}}}}();g=function(){function i(t){t=new CKEDITOR.dom.walker(t);t.guard=function(t,e){if(e)return!1;if(t.type==CKEDITOR.NODE_ELEMENT)return t.is(CKEDITOR.dtd.$tableContent)};t.evaluator=function(t){return t.type==CKEDITOR.NODE_ELEMENT};return t}function r(t,e,n){e=t.getDocument().createElement(e);t.append(e,n);return e}function a(t){var e=t.count(),n;for(e;0<e--;)n=t.getItem(e),CKEDITOR.tools.trim(n.getHtml())||(n.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&n.getChildCount()&&n.getFirst().remove())}return function(t){var e=t.startContainer,n=e.getAscendant("table",1),o=!1;a(n.getElementsByTag("td"));a(n.getElementsByTag("th"));n=t.clone();n.setStart(e,0);n=i(n).lastBackward();n||(n=t.clone(),n.setEndAt(e,CKEDITOR.POSITION_BEFORE_END),n=i(n).lastForward(),o=!0);n||(n=e);n.is("table")?(t.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),n.remove()):(n.is({tbody:1,thead:1,tfoot:1})&&(n=r(n,"tr",o)),n.is("tr")&&(n=r(n,n.getParent().is("thead")?"th":"td",o)),(e=n.getBogus())&&e.remove(),t.moveToPosition(n,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}();C=function(){function i(t){t=new CKEDITOR.dom.walker(t);t.guard=function(t,e){if(e)return!1;if(t.type==CKEDITOR.NODE_ELEMENT)return t.is(CKEDITOR.dtd.$list)||t.is(CKEDITOR.dtd.$listItem)};t.evaluator=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$listItem)};return t}return function(t){var e=t.startContainer,n=!1,o;o=t.clone();o.setStart(e,0);o=i(o).lastBackward();o||(o=t.clone(),o.setEndAt(e,CKEDITOR.POSITION_BEFORE_END),o=i(o).lastForward(),n=!0);o||(o=e);o.is(CKEDITOR.dtd.$list)?(t.setStartAt(o,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),o.remove()):((e=o.getBogus())&&e.remove(),t.moveToPosition(o,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),t.select())}}();e={eol:{detect:function(t,e){var n=t.range,o=n.clone(),i=n.clone(),r=new CKEDITOR.dom.elementPath(n.startContainer,e),a=new CKEDITOR.dom.elementPath(n.endContainer,e);o.collapse(1);i.collapse();r.block&&o.checkBoundaryOfElement(r.block,CKEDITOR.END)&&(n.setStartAfter(r.block),t.prependEolBr=1);a.block&&i.checkBoundaryOfElement(a.block,CKEDITOR.START)&&(n.setEndBefore(a.block),t.appendEolBr=1)},fix:function(t,e){var n=e.getDocument(),o;t.appendEolBr&&(o=this.createEolBr(n),t.fragment.append(o));!t.prependEolBr||o&&!o.getPrevious()||t.fragment.append(this.createEolBr(n),1)},createEolBr:function(t){return t.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(t){var e=t.range.getBoundaryNodes(),n=e.startNode,e=e.endNode;!e||!d(e)||n&&n.equals(e)||t.range.setEndBefore(e)}},tree:{rebuild:function(t,e){var n=t.range,o=n.getCommonAncestor(),i=new CKEDITOR.dom.elementPath(o,e),r=new CKEDITOR.dom.elementPath(n.startContainer,e),n=new CKEDITOR.dom.elementPath(n.endContainer,e),a;o.type==CKEDITOR.NODE_TEXT&&(o=o.getParent());if(i.blockLimit.is({tr:1,table:1})){var s=i.contains("table").getParent();a=function(t){return!t.equals(s)}}else if(i.block&&i.block.is(CKEDITOR.dtd.$listItem)&&(r=r.contains(CKEDITOR.dtd.$list),n=n.contains(CKEDITOR.dtd.$list),!r.equals(n))){var l=i.contains(CKEDITOR.dtd.$list).getParent();a=function(t){return!t.equals(l)}}a||(a=function(t){return!t.equals(i.block)&&!t.equals(i.blockLimit)});this.rebuildFragment(t,e,o,a)},rebuildFragment:function(t,e,n,o){for(var i;n&&!n.equals(e)&&o(n);)i=n.clone(0,1),t.fragment.appendTo(i),t.fragment=i,n=n.getParent()}},cell:{shrink:function(t){t=t.range;var e=t.startContainer,n=t.endContainer,o=t.startOffset,i=t.endOffset;e.type==CKEDITOR.NODE_ELEMENT&&e.equals(n)&&e.is("tr")&&++o==i&&t.shrink(CKEDITOR.SHRINK_TEXT)}}};A=function(){function i(t,e){var n=t.getParent();if(n.is(CKEDITOR.dtd.$inline))t[e?"insertBefore":"insertAfter"](n)}function l(t,e,n){i(e);i(n,1);for(var o;o=n.getNext();)o.insertAfter(e),e=o;p(t)&&t.remove()}function u(t,e){var n=new CKEDITOR.dom.range(t);n.setStartAfter(e.startNode);n.setEndBefore(e.endNode);return n}return{list:{detectMerge:function(t,e){var n=u(e,t.bookmark),o=n.startPath(),i=n.endPath(),r=o.contains(CKEDITOR.dtd.$list),a=i.contains(CKEDITOR.dtd.$list);t.mergeList=r&&a&&r.getParent().equals(a.getParent())&&!r.equals(a);t.mergeListItems=o.block&&i.block&&o.block.is(CKEDITOR.dtd.$listItem)&&i.block.is(CKEDITOR.dtd.$listItem);if(t.mergeList||t.mergeListItems)n=n.clone(),n.setStartBefore(t.bookmark.startNode),n.setEndAfter(t.bookmark.endNode),t.mergeListBookmark=n.createBookmark()},merge:function(t,e){if(t.mergeListBookmark){var n=t.mergeListBookmark.startNode,o=t.mergeListBookmark.endNode,i=new CKEDITOR.dom.elementPath(n,e),r=new CKEDITOR.dom.elementPath(o,e);if(t.mergeList){var a=i.contains(CKEDITOR.dtd.$list),s=r.contains(CKEDITOR.dtd.$list);a.equals(s)||(s.moveChildren(a),s.remove())}t.mergeListItems&&(i=i.contains(CKEDITOR.dtd.$listItem),r=r.contains(CKEDITOR.dtd.$listItem),i.equals(r)||l(r,n,o));n.remove();o.remove()}}},block:{detectMerge:function(t,e){if(!t.tableContentsRanges&&!t.mergeListBookmark){var n=new CKEDITOR.dom.range(e);n.setStartBefore(t.bookmark.startNode);n.setEndAfter(t.bookmark.endNode);t.mergeBlockBookmark=n.createBookmark()}},merge:function(t,e){if(t.mergeBlockBookmark&&!t.purgeTableBookmark){var n=t.mergeBlockBookmark.startNode,o=t.mergeBlockBookmark.endNode,i=new CKEDITOR.dom.elementPath(n,e),r=new CKEDITOR.dom.elementPath(o,e),i=i.block,r=r.block;i&&r&&!i.equals(r)&&l(r,n,o);n.remove();o.remove()}}},table:function(){function s(o){var i=[],r,t=new CKEDITOR.dom.walker(o),a=o.startPath().contains(d),s=o.endPath().contains(d),l={};t.guard=function(t,e){if(t.type==CKEDITOR.NODE_ELEMENT){var n="visited_"+(e?"out":"in");if(t.getCustomData(n))return;CKEDITOR.dom.element.setMarker(l,t,n,1)}if(e&&a&&t.equals(a))r=o.clone(),r.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),i.push(r);else if(!e&&s&&t.equals(s))r=o.clone(),r.setStartAt(s,CKEDITOR.POSITION_AFTER_START),i.push(r);else{if(n=!e)n=t.type==CKEDITOR.NODE_ELEMENT&&t.is(d)&&(!a||c(t,a))&&(!s||c(t,s));n&&(r=o.clone(),r.selectNodeContents(t),i.push(r))}};t.lastForward();CKEDITOR.dom.element.clearAllMarkers(l);return i}function c(t,e){var n=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,o=t.getPosition(e);return o===CKEDITOR.POSITION_IDENTICAL?!1:0===(o&n)}var d={td:1,th:1,caption:1};return{detectPurge:function(t){var e=t.range,n=e.clone();n.enlarge(CKEDITOR.ENLARGE_ELEMENT);var n=new CKEDITOR.dom.walker(n),o=0;n.evaluator=function(t){t.type==CKEDITOR.NODE_ELEMENT&&t.is(d)&&++o};n.checkForward();if(1<o){var n=e.startPath().contains("table"),i=e.endPath().contains("table");n&&i&&e.checkBoundaryOfElement(n,CKEDITOR.START)&&e.checkBoundaryOfElement(i,CKEDITOR.END)&&(e=t.range.clone(),e.setStartBefore(n),e.setEndAfter(i),t.purgeTableBookmark=e.createBookmark())}},detectRanges:function(t,e){var n=u(e,t.bookmark),o=n.clone(),i,r,a=n.getCommonAncestor();a.is(CKEDITOR.dtd.$tableContent)&&!a.is(d)&&(a=a.getAscendant("table",!0));r=a;a=new CKEDITOR.dom.elementPath(n.startContainer,r);r=new CKEDITOR.dom.elementPath(n.endContainer,r);a=a.contains("table");r=r.contains("table");if(a||r)a&&r&&c(a,r)?(t.tableSurroundingRange=o,o.setStartAt(a,CKEDITOR.POSITION_AFTER_END),o.setEndAt(r,CKEDITOR.POSITION_BEFORE_START),o=n.clone(),o.setEndAt(a,CKEDITOR.POSITION_AFTER_END),i=n.clone(),i.setStartAt(r,CKEDITOR.POSITION_BEFORE_START),i=s(o).concat(s(i))):a?r||(t.tableSurroundingRange=o,o.setStartAt(a,CKEDITOR.POSITION_AFTER_END),n.setEndAt(a,CKEDITOR.POSITION_AFTER_END)):(t.tableSurroundingRange=o,o.setEndAt(r,CKEDITOR.POSITION_BEFORE_START),n.setStartAt(r,CKEDITOR.POSITION_AFTER_START)),t.tableContentsRanges=i?i:s(n)},deleteRanges:function(t){for(var e;e=t.tableContentsRanges.pop();)e.extractContents(),p(e.startContainer)&&e.startContainer.appendBogus();t.tableSurroundingRange&&t.tableSurroundingRange.extractContents()},purge:function(t){if(t.purgeTableBookmark){var e=t.doc,n=t.range.clone(),e=e.createElement("p");e.insertBefore(t.purgeTableBookmark.startNode);n.moveToBookmark(t.purgeTableBookmark);n.deleteContents();t.range.moveToPosition(e,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(t){return!(t.range.startPath().contains(CKEDITOR.dtd.$listItem)&&t.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(t){t.startContainer.getDtd()["#"]||t.moveToClosestEditablePosition(null,!0)},autoParagraph:function(t,e){var n=e.startPath(),o;M(t,n.block,n.blockLimit)&&(o=P(t))&&(o=e.document.createElement(o),o.appendBogus(),e.insertNode(o),e.moveToPosition(o,CKEDITOR.POSITION_AFTER_START))}}}()})();(function(){function h(){var t=this._.fakeSelection,e;t&&(e=this.getSelection(1),e&&e.isHidden()||(t.reset(),t=0));if(!t&&(t=e||this.getSelection(1),!t||t.getType()==CKEDITOR.SELECTION_NONE))return;this.fire("selectionCheck",t);e=this.elementPath();if(!e.compare(this._.selectionPreviousPath)){var n=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(e.blockLimit);CKEDITOR.env.webkit&&!n&&(this._.previousActive=this.document.getActive());this._.selectionPreviousPath=e;this.fire("selectionChange",{selection:t,path:e})}}function g(){o=!0;e||(t.call(this),e=CKEDITOR.tools.setTimeout(t,200,this))}function t(){e=null;o&&(CKEDITOR.tools.setTimeout(h,0,this),o=!1)}function r(t){return d(t)||t.type==CKEDITOR.NODE_ELEMENT&&!t.is(CKEDITOR.dtd.$empty)?!0:!1}function u(n){function t(t,e){return t&&t.type!=CKEDITOR.NODE_TEXT?n.clone()["moveToElementEdit"+(e?"End":"Start")](t):!1}if(!(n.root instanceof CKEDITOR.editable))return!1;var e=n.startContainer,o=n.getPreviousNode(r,null,e),i=n.getNextNode(r,null,e);return t(o)||t(i,1)||!(o||i||e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()&&e.getBogus())?!0:!1}function m(t){C(t,!1);var e=t.getDocument().createText(c);t.setCustomData("cke-fillingChar",e);return e}function C(t,e){var n=t&&t.removeCustomData("cke-fillingChar");if(n){if(!1!==e){var o=t.getDocument().getSelection().getNative(),i=o&&"None"!=o.type&&o.getRangeAt(0),r=c.length;if(n.getLength()>r&&i&&i.intersectsNode(n.$)){var a=[{node:o.anchorNode,offset:o.anchorOffset},{node:o.focusNode,offset:o.focusOffset}];o.anchorNode==n.$&&o.anchorOffset>r&&(a[0].offset-=r);o.focusNode==n.$&&o.focusOffset>r&&(a[1].offset-=r)}}n.setText(s(n.getText(),1));a&&(n=t.getDocument().$,o=n.getSelection(),n=n.createRange(),n.setStart(a[0].node,a[0].offset),n.collapse(!0),o.removeAllRanges(),o.addRange(n),o.extend(a[1].node,a[1].offset))}}function s(t,e){return e?t.replace(n,function(t,e){return e?" ":""}):t.replace(c,"")}function a(t,e){var n=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px")+'">'+(e||"&nbsp;")+"</div>",t.document);t.fire("lockSnapshot");t.editable().append(n);var o=t.getSelection(1),i=t.createRange(),r=o.root.on("selectionchange",function(t){t.cancel()},null,null,0);i.setStartAt(n,CKEDITOR.POSITION_AFTER_START);i.setEndAt(n,CKEDITOR.POSITION_BEFORE_END);o.selectRanges([i]);r.removeListener();t.fire("unlockSnapshot");t._.hiddenSelectionContainer=n}function A(i){var r={37:1,39:1,8:1,46:1};return function(t){var e=t.data.getKeystroke();if(r[e]){var n=i.getSelection().getRanges(),o=n[0];1==n.length&&o.collapsed&&(e=o[38>e?"getPreviousEditableNode":"getNextEditableNode"]())&&e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable")&&(i.getSelection().fake(e),t.data.preventDefault(),t.cancel())}}}function i(n){for(var o=0;o<n.length;o++){var i=n[o];i.getCommonAncestor().isReadOnly()&&n.splice(o,1);if(!i.collapsed){if(i.startContainer.isReadOnly())for(var t=i.startContainer,e;t&&!((e=t.type==CKEDITOR.NODE_ELEMENT)&&t.is("body")||!t.isReadOnly());)e&&"false"==t.getAttribute("contentEditable")&&i.setStartAfter(t),t=t.getParent();t=i.startContainer;e=i.endContainer;var r=i.startOffset,a=i.endOffset,s=i.clone();t&&t.type==CKEDITOR.NODE_TEXT&&(r>=t.getLength()?s.setStartAfter(t):s.setStartBefore(t));e&&e.type==CKEDITOR.NODE_TEXT&&(a?s.setEndAfter(e):s.setEndBefore(e));t=new CKEDITOR.dom.walker(s);t.evaluator=function(t){if(t.type==CKEDITOR.NODE_ELEMENT&&t.isReadOnly()){var e=i.clone();i.setEndBefore(t);i.collapsed&&n.splice(o--,1);t.getPosition(s.endContainer)&CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(t),e.collapsed||n.splice(o+1,0,e));return!0}return!1};t.next()}}return n}var E="function"!=typeof window.getSelection,l=1,c=CKEDITOR.tools.repeat("​",7),n=new RegExp(c+"( )?","g"),e,o,d=CKEDITOR.dom.walker.invisible(1),p=function(){function t(n){return function(t){var e=t.editor.createRange();e.moveToClosestEditablePosition(t.selected,n)&&t.editor.getSelection().selectRanges([e]);return!1}}function e(i){return function(t){var e=t.editor,n=e.createRange(),o;(o=n.moveToClosestEditablePosition(t.selected,i))||(o=n.moveToClosestEditablePosition(t.selected,!i));o&&e.getSelection().selectRanges([n]);e.fire("saveSnapshot");t.selected.remove();o||(n.moveToElementEditablePosition(e.editable()),e.getSelection().selectRanges([n]));e.fire("saveSnapshot");return!1}}var n=t(),o=t(1);return{37:n,38:n,39:o,40:o,8:e(),46:e(1)}}();CKEDITOR.on("instanceCreated",function(t){function e(){var t=f.getSelection();t&&t.removeAllRanges()}var f=t.editor;f.on("contentDom",function(){function t(){c=new CKEDITOR.dom.selection(f.getSelection());c.lock()}function n(){i.removeListener("mouseup",n);a.removeListener("mouseup",n);var t=CKEDITOR.document.$.selection,e=t.createRange();"None"!=t.type&&e.parentElement().ownerDocument==o.$&&e.select()}var o=f.document,i=CKEDITOR.document,e=f.editable(),r=o.getBody(),a=o.getDocumentElement(),s=e.isInline(),l,c;CKEDITOR.env.gecko&&e.attachListener(e,"focus",function(t){t.removeListener();0!==l&&(t=f.getSelection().getNative())&&t.isCollapsed&&t.anchorNode==e.$&&(t=f.createRange(),t.moveToElementEditStart(e),t.select())},null,null,-2);e.attachListener(e,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){l&&CKEDITOR.env.webkit&&(l=f._.previousActive&&f._.previousActive.equals(o.getActive()))&&null!=f._.previousScrollTop&&f._.previousScrollTop!=e.$.scrollTop&&(e.$.scrollTop=f._.previousScrollTop);f.unlockSelection(l);l=0},null,null,-1);e.attachListener(e,"mousedown",function(){l=0});if(CKEDITOR.env.ie||s)E?e.attachListener(e,"beforedeactivate",t,null,null,-1):e.attachListener(f,"selectionCheck",t,null,null,-1),e.attachListener(e,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){f.lockSelection(c);l=1},null,null,-1),e.attachListener(e,"mousedown",function(){l=0});if(CKEDITOR.env.ie&&!s){var d;e.attachListener(e,"mousedown",function(t){2==t.data.$.button&&((t=f.document.getSelection())&&t.getType()!=CKEDITOR.SELECTION_NONE||(d=f.window.getScrollPosition()))});e.attachListener(e,"mouseup",function(t){2==t.data.$.button&&d&&(f.document.$.documentElement.scrollLeft=d.x,f.document.$.documentElement.scrollTop=d.y);d=null});if("BackCompat"!=o.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){var u,m;a.on("mousedown",function(t){function e(t){t=t.data.$;if(u){var e=r.$.createTextRange();try{e.moveToPoint(t.clientX,t.clientY)}catch(t){}u.setEndPoint(0>m.compareEndPoints("StartToStart",e)?"EndToEnd":"StartToStart",e);u.select()}}function n(){a.removeListener("mousemove",e);i.removeListener("mouseup",n);a.removeListener("mouseup",n);u.select()}t=t.data;if(t.getTarget().is("html")&&t.$.y<a.$.clientHeight&&t.$.x<a.$.clientWidth){u=r.$.createTextRange();try{u.moveToPoint(t.$.clientX,t.$.clientY)}catch(t){}m=u.duplicate();a.on("mousemove",e);i.on("mouseup",n);a.on("mouseup",n)}})}if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version)a.on("mousedown",function(t){t.data.getTarget().is("html")&&(i.on("mouseup",n),a.on("mouseup",n))})}}e.attachListener(e,"selectionchange",h,f);e.attachListener(e,"keyup",g,f);e.attachListener(e,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){f.forceNextSelectionCheck();f.selectionChange(1)});if(s&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var p;e.attachListener(e,"mousedown",function(){p=1});e.attachListener(o.getDocumentElement(),"mouseup",function(){p&&g.call(f);p=0})}else e.attachListener(CKEDITOR.env.ie?e:o.getDocumentElement(),"mouseup",g,f);CKEDITOR.env.webkit&&e.attachListener(o,"keydown",function(t){switch(t.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:C(e)}},null,null,-1);e.attachListener(e,"keydown",A(f),null,null,-1)});f.on("setData",function(){f.unlockSelection();CKEDITOR.env.webkit&&e()});f.on("contentDomUnload",function(){f.unlockSelection()});if(CKEDITOR.env.ie9Compat)f.on("beforeDestroy",e,null,null,9);f.on("dataReady",function(){delete f._.fakeSelection;delete f._.hiddenSelectionContainer;f.selectionChange(1)});f.on("loadSnapshot",function(){var t=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),e=f.editable().getLast(t);e&&e.hasAttribute("data-cke-hidden-sel")&&(e.remove(),CKEDITOR.env.gecko&&(t=f.editable().getFirst(t))&&t.is("br")&&t.getAttribute("_moz_editor_bogus_node")&&t.remove())},null,null,100);f.on("key",function(t){if("wysiwyg"==f.mode){var e=f.getSelection();if(e.isFake){var n=p[t.data.keyCode];if(n)return n({editor:f,selected:e.getSelectedElement(),selection:e,keyEvent:t})}}})});if(CKEDITOR.env.webkit)CKEDITOR.on("instanceReady",function(t){var n=t.editor;n.on("selectionChange",function(){var t=n.editable(),e=t.getCustomData("cke-fillingChar");e&&(e.getCustomData("ready")?C(t):e.setCustomData("ready",1))},null,null,-1);n.on("beforeSetMode",function(){C(n.editable())},null,null,-1);n.on("getSnapshot",function(t){t.data&&(t.data=s(t.data))},n,null,20);n.on("toDataFormat",function(t){t.data.dataValue=s(t.data.dataValue)},null,null,0)});CKEDITOR.editor.prototype.selectionChange=function(t){(t?h:g).call(this)};CKEDITOR.editor.prototype.getSelection=function(t){return!this._.savedSelection&&!this._.fakeSelection||t?(t=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(t):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(t){t=t||this.getSelection(1);return t.getType()!=CKEDITOR.SELECTION_NONE?(!t.isLocked&&t.lock(),this._.savedSelection=t,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(t){var e=this._.savedSelection;return e?(e.unlock(t),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var t=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);t.selectRanges([this]);return t};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;CKEDITOR.dom.selection=function(t){if(t instanceof CKEDITOR.dom.selection){var e=t;t=t.root}var n=t instanceof CKEDITOR.dom.element;this.rev=e?e.rev:l++;this.document=t instanceof CKEDITOR.dom.document?t:t.getDocument();this.root=n?t:this.document.getBody();this.isLocked=0;this._={cache:{}};if(e)return CKEDITOR.tools.extend(this._.cache,e._.cache),this.isFake=e.isFake,this.isLocked=e.isLocked,this;t=this.getNative();var o,i;if(t)if(t.getRangeAt)o=(i=t.rangeCount&&t.getRangeAt(0))&&new CKEDITOR.dom.node(i.commonAncestorContainer);else{try{i=t.createRange()}catch(t){}o=i&&CKEDITOR.dom.element.get(i.item&&i.item(0)||i.parentElement())}if(!o||o.type!=CKEDITOR.NODE_ELEMENT&&o.type!=CKEDITOR.NODE_TEXT||!this.root.equals(o)&&!this.root.contains(o))this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList;return this};var f={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:s,_createFillingCharSequenceNode:m,FILLING_CHAR_SEQUENCE:c});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=E?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:E?function(){var t=this._.cache;if(t.type)return t.type;var e=CKEDITOR.SELECTION_NONE;try{var n=this.getNative(),o=n.type;"Text"==o&&(e=CKEDITOR.SELECTION_TEXT);"Control"==o&&(e=CKEDITOR.SELECTION_ELEMENT);n.createRange().parentElement()&&(e=CKEDITOR.SELECTION_TEXT)}catch(t){}return t.type=e}:function(){var t=this._.cache;if(t.type)return t.type;var e=CKEDITOR.SELECTION_TEXT,n=this.getNative();if(!n||!n.rangeCount)e=CKEDITOR.SELECTION_NONE;else if(1==n.rangeCount){var n=n.getRangeAt(0),o=n.startContainer;o==n.endContainer&&1==o.nodeType&&1==n.endOffset-n.startOffset&&f[o.childNodes[n.startOffset].nodeName.toLowerCase()]&&(e=CKEDITOR.SELECTION_ELEMENT)}return t.type=e},getRanges:function(){var o=E?function(){function m(t){return new CKEDITOR.dom.node(t).getIndex()}var s=function(t,e){t=t.duplicate();t.collapse(e);var n=t.parentElement();if(!n.hasChildNodes())return{container:n,offset:0};for(var o=n.children,i,r,a=t.duplicate(),s=0,l=o.length-1,c=-1,d,u;s<=l;)if(c=Math.floor((s+l)/2),i=o[c],a.moveToElementText(i),d=a.compareEndPoints("StartToStart",t),0<d)l=c-1;else if(0>d)s=c+1;else return{container:n,offset:m(i)};if(-1==c||c==o.length-1&&0>d){a.moveToElementText(n);a.setEndPoint("StartToStart",t);a=a.text.replace(/(\r\n|\r)/g,"\n").length;o=n.childNodes;if(!a)return i=o[o.length-1],i.nodeType!=CKEDITOR.NODE_TEXT?{container:n,offset:o.length}:{container:i,offset:i.nodeValue.length};for(n=o.length;0<a&&0<n;)r=o[--n],r.nodeType==CKEDITOR.NODE_TEXT&&(u=r,a-=r.nodeValue.length);return{container:u,offset:-a}}a.collapse(0<d?!0:!1);a.setEndPoint(0<d?"StartToStart":"EndToStart",t);a=a.text.replace(/(\r\n|\r)/g,"\n").length;if(!a)return{container:n,offset:m(i)+(0<d?0:1)};for(;0<a;)try{r=i[0<d?"previousSibling":"nextSibling"],r.nodeType==CKEDITOR.NODE_TEXT&&(a-=r.nodeValue.length,u=r),i=r}catch(t){return{container:n,offset:m(i)}}return{container:u,offset:0<d?-a:u.nodeValue.length+a}};return function(){var t=this.getNative(),e=t&&t.createRange(),n=this.getType();if(!t)return[];if(n==CKEDITOR.SELECTION_TEXT)return t=new CKEDITOR.dom.range(this.root),n=s(e,!0),t.setStart(new CKEDITOR.dom.node(n.container),n.offset),n=s(e),t.setEnd(new CKEDITOR.dom.node(n.container),n.offset),t.endContainer.getPosition(t.startContainer)&CKEDITOR.POSITION_PRECEDING&&t.endOffset<=t.startContainer.getIndex()&&t.collapse(),[t];if(n==CKEDITOR.SELECTION_ELEMENT){for(var n=[],o=0;o<e.length;o++){for(var i=e.item(o),r=i.parentNode,a=0,t=new CKEDITOR.dom.range(this.root);a<r.childNodes.length&&r.childNodes[a]!=i;a++);t.setStart(new CKEDITOR.dom.node(r),a);t.setEnd(new CKEDITOR.dom.node(r),a+1);n.push(t)}return n}return[]}}():function(){var t=[],e,n=this.getNative();if(!n)return t;for(var o=0;o<n.rangeCount;o++){var i=n.getRangeAt(o);e=new CKEDITOR.dom.range(this.root);e.setStart(new CKEDITOR.dom.node(i.startContainer),i.startOffset);e.setEnd(new CKEDITOR.dom.node(i.endContainer),i.endOffset);t.push(e)}return t};return function(t){var e=this._.cache,n=e.ranges;n||(e.ranges=n=new CKEDITOR.dom.rangeList(o.call(this)));return t?i(new CKEDITOR.dom.rangeList(n.slice())):n}}(),getStartElement:function(){var t=this._.cache;if(void 0!==t.startElement)return t.startElement;var e;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var n=this.getRanges()[0];if(n){if(n.collapsed)e=n.startContainer,e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent());else{for(n.optimize();e=n.startContainer,n.startOffset==(e.getChildCount?e.getChildCount():e.getLength())&&!e.isBlockBoundary();)n.setStartAfter(e);e=n.startContainer;if(e.type!=CKEDITOR.NODE_ELEMENT)return e.getParent();if((e=e.getChild(n.startOffset))&&e.type==CKEDITOR.NODE_ELEMENT)for(n=e.getFirst();n&&n.type==CKEDITOR.NODE_ELEMENT;)e=n,n=n.getFirst();else e=n.startContainer}e=e.$}}return t.startElement=e?new CKEDITOR.dom.element(e):null},getSelectedElement:function(){var t=this._.cache;if(void 0!==t.selectedElement)return t.selectedElement;var i=this,e=CKEDITOR.tools.tryThese(function(){return i.getNative().createRange().item(0)},function(){for(var t=i.getRanges()[0].clone(),e,n,o=2;o&&!((e=t.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&f[e.getName()]&&(n=e));o--)t.shrink(CKEDITOR.SHRINK_ELEMENT);return n&&n.$});return t.selectedElement=e?new CKEDITOR.dom.element(e):null},getSelectedText:function(){var t=this._.cache;if(void 0!==t.selectedText)return t.selectedText;var e=this.getNative(),e=E?"Control"==e.type?"":e.createRange().text:e.toString();return t.selectedText=e},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(t){if(this.isLocked){if(t)var e=this.getSelectedElement(),n=!e&&this.getRanges(),o=this.isFake;this.isLocked=0;this.reset();t&&(t=e||n[0]&&n[0].getCommonAncestor())&&t.getAscendant("body",1)&&(o?this.fake(e):e?this.selectElement(e):this.selectRanges(n))}},reset:function(){this._.cache={};this.isFake=0;var t=this.root.editor;if(t&&t._.fakeSelection)if(this.rev==t._.fakeSelection.rev){delete t._.fakeSelection;var e=t._.hiddenSelectionContainer;if(e){var n=t.checkDirty();t.fire("lockSnapshot");e.remove();t.fire("unlockSnapshot");!n&&t.resetDirty()}delete t._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=l++},selectElement:function(t){var e=new CKEDITOR.dom.range(this.root);e.setStartBefore(t);e.setEndAfter(t);this.selectRanges([e])},selectRanges:function(t){var e=this.root.editor,e=e&&e._.hiddenSelectionContainer;this.reset();if(e)for(var e=this.root,n,o=0;o<t.length;++o)n=t[o],n.endContainer.equals(e)&&(n.endOffset=Math.min(n.endOffset,e.getChildCount()));if(t.length)if(this.isLocked){var i=CKEDITOR.document.getActive();this.unlock();this.selectRanges(t);this.lock();i&&!i.equals(this.root)&&i.focus()}else{var r;t:{var a,s;if(1==t.length&&!(s=t[0]).collapsed&&(r=s.getEnclosedNode())&&r.type==CKEDITOR.NODE_ELEMENT&&(s=s.clone(),s.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(a=s.getEnclosedNode())&&a.type==CKEDITOR.NODE_ELEMENT&&(r=a),"false"==r.getAttribute("contenteditable")))break t;r=void 0}if(r)this.fake(r);else{if(E){s=CKEDITOR.dom.walker.whitespaces(!0);a=/\ufeff|\u00a0/;e={table:1,tbody:1,tr:1};1<t.length&&(r=t[t.length-1],t[0].setEnd(r.endContainer,r.endOffset));r=t[0];t=r.collapsed;var l,c,d;if((n=r.getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in f&&(!n.is("a")||!n.getText()))try{d=n.$.createControlRange();d.addElement(n.$);d.select();return}catch(t){}if(r.startContainer.type==CKEDITOR.NODE_ELEMENT&&r.startContainer.getName()in e||r.endContainer.type==CKEDITOR.NODE_ELEMENT&&r.endContainer.getName()in e)r.shrink(CKEDITOR.NODE_ELEMENT,!0),t=r.collapsed;d=r.createBookmark();e=d.startNode;t||(i=d.endNode);d=r.document.$.body.createTextRange();d.moveToElementText(e.$);d.moveStart("character",1);i?(a=r.document.$.body.createTextRange(),a.moveToElementText(i.$),d.setEndPoint("EndToEnd",a),d.moveEnd("character",-1)):(l=e.getNext(s),c=e.hasAscendant("pre"),l=!(l&&l.getText&&l.getText().match(a))&&(c||!e.hasPrevious()||e.getPrevious().is&&e.getPrevious().is("br")),c=r.document.createElement("span"),c.setHtml("&#65279;"),c.insertBefore(e),l&&r.document.createText("\ufeff").insertBefore(e));r.setStartBefore(e);e.remove();t?(l?(d.moveStart("character",-1),d.select(),r.document.$.selection.clear()):d.select(),r.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START),c.remove()):(r.setEndBefore(i),i.remove(),d.select())}else{i=this.getNative();if(!i)return;this.removeAllRanges();for(d=0;d<t.length;d++){if(d<t.length-1&&(l=t[d],c=t[d+1],a=l.clone(),a.setStart(l.endContainer,l.endOffset),a.setEnd(c.startContainer,c.startOffset),!a.collapsed&&(a.shrink(CKEDITOR.NODE_ELEMENT,!0),r=a.getCommonAncestor(),a=a.getEnclosedNode(),r.isReadOnly()||a&&a.isReadOnly()))){c.setStart(l.startContainer,l.startOffset);t.splice(d--,1);continue}r=t[d];c=this.document.$.createRange();r.collapsed&&CKEDITOR.env.webkit&&u(r)&&(a=m(this.root),r.insertNode(a),(l=a.getNext())&&!a.getPrevious()&&l.type==CKEDITOR.NODE_ELEMENT&&"br"==l.getName()?(C(this.root),r.moveToPosition(l,CKEDITOR.POSITION_BEFORE_START)):r.moveToPosition(a,CKEDITOR.POSITION_AFTER_END));c.setStart(r.startContainer.$,r.startOffset);try{c.setEnd(r.endContainer.$,r.endOffset)}catch(t){if(0<=t.toString().indexOf("NS_ERROR_ILLEGAL_VALUE"))r.collapse(1),c.setEnd(r.endContainer.$,r.endOffset);else throw t}i.addRange(c)}}this.reset();this.root.fire("selectionchange")}}},fake:function(t,e){var n=this.root.editor;void 0===e&&t.hasAttribute("aria-label")&&(e=t.getAttribute("aria-label"));this.reset();a(n,e);var o=this._.cache,i=new CKEDITOR.dom.range(this.root);i.setStartBefore(t);i.setEndAfter(t);o.ranges=new CKEDITOR.dom.rangeList(i);o.selectedElement=o.startElement=t;o.type=CKEDITOR.SELECTION_ELEMENT;o.selectedText=o.nativeSel=null;this.isFake=1;this.rev=l++;n._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var t=this.getCommonAncestor();t&&t.type==CKEDITOR.NODE_TEXT&&(t=t.getParent());return!(!t||!t.data("cke-hidden-sel"))},createBookmarks:function(t){t=this.getRanges().createBookmarks(t);this.isFake&&(t.isFake=1);return t},createBookmarks2:function(t){t=this.getRanges().createBookmarks2(t);this.isFake&&(t.isFake=1);return t},selectBookmarks:function(t){for(var e=[],n,o=0;o<t.length;o++){var i=new CKEDITOR.dom.range(this.root);i.moveToBookmark(t[o]);e.push(i)}t.isFake&&(n=e[0].getEnclosedNode(),n&&n.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),t.isFake=0));t.isFake?this.fake(n):this.selectRanges(e);return this},getCommonAncestor:function(){var t=this.getRanges();return t.length?t[0].startContainer.getCommonAncestor(t[t.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var t=this.getNative();try{t&&t[E?"empty":"removeAllRanges"]()}catch(t){}this.reset()}}}})();"use strict";CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;(function(){function O(t,e){for(var n,o;(t=t.getParent())&&!t.equals(e);)if(t.getAttribute("data-nostyle"))n=t;else if(!o){var i=t.getAttribute("contentEditable");"false"==i?n=t:"true"==i&&(o=1)}return n}function D(t,e,n,o){return(t.getPosition(e)|o)==o&&(!n.childRule||n.childRule(t))}function R(t){var e=t.document;if(t.collapsed)e=w(this,e),t.insertNode(e),t.moveToPosition(e,CKEDITOR.POSITION_BEFORE_END);else{var n=this.element,o=this._.definition,i,r=o.ignoreReadonly,a=r||o.includeReadonly;null==a&&(a=t.root.getCustomData("cke_includeReadonly"));var s=CKEDITOR.dtd[n];s||(i=!0,s=CKEDITOR.dtd.span);t.enlarge(CKEDITOR.ENLARGE_INLINE,1);t.trim();var l=t.createBookmark(),c=l.startNode,d=l.endNode,u=c,m;if(!r){var p=t.getCommonAncestor(),r=O(c,p),p=O(d,p);r&&(u=r.getNextSourceNode(!0));p&&(d=p)}for(u.getPosition(d)==CKEDITOR.POSITION_FOLLOWING&&(u=0);u;){r=!1;if(u.equals(d))u=null,r=!0;else{var f=u.type==CKEDITOR.NODE_ELEMENT?u.getName():null,p=f&&"false"==u.getAttribute("contentEditable"),h=f&&u.getAttribute("data-nostyle");if(f&&u.data("cke-bookmark")){u=u.getNextSourceNode(!0);continue}if(p&&a&&CKEDITOR.dtd.$block[f])for(var g=u,C=_(g),A=void 0,E=C.length,v=0,g=E&&new CKEDITOR.dom.range(g.getDocument());v<E;++v){var A=C[v],b=CKEDITOR.filter.instances[A.data("cke-filter")];if(b?b.check(this):1)g.selectNodeContents(A),R.call(this,g)}C=f?!s[f]||h?0:p&&!a?0:D(u,d,o,x):1;if(C)if(A=u.getParent(),C=o,E=n,v=i,!A||!(A.getDtd()||CKEDITOR.dtd.span)[E]&&!v||C.parentRule&&!C.parentRule(A))r=!0;else{if(m||f&&CKEDITOR.dtd.$removeEmpty[f]&&(u.getPosition(d)|x)!=x||(m=t.clone(),m.setStartBefore(u)),f=u.type,f==CKEDITOR.NODE_TEXT||p||f==CKEDITOR.NODE_ELEMENT&&!u.getChildCount()){for(var f=u,y;(r=!f.getNext(K))&&(y=f.getParent(),s[y.getName()])&&D(y,c,o,N);)f=y;m.setEndAfter(f)}}else r=!0;u=u.getNextSourceNode(h||p)}if(r&&m&&!m.collapsed){for(var r=w(this,e),p=r.hasAttributes(),h=m.getCommonAncestor(),f={},C={},A={},E={},T,k,I;r&&h;){if(h.getName()==n){for(T in o.attributes)!E[T]&&(I=h.getAttribute(k))&&(r.getAttribute(T)==I?C[T]=1:E[T]=1);for(k in o.styles)!A[k]&&(I=h.getStyle(k))&&(r.getStyle(k)==I?f[k]=1:A[k]=1)}h=h.getParent()}for(T in C)r.removeAttribute(T);for(k in f)r.removeStyle(k);p&&!r.hasAttributes()&&(r=null);r?(m.extractContents().appendTo(r),m.insertNode(r),S.call(this,r),r.mergeSiblings(),CKEDITOR.env.ie||r.$.normalize()):(r=new CKEDITOR.dom.element("span"),m.extractContents().appendTo(r),m.insertNode(r),S.call(this,r),r.remove(!0));m=null}}t.moveToBookmark(l);t.shrink(CKEDITOR.SHRINK_TEXT);t.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function e(t){function e(){for(var t=new CKEDITOR.dom.elementPath(a.getParent()),e=new CKEDITOR.dom.elementPath(c.getParent()),n=null,o=null,i=0;i<t.elements.length;i++){var r=t.elements[i];if(r==t.block||r==t.blockLimit)break;d.checkElementRemovable(r,!0)&&(n=r)}for(i=0;i<e.elements.length;i++){r=e.elements[i];if(r==e.block||r==e.blockLimit)break;d.checkElementRemovable(r,!0)&&(o=r)}o&&c.breakParent(o);n&&a.breakParent(n)}t.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=t.createBookmark(),a=n.startNode;if(t.collapsed){for(var o=new CKEDITOR.dom.elementPath(a.getParent(),t.root),i,r=0,s;r<o.elements.length&&(s=o.elements[r])&&s!=o.block&&s!=o.blockLimit;r++)if(this.checkElementRemovable(s)){var l;t.collapsed&&(t.checkBoundaryOfElement(s,CKEDITOR.END)||(l=t.checkBoundaryOfElement(s,CKEDITOR.START)))?(i=s,i.match=l?"start":"end"):(s.mergeSiblings(),s.is(this.element)?u.call(this,s):m(s,h(this)[s.getName()]))}if(i){s=a;for(r=0;;r++){l=o.elements[r];if(l.equals(i))break;else if(l.match)continue;else l=l.clone();l.append(s);s=l}s["start"==i.match?"insertBefore":"insertAfter"](i)}}else{var c=n.endNode,d=this;e();for(o=a;!o.equals(c);)i=o.getNextSourceNode(),o.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(o)&&(o.getName()==this.element?u.call(this,o):m(o,h(this)[o.getName()]),i.type==CKEDITOR.NODE_ELEMENT&&i.contains(a)&&(e(),i=a.getNext())),o=i}t.moveToBookmark(n);t.shrink(CKEDITOR.NODE_ELEMENT,!0)}function _(t){var e=[];t.forEach(function(t){if("true"==t.getAttribute("contenteditable"))return e.push(t),!1},CKEDITOR.NODE_ELEMENT,!0);return e}function n(t){var e=t.getEnclosedNode()||t.getCommonAncestor(!1,!0);(t=new CKEDITOR.dom.elementPath(e,t.root).contains(this.element,1))&&!t.isReadOnly()&&s(t,this)}function o(t){var e=t.getCommonAncestor(!0,!0);if(t=new CKEDITOR.dom.elementPath(e,t.root).contains(this.element,1)){var e=this._.definition,n=e.attributes;if(n)for(var o in n)t.removeAttribute(o,n[o]);if(e.styles)for(var i in e.styles)e.styles.hasOwnProperty(i)&&t.removeStyle(i)}}function i(t){var e=t.createBookmark(!0),n=t.createIterator();n.enforceRealBlocks=!0;this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var o,i=t.document,r;o=n.getNextParagraph();)!o.isReadOnly()&&(n.activeFilter?n.activeFilter.check(this):1)&&(r=w(this,i,o),a(o,r));t.moveToBookmark(e)}function r(t){var e=t.createBookmark(1),n=t.createIterator();n.enforceRealBlocks=!0;n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var o,i;o=n.getNextParagraph();)this.checkElementRemovable(o)&&(o.is("pre")?((i=this._.enterMode==CKEDITOR.ENTER_BR?null:t.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&o.copyAttributes(i),a(o,i)):u.call(this,o));t.moveToBookmark(e)}function a(t,e){var n=!e;n&&(e=t.getDocument().createElement("div"),t.copyAttributes(e));var o=e&&e.is("pre"),i=t.is("pre"),r=!o&&i;if(o&&!i){i=e;(r=t.getBogus())&&r.remove();r=t.getHtml();r=c(r,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");r=r.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");r=r.replace(/([ \t\n\r]+|&nbsp;)/g," ");r=r.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var a=t.getDocument().createElement("div");a.append(i);i.$.outerHTML="<pre>"+r+"</pre>";i.copyAttributes(a.getFirst());i=a.getFirst().remove()}else i.setHtml(r);e=i}else r?e=d(n?[t.getHtml()]:l(t),e):t.moveChildren(e);e.replace(t);if(o){var n=e,s;(s=n.getPrevious(T))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("pre")&&(o=c(s.getHtml(),/\n$/,"")+"\n\n"+c(n.getHtml(),/^\n/,""),CKEDITOR.env.ie?n.$.outerHTML="<pre>"+o+"</pre>":n.setHtml(o),s.remove())}else n&&p(e)}function l(t){var n=[];c(t.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(t,e,n){return e+"</pre>"+n+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(t,e){n.push(e)});return n}function c(t,e,n){var o="",i="";t=t.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(t,e,n){e&&(o=e);n&&(i=n);return""});return o+t.replace(e,n)+i}function d(t,e){var n;1<t.length&&(n=new CKEDITOR.dom.documentFragment(e.getDocument()));for(var o=0;o<t.length;o++){var i=t[o],i=i.replace(/(\r\n|\r)/g,"\n"),i=c(i,/^[ \t]*\n/,""),i=c(i,/\n$/,""),i=c(i,/^[ \t]+|[ \t]+$/g,function(t,e){return 1==t.length?"&nbsp;":e?" "+CKEDITOR.tools.repeat("&nbsp;",t.length-1):CKEDITOR.tools.repeat("&nbsp;",t.length-1)+" "}),i=i.replace(/\n/g,"<br>"),i=i.replace(/[ \t]{2,}/g,function(t){return CKEDITOR.tools.repeat("&nbsp;",t.length-1)+" "});if(n){var r=e.clone();r.setHtml(i);n.append(r)}else e.setHtml(i)}return n||e}function u(t,e){var n=this._.definition,o=n.attributes,n=n.styles,i=h(this)[t.getName()],r=CKEDITOR.tools.isEmpty(o)&&CKEDITOR.tools.isEmpty(n),a;for(a in o)if("class"!=a&&!this._.definition.fullMatch||t.getAttribute(a)==g(a,o[a]))e&&"data-"==a.slice(0,5)||(r=t.hasAttribute(a),t.removeAttribute(a));for(var s in n)this._.definition.fullMatch&&t.getStyle(s)!=g(s,n[s],!0)||(r=r||!!t.getStyle(s),t.removeStyle(s));m(t,i,E[t.getName()]);r&&(this._.definition.alwaysRemoveElement?p(t,1):!CKEDITOR.dtd.$block[t.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!t.hasAttributes()?p(t):t.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function S(t){for(var e=h(this),n=t.getElementsByTag(this.element),o,i=n.count();0<=--i;)o=n.getItem(i),o.isReadOnly()||u.call(this,o,!0);for(var r in e)if(r!=this.element)for(n=t.getElementsByTag(r),i=n.count()-1;0<=i;i--)o=n.getItem(i),o.isReadOnly()||m(o,e[r])}function m(t,e,n){if(e=e&&e.attributes)for(var o=0;o<e.length;o++){var i=e[o][0],r;if(r=t.getAttribute(i)){var a=e[o][1];(null===a||a.test&&a.test(r)||"string"==typeof a&&r==a)&&t.removeAttribute(i)}}n||p(t)}function p(t,e){if(!t.hasAttributes()||e)if(CKEDITOR.dtd.$block[t.getName()]){var n=t.getPrevious(T),o=t.getNext(T);!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||t.append("br",1);!o||o.type!=CKEDITOR.NODE_TEXT&&o.isBlockBoundary({br:1})||t.append("br");t.remove(!0)}else n=t.getFirst(),o=t.getLast(),t.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),o&&!n.equals(o)&&o.type==CKEDITOR.NODE_ELEMENT&&o.mergeSiblings())}function w(t,e,n){var o;o=t.element;"*"==o&&(o="span");o=new CKEDITOR.dom.element(o,e);n&&n.copyAttributes(o);o=s(o,t);e.getCustomData("doc_processing_style")&&o.hasAttribute("id")?o.removeAttribute("id"):e.setCustomData("doc_processing_style",1);return o}function s(t,e){var n=e._.definition,o=n.attributes,n=CKEDITOR.style.getStyleText(n);if(o)for(var i in o)t.setAttribute(i,o[i]);n&&t.setAttribute("style",n);return t}function f(t,n){for(var e in t)t[e]=t[e].replace(y,function(t,e){return n[e]})}function h(t){if(t._.overrides)return t._.overrides;var e=t._.overrides={},n=t._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var i=n[o],r,a;"string"==typeof i?r=i.toLowerCase():(r=i.element?i.element.toLowerCase():t.element,a=i.attributes);i=e[r]||(e[r]={});if(a){var i=i.attributes=i.attributes||[],s;for(s in a)i.push([s.toLowerCase(),a[s]])}}}return e}function g(t,e,n){var o=new CKEDITOR.dom.element("span");o[n?"setStyle":"setAttribute"](t,e);return o[n?"getStyle":"getAttribute"](t)}function C(t,e){function n(t,e){return"font-family"==e.toLowerCase()?t.replace(/["']/g,""):t}"string"==typeof t&&(t=CKEDITOR.tools.parseCssText(t));"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0));for(var o in t)if(!(o in e)||n(e[o],o)!=n(t[o],o)&&"inherit"!=t[o]&&"inherit"!=e[o])return!1;return!0}function A(t,e,n){var o=t.document,i=t.getRanges();e=e?this.removeFromRange:this.applyToRange;for(var r,a=i.createIterator();r=a.getNextRange();)e.call(this,r,n);t.selectRanges(i);o.removeCustomData("doc_processing_style")}var E={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},v={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},b=/\s*(?:;\s*|$)/,y=/#\((.+?)\)/g,K=CKEDITOR.dom.walker.bookmark(0,1),T=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(t,e){if("string"==typeof t.type)return new CKEDITOR.style.customHandlers[t.type](t);var n=t.attributes;n&&n.style&&(t.styles=CKEDITOR.tools.extend({},t.styles,CKEDITOR.tools.parseCssText(n.style)),delete n.style);e&&(t=CKEDITOR.tools.clone(t),f(t.attributes,e),f(t.styles,e));n=this.element=t.element?"string"==typeof t.element?t.element.toLowerCase():t.element:"*";this.type=t.type||(E[n]?CKEDITOR.STYLE_BLOCK:v[n]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:t}};CKEDITOR.style.prototype={apply:function(t){if(t instanceof CKEDITOR.dom.document)return A.call(this,t.getSelection());if(this.checkApplicable(t.elementPath(),t)){var e=this._.enterMode;e||(this._.enterMode=t.activeEnterMode);A.call(this,t.getSelection(),0,t);this._.enterMode=e}},remove:function(t){if(t instanceof CKEDITOR.dom.document)return A.call(this,t.getSelection(),1);if(this.checkApplicable(t.elementPath(),t)){var e=this._.enterMode;e||(this._.enterMode=t.activeEnterMode);A.call(this,t.getSelection(),1,t);this._.enterMode=e}},applyToRange:function(t){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?R:this.type==CKEDITOR.STYLE_BLOCK?i:this.type==CKEDITOR.STYLE_OBJECT?n:null;return this.applyToRange(t)},removeFromRange:function(t){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?e:this.type==CKEDITOR.STYLE_BLOCK?r:this.type==CKEDITOR.STYLE_OBJECT?o:null;return this.removeFromRange(t)},applyToObject:function(t){s(t,this)},checkActive:function(t,e){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(t.block||t.blockLimit,!0,e);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var n=t.elements,o=0,i;o<n.length;o++)if(i=n[o],this.type!=CKEDITOR.STYLE_INLINE||i!=t.block&&i!=t.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var r=i.getName();if(!("string"==typeof this.element?r==this.element:r in this.element))continue}if(this.checkElementRemovable(i,!0,e))return!0}}return!1},checkApplicable:function(t,e,n){e&&e instanceof CKEDITOR.filter&&(n=e);if(n&&!n.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!t.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!t.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(t,e){var n=this._.definition;if(!t||!n.ignoreReadonly&&t.isReadOnly())return!1;var o=t.getName();if("string"==typeof this.element?o==this.element:o in this.element){if(!e&&!t.hasAttributes())return!0;if(o=n._AC)n=o;else{var o={},i=0,r=n.attributes;if(r)for(var a in r)i++,o[a]=r[a];if(a=CKEDITOR.style.getStyleText(n))o.style||i++,o.style=a;o._length=i;n=n._AC=o}if(n._length){for(var s in n)if("_length"!=s)if(o=t.getAttribute(s)||"","style"==s?C(n[s],o):n[s]==o){if(!e)return!0}else if(e)return!1;if(e)return!0}else return!0}return!1},checkElementRemovable:function(t,e,n){if(this.checkElementMatch(t,e,n))return!0;if(e=h(this)[t.getName()]){var o;if(!(e=e.attributes))return!0;for(n=0;n<e.length;n++)if(o=e[n][0],o=t.getAttribute(o)){var i=e[n][1];if(null===i)return!0;if("string"==typeof i){if(o==i)return!0}else if(i.test(o))return!0}}return!1},buildPreview:function(t){var e=this._.definition,n=[],o=e.element;"bdo"==o&&(o="span");var n=["<",o],i=e.attributes;if(i)for(var r in i)n.push(" ",r,'="',i[r],'"');(i=CKEDITOR.style.getStyleText(e))&&n.push(' style="',i,'"');n.push(">",t||e.name,"</",o,">");return n.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(t){var e=t._ST;if(e)return e;var e=t.styles,n=t.attributes&&t.attributes.style||"",o="";n.length&&(n=n.replace(b,";"));for(var i in e){var r=e[i],a=(i+":"+r).replace(b,";");"inherit"==r?o+=a:n+=a}n.length&&(n=CKEDITOR.tools.normalizeCssText(n,!0));return t._ST=n+o};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(t){var e=function(t){this._={definition:t};this.setup&&this.setup(t)};e.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},t,!0);return this.customHandlers[t.type]=e};var x=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,N=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(t,e){this.requiredContent=this.allowedContent=this.style=t;CKEDITOR.tools.extend(this,e,!0)};CKEDITOR.styleCommand.prototype.exec=function(t){t.focus();this.state==CKEDITOR.TRISTATE_OFF?t.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&t.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(t,e,n){CKEDITOR.stylesSet.addExternal(t,e,"");CKEDITOR.stylesSet.load(t,n)};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(t,e){var i=this._.styleStateChangeCallbacks;i||(i=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(t){for(var e=0;e<i.length;e++){var n=i[e],o=n.style.checkActive(t.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;n.fn.call(this,o)}}));i.push({style:t,fn:e})},applyStyle:function(t){t.apply(this)},removeStyle:function(t){t.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var n=this,t=n.config.stylesCombo_stylesSet||n.config.stylesSet;if(!1===t)e(null);else if(t instanceof Array)n._.stylesDefinitions=t,e(t);else{t||(t="default");var t=t.split(":"),o=t[0];CKEDITOR.stylesSet.addExternal(o,t[1]?t.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(o,function(t){n._.stylesDefinitions=t[o];e(n._.stylesDefinitions)})}}}});CKEDITOR.dom.comment=function(t,e){"string"==typeof t&&(t=(e?e.$:document).createComment(t));CKEDITOR.dom.domObject.call(this,t)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}});"use strict";(function(){var d={},u={},t;for(t in CKEDITOR.dtd.$blockLimit)t in CKEDITOR.dtd.$list||(d[t]=1);for(t in CKEDITOR.dtd.$block)t in CKEDITOR.dtd.$blockLimit||t in CKEDITOR.dtd.$empty||(u[t]=1);CKEDITOR.dom.elementPath=function(t,e){var n=null,o=null,i=[],r=t,a;e=e||t.getDocument().getBody();do{if(r.type==CKEDITOR.NODE_ELEMENT){i.push(r);if(!this.lastElement&&(this.lastElement=r,r.is(CKEDITOR.dtd.$object)||"false"==r.getAttribute("contenteditable")))continue;if(r.equals(e))break;if(!o&&(a=r.getName(),"true"==r.getAttribute("contenteditable")?o=r:!n&&u[a]&&(n=r),d[a])){if(a=!n&&"div"==a){t:{a=r.getChildren();for(var s=0,l=a.count();s<l;s++){var c=a.getItem(s);if(c.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[c.getName()]){a=!0;break t}}a=!1}a=!a}a?n=r:o=r}}}while(r=r.getParent());o||(o=e);this.block=n;this.blockLimit=o;this.root=e;this.elements=i}})();CKEDITOR.dom.elementPath.prototype={compare:function(t){var e=this.elements;t=t&&t.elements;if(!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0},contains:function(e,t,n){var o;"string"==typeof e&&(o=function(t){return t.getName()==e});e instanceof CKEDITOR.dom.element?o=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?o=function(t){return-1<CKEDITOR.tools.indexOf(e,t.getName())}:"function"==typeof e?o=e:"object"==typeof e&&(o=function(t){return t.getName()in e});var i=this.elements,r=i.length;t&&r--;n&&(i=Array.prototype.slice.call(i,0),i.reverse());for(t=0;t<r;t++)if(o(i[t]))return i[t];return null},isContextFor:function(t){var e;return t in CKEDITOR.dtd.$block?(e=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!e.getDtd()[t]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};CKEDITOR.dom.text=function(t,e){"string"==typeof t&&(t=(e?e.$:document).createTextNode(t));this.$=t};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(t){this.$.nodeValue=t},split:function(t){var e=this.$.parentNode,n=e.childNodes.length,o=this.getLength(),i=this.getDocument(),r=new CKEDITOR.dom.text(this.$.splitText(t),i);e.childNodes.length==n&&(t>=o?(r=i.createText(""),r.insertAfter(this)):(t=i.createText(""),t.insertAfter(r),t.remove()));return r},substring:function(t,e){return"number"!=typeof e?this.$.nodeValue.substr(t):this.$.nodeValue.substring(t,e)}});(function(){function r(t,e,n){var o=t.serializable,i=e[n?"endContainer":"startContainer"],r=n?"endOffset":"startOffset",a=o?e.document.getById(t.startNode):t.startNode;t=o?e.document.getById(t.endNode):t.endNode;i.equals(a.getPrevious())?(e.startOffset=e.startOffset-i.getLength()-t.getPrevious().getLength(),i=t.getNext()):i.equals(t.getPrevious())&&(e.startOffset-=i.getLength(),i=t.getNext());i.equals(a.getParent())&&e[r]++;i.equals(t.getParent())&&e[r]++;e[n?"endContainer":"startContainer"]=i;return e}CKEDITOR.dom.rangeList=function(t){if(t instanceof CKEDITOR.dom.rangeList)return t;t?t instanceof CKEDITOR.dom.range&&(t=[t]):t=[];return CKEDITOR.tools.extend(t,e)};var e={createIterator:function(){var r=this,a=CKEDITOR.dom.walker.bookmark(),s=[],l;return{getNextRange:function(t){l=void 0===l?0:l+1;var e=r[l];if(e&&1<r.length){if(!l)for(var n=r.length-1;0<=n;n--)s.unshift(r[n].createBookmark(!0));if(t)for(var o=0;r[l+o+1];){var i=e.document;t=0;n=i.getById(s[o].endNode);for(i=i.getById(s[o+1].startNode);;){n=n.getNextSourceNode(!1);if(i.equals(n))t=1;else if(a(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())continue;break}if(!t)break;o++}for(e.moveToBookmark(s.shift());o--;)n=r[++l],n.moveToBookmark(s.shift()),e.setEnd(n.endContainer,n.endOffset)}return e}}},createBookmarks:function(t){for(var e=[],n,o=0;o<this.length;o++){e.push(n=this[o].createBookmark(t,!0));for(var i=o+1;i<this.length;i++)this[i]=r(n,this[i]),this[i]=r(n,this[i],!0)}return e},createBookmarks2:function(t){for(var e=[],n=0;n<this.length;n++)e.push(this[n].createBookmark2(t));return e},moveToBookmarks:function(t){for(var e=0;e<this.length;e++)this[e].moveToBookmark(t[e])}}})();(function(){function r(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function n(t){var e=CKEDITOR.skin["ua_"+t],n=CKEDITOR.env;if(e)for(var e=e.split(",").sort(function(t,e){return t>e?-1:1}),o=0,i;o<e.length;o++)if(i=e[o],n.ie&&(i.replace(/^ie/,"")==n.version||n.quirks&&"iequirks"==i)&&(i="ie"),n[i]){t+="_"+e[o];break}return CKEDITOR.getUrl(r()+t+".css")}function o(t,e){i[t]||(CKEDITOR.document.appendStyleSheet(n(t)),i[t]=1);e&&e()}function a(t){var e=t.getById(l);e||(e=t.getHead().append("style"),e.setAttribute("id",l),e.setAttribute("type","text/css"));return e}function s(t,e,n){var o,i,r;if(CKEDITOR.env.webkit)for(e=e.split("}").slice(0,-1),i=0;i<e.length;i++)e[i]=e[i].split("{");for(var a=0;a<t.length;a++)if(CKEDITOR.env.webkit)for(i=0;i<e.length;i++){r=e[i][1];for(o=0;o<n.length;o++)r=r.replace(n[o][0],n[o][1]);t[a].$.sheet.addRule(e[i][0],r)}else{r=e;for(o=0;o<n.length;o++)r=r.replace(n[o][0],n[o][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?t[a].$.styleSheet.cssText+=r:t[a].$.innerHTML+=r}}var i={};CKEDITOR.skin={path:r,loadPart:function(t,e){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(r()+"skin.js"),function(){o(t,e)}):o(t,e)},getPath:function(t){return CKEDITOR.getUrl(n(t))},icons:{},addIcon:function(t,e,n,o){t=t.toLowerCase();this.icons[t]||(this.icons[t]={path:e,offset:n||0,bgsize:o||"16px"})},getIconStyle:function(t,e,n,o,i){var r;t&&(t=t.toLowerCase(),e&&(r=this.icons[t+"-rtl"]),r||(r=this.icons[t]));t=n||r&&r.path||"";o=o||r&&r.offset;i=i||r&&r.bgsize||"16px";t&&(t=t.replace(/'/g,"\\'"));return t&&"background-image:url('"+CKEDITOR.getUrl(t)+"');background-position:0 "+o+"px;background-size:"+i+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(t){var i=a(CKEDITOR.document);return(this.setUiColor=function(t){this.uiColor=t;var e=CKEDITOR.skin.chameleon,n="",o="";"function"==typeof e&&(n=e(this,"editor"),o=e(this,"panel"));t=[[d,t]];s([i],n,t);s(c,o,t)}).call(this,t)}});var l="cke_ui_color",c=[],d=/\$color/g;CKEDITOR.on("instanceLoaded",function(t){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var n=t.editor;t=function(t){t=(t.data[0]||t.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!t.getById("cke_ui_color")){t=a(t);c.push(t);var e=n.getUiColor();e&&s([t],CKEDITOR.skin.chameleon(n,"panel"),[[d,e]])}};n.on("panelShow",t);n.on("menuShow",t);n.config.uiColor&&n.setUiColor(n.config.uiColor)}})})();(function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var t=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);t.appendTo(CKEDITOR.document.getHead());try{var e=t.getComputedStyle("border-top-color"),n=t.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!e||e!=n)}catch(t){CKEDITOR.env.hc=!1}t.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(t=CKEDITOR._.pending)for(delete CKEDITOR._.pending,e=0;e<t.length;e++)CKEDITOR.editor.prototype.constructor.apply(t[e][0],t[e][1]),CKEDITOR.add(t[e][0])})();
/*
 Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/CKEDITOR.skin.name="moono-lisa";CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie8";CKEDITOR.skin.chameleon=function(){var o=function(){return function(t,e){for(var n=t.match(/[^#]./g),o=0;3>o;o++){var i=o,r;r=parseInt(n[o],16);r=("0"+(0>e?0|r*(1+e):0|r+(255-r)*e).toString(16)).slice(-2);n[i]=r}return"#"+n.join("")}}(),i={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(t,e){var n=o(t.uiColor,.4),n={id:"."+t.id,defaultBorder:o(n,-.2),toolbarElementsBorder:o(n,-.25),defaultBackground:n,lightBackground:o(n,.8),darkBackground:o(n,-.15),ckeButtonOn:o(n,.4),ckeResizer:o(n,-.4),ckeColorauto:o(n,.8),dialogBody:o(n,.7),dialogTab:o(n,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:o(n,-.6),menubuttonHover:o(n,.1),menubuttonIcon:o(n,.5),menubuttonIconHover:o(n,.3)};return i[e].output(n).replace(/\[/g,"{").replace(/\]/g,"}")}}();CKEDITOR.plugins.add("dialogui",{onLoad:function(){var c=function(t){this._||(this._={});this._["default"]=this._.initValue=t["default"]||"";this._.required=t.required||!1;for(var e=[this._],n=1;n<arguments.length;n++)e.push(arguments[n]);e.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,e);return this._},t={build:function(t,e,n){return new CKEDITOR.ui.dialog.textInput(t,e,n)}},e={build:function(t,e,n){return new CKEDITOR.ui.dialog[e.type](t,e,n)}},n={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(t){this.setValue(this.getInitValue(),t)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(t,e){this._.domOnChangeRegistered||(t.on("load",function(){this.getInputElement().on("change",function(){t.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",e)}},!0),i=/^on([A-Z]\w+)/,h=function(t){for(var e in t)(i.test(e)||"title"==e||"type"==e)&&delete t[e];return t},s=function(t){t=t.data.getKeystroke();t==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):t==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(n,o,t,i){if(!(4>arguments.length)){var r=c.call(this,o);r.labelId=CKEDITOR.tools.getNextId()+"_label";this._.children=[];var e={role:o.role||"presentation"};o.includeLabel&&(e["aria-labelledby"]=r.labelId);CKEDITOR.ui.dialog.uiElement.call(this,n,o,t,"div",null,e,function(){var t=[],e=o.required?" cke_required":"";"horizontal"!=o.labelLayout?t.push('<label class="cke_dialog_ui_labeled_label'+e+'" ',' id="'+r.labelId+'"',r.inputId?' for="'+r.inputId+'"':"",(o.labelStyle?' style="'+o.labelStyle+'"':"")+">",o.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',o.controlStyle?' style="'+o.controlStyle+'"':"",' role="presentation">',i.call(this,n,o),"</div>"):(e={type:"hbox",widths:o.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+e+'" id="'+r.labelId+'" for="'+r.inputId+'"'+(o.labelStyle?' style="'+o.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(o.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(o.controlStyle?' style="'+o.controlStyle+'"':"")+">"+i.call(this,n,o)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(n,e,t));return t.join("")})}},textInput:function(e,n,t){if(!(3>arguments.length)){c.call(this,n);var o=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",i={class:"cke_dialog_ui_input_"+n.type,id:o,type:n.type};n.validate&&(this.validate=n.validate);n.maxLength&&(i.maxlength=n.maxLength);n.size&&(i.size=n.size);n.inputStyle&&(i.style=n.inputStyle);var r=this,a=!1;e.on("load",function(){r.getInputElement().on("keydown",function(t){13==t.data.getKeystroke()&&(a=!0)});r.getInputElement().on("keyup",function(t){13==t.data.getKeystroke()&&a&&(e.getButton("ok")&&setTimeout(function(){e.getButton("ok").click()},0),a=!1);r.bidi&&s.call(r,t)},null,null,1e3)});CKEDITOR.ui.dialog.labeledElement.call(this,e,n,t,function(){var t=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];n.width&&t.push('style="width:'+n.width+'" ');t.push("><input ");i["aria-labelledby"]=this._.labelId;this._.required&&(i["aria-required"]=this._.required);for(var e in i)t.push(e+'="'+i[e]+'" ');t.push(" /></div>");return t.join("")})}},textarea:function(t,e,n){if(!(3>arguments.length)){c.call(this,e);var o=this,i=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",r={};e.validate&&(this.validate=e.validate);r.rows=e.rows||5;r.cols=e.cols||20;r["class"]="cke_dialog_ui_input_textarea "+(e["class"]||"");"undefined"!=typeof e.inputStyle&&(r.style=e.inputStyle);e.dir&&(r.dir=e.dir);if(o.bidi)t.on("load",function(){o.getInputElement().on("keyup",s)},o);CKEDITOR.ui.dialog.labeledElement.call(this,t,e,n,function(){r["aria-labelledby"]=this._.labelId;this._.required&&(r["aria-required"]=this._.required);var t=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',i,'" '],e;for(e in r)t.push(e+'="'+CKEDITOR.tools.htmlEncode(r[e])+'" ');t.push(">",CKEDITOR.tools.htmlEncode(o._["default"]),"</textarea></div>");return t.join("")})}},checkbox:function(i,r,t){if(!(3>arguments.length)){var a=c.call(this,r,{default:!!r["default"]});r.validate&&(this.validate=r.validate);CKEDITOR.ui.dialog.uiElement.call(this,i,r,t,"span",null,null,function(){var t=CKEDITOR.tools.extend({},r,{id:r.id?r.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),e=[],n=CKEDITOR.tools.getNextId()+"_label",o={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":n};h(t);r["default"]&&(o.checked="checked");"undefined"!=typeof t.inputStyle&&(t.style=t.inputStyle);a.checkbox=new CKEDITOR.ui.dialog.uiElement(i,t,e,"input",null,o);e.push(' <label id="',n,'" for="',o.id,'"'+(r.labelStyle?' style="'+r.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(r.label),"</label>");return e.join("")})}},radio:function(u,m,t){if(!(3>arguments.length)){c.call(this,m);this._["default"]||(this._["default"]=this._.initValue=m.items[0][1]);m.validate&&(this.validate=m.validate);var p=[],f=this;m.role="radiogroup";m.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,u,m,t,function(){for(var t=[],e=[],n=(m.id?m.id:CKEDITOR.tools.getNextId())+"_radio",o=0;o<m.items.length;o++){var i=m.items[o],r=void 0!==i[2]?i[2]:i[0],a=void 0!==i[1]?i[1]:i[0],s=CKEDITOR.tools.getNextId()+"_radio_input",l=s+"_label",s=CKEDITOR.tools.extend({},m,{id:s,title:null,type:null},!0),r=CKEDITOR.tools.extend({},s,{title:r},!0),c={type:"radio",class:"cke_dialog_ui_radio_input",name:n,value:a,"aria-labelledby":l},d=[];f._["default"]==a&&(c.checked="checked");h(s);h(r);"undefined"!=typeof s.inputStyle&&(s.style=s.inputStyle);s.keyboardFocusable=!0;p.push(new CKEDITOR.ui.dialog.uiElement(u,s,d,"input",null,c));d.push(" ");new CKEDITOR.ui.dialog.uiElement(u,r,d,"label",null,{id:l,for:c.id},i[0]);t.push(d.join(""))}new CKEDITOR.ui.dialog.hbox(u,p,t,e);return e.join("")});this._.children=p}},button:function(t,e,n){if(arguments.length){"function"==typeof e&&(e=e(t.getParentEditor()));c.call(this,e,{disabled:e.disabled||!1});CKEDITOR.event.implementOn(this);var o=this;t.on("load",function(){var t=this.getElement();(function(){t.on("click",function(t){o.click();t.data.preventDefault()});t.on("keydown",function(t){t.data.getKeystroke()in{32:1}&&(o.click(),t.data.preventDefault())})})();t.unselectable()},this);var i=CKEDITOR.tools.extend({},e);delete i.style;var r=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,i,n,"a",null,{style:e.style,href:"javascript:void(0)",title:e.label,hidefocus:"true",class:e["class"],role:"button","aria-labelledby":r},'<span id="'+r+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(e.label)+"</span>")}},select:function(a,s,t){if(!(3>arguments.length)){var l=c.call(this,s);s.validate&&(this.validate=s.validate);l.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,a,s,t,function(){var t=CKEDITOR.tools.extend({},s,{id:s.id?s.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),e=[],n=[],o={id:l.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};e.push('<div class="cke_dialog_ui_input_',s.type,'" role="presentation"');s.width&&e.push('style="width:'+s.width+'" ');e.push(">");void 0!==s.size&&(o.size=s.size);void 0!==s.multiple&&(o.multiple=s.multiple);h(t);for(var i=0,r;i<s.items.length&&(r=s.items[i]);i++)n.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==r[1]?r[1]:r[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(r[0]));"undefined"!=typeof t.inputStyle&&(t.style=t.inputStyle);l.select=new CKEDITOR.ui.dialog.uiElement(a,t,e,"select",null,o,n.join(""));e.push("</div>");return e.join("")})}},file:function(t,e,n){if(!(3>arguments.length)){void 0===e["default"]&&(e["default"]="");var o=CKEDITOR.tools.extend(c.call(this,e),{definition:e,buttons:[]});e.validate&&(this.validate=e.validate);t.on("load",function(){CKEDITOR.document.getById(o.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,t,e,n,function(){o.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var t=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',o.frameId,'" title="',e.label,'" src="javascript:void('];t.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");t.push(')"></iframe>');return t.join("")})}},fileButton:function(n,o,t){var e=this;if(!(3>arguments.length)){c.call(this,o);o.validate&&(this.validate=o.validate);var i=CKEDITOR.tools.extend({},o),r=i.onClick;i.className=(i.className?i.className+" ":"")+"cke_dialog_ui_button";i.onClick=function(t){var e=o["for"];r&&!1===r.call(this,t)||(n.getContentElement(e[0],e[1]).submit(),this.disable())};n.on("load",function(){n.getContentElement(o["for"][0],o["for"][1])._.buttons.push(e)});CKEDITOR.ui.dialog.button.call(this,n,i,t)}},html:function(){var s=/^\s*<[\w:]+\s+([^>]*)?>/,l=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(t,e,n){if(!(3>arguments.length)){var o=[],i=e.html;"<"!=i.charAt(0)&&(i="<span>"+i+"</span>");var r=e.focus;if(r){var a=this.focus;this.focus=function(){("function"==typeof r?r:a).call(this);this.fire("focus")};e.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,t,e,o,"span",null,null,"");o=o.join("").match(s);i=i.match(l)||["","",""];c.test(i[1])&&(i[1]=i[1].slice(0,-1),i[2]="/"+i[2]);n.push([i[1]," ",o[1]||"",i[2]].join(""))}}}(),fieldset:function(t,e,n,o,i){var r=i.label;this._={children:e};CKEDITOR.ui.dialog.uiElement.call(this,t,i,o,"fieldset",null,null,function(){var t=[];r&&t.push("<legend"+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">"+r+"</legend>");for(var e=0;e<n.length;e++)t.push(n[e]);return t.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(t){var e=CKEDITOR.document.getById(this._.labelId);1>e.getChildCount()?new CKEDITOR.dom.text(t,CKEDITOR.document).appendTo(e):e.getChild(0).$.nodeValue=t;return this},getLabel:function(){var t=CKEDITOR.document.getById(this._.labelId);return!t||1>t.getChildCount()?"":t.getChild(0).getText()},eventProcessors:o},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var t=this.getElement();t&&t.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(t,e){this.on("click",function(){e.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(t){if(this.bidi){var e=t&&t.charAt(0);(e="‪"==e?"ltr":"‫"==e?"rtl":null)&&(t=t.slice(1));this.setDirectionMarker(e)}t||(t="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var t=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&t){var e=this.getDirectionMarker();e&&(t=("ltr"==e?"‪":"‫")+t)}return t},setDirectionMarker:function(t){var e=this.getInputElement();t?e.setAttributes({dir:t,"data-cke-dir-marker":t}):this.getDirectionMarker()&&e.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},n,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(t,e,n){var o=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),i=this.getInputElement().$;o.$.text=t;o.$.value=void 0===e||null===e?t:e;void 0===n||null===n?CKEDITOR.env.ie?i.add(o.$):i.add(o.$,null):i.add(o.$,n);return this},remove:function(t){this.getInputElement().$.remove(t);return this},clear:function(){for(var t=this.getInputElement().$;0<t.length;)t.remove(0);return this},keyboardFocusable:!0},n,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(t,e){this.getInputElement().$.checked=t;!e&&this.fire("change",{value:t})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(t,e){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return o.onChange.apply(this,arguments);t.on("load",function(){var e=this._.checkbox.getElement();e.on("propertychange",function(t){t=t.data.$;"checked"==t.propertyName&&this.fire("change",{value:e.$.checked})},this)},this);this.on("change",e);return null}},keyboardFocusable:!0},n,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(t,e){for(var n=this._.children,o,i=0;i<n.length&&(o=n[i]);i++)o.getElement().$.checked=o.getValue()==t;!e&&this.fire("change",{value:t})},getValue:function(){for(var t=this._.children,e=0;e<t.length;e++)if(t[e].getElement().$.checked)return t[e].getValue();return null},accessKeyUp:function(){var t=this._.children,e;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked){t[e].getElement().focus();return}t[0].getElement().focus()},eventProcessors:{onChange:function(t,e){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return o.onChange.apply(this,arguments);t.on("load",function(){for(var t=this._.children,e=this,n=0;n<t.length;n++)t[n].getElement().on("propertychange",function(t){t=t.data.$;"checked"==t.propertyName&&this.$.checked&&e.fire("change",{value:this.getAttribute("value")})})},this);this.on("change",e);return null}}},n,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,n,{getInputElement:function(){var t=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<t.$.forms.length?new CKEDITOR.dom.element(t.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(t){var e=/^on([A-Z]\w+)/,n,o=function(t,e,n,o){t.on("formLoaded",function(){t.getInputElement().on(n,o,t)})},i;for(i in t)if(n=i.match(e))this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,t[i]):o(this,this._.dialog,n[1].toLowerCase(),t[i]);return this},reset:function(){function t(){o.$.open();var t="";i.size&&(t=i.size-(CKEDITOR.env.ie?7:0));var e=n.frameId+"_input";o.$.write(['<html dir="'+l+'" lang="'+c+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+l+'" lang="'+c+'" action="',CKEDITOR.tools.htmlEncode(i.action),'"><label id="',n.labelId,'" for="',e,'" style="display:none">',CKEDITOR.tools.htmlEncode(i.label),'</label><input style="width:100%" id="',e,'" aria-labelledby="',n.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(i.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<t?t:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+a+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+s+")}","<\/script>"].join(""));o.$.close();for(t=0;t<r.length;t++)r[t].enable()}var n=this._,o=CKEDITOR.document.getById(n.frameId).getFrameDocument(),i=n.definition,r=n.buttons,a=this.formLoadedNumber,s=this.formUnloadNumber,l=n.dialog._.editor.lang.dir,c=n.dialog._.editor.langCode;a||(a=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),s=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(a);CKEDITOR.tools.removeFunction(s)}));CKEDITOR.env.gecko?setTimeout(t,500):t()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(t,e){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",e)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",t);CKEDITOR.dialog.addUIElement("password",t);CKEDITOR.dialog.addUIElement("textarea",e);CKEDITOR.dialog.addUIElement("checkbox",e);CKEDITOR.dialog.addUIElement("radio",e);CKEDITOR.dialog.addUIElement("button",e);CKEDITOR.dialog.addUIElement("select",e);CKEDITOR.dialog.addUIElement("file",e);CKEDITOR.dialog.addUIElement("fileButton",e);CKEDITOR.dialog.addUIElement("html",e);CKEDITOR.dialog.addUIElement("fieldset",{build:function(t,e,n){for(var o=e.children,i,r=[],a=[],s=0;s<o.length&&(i=o[s]);s++){var l=[];r.push(l);a.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(t,i,l))}return new CKEDITOR.ui.dialog[e.type](t,a,r,n,e)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;CKEDITOR.DIALOG_STATE_IDLE=1;CKEDITOR.DIALOG_STATE_BUSY=2;(function(){function C(){for(var t=this._.tabIdList.length,e=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+t,n=e-1;n>e-t;n--)if(this._.tabs[this._.tabIdList[n%t]][0].$.offsetHeight)return this._.tabIdList[n%t];return null}function A(){for(var t=this._.tabIdList.length,e=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),n=e+1;n<e+t;n++)if(this._.tabs[this._.tabIdList[n%t]][0].$.offsetHeight)return this._.tabIdList[n%t];return null}function r(t,e){for(var n=t.$.getElementsByTagName("input"),o=0,i=n.length;o<i;o++){var r=new CKEDITOR.dom.element(n[o]);"text"==r.getAttribute("type").toLowerCase()&&(e?(r.setAttribute("value",r.getCustomData("fake_value")||""),r.removeCustomData("fake_value")):(r.setCustomData("fake_value",r.getAttribute("value")),r.setAttribute("value","")))}}function E(t,e){var n=this.getInputElement();n&&(t?n.removeAttribute("aria-invalid"):n.setAttribute("aria-invalid",!0));t||(this.select?this.select():this.focus());e&&alert(e);this.fire("validated",{valid:t,msg:e})}function v(){var t=this.getInputElement();t&&t.removeAttribute("aria-invalid")}function b(t){var e=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",s).output({id:CKEDITOR.tools.getNextNumber(),editorId:t.id,langDir:t.lang.dir,langCode:t.langCode,editorDialogClass:"cke_editor_"+t.name.replace(/\./g,"\\.")+"_dialog",closeTitle:t.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),n=e.getChild([0,0,0,0,0]),o=n.getChild(0),i=n.getChild(1);t.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(n);!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(t="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+t+'" tabIndex="-1"></iframe>').appendTo(n.getParent()));o.unselectable();i.unselectable();return{element:e,parts:{dialog:e.getChild(0),title:o,close:i,tabs:n.getChild(2),contents:n.getChild([3,0,0,0]),footer:n.getChild([3,0,1,0])}}}function o(t,e,n){this.element=e;this.focusIndex=n;this.tabIndex=0;this.isFocusable=function(){return!e.getAttribute("disabled")&&e.isVisible()};this.focus=function(){t._.currentFocusIndex=this.focusIndex;this.element.focus()};e.on("keydown",function(t){t.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});e.on("focus",function(){this.fire("mouseover")});e.on("blur",function(){this.fire("mouseout")})}function l(t){function e(){t.layout()}var n=CKEDITOR.document.getWindow();n.on("resize",e);t.on("hide",function(){n.removeListener("resize",e)})}function a(t,e){this._={dialog:t};CKEDITOR.tools.extend(this,e)}function y(s){function n(t){var e=s.getSize(),n=CKEDITOR.document.getWindow().getViewPaneSize(),o=t.data.$.screenX,i=t.data.$.screenY,r=o-l.x,a=i-l.y;l={x:o,y:i};c.x+=r;c.y+=a;s.move(c.x+m[3]<u?-m[3]:c.x-m[1]>n.width-e.width-u?n.width-e.width+("rtl"==d.lang.dir?0:m[1]):c.x,c.y+m[0]<u?-m[0]:c.y-m[2]>n.height-e.height-u?n.height-e.height+m[2]:c.y,1);t.data.preventDefault()}function o(){CKEDITOR.document.removeListener("mousemove",n);CKEDITOR.document.removeListener("mouseup",o);if(CKEDITOR.env.ie6Compat){var t=O.getChild(0).getFrameDocument();t.removeListener("mousemove",n);t.removeListener("mouseup",o)}}var l=null,c=null,d=s.getParentEditor(),u=d.config.dialog_magnetDistance,m=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof u&&(u=20);s.parts.title.on("mousedown",function(t){l={x:t.data.$.screenX,y:t.data.$.screenY};CKEDITOR.document.on("mousemove",n);CKEDITOR.document.on("mouseup",o);c=s.getPosition();if(CKEDITOR.env.ie6Compat){var e=O.getChild(0).getFrameDocument();e.on("mousemove",n);e.on("mouseup",o)}t.data.preventDefault()},s)}function T(l){function n(t){var e="rtl"==u.lang.dir,n=g.width,o=g.height,i=n+(t.data.$.screenX-h.x)*(e?-1:1)*(l._.moved?1:2),r=o+(t.data.$.screenY-h.y)*(l._.moved?1:2),a=l._.element.getFirst(),a=e&&a.getComputedStyle("right"),s=l.getPosition();s.y+r>f.height&&(r=f.height-s.y);(e?a:s.x)+i>f.width&&(i=f.width-(e?a:s.x));if(d==CKEDITOR.DIALOG_RESIZE_WIDTH||d==CKEDITOR.DIALOG_RESIZE_BOTH)n=Math.max(c.minWidth||0,i-m);if(d==CKEDITOR.DIALOG_RESIZE_HEIGHT||d==CKEDITOR.DIALOG_RESIZE_BOTH)o=Math.max(c.minHeight||0,r-p);l.resize(n,o);l._.moved||l.layout();t.data.preventDefault()}function o(){CKEDITOR.document.removeListener("mouseup",o);CKEDITOR.document.removeListener("mousemove",n);i&&(i.remove(),i=null);if(CKEDITOR.env.ie6Compat){var t=O.getChild(0).getFrameDocument();t.removeListener("mouseup",o);t.removeListener("mousemove",n)}}var c=l.definition,d=c.resizable;if(d!=CKEDITOR.DIALOG_RESIZE_NONE){var u=l.getParentEditor(),m,p,f,h,g,i,e=CKEDITOR.tools.addFunction(function(t){g=l.getSize();var e=l.parts.contents;e.$.getElementsByTagName("iframe").length&&(i=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),e.append(i));p=g.height-l.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));m=g.width-l.parts.contents.getSize("width",1);h={x:t.screenX,y:t.screenY};f=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",n);CKEDITOR.document.on("mouseup",o);CKEDITOR.env.ie6Compat&&(e=O.getChild(0).getFrameDocument(),e.on("mousemove",n),e.on("mouseup",o));t.preventDefault&&t.preventDefault()});l.on("load",function(){var t="";d==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":d==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical");t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+u.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(u.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+e+', event )">'+("ltr"==u.lang.dir?"◢":"◣")+"</div>");l.parts.footer.append(t,1)});u.on("destroy",function(){CKEDITOR.tools.removeFunction(e)})}}function c(t){t.data.preventDefault(1)}function d(t){var n=CKEDITOR.document.getWindow(),e=t.config,o=CKEDITOR.skinName||t.config.skin,i=e.dialog_backgroundCoverColor||("moono-lisa"==o?"black":"white"),o=e.dialog_backgroundCoverOpacity,r=e.baseFloatZIndex,e=CKEDITOR.tools.genKey(i,o,r),a=g[e];a?a.show():(r=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",r,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+i,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(i="<html><body style=\\'background-color:"+i+";\\'></body></html>",r.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),r.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+i+"' );document.close();")+"})())"),r.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),r.push("</div>"),a=CKEDITOR.dom.element.createFromHtml(r.join("")),a.setOpacity(void 0!==o?o:.5),a.on("keydown",c),a.on("keypress",c),a.on("keyup",c),a.appendTo(CKEDITOR.document.getBody()),g[e]=a);t.focusManager.add(a);O=a;t=function(){var t=n.getViewPaneSize();a.setStyles({width:t.width+"px",height:t.height+"px"})};var s=function(){var t=n.getScrollPosition(),e=CKEDITOR.dialog._.currentTop;a.setStyles({left:t.x+"px",top:t.y+"px"});if(e){do{t=e.getPosition(),e.move(t.x,t.y)}while(e=e._.parentDialog)}};h=t;n.on("resize",t);t();CKEDITOR.env.mac&&CKEDITOR.env.webkit||a.focus();if(CKEDITOR.env.ie6Compat){var l=function(){s();arguments.callee.prevScrollHandler.apply(this,arguments)};n.$.setTimeout(function(){l.prevScrollHandler=window.onscroll||function(){};window.onscroll=l},0);s()}}function i(t){O&&(t.focusManager.remove(O),t=CKEDITOR.document.getWindow(),O.hide(),t.removeListener("resize",h),CKEDITOR.env.ie6Compat&&t.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),h=null)}var u=CKEDITOR.tools.cssLength,s='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(i,t){function e(){var t=f._.focusList;t.sort(function(t,e){return t.tabIndex!=e.tabIndex?e.tabIndex-t.tabIndex:t.focusIndex-e.focusIndex});for(var e=t.length,n=0;n<e;n++)t[n].focusIndex=n}function r(t){var e=f._.focusList;t=t||0;if(!(1>e.length)){var n=f._.currentFocusIndex;f._.tabBarMode&&0>t&&(n=0);try{e[n].getInputElement().$.blur()}catch(t){}var o=n,i=1<f._.pageCount;do{o+=t;if(i&&!f._.tabBarMode&&(o==e.length||-1==o)){f._.tabBarMode=!0;f._.tabs[f._.currentTabId][0].focus();f._.currentFocusIndex=-1;return}o=(o+e.length)%e.length;if(o==n)break}while(t&&!e[o].isFocusable());e[o].focus();"text"==e[o].type&&e[o].select()}}function n(t){if(f==CKEDITOR.dialog._.currentTop){var e=t.data.getKeystroke(),n="rtl"==i.lang.dir,o=[37,38,39,40];u=m=0;if(9==e||e==CKEDITOR.SHIFT+9)r(e==CKEDITOR.SHIFT+9?-1:1),u=1;else if(e==CKEDITOR.ALT+121&&!f._.tabBarMode&&1<f.getPageCount())f._.tabBarMode=!0,f._.tabs[f._.currentTabId][0].focus(),f._.currentFocusIndex=-1,u=1;else if(-1!=CKEDITOR.tools.indexOf(o,e)&&f._.tabBarMode)e=-1!=CKEDITOR.tools.indexOf([n?39:37,38],e)?C.call(f):A.call(f),f.selectPage(e),f._.tabs[e][0].focus(),u=1;else if(13!=e&&32!=e||!f._.tabBarMode)if(13==e)e=t.data.getTarget(),e.is("a","button","select","textarea")||e.is("input")&&"button"==e.$.type||((e=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(e.click,0,e),u=1),m=1;else if(27==e)(e=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(e.click,0,e):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),m=1;else return;else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,r(1),u=1;a(t)}}function a(t){u?t.data.preventDefault(1):m&&t.data.stopPropagation()}var o=CKEDITOR.dialog._.dialogDefinitions[t],s=CKEDITOR.tools.clone(k),l=i.config.dialog_buttonsOrder||"OS",c=i.lang.dir,d={},u,m;("OS"==l&&CKEDITOR.env.mac||"rtl"==l&&"ltr"==c||"ltr"==l&&"rtl"==c)&&s.buttons.reverse();o=CKEDITOR.tools.extend(o(i),s);o=CKEDITOR.tools.clone(o);o=new I(this,o);s=b(i);this._={editor:i,element:s.element,name:t,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=s.parts;CKEDITOR.tools.setTimeout(function(){i.fire("ariaWidget",this.parts.contents)},0,this);s={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};s["rtl"==c?"right":"left"]=0;this.parts.dialog.setStyles(s);CKEDITOR.event.call(this);this.definition=o=CKEDITOR.fire("dialogDefinition",{name:t,definition:o},i).definition;if(!("removeDialogTabs"in i._)&&i.config.removeDialogTabs){s=i.config.removeDialogTabs.split(";");for(c=0;c<s.length;c++)if(l=s[c].split(":"),2==l.length){var p=l[0];d[p]||(d[p]=[]);d[p].push(l[1])}i._.removeDialogTabs=d}if(i._.removeDialogTabs&&(d=i._.removeDialogTabs[t]))for(c=0;c<d.length;c++)o.removeContents(d[c]);if(o.onLoad)this.on("load",o.onLoad);if(o.onShow)this.on("show",o.onShow);if(o.onHide)this.on("hide",o.onHide);if(o.onOk)this.on("ok",function(t){i.fire("saveSnapshot");setTimeout(function(){i.fire("saveSnapshot")},0);!1===o.onOk.call(this,t)&&(t.data.hide=!1)});this.state=CKEDITOR.DIALOG_STATE_IDLE;if(o.onCancel)this.on("cancel",function(t){!1===o.onCancel.call(this,t)&&(t.data.hide=!1)});var f=this,h=function(t){var e=f._.contents,n=!1,o;for(o in e)for(var i in e[o])if(n=t.call(this,e[o][i]))return};this.on("ok",function(o){h(function(t){if(t.validate){var e=t.validate(this),n="string"==typeof e||!1===e;n&&(o.data.hide=!1,o.stop());E.call(t,!n,"string"==typeof e?e:void 0);return n}})},this,null,0);this.on("cancel",function(e){h(function(t){if(t.isChanged())return i.config.dialog_noConfirmCancel||confirm(i.lang.common.confirmCancel)||(e.data.hide=!1),!0})},this,null,0);this.parts.close.on("click",function(t){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();t.data.preventDefault()},this);this.changeFocus=r;var g=this._.element;i.focusManager.add(g,1);this.on("show",function(){g.on("keydown",n,this);if(CKEDITOR.env.gecko)g.on("keypress",a,this)});this.on("hide",function(){g.removeListener("keydown",n);CKEDITOR.env.gecko&&g.removeListener("keypress",a);h(function(t){v.apply(t)})});this.on("iframeAdded",function(t){new CKEDITOR.dom.document(t.data.iframe.$.contentWindow.document).on("keydown",n,this,null,0)});this.on("show",function(){e();var t=1<f._.pageCount;i.config.dialog_startupFocusTab&&t?(f._.tabBarMode=!0,f._.tabs[f._.currentTabId][0].focus(),f._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=t?-1:this._.focusList.length-1,o.onFocus?(t=o.onFocus.call(this))&&t.focus():r(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var t=this.getElement(),e=t.getFirst();e.remove();e.appendTo(t)},this);y(this);T(this);new CKEDITOR.dom.text(o.title,CKEDITOR.document).appendTo(this.parts.title);for(c=0;c<o.contents.length;c++)(d=o.contents[c])&&this.addPage(d);this.parts.tabs.on("click",function(t){var e=t.data.getTarget();e.hasClass("cke_dialog_tab")&&(e=e.$.id,this.selectPage(e.substring(4,e.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,r(1)),t.data.preventDefault())},this);c=[];d=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:o.buttons},c).getChild();this.parts.footer.setHtml(c.join(""));for(c=0;c<d.length;c++)this._.buttons[d[c].id]=d[c]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(t,e){this._.contentSize&&this._.contentSize.width==t&&this._.contentSize.height==e||(CKEDITOR.dialog.fire("resize",{dialog:this,width:t,height:e},this._.editor),this.fire("resize",{width:t,height:e},this._.editor),this.parts.contents.setStyles({width:t+"px",height:e+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:t,height:e})}}(),getSize:function(){var t=this._.element.getFirst();return{width:t.$.offsetWidth||0,height:t.$.offsetHeight||0}},move:function(t,e,n){var o=this._.element.getFirst(),i="rtl"==this._.editor.lang.dir,r="fixed"==o.getComputedStyle("position");CKEDITOR.env.ie&&o.setStyle("zoom","100%");r&&this._.position&&this._.position.x==t&&this._.position.y==e||(this._.position={x:t,y:e},r||(r=CKEDITOR.document.getWindow().getScrollPosition(),t+=r.x,e+=r.y),i&&(r=this.getSize(),t=CKEDITOR.document.getWindow().getViewPaneSize().width-r.width-t),e={top:(0<e?e:0)+"px"},e[i?"right":"left"]=(0<t?t:0)+"px",o.setStyles(e),n&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var t=this._.element,e=this.definition;t.getParent()&&t.getParent().equals(CKEDITOR.document.getBody())?t.setStyle("display","block"):t.appendTo(CKEDITOR.document.getBody());this.resize(this._.contentSize&&this._.contentSize.width||e.width||e.minWidth,this._.contentSize&&this._.contentSize.height||e.height||e.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,d(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);t.on("keydown",R);t.on("keyup",_);this._.hasFocus=!1;for(var n in e.contents)if(e.contents[n]){var t=e.contents[n],o=this._.tabs[t.id],i=t.requiredContent,r=0;if(o){for(var a in this._.contents[t.id]){var s=this._.contents[t.id][a];"hbox"!=s.type&&"vbox"!=s.type&&s.getInputElement()&&(s.requiredContent&&!this._.editor.activeFilter.check(s.requiredContent)?s.disable():(s.enable(),r++))}!r||i&&!this._.editor.activeFilter.check(i)?o[0].addClass("cke_dialog_tab_disabled"):o[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout();l(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(t){t.setInitValue&&t.setInitValue()})},100,this)},layout:function(){var t=this.parts.dialog,e=this.getSize(),n=CKEDITOR.document.getWindow().getViewPaneSize(),o=(n.width-e.width)/2,i=(n.height-e.height)/2;CKEDITOR.env.ie6Compat||(e.height+(0<i?i:0)>n.height||e.width+(0<o?o:0)>n.width?t.setStyle("position","absolute"):t.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:o,this._.moved?this._.position.y:i)},foreach:function(t){for(var e in this._.contents)for(var n in this._.contents[e])t.call(this,this._.contents[e][n]);return this},reset:function(){var t=function(t){t.reset&&t.reset(1)};return function(){this.foreach(t);return this}}(),setupContent:function(){var e=arguments;this.foreach(function(t){t.setup&&t.setup.apply(t,e)})},commitContent:function(){var e=arguments;this.foreach(function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur();t.commit&&t.commit.apply(t,e)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var t=this._.element;t.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(w(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var e=this._.parentDialog.getElement().getFirst();e.setStyle("z-index",parseInt(e.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else i(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;t.removeListener("keydown",R);t.removeListener("keyup",_);var n=this._.editor;n.focus();setTimeout(function(){n.focusManager.unlock();CKEDITOR.env.iOS&&n.window.focus()},0)}delete this._.parentDialog;this.foreach(function(t){t.resetInitValue&&t.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(t){if(!t.requiredContent||this._.editor.filter.check(t.requiredContent)){for(var e=[],n=t.label?' title="'+CKEDITOR.tools.htmlEncode(t.label)+'"':"",o=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:t.elements,expand:!!t.expand,padding:t.padding,style:t.style||"width: 100%;"},e),i=this._.contents[t.id]={},r=o.getChild(),a=0;o=r.shift();)o.notAllowed||"hbox"==o.type||"vbox"==o.type||a++,i[o.id]=o,"function"==typeof o.getChild&&r.push.apply(r,o.getChild());a||(t.hidden=!0);e=CKEDITOR.dom.element.createFromHtml(e.join(""));e.setAttribute("role","tabpanel");o=CKEDITOR.env;i="cke_"+t.id+"_"+CKEDITOR.tools.getNextNumber();n=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",n,t.hidden?' style="display:none"':"",' id="',i,'"',o.gecko&&!o.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',t.label,"</a>"].join(""));e.setAttribute("aria-labelledby",i);this._.tabs[t.id]=[n,e];this._.tabIdList.push(t.id);!t.hidden&&this._.pageCount++;this._.lastTab=n;this.updateStyle();e.setAttribute("name",t.id);e.appendTo(this.parts.contents);n.unselectable();this.parts.tabs.append(n);t.accessKey&&(S(this,this,"CTRL+"+t.accessKey,x,K),this._.accessKeyMap["CTRL+"+t.accessKey]=t.id)}},selectPage:function(t){if(this._.currentTabId!=t&&!this._.tabs[t][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:t,currentPage:this._.currentTabId})){for(var e in this._.tabs){var n=this._.tabs[e][0],o=this._.tabs[e][1];e!=t&&(n.removeClass("cke_dialog_tab_selected"),o.hide());o.setAttribute("aria-hidden",e!=t)}var i=this._.tabs[t];i[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(r(i[1]),i[1].show(),setTimeout(function(){r(i[1],1)},0)):i[1].show();this._.currentTabId=t;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,t)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(t){var e=this._.tabs[t]&&this._.tabs[t][0];e&&1!=this._.pageCount&&e.isVisible()&&(t==this._.currentTabId&&this.selectPage(C.call(this)),e.hide(),this._.pageCount--,this.updateStyle())},showPage:function(t){if(t=this._.tabs[t]&&this._.tabs[t][0])t.show(),this._.pageCount++,this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(t,e){var n=this._.contents[t];return n&&n[e]},getValueOf:function(t,e){return this.getContentElement(t,e).getValue()},setValueOf:function(t,e,n){return this.getContentElement(t,e).setValue(n)},getButton:function(t){return this._.buttons[t]},click:function(t){return this._.buttons[t].click()},disableButton:function(t){return this._.buttons[t].disable()},enableButton:function(t){return this._.buttons[t].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(t,e){if("undefined"==typeof e)e=this._.focusList.length,this._.focusList.push(new o(this,t,e));else{this._.focusList.splice(e,0,new o(this,t,e));for(var n=e+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}},setState:function(t){if(this.state!=t){this.state=t;if(t==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var e=this.getParentEditor().lang.dir,n={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==e?"right":"left"}};n.styles["margin-"+("rtl"==e?"left":"right")]="8px";this.parts.spinner=CKEDITOR.document.createElement("div",n);this.parts.spinner.setHtml("&#8987;");this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show();this.getButton("ok").disable()}else t==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",t)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(t,e){this._.dialogDefinitions[t]&&"function"!=typeof e||(this._.dialogDefinitions[t]=e)},exists:function(t){return!!this._.dialogDefinitions[t]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(t,e,n){t=t.config.removeDialogTabs;return!(t&&t.match(new RegExp("(?:^|;)"+e+":"+n+"(?:$|;)","i")))},okButton:function(){var n=function(t,e){e=e||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:t.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(t){t=t.data.dialog;!1!==t.fire("ok",{hide:!0}).hide&&t.hide()}},e,!0)};n.type="button";n.override=function(e){return CKEDITOR.tools.extend(function(t){return n(t,e)},{type:"button"},!0)};return n}(),cancelButton:function(){var n=function(t,e){e=e||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:t.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(t){t=t.data.dialog;!1!==t.fire("cancel",{hide:!0}).hide&&t.hide()}},e,!0)};n.type="button";n.override=function(e){return CKEDITOR.tools.extend(function(t){return n(t,e)},{type:"button"},!0)};return n}(),addUIElement:function(t,e){this._.uiElementBuilders[t]=e}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var k={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},m=function(t,e,n){for(var o=0,i;i=t[o];o++)if(i.id==e||n&&i[n]&&(i=m(i[n],e,n)))return i;return null},p=function(t,e,n,o,i){if(n){for(var r=0,a;a=t[r];r++){if(a.id==n)return t.splice(r,0,e),e;if(o&&a[o]&&(a=p(a[o],e,n,o,!0)))return a}if(i)return null}t.push(e);return e},f=function(t,e,n){for(var o=0,i;i=t[o];o++){if(i.id==e)return t.splice(o,1);if(n&&i[n]&&(i=f(i[n],e,n)))return i}return null},I=function(t,e){this.dialog=t;for(var n=e.contents,o=0,i;i=n[o];o++)n[o]=i&&new a(t,i);CKEDITOR.tools.extend(this,e)};I.prototype={getContents:function(t){return m(this.contents,t)},getButton:function(t){return m(this.buttons,t)},addContents:function(t,e){return p(this.contents,t,e)},addButton:function(t,e){return p(this.buttons,t,e)},removeContents:function(t){f(this.contents,t)},removeButton:function(t){f(this.buttons,t)}};a.prototype={get:function(t){return m(this.elements,t,"children")},add:function(t,e){return p(this.elements,t,e,"children")},remove:function(t){f(this.elements,t,"children")}};var h,g={},O,D={},R=function(t){var e=t.data.$.ctrlKey||t.data.$.metaKey,n=t.data.$.altKey,o=t.data.$.shiftKey,i=String.fromCharCode(t.data.$.keyCode);(e=D[(e?"CTRL+":"")+(n?"ALT+":"")+(o?"SHIFT+":"")+i])&&e.length&&(e=e[e.length-1],e.keydown&&e.keydown.call(e.uiElement,e.dialog,e.key),t.data.preventDefault())},_=function(t){var e=t.data.$.ctrlKey||t.data.$.metaKey,n=t.data.$.altKey,o=t.data.$.shiftKey,i=String.fromCharCode(t.data.$.keyCode);(e=D[(e?"CTRL+":"")+(n?"ALT+":"")+(o?"SHIFT+":"")+i])&&e.length&&(e=e[e.length-1],e.keyup&&(e.keyup.call(e.uiElement,e.dialog,e.key),t.data.preventDefault()))},S=function(t,e,n,o,i){(D[n]||(D[n]=[])).push({uiElement:t,dialog:e,key:n,keyup:i||t.accessKeyUp,keydown:o||t.accessKeyDown})},w=function(t){for(var e in D){for(var n=D[e],o=n.length-1;0<=o;o--)n[o].dialog!=t&&n[o].uiElement!=t||n.splice(o,1);0===n.length&&delete D[e]}},K=function(t,e){t._.accessKeyMap[e]&&t.selectPage(t._.accessKeyMap[e])},x=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(n,o,t,e,i,r,a){if(!(4>arguments.length)){var s=(e.call?e(o):e)||"div",l=["<",s," "],c=(i&&i.call?i(o):i)||{},d=(r&&r.call?r(o):r)||{},u=(a&&a.call?a.call(this,n,o):a)||"",m=this.domId=d.id||CKEDITOR.tools.getNextId()+"_uiElement";o.requiredContent&&!n.getParentEditor().filter.check(o.requiredContent)&&(c.display="none",this.notAllowed=!0);d.id=m;var p={};o.type&&(p["cke_dialog_ui_"+o.type]=1);o.className&&(p[o.className]=1);o.disabled&&(p.cke_disabled=1);for(var f=d["class"]&&d["class"].split?d["class"].split(" "):[],m=0;m<f.length;m++)f[m]&&(p[f[m]]=1);f=[];for(m in p)f.push(m);d["class"]=f.join(" ");o.title&&(d.title=o.title);p=(o.style||"").split(";");o.align&&(f=o.align,c["margin-left"]="left"==f?0:"auto",c["margin-right"]="right"==f?0:"auto");for(m in c)p.push(m+":"+c[m]);o.hidden&&p.push("display:none");for(m=p.length-1;0<=m;m--)""===p[m]&&p.splice(m,1);0<p.length&&(d.style=(d.style?d.style+"; ":"")+p.join("; "));for(m in d)l.push(m+'="'+CKEDITOR.tools.htmlEncode(d[m])+'" ');l.push(">",u,"</",s,">");t.push(l.join(""));(this._||(this._={})).dialog=n;"boolean"==typeof o.isChanged&&(this.isChanged=function(){return o.isChanged});"function"==typeof o.isChanged&&(this.isChanged=o.isChanged);"function"==typeof o.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(e){return function(t){e.call(this,o.setValue.call(this,t))}}));"function"==typeof o.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(t){return function(){return o.getValue.call(this,t.call(this))}}));CKEDITOR.event.implementOn(this);this.registerEvents(o);this.accessKeyUp&&this.accessKeyDown&&o.accessKey&&S(this,n,"CTRL+"+o.accessKey);var h=this;n.on("load",function(){var t=h.getInputElement();if(t){var e=h.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";t.on("focus",function(){n._.tabBarMode=!1;n._.hasFocus=!0;h.fire("focus");e&&this.addClass(e)});t.on("blur",function(){h.fire("blur");e&&this.removeClass(e)})}});CKEDITOR.tools.extend(this,o);this.keyboardFocusable&&(this.tabIndex=o.tabIndex||0,this.focusIndex=n._.focusList.push(this)-1,this.on("focus",function(){n._.currentFocusIndex=h.focusIndex}))}},hbox:function(t,e,o,n,i){if(!(4>arguments.length)){this._||(this._={});var r=this._.children=e,a=i&&i.widths||null,s=i&&i.height||null,l,c={role:"presentation"};i&&i.align&&(c.align=i.align);CKEDITOR.ui.dialog.uiElement.call(this,t,i||{type:"hbox"},n,"table",{},c,function(){var t=['<tbody><tr class="cke_dialog_ui_hbox">'];for(l=0;l<o.length;l++){var e="cke_dialog_ui_hbox_child",n=[];0===l&&(e="cke_dialog_ui_hbox_first");l==o.length-1&&(e="cke_dialog_ui_hbox_last");t.push('<td class="',e,'" role="presentation" ');a?a[l]&&n.push("width:"+u(a[l])):n.push("width:"+Math.floor(100/o.length)+"%");s&&n.push("height:"+u(s));i&&void 0!==i.padding&&n.push("padding:"+u(i.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r[l].align&&n.push("text-align:"+r[l].align);0<n.length&&t.push('style="'+n.join("; ")+'" ');t.push(">",o[l],"</td>")}t.push("</tr></tbody>");return t.join("")})}},vbox:function(o,t,i,e,r){if(!(3>arguments.length)){this._||(this._={});var a=this._.children=t,s=r&&r.width||null,l=r&&r.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,o,r||{type:"vbox"},e,"div",null,{role:"presentation"},function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="');r&&r.expand&&t.push("height:100%;");t.push("width:"+u(s||"100%"),";");CKEDITOR.env.webkit&&t.push("float:none;");t.push('"');t.push('align="',CKEDITOR.tools.htmlEncode(r&&r.align||("ltr"==o.getParentEditor().lang.dir?"left":"right")),'" ');t.push("><tbody>");for(var e=0;e<i.length;e++){var n=[];t.push('<tr><td role="presentation" ');s&&n.push("width:"+u(s||"100%"));l?n.push("height:"+u(l[e])):r&&r.expand&&n.push("height:"+Math.floor(100/i.length)+"%");r&&void 0!==r.padding&&n.push("padding:"+u(r.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a[e].align&&n.push("text-align:"+a[e].align);0<n.length&&t.push('style="',n.join("; "),'" ');t.push(' class="cke_dialog_ui_vbox_child">',i[e],"</td></tr>")}t.push("</tbody></table>");return t.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(t,e){this.getInputElement().setValue(t);!e&&this.fire("change",{value:t});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var t=this.getInputElement();(t=t.getParent())&&-1==t.$.className.search("cke_dialog_page_contents"););if(!t)return this;t=t.getAttribute("name");this._.dialog._.currentTabId!=t&&this._.dialog.selectPage(t);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(t){var e=/^on([A-Z]\w+)/,n,o=function(t,e,n,o){e.on("load",function(){t.getInputElement().on(n,o,t)})},i;for(i in t)if(n=i.match(e))this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,t[i]):o(this,this._.dialog,n[1].toLowerCase(),t[i]);return this},eventProcessors:{onLoad:function(t,e){t.on("load",e,this)},onShow:function(t,e){t.on("show",e,this)},onHide:function(t,e){t.on("hide",e,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var t=this.getElement();this.getInputElement().setAttribute("disabled","true");t.addClass("cke_disabled")},enable:function(){var t=this.getElement();this.getInputElement().removeAttribute("disabled");t.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(t){if(1>arguments.length)return this._.children.concat();t.splice||(t=[t]);return 2>t.length?this._.children[t[0]]:this._.children[t[0]]&&this._.children[t[0]].getChild?this._.children[t[0]].getChild(t.slice(1,t.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var t={build:function(t,e,n){for(var o=e.children,i,r=[],a=[],s=0;s<o.length&&(i=o[s]);s++){var l=[];r.push(l);a.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(t,i,l))}return new CKEDITOR.ui.dialog[e.type](t,a,r,n,e)}};CKEDITOR.dialog.addUIElement("hbox",t);CKEDITOR.dialog.addUIElement("vbox",t)})();CKEDITOR.dialogCommand=function(t,e){this.dialogName=t;CKEDITOR.tools.extend(this,e,!0)};CKEDITOR.dialogCommand.prototype={exec:function(t){t.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var e=/^([a]|[^a])+$/,n=/^\d*$/,o=/^\d*(?:\.\d+)?$/,i=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,r=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,a=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var a=arguments;return function(){var t=this&&this.getValue?this.getValue():a[0],e,n=CKEDITOR.VALIDATE_AND,o=[],i;for(i=0;i<a.length;i++)if("function"==typeof a[i])o.push(a[i]);else break;i<a.length&&"string"==typeof a[i]&&(e=a[i],i++);i<a.length&&"number"==typeof a[i]&&(n=a[i]);var r=n==CKEDITOR.VALIDATE_AND?!0:!1;for(i=0;i<o.length;i++)r=n==CKEDITOR.VALIDATE_AND?r&&o[i](t):r||o[i](t);return r?!0:e}},regex:function(e,n){return function(t){t=this&&this.getValue?this.getValue():t;return e.test(t)?!0:n}},notEmpty:function(t){return this.regex(e,t)},integer:function(t){return this.regex(n,t)},number:function(t){return this.regex(o,t)},cssLength:function(t){return this.functions(function(t){return r.test(CKEDITOR.tools.trim(t))},t)},htmlLength:function(t){return this.functions(function(t){return i.test(CKEDITOR.tools.trim(t))},t)},inlineStyle:function(t){return this.functions(function(t){return a.test(CKEDITOR.tools.trim(t))},t)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}};CKEDITOR.on("instanceDestroyed",function(t){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var e;e=CKEDITOR.dialog._.currentTop;)e.hide();for(var n in g)g[n].remove();g={}}t=t.editor._.storedDialogs;for(var o in t)t[o].destroy()})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(t,e){var n=null,o=CKEDITOR.dialog._.dialogDefinitions[t];null===CKEDITOR.dialog._.currentTop&&d(this);if("function"==typeof o)n=this._.storedDialogs||(this._.storedDialogs={}),n=n[t]||(n[t]=new CKEDITOR.dialog(this,t)),e&&e.call(n,n),n.show();else{if("failed"==o)throw i(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+t+'" failed when loading definition.');"string"==typeof o&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(o),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[t]&&(CKEDITOR.dialog._.dialogDefinitions[t]="failed");this.openDialog(t,e)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return n}})})();CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",function(t){t.data.dialog&&e.openDialog(t.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(t){var e=t.addCommand("about",new CKEDITOR.dialogCommand("about"));e.modes={wysiwyg:1,source:1};e.canUndo=!1;e.readOnly=1;t.ui.addButton&&t.ui.addButton("About",{label:t.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});(function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var n=this;e.addCommand("a11yHelp",{exec:function(){var t=e.langCode,t=n.availableLangs[t]?t:n.availableLangs[t.replace(/-.*/,"")]?t.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(n.path+"dialogs/lang/"+t+".js"),function(){e.lang.a11yhelp=n.langEntries[t];e.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");e.on("ariaEditorHelpLabel",function(t){t.data.label=e.lang.common.editorHelp})}})})();(function(){function a(t){var e=this.att;t=t&&t.hasAttribute(e)&&t.getAttribute(e)||"";void 0!==t&&this.setValue(t)}function s(){for(var t,e=0;e<arguments.length;e++)if(arguments[e]instanceof CKEDITOR.dom.element){t=arguments[e];break}if(t){var e=this.att,n=this.getValue();n?t.setAttribute(e,n):t.removeAttribute(e,n)}}var l={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(t){t||(t=l);var e=[];t.id&&e.push("id");t.dir&&e.push("dir");var n="";e.length&&(n+="["+e.join(",")+"]");t.classes&&(n+="(*)");t.styles&&(n+="{*}");return n},createAdvancedTab:function(i,t,e){t||(t=l);var n=i.lang.common,o={id:"advanced",label:n.advancedTab,title:n.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},r=[];if(t.id||t.dir)t.id&&r.push({id:"advId",att:"id",type:"text",requiredContent:e?e+"[id]":null,label:n.id,setup:a,commit:s}),t.dir&&r.push({id:"advLangDir",att:"dir",type:"select",requiredContent:e?e+"[dir]":null,label:n.langDir,default:"",style:"width:100%",items:[[n.notSet,""],[n.langDirLTR,"ltr"],[n.langDirRTL,"rtl"]],setup:a,commit:s}),o.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(r)});if(t.styles||t.classes)r=[],t.styles&&r.push({id:"advStyles",att:"style",type:"text",requiredContent:e?e+"{cke-xyz}":null,label:n.styles,default:"",validate:CKEDITOR.dialog.validate.inlineStyle(n.invalidInlineStyle),onChange:function(){},getStyle:function(t,e){var n=this.getValue().match(new RegExp("(?:^|;)\\s*"+t+"\\s*:\\s*([^;]*)","i"));return n?n[1]:e},updateStyle:function(t,e){var n=this.getValue(),o=i.document.createElement("span");o.setAttribute("style",n);o.setStyle(t,e);n=CKEDITOR.tools.normalizeCssText(o.getAttribute("style"));this.setValue(n,1)},setup:a,commit:s}),t.classes&&r.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:e?e+"(cke-xyz)":null,label:n.cssClasses,default:"",setup:a,commit:s}]}),o.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(r)});return o}})})();CKEDITOR.plugins.add("basicstyles",{init:function(r){var a=0,t=function(t,e,n,o){if(o){o=new CKEDITOR.style(o);var i=s[n];i.unshift(o);r.attachStyleStateChange(o,function(t){!r.readOnly&&r.getCommand(n).setState(t)});r.addCommand(n,new CKEDITOR.styleCommand(o,{contentForms:i}));r.ui.addButton&&r.ui.addButton(t,{label:e,command:n,toolbar:"basicstyles,"+(a+=10)})}},s={bold:["strong","b",["span",function(t){t=t.styles["font-weight"];return"bold"==t||700<=+t}]],italic:["em","i",["span",function(t){return"italic"==t.styles["font-style"]}]],underline:["u",["span",function(t){return"underline"==t.styles["text-decoration"]}]],strike:["s","strike",["span",function(t){return"line-through"==t.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},e=r.config,n=r.lang.basicstyles;t("Bold",n.bold,"bold",e.coreStyles_bold);t("Italic",n.italic,"italic",e.coreStyles_italic);t("Underline",n.underline,"underline",e.coreStyles_underline);t("Strike",n.strike,"strike",e.coreStyles_strike);t("Subscript",n.subscript,"subscript",e.coreStyles_subscript);t("Superscript",n.superscript,"superscript",e.coreStyles_superscript);r.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){function p(t,e,n,o){if(!t.isReadOnly()&&!t.equals(n.editable())){CKEDITOR.dom.element.setMarker(o,t,"bidi_processed",1);o=t;for(var i=n.editable();(o=o.getParent())&&!o.equals(i);)if(o.getCustomData("bidi_processed")){t.removeStyle("direction");t.removeAttribute("dir");return}o="useComputedState"in n.config?n.config.useComputedState:1;(o?t.getComputedStyle("direction"):t.getStyle("direction")||t.hasAttribute("dir"))!=e&&(t.removeStyle("direction"),o?(t.removeAttribute("dir"),e!=t.getComputedStyle("direction")&&t.setAttribute("dir",e)):t.setAttribute("dir",e),n.forceNextSelectionCheck())}}function f(t,e,n){var o=t.getCommonAncestor(!1,!0);t=t.clone();t.enlarge(n==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(t.checkBoundaryOfElement(o,CKEDITOR.START)&&t.checkBoundaryOfElement(o,CKEDITOR.END)){for(var i;o&&o.type==CKEDITOR.NODE_ELEMENT&&(i=o.getParent())&&1==i.getChildCount()&&!(o.getName()in e);)o=i;return o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in e&&o}}function n(m){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(t,e){var n=t.config.useComputedState,o,n=void 0===n||n;if(!n){o=e.lastElement;for(var i=t.editable();o&&!(o.getName()in a||o.equals(i));){var r=o.getParent();if(!r)break;o=r}}o=o||e.block||e.blockLimit;o.equals(t.editable())&&(i=t.getSelection().getRanges()[0].getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT&&(o=i);o&&(n=n?o.getComputedStyle("direction"):o.getStyle("direction")||o.getAttribute("dir"),t.getCommand("bidirtl").setState("rtl"==n?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),t.getCommand("bidiltr").setState("ltr"==n?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));n=(e.block||e.blockLimit||t.editable()).getDirection(1);n!=(t._.selDir||t.lang.dir)&&(t._.selDir=n,t.fire("contentDirChanged",n))},exec:function(t){var e=t.getSelection(),o=t.config.enterMode,n=e.getRanges();if(n&&n.length){for(var i={},r=e.createBookmarks(),n=n.createIterator(),a,s=0;a=n.getNextRange(1);){var l=a.getEnclosedNode();l&&(!l||l.type==CKEDITOR.NODE_ELEMENT&&l.getName()in g)||(l=f(a,h,o));l&&p(l,m,t,i);var c=new CKEDITOR.dom.walker(a),d=r[s].startNode,u=r[s++].endNode;c.evaluator=function(t){var e=o==CKEDITOR.ENTER_P?"p":"div",n;if(n=(t?t.type==CKEDITOR.NODE_ELEMENT:!1)&&t.getName()in h){if(e=t.is(e))e=(e=t.getParent())?e.type==CKEDITOR.NODE_ELEMENT:!1;n=!(e&&t.getParent().is("blockquote"))}return!!(n&&t.getPosition(d)&CKEDITOR.POSITION_FOLLOWING&&(t.getPosition(u)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;l=c.next();)p(l,m,t,i);a=a.createIterator();for(a.enlargeBr=o!=CKEDITOR.ENTER_BR;l=a.getNextParagraph(o==CKEDITOR.ENTER_P?"p":"div");)p(l,m,t,i)}CKEDITOR.dom.element.clearAllMarkers(i);t.forceNextSelectionCheck();e.selectBookmarks(r);t.focus()}}}}function t(i){var r=i==e.setAttribute,a=i==e.removeAttribute,s=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(t,e){if(!this.isReadOnly()){var n;if(n=t==(r||a?"dir":"direction")||"style"==t&&(a||s.test(e))){t:{n=this;for(var o=n.getDocument().getBody().getParent();n;){if(n.equals(o)){n=!1;break t}n=n.getParent()}n=!0}n=!n}if(n&&(n=this.getDirection(1),o=i.apply(this,arguments),n!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),o}return i.apply(this,arguments)}}var h={table:1,ul:1,ol:1,blockquote:1,div:1},g={},a={};CKEDITOR.tools.extend(g,h,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(a,g,{td:1});CKEDITOR.plugins.add("bidi",{init:function(r){function t(t,e,n,o,i){r.addCommand(n,new CKEDITOR.command(r,o));r.ui.addButton&&r.ui.addButton(t,{label:e,command:n,toolbar:"bidi,"+i})}if(!r.blockless){var e=r.lang.bidi;t("BidiLtr",e.ltr,"bidiltr",n("ltr"),10);t("BidiRtl",e.rtl,"bidirtl",n("rtl"),20);r.on("contentDom",function(){r.document.on("dirChanged",function(t){r.fire("dirChanged",{node:t.data,dir:t.data.getDirection(1)})})});r.on("contentDirChanged",function(t){t=(r.lang.dir!=t.data?"add":"remove")+"Class";var e=r.ui.space(r.config.toolbarLocation);if(e)e[t]("cke_mixed_dir_content")})}}});for(var e=CKEDITOR.dom.element.prototype,o=["setStyle","removeStyle","setAttribute","removeAttribute"],i=0;i<o.length;i++)e[o[i]]=CKEDITOR.tools.override(e[o[i]],t)})();(function(){var e={exec:function(t){var e=t.getCommand("blockquote").state,n=t.getSelection(),o=n&&n.getRanges()[0];if(o){var i=n.createBookmarks();if(CKEDITOR.env.ie){var r=i[0].startNode,a=i[0].endNode,s;if(r&&"blockquote"==r.getParent().getName())for(s=r;s=s.getNext();)if(s.type==CKEDITOR.NODE_ELEMENT&&s.isBlockBoundary()){r.move(s,!0);break}if(a&&"blockquote"==a.getParent().getName())for(s=a;s=s.getPrevious();)if(s.type==CKEDITOR.NODE_ELEMENT&&s.isBlockBoundary()){a.move(s);break}}var l=o.createIterator();l.enlargeBr=t.config.enterMode!=CKEDITOR.ENTER_BR;if(e==CKEDITOR.TRISTATE_OFF){for(r=[];e=l.getNextParagraph();)r.push(e);1>r.length&&(e=t.document.createElement(t.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),a=i.shift(),o.insertNode(e),e.append(new CKEDITOR.dom.text("\ufeff",t.document)),o.moveToBookmark(a),o.selectNodeContents(e),o.collapse(!0),a=o.createBookmark(),r.push(e),i.unshift(a));s=r[0].getParent();o=[];for(a=0;a<r.length;a++)e=r[a],s=s.getCommonAncestor(e.getParent());for(e={table:1,tbody:1,tr:1,ol:1,ul:1};e[s.getName()];)s=s.getParent();for(a=null;0<r.length;){for(e=r.shift();!e.getParent().equals(s);)e=e.getParent();e.equals(a)||o.push(e);a=e}for(;0<o.length;)if(e=o.shift(),"blockquote"==e.getName()){for(a=new CKEDITOR.dom.documentFragment(t.document);e.getFirst();)a.append(e.getFirst().remove()),r.push(a.getLast());a.replace(e)}else r.push(e);o=t.document.createElement("blockquote");for(o.insertBefore(r[0]);0<r.length;)e=r.shift(),o.append(e)}else if(e==CKEDITOR.TRISTATE_ON){a=[];for(s={};e=l.getNextParagraph();){for(r=o=null;e.getParent();){if("blockquote"==e.getParent().getName()){o=e.getParent();r=e;break}e=e.getParent()}o&&r&&!r.getCustomData("blockquote_moveout")&&(a.push(r),CKEDITOR.dom.element.setMarker(s,r,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(s);e=[];r=[];for(s={};0<a.length;)l=a.shift(),o=l.getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),r.push(l.getNext())):l.remove().insertAfter(o):l.remove().insertBefore(o),o.getCustomData("blockquote_processed")||(r.push(o),CKEDITOR.dom.element.setMarker(s,o,"blockquote_processed",!0)),e.push(l);CKEDITOR.dom.element.clearAllMarkers(s);for(a=r.length-1;0<=a;a--){o=r[a];t:{s=o;for(var l=0,c=s.getChildCount(),d=void 0;l<c&&(d=s.getChild(l));l++)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){s=!1;break t}s=!0}s&&o.remove()}if(t.config.enterMode==CKEDITOR.ENTER_BR)for(o=!0;e.length;)if(l=e.shift(),"div"==l.getName()){a=new CKEDITOR.dom.documentFragment(t.document);!o||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||a.append(t.document.createElement("br"));for(o=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(a);o&&a.append(t.document.createElement("br"));a.replace(l);o=!1}}n.selectBookmarks(i);t.focus()}},refresh:function(t,e){this.setState(t.elementPath(e.block||e.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",e),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})})();(function(){function A(t,e,n){e.type||(e.type="auto");if(n&&!1===t.fire("beforePaste",e)||!e.dataValue&&e.dataTransfer.isEmpty())return!1;e.dataValue||(e.dataValue="");if(CKEDITOR.env.gecko&&"drop"==e.method&&t.toolbox)t.once("afterPaste",function(){t.toolbox.focus()});return t.fire("paste",e)}function e(m){function t(){var t=m.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var e=function(t){m.readOnly&&"cut"==t.name||f.initPasteDataTransfer(t,m);t.data.preventDefault()};t.on("copy",e);t.on("cut",e);t.on("cut",function(){m.readOnly||m.extractSelectedHtml()},null,null,999)}t.on(f.mainPasteEvent,function(t){"beforepaste"==f.mainPasteEvent&&h||d(t)});"beforepaste"==f.mainPasteEvent&&(t.on("paste",function(t){g||(o(),t.data.preventDefault(),d(t),r("paste")||m.openDialog("paste"))}),t.on("contextmenu",i,null,null,0),t.on("beforepaste",function(t){!t.data||t.data.$.ctrlKey||t.data.$.shiftKey||i()},null,null,0));t.on("beforecut",function(){!h&&a(m)});var n;t.attachListener(CKEDITOR.env.ie?t:m.document.getDocumentElement(),"mouseup",function(){n=setTimeout(function(){u()},0)});m.on("destroy",function(){clearTimeout(n)});t.on("keyup",u)}function e(t){return{type:t,canUndo:"cut"==t,startDisabled:!0,fakeKeystroke:"cut"==t?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&a();var e;var t=this.type;if(CKEDITOR.env.ie)e=r(t);else try{e=m.document.$.execCommand(t,!1,null)}catch(t){e=!1}e||m.showNotification(m.lang.clipboard[this.type+"Error"]);return e}}}function n(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(n,t){var o=this,e=function(t,e){t&&A(n,t,!!e);n.fire("afterCommandExec",{name:"paste",command:o,returnValue:!!t})};"string"==typeof t?e({dataValue:t,method:"paste",dataTransfer:f.initPasteDataTransfer()},1):n.getClipboardData(e)}}}function o(){g=1;setTimeout(function(){g=0},100)}function i(){h=1;setTimeout(function(){h=0},10)}function r(t){var e=m.document,n=e.getBody(),o=!1,i=function(){o=!0};n.on(t,i);7<CKEDITOR.env.version?e.$.execCommand(t):e.$.selection.createRange().execCommand(t);n.removeListener(t,i);return o}function a(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var t=m.getSelection(),e,n,o;t.getType()==CKEDITOR.SELECTION_ELEMENT&&(e=t.getSelectedElement())&&(n=t.getRanges()[0],o=m.document.createText(""),o.insertBefore(e),n.setStartBefore(o),n.setEndAfter(e),t.selectRanges([n]),setTimeout(function(){e.getParent()&&(o.remove(),t.selectElement(e))},0))}}function s(t,e){var n=m.document,o=m.editable(),i=function(t){t.cancel()},r;if(!n.getById("cke_pastebin")){var a=m.getSelection(),s=a.createBookmarks();CKEDITOR.env.ie&&a.root.fire("selectionchange");var l=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!o.is("body")||CKEDITOR.env.ie?"div":"body",n);l.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var c=0,n=n.getWindow();CKEDITOR.env.webkit?(o.append(l),l.addClass("cke_editable"),o.is("body")||(c="static"!=o.getComputedStyle("position")?o:CKEDITOR.dom.element.get(o.$.offsetParent),c=c.getDocumentPosition().y)):o.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(l);l.setStyles({position:"absolute",top:n.getScrollPosition().y-c+10+"px",width:"1px",height:Math.max(1,n.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&l.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(c=l.getParent().isReadOnly())?(l.setOpacity(0),l.setAttribute("contenteditable",!0)):l.setStyle("ltr"==m.config.contentsLangDirection?"left":"right","-10000px");m.on("selectionChange",i,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)r=o.once("blur",i,null,null,-100);c&&l.focus();c=new CKEDITOR.dom.range(l);c.selectNodeContents(l);var d=c.select();CKEDITOR.env.ie&&(r=o.once("blur",function(){m.lockSelection(d)}));var u=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=u);r&&r.removeListener();CKEDITOR.env.ie&&o.focus();a.selectBookmarks(s);l.remove();var t;CKEDITOR.env.webkit&&(t=l.getFirst())&&t.is&&t.hasClass("Apple-style-span")&&(l=t);m.removeListener("selectionChange",i);e(l.getHtml())},0)}}function l(){if("paste"==f.mainPasteEvent)return m.fire("beforePaste",{type:"auto",method:"paste"}),!1;m.focus();o();var t=m.focusManager;t.lock();if(m.editable().fire(f.mainPasteEvent)&&!r("paste"))return t.unlock(),!1;t.unlock();return!0}function c(t){if("wysiwyg"==m.mode)switch(t.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:t=m.editable();o();"paste"==f.mainPasteEvent&&t.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:m.fire("saveSnapshot"),setTimeout(function(){m.fire("saveSnapshot")},50)}}function d(t){var e={type:"auto",method:"paste",dataTransfer:f.initPasteDataTransfer(t)};e.dataTransfer.cacheData();var n=!1!==m.fire("beforePaste",e);n&&f.canClipboardApiBeTrusted(e.dataTransfer,m)?(t.data.preventDefault(),setTimeout(function(){A(m,e)},0)):s(t,function(t){e.dataValue=t.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,"");n&&A(m,e)})}function u(){if("wysiwyg"==m.mode){var t=p("paste");m.getCommand("cut").setState(p("cut"));m.getCommand("copy").setState(p("copy"));m.getCommand("paste").setState(t);m.fire("pasteState",t)}}function p(t){if(C&&t in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==t)return CKEDITOR.TRISTATE_OFF;t=m.getSelection();var e=t.getRanges();return t.getType()==CKEDITOR.SELECTION_NONE||1==e.length&&e[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var f=CKEDITOR.plugins.clipboard,h=0,g=0,C=0;(function(){m.on("key",c);m.on("contentDom",t);m.on("selectionChange",function(t){C=t.data.selection.getRanges()[0].checkReadOnly();u()});m.contextMenu&&m.contextMenu.addListener(function(t,e){C=e.getRanges()[0].checkReadOnly();return{cut:p("cut"),copy:p("copy"),paste:p("paste")}})})();(function(){function t(t,e,n,o,i){var r=m.lang.clipboard[e];m.addCommand(e,n);m.ui.addButton&&m.ui.addButton(t,{label:r,command:e,toolbar:"clipboard,"+o});m.addMenuItems&&m.addMenuItem(e,{label:r,command:e,group:"clipboard",order:i})}t("Cut","cut",e("cut"),10,1);t("Copy","copy",e("copy"),20,4);t("Paste","paste",n(),30,8)})();m.getClipboardData=function(t,e){function n(t){t.removeListener();t.cancel();e(t.data)}function o(t){t.removeListener();t.cancel();s=!0;e({type:a,dataValue:t.data.dataValue,dataTransfer:t.data.dataTransfer,method:"paste"})}function i(){this.customTitle=t&&t.title}var r=!1,a="auto",s=!1;e||(e=t,t=null);m.on("paste",n,null,null,0);m.on("beforePaste",function(t){t.removeListener();r=!0;a=t.data.type},null,null,1e3);!1===l()&&(m.removeListener("paste",n),r&&m.fire("pasteDialog",i)?(m.on("pasteDialogCommit",o),m.on("dialogHide",function(t){t.removeListener();t.data.removeListener("pasteDialogCommit",o);setTimeout(function(){s||e(null)},10)})):e(null))}}function l(t){if(CKEDITOR.env.webkit){if(!t.match(/^[^<]*$/g)&&!t.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!t.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else if(CKEDITOR.env.gecko){if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}else return"html";return"htmlifiedtext"}function c(t,e){function n(t){return CKEDITOR.tools.repeat("</p><p>",~~(t/2))+(1==t%2?"<br>":"")}e=e.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>");e=e.replace(/<\/?[A-Z]+>/g,function(t){return t.toLowerCase()});if(e.match(/^[^<]$/))return e;CKEDITOR.env.webkit&&-1<e.indexOf("<div>")&&(e=e.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),e.match(/<div>(<br>|)<\/div>/)&&(e="<p>"+e.replace(/(<div>(<br>|)<\/div>)+/g,function(t){return n(t.split("</div><div>").length+1)})+"</p>"),e=e.replace(/<\/div><div>/g,"<br>"),e=e.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(e=e.replace(/^<br><br>$/,"<br>")),-1<e.indexOf("<br><br>")&&(e="<p>"+e.replace(/(<br>){2,}/g,function(t){return n(t.length/4)})+"</p>"));return o(t,e)}function n(){function e(){var t={},e;for(e in CKEDITOR.dtd)"$"!=e.charAt(0)&&"div"!=e&&"span"!=e&&(t[e]=1);return t}var n={};return{get:function(t){return"plain-text"==t?n.plainText||(n.plainText=new CKEDITOR.filter("br")):"semantic-content"==t?((t=n.semanticContent)||(t=new CKEDITOR.filter,t.allow({$1:{elements:e(),attributes:!0,styles:!1,classes:!1}}),t=n.semanticContent=t),t):t?new CKEDITOR.filter(t):null}}}function d(t,e,n){e=CKEDITOR.htmlParser.fragment.fromHtml(e);var o=new CKEDITOR.htmlParser.basicWriter;n.applyTo(e,!0,!1,t.activeEnterMode);e.writeHtml(o);return o.getHtml()}function o(t,e){t.enterMode==CKEDITOR.ENTER_BR?e=e.replace(/(<\/p><p>)+/g,function(t){return CKEDITOR.tools.repeat("<br>",t.length/7*2)}).replace(/<\/?p>/g,""):t.enterMode==CKEDITOR.ENTER_DIV&&(e=e.replace(/<(\/)?p>/g,"<$1div>"));return e}function i(t){t.data.preventDefault();t.data.$.dataTransfer.dropEffect="none"}function u(l){var c=CKEDITOR.plugins.clipboard;l.on("contentDom",function(){function i(t,e,n){e.select();A(l,{dataTransfer:n,method:"drop"},1);n.sourceEditor.fire("saveSnapshot");n.sourceEditor.editable().extractHtmlFromRange(t);n.sourceEditor.getSelection().selectRanges([t]);n.sourceEditor.fire("saveSnapshot")}function r(t,e){t.select();A(l,{dataTransfer:e,method:"drop"},1);c.resetDragDataTransfer()}function o(t,e,n){var o={$:t.data.$,target:t.data.getTarget()};e&&(o.dragRange=e);n&&(o.dropRange=n);!1===l.fire(t.name,o)&&t.data.preventDefault()}function e(t){t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());return t.getChildCount()}var t=l.editable(),n=CKEDITOR.plugins.clipboard.getDropTarget(l),a=l.ui.space("top"),s=l.ui.space("bottom");c.preventDefaultDropOnElement(a);c.preventDefaultDropOnElement(s);t.attachListener(n,"dragstart",o);t.attachListener(l,"dragstart",c.resetDragDataTransfer,c,null,1);t.attachListener(l,"dragstart",function(t){c.initDragDataTransfer(t,l)},null,null,2);t.attachListener(l,"dragstart",function(){var t=c.dragRange=l.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(c.dragStartContainerChildCount=t?e(t.startContainer):null,c.dragEndContainerChildCount=t?e(t.endContainer):null)},null,null,100);t.attachListener(n,"dragend",o);t.attachListener(l,"dragend",c.initDragDataTransfer,c,null,1);t.attachListener(l,"dragend",c.resetDragDataTransfer,c,null,100);t.attachListener(n,"dragover",function(t){var e=t.data.getTarget();e&&e.is&&e.is("html")?t.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&t.data.$.dataTransfer.types.contains("Files")&&t.data.preventDefault()});t.attachListener(n,"drop",function(t){if(!t.data.$.defaultPrevented){t.data.preventDefault();var e=t.data.getTarget();if(!e.isReadOnly()||e.type==CKEDITOR.NODE_ELEMENT&&e.is("html")){var e=c.getRangeAtDropPosition(t,l),n=c.dragRange;e&&o(t,n,e)}}},null,null,9999);t.attachListener(l,"drop",c.initDragDataTransfer,c,null,1);t.attachListener(l,"drop",function(t){if(t=t.data){var e=t.dropRange,n=t.dragRange,o=t.dataTransfer;o.getTransferType(l)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){c.internalDrop(n,e,o,l)},0):o.getTransferType(l)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?i(n,e,o):r(e,o)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(a){var t,s=n();a.config.forcePasteAsPlainText?t="plain-text":a.config.pasteFilter?t=a.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in a.config||(t="semantic-content");a.pasteFilter=s.get(t);e(a);u(a);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));if(CKEDITOR.env.gecko){var i=["image/png","image/jpeg","image/gif"],r;a.on("paste",function(t){var e=t.data,n=e.dataTransfer;if(!e.dataValue&&"paste"==e.method&&n&&1==n.getFilesCount()&&r!=n.id&&(n=n.getFile(0),-1!=CKEDITOR.tools.indexOf(i,n.type))){var o=new FileReader;o.addEventListener("load",function(){t.data.dataValue='<img src="'+o.result+'" />';a.fire("paste",t.data)},!1);o.addEventListener("abort",function(){a.fire("paste",t.data)},!1);o.addEventListener("error",function(){a.fire("paste",t.data)},!1);o.readAsDataURL(n);r=e.dataTransfer.id;t.stop()}},null,null,1)}a.on("paste",function(t){t.data.dataTransfer||(t.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!t.data.dataValue){var e=t.data.dataTransfer,n=e.getData("text/html");if(n)t.data.dataValue=n,t.data.type="html";else if(n=e.getData("text/plain"))t.data.dataValue=a.editable().transformPlainTextToHtml(n),t.data.type="text"}},null,null,1);a.on("paste",function(n){var t=n.data.dataValue,o=CKEDITOR.dtd.$block;-1<t.indexOf("Apple-")&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=n.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(t,e){return e.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<t.indexOf('<br class="Apple-interchange-newline">')&&(n.data.startsWithEOL=1,n.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(t.match(/^<[^<]+cke_(editable|contents)/i)){var e,i,r=new CKEDITOR.dom.element("div");for(r.setHtml(t);1==r.getChildCount()&&(e=r.getFirst())&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasClass("cke_editable")||e.hasClass("cke_contents"));)r=i=e;i&&(t=i.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(t,e){return e.toLowerCase()in o?(n.data.preSniffing="html","<"+e):t}):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,function(t,e){return e in o?(n.data.endsWithEOL=1,"</"+e+">"):t}):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1"));n.data.dataValue=t},null,null,3);a.on("paste",function(t){t=t.data;var e=t.type,n=t.dataValue,o,i=a.config.clipboard_defaultContentType||"html",r=t.dataTransfer.getTransferType(a);o="html"==e||"html"==t.preSniffing?"html":l(n);"htmlifiedtext"==o&&(n=c(a.config,n));"text"==e&&"html"==o?n=d(a,n,s.get("plain-text")):r==CKEDITOR.DATA_TRANSFER_EXTERNAL&&a.pasteFilter&&!t.dontFilter&&(n=d(a,n,a.pasteFilter));t.startsWithEOL&&(n='<br data-cke-eol="1">'+n);t.endsWithEOL&&(n+='<br data-cke-eol="1">');"auto"==e&&(e="html"==o||"html"==i?"html":"text");t.type=e;t.dataValue=n;delete t.preSniffing;delete t.startsWithEOL;delete t.endsWithEOL},null,null,6);a.on("paste",function(t){t=t.data;t.dataValue&&(a.insertHtml(t.dataValue,t.type,t.range),setTimeout(function(){a.fire("afterPaste")},0))},null,null,1e3);a.on("pasteDialog",function(t){setTimeout(function(){a.openDialog("paste",t.data)},0)})}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(t,e){return t.getTransferType(e)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!t.isEmpty()||CKEDITOR.env.gecko&&(t.getData("text/html")||t.getFilesCount())?!0:!1},getDropTarget:function(t){var e=t.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||e.isInline()?e:t.document},fixSplitNodesAfterDrop:function(t,i,e,n){function o(t,e,n){var o=t;o.type==CKEDITOR.NODE_TEXT&&(o=t.getParent());if(o.equals(e)&&n!=e.getChildCount())return t=i.startContainer.getChild(i.startOffset-1),e=i.startContainer.getChild(i.startOffset),t&&t.type==CKEDITOR.NODE_TEXT&&e&&e.type==CKEDITOR.NODE_TEXT&&(n=t.getLength(),t.setText(t.getText()+e.getText()),e.remove(),i.setStart(t,n),i.collapse(!0)),!0}var r=i.startContainer;"number"==typeof n&&"number"==typeof e&&r.type==CKEDITOR.NODE_ELEMENT&&(o(t.startContainer,r,e)||o(t.endContainer,r,n))},isDropRangeAffectedByDragRange:function(t,e){var n=e.startContainer,o=e.endOffset;return t.endContainer.equals(n)&&t.endOffset<=o||t.startContainer.getParent().equals(n)&&t.startContainer.getIndex()<o||t.endContainer.getParent().equals(n)&&t.endContainer.getIndex()<o?!0:!1},internalDrop:function(t,e,n,o){var i=CKEDITOR.plugins.clipboard,r=o.editable(),a,s;o.fire("saveSnapshot");o.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(t,e,i.dragStartContainerChildCount,i.dragEndContainerChildCount);(s=this.isDropRangeAffectedByDragRange(t,e))||(a=t.createBookmark(!1));i=e.clone().createBookmark(!1);s&&(a=t.createBookmark(!1));t=a.startNode;e=a.endNode;s=i.startNode;e&&t.getPosition(s)&CKEDITOR.POSITION_PRECEDING&&e.getPosition(s)&CKEDITOR.POSITION_FOLLOWING&&s.insertBefore(t);t=o.createRange();t.moveToBookmark(a);r.extractHtmlFromRange(t,1);e=o.createRange();e.moveToBookmark(i);A(o,{dataTransfer:n,method:"drop",range:e},1);o.fire("unlockSnapshot")},getRangeAtDropPosition:function(t,e){var n=t.data.$,o=n.clientX,i=n.clientY,r=e.getSelection(!0).getRanges()[0],a=e.createRange();if(t.data.testRange)return t.data.testRange;if(document.caretRangeFromPoint)n=e.document.$.caretRangeFromPoint(o,i),a.setStart(CKEDITOR.dom.node(n.startContainer),n.startOffset),a.collapse(!0);else if(n.rangeParent)a.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),a.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&r&&e.editable().hasFocus)return r;if(document.body.createTextRange){e.focus();n=e.document.getBody().$.createTextRange();try{for(var s=!1,l=0;20>l&&!s;l++){if(!s)try{n.moveToPoint(o,i-l),s=!0}catch(t){}if(!s)try{n.moveToPoint(o,i+l),s=!0}catch(t){}}if(s){var c="cke-temp-"+(new Date).getTime();n.pasteHTML('<span id="'+c+'">​</span>');var d=e.document.getById(c);a.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START);d.remove()}else{var u=e.document.$.elementFromPoint(o,i),m=new CKEDITOR.dom.element(u),p;if(m.equals(e.editable())||"html"==m.getName())return r&&r.startContainer&&!r.startContainer.equals(e.editable())?r:null;p=m.getClientRect();o<p.left?a.setStartAt(m,CKEDITOR.POSITION_AFTER_START):a.setStartAt(m,CKEDITOR.POSITION_BEFORE_END);a.collapse(!0)}}catch(t){return null}}else return null}return a},initDragDataTransfer:function(t,e){var n=t.data.$?t.data.$.dataTransfer:null,o=new this.dataTransfer(n,e);n?this.dragData&&o.id==this.dragData.id?o=this.dragData:this.dragData=o:this.dragData?o=this.dragData:this.dragData=o;t.data.dataTransfer=o},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(t,e){if(this.isCustomCopyCutSupported){if(t&&t.data&&t.data.$){var n=new this.dataTransfer(t.data.$.clipboardData,e);this.copyCutData&&n.id==this.copyCutData.id?(n=this.copyCutData,n.$=t.data.$.clipboardData):this.copyCutData=n;return n}return new this.dataTransfer(null,e)}return new this.dataTransfer(CKEDITOR.env.edge&&t&&t.data.$&&t.data.$.clipboardData||null,e)},preventDefaultDropOnElement:function(t){t&&t.on("dragover",i)}};var r=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(t,e){t&&(this.$=t);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(t){t=t.toLowerCase();return"text"==t||"text/plain"==t?"Text":"url"==t?"URL":t}};this.id=this.getData(r);this.id||(this.id="Text"==r?"":"cke-"+CKEDITOR.tools.getUniqueId());if("Text"!=r)try{this.$.setData(r,this.id)}catch(t){}e&&(this.sourceEditor=e,this.setData("text/html",e.getSelectedHtml(1)),"Text"==r||this.getData("text/plain")||this.setData("text/plain",e.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(t){t=this._.normalizeType(t);var e=this._.data[t];if(void 0===e||null===e||""===e)try{e=this.$.getData(t)}catch(t){}if(void 0===e||null===e||""===e)e="";"text/html"==t?(e=e.replace(this._.metaRegExp,""),(t=this._.bodyRegExp.exec(e))&&t.length&&(e=t[1],e=e.replace(this._.fragmentRegExp,""))):"Text"==t&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==e.substring(0,7)&&(e="");return e},setData:function(t,e){t=this._.normalizeType(t);this._.data[t]=e;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==t||"Text"==t){"Text"==r&&"Text"==t&&(this.id=e);try{this.$.setData(t,e)}catch(t){}}},getTransferType:function(t){return this.sourceEditor?this.sourceEditor==t?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function t(t){t=n._.normalizeType(t);var e=n.getData(t);e&&(n._.data[t]=e)}if(this.$){var n=this,e,o;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(e=0;e<this.$.types.length;e++)t(this.$.types[e])}else t("Text"),t("URL");o=this._getImageFromClipboard();if(this.$&&this.$.files||o){this._.files=[];if(this.$.files&&this.$.files.length)for(e=0;e<this.$.files.length;e++)this._.files.push(this.$.files[e]);0===this._.files.length&&o&&this._.files.push(o)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(t){return this._.files.length?this._.files[t]:this.$&&this.$.files&&this.$.files.length?this.$.files[t]:0===t?this._getImageFromClipboard():void 0},isEmpty:function(){var t={},e;if(this.getFilesCount())return!1;for(e in this._.data)t[e]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var n=0;n<this.$.types.length;n++)t[this.$.types[n]]=1}else t.Text=1,t.URL=1;"Text"!=r&&(t[r]=0);for(e in t)if(t[e]&&""!==this.getData(e))return!1;return!0},_getImageFromClipboard:function(){var t;if(this.$&&this.$.items&&this.$.items[0])try{if((t=this.$.items[0].getAsFile())&&t.type)return t}catch(t){}}}})();(function(){var t='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var t=t+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),t=t+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>',g=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),C=CKEDITOR.addTemplate("button",t);CKEDITOR.plugins.add("button",{beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(t){return new CKEDITOR.ui.button(t)}};CKEDITOR.ui.button.prototype={render:function(o,t){function e(){var t=o.mode;t&&(t=this.modes[t]?void 0!==f[t]?f[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=o.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())}var n=CKEDITOR.env,i=this._.id=CKEDITOR.tools.getNextId(),r="",a=this.command,s,l,c;this._.editor=o;var d={id:i,button:this,editor:o,focus:function(){CKEDITOR.document.getById(i).focus()},execute:function(){this.button.click(o)},attach:function(t){this.button.attach(t)}},u=CKEDITOR.tools.addFunction(function(t){if(d.onkey)return t=new CKEDITOR.dom.event(t),!1!==d.onkey(d,t.getKeystroke())}),m=CKEDITOR.tools.addFunction(function(t){var e;d.onfocus&&(e=!1!==d.onfocus(d,new CKEDITOR.dom.event(t)));return e}),p=0;d.clickFn=s=CKEDITOR.tools.addFunction(function(){p&&(o.unlockSelection(1),p=0);d.execute();n.iOS&&o.focus()});if(this.modes){var f={};o.on("beforeModeUnload",function(){o.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(f[o.mode]=this._.state)},this);o.on("activeFilterChange",e,this);o.on("mode",e,this);!this.readOnly&&o.on("readOnly",e,this)}else a&&(a=o.getCommand(a))&&(a.on("state",function(){this.setState(a.state)},this),r+=a.state==CKEDITOR.TRISTATE_ON?"on":a.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");if(this.directional)o.on("contentDirChanged",function(t){var e=CKEDITOR.document.getById(this._.id),n=e.getFirst();t=t.data;t!=o.lang.dir?e.addClass("cke_"+t):e.removeClass("cke_ltr").removeClass("cke_rtl");n.setAttribute("style",CKEDITOR.skin.getIconStyle(h,"rtl"==t,this.icon,this.iconOffset))},this);a?(l=o.getCommandKeystroke(a))&&(c=CKEDITOR.tools.keystrokeToString(o.lang.common.keyboard,l)):r+="off";var h=l=this.name||this.command;this.icon&&!/\./.test(this.icon)&&(h=this.icon,this.icon=null);r={id:i,name:l,iconName:h,label:this.label,cls:this.className||"",state:r,ariaDisabled:"disabled"==r?"true":"false",title:this.title+(c?" ("+c.display+")":""),ariaShortcut:c?o.lang.common.keyboardShortcut+" "+c.aria:"",titleJs:n.gecko&&!n.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:u,focusFn:m,clickFn:s,style:CKEDITOR.skin.getIconStyle(h,"rtl"==o.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?g.output():""};C.output(r,t);if(this.onRender)this.onRender();return d},setState:function(t){if(this._.state==t)return!1;this._.state=t;var e=CKEDITOR.document.getById(this._.id);return e?(e.setState(t,"cke_button"),t==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled"),this.hasArrow?(t=t==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(t)):t==CKEDITOR.TRISTATE_ON?e.setAttribute("aria-pressed",!0):e.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(t){if(this._.feature)return this._.feature;var e=this;this.allowedContent||this.requiredContent||!this.command||(e=t.getCommand(this.command)||e);return this._.feature=e}};CKEDITOR.ui.prototype.addButton=function(t,e){this.add(t,CKEDITOR.UI_BUTTON,e)}})();CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function n(t){var e=this._;e.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(t),e.on?e.panel.hide():e.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){var e=t.panel||{};delete t.panel;this.base(t);this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document;e.block={attributes:e.attributes};this.hasArrow=e.toolbarRelated=!0;this.click=n;this._={panelDefinition:e}},statics:{handler:{create:function(t){return new CKEDITOR.ui.panelButton(t)}}},proto:{createPanel:function(e){var n=this._;if(!n.panel){var t=this._.panelDefinition,o=this._.panelDefinition.block,i=t.parent||CKEDITOR.document.getBody(),r=this._.panel=new CKEDITOR.ui.floatPanel(e,i,t),t=r.addBlock(n.id,o),a=this;r.onShow=function(){a.className&&this.element.addClass(a.className+"_panel");a.setState(CKEDITOR.TRISTATE_ON);n.on=1;a.editorFocus&&e.focus();if(a.onOpen)a.onOpen()};r.onHide=function(t){a.className&&this.element.getFirst().removeClass(a.className+"_panel");a.setState(a.modes&&a.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);n.on=0;if(!t&&a.onClose)a.onClose()};r.onEscape=function(){r.hide(1);a.document.getById(n.id).focus()};if(this.onBlock)this.onBlock(r,t);t.onHide=function(){n.on=0;a.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});CKEDITOR.UI_PANELBUTTON="panelbutton";(function(){CKEDITOR.plugins.add("panel",{beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(t,e){e&&CKEDITOR.tools.extend(this,e);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=t;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(t){return new CKEDITOR.ui.panel(t)}};var i=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),r=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),a=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(t,e){this.getHolderElement=function(){var t=this._.holder;if(!t){if(this.isFramed){var t=this.document.getById(this.id+"_frame"),e=t.getParent(),t=t.getFrameDocument();CKEDITOR.env.iOS&&e.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});e=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad)this.onLoad()},this));t.write(a.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+e+");"},n)));t.getWindow().$.CKEDITOR=CKEDITOR;t.on("keydown",function(t){var e=t.data.getKeystroke(),n=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(e)?t.data.preventDefault():(27==e||e==("rtl"==n?39:37))&&this.onEscape&&!1===this.onEscape(e)&&t.data.preventDefault()},this);t=t.getBody();t.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(e)}else t=this.document.getById(this.id);this._.holder=t}return t};var n={editorId:t.id,id:this.id,langCode:t.langCode,dir:t.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":t.config.baseFloatZIndex+1};if(this.isFramed){var o=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";n.frame=r.output({id:this.id+"_frame",src:o})}o=i.output(n);e&&e.push(o);return o},addBlock:function(t,e){e=this._.blocks[t]=e instanceof CKEDITOR.ui.panel.block?e:new CKEDITOR.ui.panel.block(this.getHolderElement(),e);this._.currentBlock||this.showBlock(t);return e},getBlock:function(t){return this._.blocks[t]},showBlock:function(t){t=this._.blocks[t];var e=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");e&&e.hide();this._.currentBlock=t;CKEDITOR.fire("ariaWidget",n);t._.focusIndex=-1;this._.onKeyDown=t.onKeyDown&&CKEDITOR.tools.bind(t.onKeyDown,t);t.show();return t},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(t,e){this.element=t.append(t.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}}));e&&CKEDITOR.tools.extend(this,e);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(t){-1!=t&&(t=this.element.getElementsByTag("a").getItem(this._.focusIndex=t),CKEDITOR.env.webkit&&t.getDocument().getWindow().focus(),t.focus(),this.onMark&&this.onMark(t))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(t,e){var n=this.keys[t];switch(n){case"next":for(var o=this._.focusIndex,n=this.element.getElementsByTag("a"),i;i=n.getItem(++o);)if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=o;i.focus();break}return i||e?!1:(this._.focusIndex=-1,this.onKeyDown(t,1));case"prev":o=this._.focusIndex;for(n=this.element.getElementsByTag("a");0<o&&(i=n.getItem(--o));){if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=o;i.focus();break}i=null}return i||e?!1:(this._.focusIndex=n.count(),this.onKeyDown(t,1));case"click":case"mouseup":return o=this._.focusIndex,(i=0<=o&&this.element.getElementsByTag("a").getItem(o))&&(i.$[n]?i.$[n]():i.$["on"+n]()),!1}return!0}}})})();CKEDITOR.plugins.add("floatpanel",{requires:"panel"});(function(){function c(t,e,n,o,i){i=CKEDITOR.tools.genKey(e.getUniqueId(),n.getUniqueId(),t.lang.dir,t.uiColor||"",o.css||"",i||"");var r=a[i];r||(r=a[i]=new CKEDITOR.ui.panel(e,o),r.element=n.append(CKEDITOR.dom.element.createFromHtml(r.render(t),e)),r.element.setStyles({display:"none",position:"absolute"}));return r}var a={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,e,n,o){function i(){l.hide()}n.forceIFrame=1;n.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(e=CKEDITOR.document.getById("cke_"+t.name));var r=e.getDocument();o=c(t,r,e,n,o||0);var a=o.element,s=a.getFirst(),l=this;a.disableContextMenu();this.element=a;this._={editor:t,panel:o,parentElement:e,definition:n,document:r,iframe:s,children:[],dir:t.lang.dir,showBlockParams:null};t.on("mode",i);t.on("resize",i);r.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(t,e){return this._.panel.addBlock(t,e)},addListBlock:function(t,e){return this._.panel.addListBlock(t,e)},getBlock:function(t){return this._.panel.getBlock(t)},showBlock:function(t,e,n,o,i,s){var l=this._.panel,c=l.showBlock(t);this._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var r=this._.editor.editable();this._.returnFocus=r.hasFocus?r:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var d=this.element,r=this._.iframe,r=CKEDITOR.env.ie&&!CKEDITOR.env.edge?r:new CKEDITOR.dom.window(r.$.contentWindow),a=d.getDocument(),u=this._.parentElement.getPositionedAncestor(),m=e.getDocumentPosition(a),a=u?u.getDocumentPosition(a):{x:0,y:0},p="rtl"==this._.dir,f=m.x+(o||0)-a.x,h=m.y+(i||0)-a.y;!p||1!=n&&4!=n?p||2!=n&&3!=n||(f+=e.$.offsetWidth-1):f+=e.$.offsetWidth;if(3==n||4==n)h+=e.$.offsetHeight-1;this._.panel._.offsetParentId=e.getId();d.setStyles({top:h+"px",left:0,display:""});d.setOpacity(0);d.getFirst().removeStyle("width");this._.editor.focusManager.add(r);this._.blurSet||(CKEDITOR.event.useCapture=!0,r.on("blur",function(t){function e(){delete this._.returnFocus;this.hide()}this.allowBlur()&&t.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(e,0,this)):e.call(this))},this),r.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(r.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),r.on("touchend",function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1);l.onEscape=CKEDITOR.tools.bind(function(t){if(this.onEscape&&!1===this.onEscape(t))return!1},this);CKEDITOR.tools.setTimeout(function(){var t=CKEDITOR.tools.bind(function(){var t=d;t.removeStyle("width");if(c.autoSize){var e=c.element.getDocument(),e=(CKEDITOR.env.webkit||CKEDITOR.env.edge?c.element:e.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(t.$.offsetWidth||0)-(t.$.clientWidth||0)+3);t.setStyle("width",e+10+"px");e=c.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(t.$.offsetHeight||0)-(t.$.clientHeight||0)+3);t.setStyle("height",e+"px");l._.currentBlock.element.setStyle("display","none").removeStyle("display")}else t.removeStyle("height");p&&(f-=d.$.offsetWidth);d.setStyle("left",f+"px");var e=l.element.getWindow(),t=d.$.getBoundingClientRect(),e=e.getViewPaneSize(),n=t.width||t.right-t.left,o=t.height||t.bottom-t.top,i=p?t.right:e.width-t.left,r=p?e.width-t.right:t.left;p?i<n&&(f=r>n?f+n:e.width>n?f-t.left:f-t.right+e.width):i<n&&(f=r>n?f-n:e.width>n?f-t.right+e.width:f-t.left);n=t.top;e.height-t.top<o&&(h=n>o?h-o:e.height>o?h-t.bottom+e.height:h-t.top);CKEDITOR.env.ie&&(e=t=new CKEDITOR.dom.element(d.$.offsetParent),"html"==e.getName()&&(e=e.getDocument().getBody()),"rtl"==e.getComputedStyle("direction")&&(f=CKEDITOR.env.ie8Compat?f-2*d.getDocument().getDocumentElement().$.scrollLeft:f-(t.$.scrollWidth-t.$.clientWidth)));var t=d.getFirst(),a;(a=t.getCustomData("activePanel"))&&a.onHide&&a.onHide.call(this,1);t.setCustomData("activePanel",this);d.setStyles({top:h+"px",left:f+"px"});d.setOpacity(1);s&&s()},this);l.isLoaded?t():l.onLoad=t;CKEDITOR.tools.setTimeout(function(){var t=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();c.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=t);this.allowBlur(!0);this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},reposition:function(){var t=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,t))},focus:function(){if(CKEDITOR.env.webkit){var t=CKEDITOR.document.getActive();t&&!t.equals(this._.iframe)&&t.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var t=this._.iframe.getFrameDocument().getActive();t&&t.is("a")&&(this._.lastFocused=t)},hide:function(t){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(t=t&&this._.returnFocus)CKEDITOR.env.webkit&&t.type&&t.getWindow().$.focus(),t.focus();delete this._.lastFocused;this._.showBlockParams=null;this._.editor.fire("panelHide",this)}},allowBlur:function(t){var e=this._.panel;void 0!==t&&(e.allowBlur=t);return e.allowBlur},showAsChild:function(t,e,n,o,i,r){if(this._.activeChild!=t||t._.panel._.offsetParentId!=n.getId())this.hideChild(),t.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=t,this._.focused=!1,t.showBlock(e,n,o,i,r),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){t.element.getChild(0).$.style.cssText+=""},100)},hideChild:function(t){var e=this._.activeChild;e&&(delete e.onHide,delete this._.activeChild,e.hide(),t&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var t=CKEDITOR.tools.isEmpty(CKEDITOR.instances),e;for(e in a){var n=a[e];t?n.destroy():n.element.hide()}t&&(a={})})})();CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(m){function t(t,i,e,n,o){var r=new CKEDITOR.style(f["colorButton_"+i+"Style"]),a=CKEDITOR.tools.getNextId()+"_colorBox";o=o||{};m.ui.add(t,CKEDITOR.UI_PANELBUTTON,{label:e,title:e,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+n,allowedContent:r,requiredContent:r,contentTransformations:o.contentTransformations,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":h.panelTitle}},onBlock:function(t,e){e.autoSize=!0;e.element.addClass("cke_colorblock");e.element.setHtml(s(t,i,a));e.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var n=e.keys,o="rtl"==m.lang.dir;n[o?37:39]="next";n[40]="next";n[9]="next";n[o?39:37]="prev";n[38]="prev";n[CKEDITOR.SHIFT+9]="prev";n[32]="click"},refresh:function(){m.activeFilter.check(r)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var t=m.getSelection(),t=t&&t.getStartElement(),t=m.elementPath(t),e;if(t){t=t.block||t.blockLimit||m.document.getBody();do{e=t&&t.getComputedStyle("back"==i?"background-color":"color")||"transparent"}while("back"==i&&"transparent"==e&&t&&(t=t.getParent()));e&&"transparent"!=e||(e="#ffffff");!1!==f.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(a).setStyle("background-color",e);return e}}})}function s(r,t,e){var n=[],o=f.colorButton_colors.split(","),i=f.colorButton_colorsPerRow||6,a=m.plugins.colordialog&&!1!==f.colorButton_enableMore,s=o.length+(a?2:1),l=CKEDITOR.tools.addFunction(function(t,e){function n(t){this.removeListener("ok",n);this.removeListener("cancel",n);"ok"==t.name&&o(this.getContentElement("picker","selectedColor").getValue(),e)}var o=arguments.callee;if("?"==t)m.openDialog("colordialog",function(){this.on("ok",n);this.on("cancel",n)});else{m.focus();r.hide();m.fire("saveSnapshot");m.removeStyle(new CKEDITOR.style(f["colorButton_"+e+"Style"],{color:"inherit"}));if(t){var i=f["colorButton_"+e+"Style"];i.childRule="back"==e?function(t){return p(t)}:function(t){return!(t.is("a")||t.getElementsByTag("a").count())||p(t)};m.applyStyle(new CKEDITOR.style(i,{color:t}))}m.fire("saveSnapshot")}});!1!==f.colorButton_enableAutomatic&&n.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',h.auto,'" onclick="CKEDITOR.tools.callFunction(',l,",null,'",t,"');return false;\" href=\"javascript:void('",h.auto,'\')" role="option" aria-posinset="1" aria-setsize="',s,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td colspan="'+i+'" align="center"><span class="cke_colorbox" id="',e,'"></span>',h.auto,"</td></tr></table></a>");n.push('<table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(e=0;e<o.length;e++){0===e%i&&n.push("</tr><tr>");var c=o[e].split("/"),d=c[0],u=c[1]||d;c[1]||(d="#"+d.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));c=m.lang.colorbutton.colors[u]||u;n.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',c,'" onclick="CKEDITOR.tools.callFunction(',l,",'",d,"','",t,"'); return false;\" href=\"javascript:void('",c,'\')" role="option" aria-posinset="',e+2,'" aria-setsize="',s,'"><span class="cke_colorbox" style="background-color:#',u,'"></span></a></td>')}a&&n.push('</tr><tr><td colspan="'+i+'" align="center"><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',h.more,'" onclick="CKEDITOR.tools.callFunction(',l,",'?','",t,"');return false;\" href=\"javascript:void('",h.more,"')\"",' role="option" aria-posinset="',s,'" aria-setsize="',s,'">',h.more,"</a></td>");n.push("</tr></table>");return n.join("")}function p(t){return"false"==t.getAttribute("contentEditable")||t.getAttribute("data-nostyle")}var f=m.config,h=m.lang.colorbutton;if(!CKEDITOR.env.hc){t("TextColor","fore",h.textColorTitle,10,{contentTransformations:[[{element:"font",check:"span{color}",left:function(t){return!!t.attributes.color},right:function(t){t.name="span";t.attributes.color&&(t.styles.color=t.attributes.color);delete t.attributes.color}}]]});var e={},n=m.config.colorButton_normalizeBackground;if(void 0===n||n)e.contentTransformations=[[{element:"span",left:function(t){var e=CKEDITOR.tools;if("span"!=t.name||!t.styles||!t.styles.background)return!1;t=e.style.parse.background(t.styles.background);return t.color&&1===e.objectKeys(t).length},right:function(t){var e=new CKEDITOR.style(m.config.colorButton_backStyle,{color:t.styles.background}).getDefinition();t.name=e.element;t.styles=e.styles;t.attributes=e.attributes||{};return t}}]];t("BGColor","back",h.bgColorTitle,20,e)}}});CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000";CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};CKEDITOR.plugins.colordialog={requires:"dialog",init:function(t){var e=new CKEDITOR.dialogCommand("colordialog");e.editorFocus=!1;t.addCommand("colordialog",e);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");t.getColorFromDialog=function(e,n){var o=function(t){this.removeListener("ok",o);this.removeListener("cancel",o);t="ok"==t.name?this.getValueOf("picker","selectedColor"):null;e.call(n,t)},i=function(t){t.on("ok",o);t.on("cancel",o)};t.execCommand("colordialog");if(t._.storedDialogs&&t._.storedDialogs.colordialog)i(t._.storedDialogs.colordialog);else CKEDITOR.on("dialogDefinition",function(t){if("colordialog"==t.data.name){var e=t.data.definition;t.removeListener();e.onLoad=CKEDITOR.tools.override(e.onLoad,function(t){return function(){i(this);e.onLoad=t;"function"==typeof t&&t.call(this)}})}})}}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog);(function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(t){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));t.addCommand("templates",new CKEDITOR.dialogCommand("templates"));t.ui.addButton&&t.ui.addButton("Templates",{label:t.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var n={},r={};CKEDITOR.addTemplates=function(t,e){n[t]=e};CKEDITOR.getTemplates=function(t){return n[t]};CKEDITOR.loadTemplates=function(t,e){for(var n=[],o=0,i=t.length;o<i;o++)r[t[o]]||(n.push(t[o]),r[t[o]]=1);n.length?CKEDITOR.scriptLoader.load(n,e):setTimeout(e,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(t){for(var e=t.config.menu_groups.split(","),n=t._.menuGroups={},o=t._.menuItems={},i=0;i<e.length;i++)n[e[i]]=i+1;t.addMenuGroup=function(t,e){n[t]=e||100};t.addMenuItem=function(t,e){n[e.group]&&(o[t]=new CKEDITOR.menuItem(this,t,e))};t.addMenuItems=function(t){for(var e in t)this.addMenuItem(e,t[e])};t.getMenuItem=function(t){return o[t]};t.removeMenuItem=function(t){delete o[t]}}});(function(){function p(t){t.sort(function(t,e){return t.group<e.group?-1:t.group>e.group?1:t.order<e.order?-1:t.order>e.order?1:0})}var t='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"');var t=t+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),f=CKEDITOR.addTemplate("menuItem",t+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>'),h=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),g=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(t,e){e=this._.definition=e||{};this.id=CKEDITOR.tools.getNextId();this.editor=t;this.items=[];this._.listeners=[];this._.level=e.level||1;var n=CKEDITOR.tools.extend({},e.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),o=n.block.attributes=n.attributes||{};!o.role&&(o.role="menu");this._.panelDefinition=n},_:{onShow:function(){var t=this.editor.getSelection(),e=t&&t.getStartElement(),n=this.editor.elementPath(),o=this._.listeners;this.removeAll();for(var i=0;i<o.length;i++){var r=o[i](e,t,n);if(r)for(var a in r){var s=this.editor.getMenuItem(a);!s||s.command&&!this.editor.getCommand(s.command).state||(s.state=r[a],this.add(s))}}},onClick:function(t){this.hide();if(t.onClick)t.onClick();else t.command&&this.editor.execCommand(t.command)},onEscape:function(t){var e=this.parent;e?e._.panel.hideChild(1):27==t&&this.hide(1);return!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(t){var e=this._.subMenu,n=this.items[t];if(n=n.getItems&&n.getItems()){e?e.removeAll():(e=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),e.parent=this,e._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var o in n){var i=this.editor.getMenuItem(o);i&&(i.state=n[o],e.add(i))}var r=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(t));setTimeout(function(){e.show(r,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(t){t.order||(t.order=this.items.length);this.items.push(t)},removeAll:function(){this.items=[]},show:function(t,e,n,o){if(!this.parent&&(this._.onShow(),!this.items.length))return;e=e||("rtl"==this.editor.lang.dir?2:1);var i=this.items,r=this.editor,a=this._.panel,s=this._.element;if(!a){a=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);a.onEscape=CKEDITOR.tools.bind(function(t){if(!1===this._.onEscape(t))return!1},this);a.onShow=function(){a._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")};a.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);s=a.addBlock(this.id,this._.panelDefinition.block);s.autoSize=!0;var l=s.keys;l[40]="next";l[9]="next";l[38]="prev";l[CKEDITOR.SHIFT+9]="prev";l["rtl"==r.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";l[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(l[13]="mouseup");s=this._.element=s.element;l=s.getDocument();l.getBody().setStyle("overflow","hidden");l.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(t){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,r.config.menu_subMenuDelay||400,this,[t])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(t){var e=this.items[t];if(e.state==CKEDITOR.TRISTATE_DISABLED)this.hide(1);else if(e.getItems)this._.showSubMenu(t);else this._.onClick(e)},this)}p(i);for(var l=r.elementPath(),l=['<div class="cke_menu'+(l&&l.direction()!=r.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],c=i.length,d=c&&i[0].group,u=0;u<c;u++){var m=i[u];d!=m.group&&(l.push('<div class="cke_menuseparator" role="separator"></div>'),d=m.group);m.render(this,u,l)}l.push("</div>");s.setHtml(l.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(a,this.id,t,e,n,o):a.showBlock(this.id,t,e,n,o);r.fire("menuShow",[a])},addListener:function(t){this._.listeners.push(t)},hide:function(t){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(t)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(t,e,n){CKEDITOR.tools.extend(this,n,{order:0,className:"cke_menubutton__"+e});this.group=t._.menuGroups[this.group];this.editor=t;this.name=e},proto:{render:function(t,e,n){var o=t.id+String(e),i="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,r="",a=this.editor,s,l,c=i==CKEDITOR.TRISTATE_ON?"on":i==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(r=' aria-checked="'+(i==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var d=this.getItems,u="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",m=this.name;this.icon&&!/\./.test(this.icon)&&(m=this.icon);this.command&&(s=a.getCommand(this.command),(s=a.getCommandKeystroke(s))&&(l=CKEDITOR.tools.keystrokeToString(a.lang.common.keyboard,s)));t={id:o,name:this.name,iconName:m,label:this.label,cls:this.className||"",state:c,hasPopup:d?"true":"false",disabled:i==CKEDITOR.TRISTATE_DISABLED,title:this.label+(l?" ("+l.display+")":""),ariaShortcut:l?a.lang.common.keyboardShortcut+" "+l.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:t._.itemOverFn,moveOutFn:t._.itemOutFn,clickFn:t._.itemClickFn,index:e,iconStyle:CKEDITOR.skin.getIconStyle(m,"rtl"==this.editor.lang.dir,m==this.icon?null:this.icon,this.iconOffset),shortcutHtml:l?g.output({shortcut:l.display}):"",arrowHtml:d?h.output({label:u}):"",role:this.role?this.role:"menuitem",ariaChecked:r};f.output(t,n)}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(t){this.base.call(this,t,{panel:{className:"cke_menu_panel",attributes:{"aria-label":t.lang.contextmenu.options}}})},proto:{addTarget:function(t,a){t.on("contextmenu",function(t){t=t.data;var e=CKEDITOR.env.webkit?s:CKEDITOR.env.mac?t.$.metaKey:t.$.ctrlKey;if(!a||!e){t.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var e=this.editor,n=new CKEDITOR.dom.elementPath(t.getTarget(),e.editable()).contains(function(t){return t.hasAttribute("contenteditable")},!0);n&&"false"==n.getAttribute("contenteditable")&&e.getSelection().fake(n)}var n=t.getTarget().getDocument(),o=t.getTarget().getDocument().getDocumentElement(),e=!n.equals(CKEDITOR.document),n=n.getWindow().getScrollPosition(),i=e?t.$.clientX:t.$.pageX||n.x+t.$.clientX,r=e?t.$.clientY:t.$.pageY||n.y+t.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(o,null,i,r)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.webkit){var s,e=function(){s=0};t.on("keydown",function(t){s=CKEDITOR.env.mac?t.data.$.metaKey:t.data.$.ctrlKey});t.on("keyup",e);t.on("contextmenu",e)}},open:function(t,e,n,o){this.editor.focus();t=t||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(t,e,n,o)}}})},beforeInit:function(t){var e=t.contextMenu=new CKEDITOR.plugins.contextMenu(t);t.on("contentDom",function(){e.addTarget(t.editable(),!1!==t.config.browserContextMenuOnCtrl)});t.addCommand("contextMenu",{exec:function(){t.contextMenu.open(t.document.getBody())}});t.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");t.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}});(function(){function o(t){var e=(t=t.data)&&t.$;return t&&e?CKEDITOR.env.ie&&9>CKEDITOR.env.version?1===e.button:0===e.button:!1}function s(t,e,n,o){var i=new CKEDITOR.dom.walker(t);if(t=t.startContainer.getAscendant(e,!0)||t.endContainer.getAscendant(e,!0))if(n(t),o)return;for(;t=i.next();)if(t=t.getAscendant(e,!0))if(n(t),o)break}function l(e,t){var n={ul:"ol",ol:"ul"};return-1!==m(t,function(t){return t.element===e||t.element===n[e]})}function t(t){this.styles=null;this.sticky=!1;this.editor=t;this.filter=new CKEDITOR.filter(t.config.copyFormatting_allowRules);!0===t.config.copyFormatting_allowRules&&(this.filter.disabled=!0);t.config.copyFormatting_disallowRules&&this.filter.disallow(t.config.copyFormatting_disallowRules)}var m=CKEDITOR.tools.indexOf,e=!1;CKEDITOR.plugins.add("copyformatting",{lang:"en",icons:"copyformatting",hidpi:!0,init:function(a){var s=CKEDITOR.plugins.copyformatting;s._addScreenReaderContainer();e||(CKEDITOR.document.appendStyleSheet(this.path+"styles/copyformatting.css"),e=!0);a.addContentsCss&&a.addContentsCss(this.path+"styles/copyformatting.css");a.copyFormatting=new s.state(a);a.addCommand("copyFormatting",s.commands.copyFormatting);a.addCommand("applyFormatting",s.commands.applyFormatting);a.ui.addButton("CopyFormatting",{label:a.lang.copyformatting.label,command:"copyFormatting",toolbar:"cleanup,0"});a.on("contentDom",function(){var n=a.editable(),t=n.isInline()?n:a.document,e=a.ui.get("CopyFormatting");n.attachListener(t,"mouseup",function(t){o(t)&&a.execCommand("applyFormatting")});n.attachListener(CKEDITOR.document,"mouseup",function(t){var e=a.getCommand("copyFormatting");o(t)&&e.state===CKEDITOR.TRISTATE_ON&&!n.contains(t.data.getTarget())&&a.execCommand("copyFormatting")});e&&(t=CKEDITOR.document.getById(e._.id),n.attachListener(t,"dblclick",function(){a.execCommand("copyFormatting",{sticky:!0})}),n.attachListener(t,"mouseup",function(t){t.data.stopPropagation()}))});a.config.copyFormatting_keystrokeCopy&&a.setKeystroke(a.config.copyFormatting_keystrokeCopy,"copyFormatting");a.config.copyFormatting_keystrokePaste&&a.setKeystroke(a.config.copyFormatting_keystrokePaste,"applyFormatting");a.on("key",function(t){var e=a.getCommand("copyFormatting");t=t.data.domEvent;t.getKeystroke&&27===t.getKeystroke()&&e.state===CKEDITOR.TRISTATE_ON&&a.execCommand("copyFormatting")});a.copyFormatting.on("extractFormatting",function(t){var e=t.data.element;if(e.contains(a.editable())||e.equals(a.editable()))return t.cancel();e=s._convertElementToStyleDef(e);if(!a.copyFormatting.filter.check(new CKEDITOR.style(e),!0,!0))return t.cancel();t.data.styleDef=e});a.copyFormatting.on("applyFormatting",function(t){if(!t.data.preventFormatStripping){var e=t.data.range,n=s._extractStylesFromRange(a,e),o=s._determineContext(e),i,r;if(a.copyFormatting._isContextAllowed(o))for(r=0;r<n.length;r++)o=n[r],i=e.createBookmark(),-1===m(s.preservedElements,o.element)?CKEDITOR.env.webkit&&!CKEDITOR.env.chrome?n[r].removeFromRange(t.data.range,t.editor):n[r].remove(t.editor):l(o.element,t.data.styles)&&s._removeStylesFromElementInRange(e,o.element),e.moveToBookmark(i)}});a.copyFormatting.on("applyFormatting",function(t){var e=CKEDITOR.plugins.copyformatting,n=e._determineContext(t.data.range);"list"===n&&a.copyFormatting._isContextAllowed("list")?e._applyStylesToListContext(t.editor,t.data.range,t.data.styles):"table"===n&&a.copyFormatting._isContextAllowed("table")?e._applyStylesToTableContext(t.editor,t.data.range,t.data.styles):a.copyFormatting._isContextAllowed("text")&&e._applyStylesToTextContext(t.editor,t.data.range,t.data.styles)},null,null,999)}});t.prototype._isContextAllowed=function(t){var e=this.editor.config.copyFormatting_allowedContexts;return!0===e||-1!==m(e,t)};CKEDITOR.event.implementOn(t.prototype);CKEDITOR.plugins.copyformatting={state:t,inlineBoundary:"h1 h2 h3 h4 h5 h6 p div".split(" "),excludedAttributes:["id","style","href","data-cke-saved-href","dir"],elementsForInlineTransform:["li"],excludedElementsFromInlineTransform:["table","thead","tbody","ul","ol"],excludedAttributesFromInlineTransform:["value","type"],preservedElements:"ul ol li td th tr thead tbody table".split(" "),breakOnElements:["ul","ol","table"],commands:{copyFormatting:{exec:function(t,e){var n=CKEDITOR.plugins.copyformatting,o=t.copyFormatting,i=e?"keystrokeHandler"==e.from:!1,r=e?e.sticky||i:!1,a=n._getCursorContainer(t),s=CKEDITOR.document.getDocumentElement();if(this.state===CKEDITOR.TRISTATE_ON)return o.styles=null,o.sticky=!1,a.removeClass("cke_copyformatting_active"),s.removeClass("cke_copyformatting_disabled"),s.removeClass("cke_copyformatting_tableresize_cursor"),n._putScreenReaderMessage(t,"canceled"),this.setState(CKEDITOR.TRISTATE_OFF);o.styles=n._extractStylesFromElement(t,t.elementPath().lastElement);this.setState(CKEDITOR.TRISTATE_ON);i||(a.addClass("cke_copyformatting_active"),s.addClass("cke_copyformatting_tableresize_cursor"),t.config.copyFormatting_outerCursor&&s.addClass("cke_copyformatting_disabled"));o.sticky=r;n._putScreenReaderMessage(t,"copied")}},applyFormatting:{exec:function(t,e){var n=t.getCommand("copyFormatting"),o=e?"keystrokeHandler"==e.from:!1,i=CKEDITOR.plugins.copyformatting,r=t.copyFormatting,a=i._getCursorContainer(t),s=CKEDITOR.document.getDocumentElement();if(o||n.state===CKEDITOR.TRISTATE_ON){if(o&&!r.styles)return i._putScreenReaderMessage(t,"failed");o=i._applyFormat(t,r.styles);r.sticky||(r.styles=null,a.removeClass("cke_copyformatting_active"),s.removeClass("cke_copyformatting_disabled"),s.removeClass("cke_copyformatting_tableresize_cursor"),n.setState(CKEDITOR.TRISTATE_OFF));i._putScreenReaderMessage(t,o?"applied":"canceled")}}}},_getCursorContainer:function(t){return t.elementMode===CKEDITOR.ELEMENT_MODE_INLINE?t.editable():t.editable().getParent()},_convertElementToStyleDef:function(t){var e=CKEDITOR.tools,n=t.getAttributes(CKEDITOR.plugins.copyformatting.excludedAttributes),e=e.parseCssText(t.getAttribute("style"),!0,!0);return{element:t.getName(),type:CKEDITOR.STYLE_INLINE,attributes:n,styles:e}},_extractStylesFromElement:function(t,e){var n={},o=[];do{if(e.type===CKEDITOR.NODE_ELEMENT&&!e.hasAttribute("data-cke-bookmark")&&(n.element=e,t.copyFormatting.fire("extractFormatting",n,t)&&n.styleDef&&o.push(new CKEDITOR.style(n.styleDef)),e.getName&&-1!==m(CKEDITOR.plugins.copyformatting.breakOnElements,e.getName())))break}while((e=e.getParent())&&e.type===CKEDITOR.NODE_ELEMENT);return o},_extractStylesFromRange:function(t,e){for(var n=[],o=new CKEDITOR.dom.walker(e),i;i=o.next();)n=n.concat(CKEDITOR.plugins.copyformatting._extractStylesFromElement(t,i));return n},_removeStylesFromElementInRange:function(t,e){for(var n=-1!==m(["ol","ul","table"],e),o=new CKEDITOR.dom.walker(t),i;i=o.next();)if(i=i.getAscendant(e,!0))if(i.removeAttributes(i.getAttributes()),n)break},_getSelectedWordOffset:function(t){function c(t,e){return t[e?"getPrevious":"getNext"](function(t){return t.type!==CKEDITOR.NODE_COMMENT})}function d(t){return t.type==CKEDITOR.NODE_ELEMENT?(t=t.getHtml().replace(/<span.*?>&nbsp;<\/span>/g,""),t.replace(/<.*?>/g,"")):t.getText()}function u(t,e){var n=t,o=/\s/g,i="p br ol ul li td th div caption body".split(" "),r=!1,a=!1,s,l;do{for(s=c(n,e);!s&&n.getParent();){n=n.getParent();if(-1!==m(i,n.getName())){a=r=!0;break}s=c(n,e)}if(s&&s.getName&&-1!==m(i,s.getName())){r=!0;break}n=s}while(n&&n.getStyle&&("none"==n.getStyle("display")||!n.getText()));for(n||(n=t);n.type!==CKEDITOR.NODE_TEXT;)n=!r||e||a?n.getChild(0):n.getChild(n.getChildCount()-1);for(i=d(n);null!=(a=o.exec(i))&&(l=a.index,e););if("number"!==typeof l&&!r)return u(n,e);if(r)e?l=0:(o=/([\.\b]*$)/,l=(a=o.exec(i))?a.index:i.length);else if(e&&(l+=1,l>i.length))return u(n);return{node:n,offset:l}}var e=/\b\w+\b/gi,n,o,i,r,a;i=r=a=t.startContainer;for(n=d(i);null!=(o=e.exec(n));)if(o.index+o[0].length>=t.startOffset)return t=o.index,e=o.index+o[0].length,0===o.index&&(o=u(i,!0),r=o.node,t=o.offset),e>=n.length&&(n=u(i),a=n.node,e=n.offset),{startNode:r,startOffset:t,endNode:a,endOffset:e};return null},_filterStyles:function(t){var e=CKEDITOR.tools.isEmpty,n=[],o,i;for(i=0;i<t.length;i++)o=t[i]._.definition,-1!==CKEDITOR.tools.indexOf(CKEDITOR.plugins.copyformatting.inlineBoundary,o.element)&&(o.element=t[i].element="span"),"span"===o.element&&e(o.attributes)&&e(o.styles)||n.push(t[i]);return n},_determineContext:function(o){function t(t){var e=new CKEDITOR.dom.walker(o),n;if(o.startContainer.getAscendant(t,!0)||o.endContainer.getAscendant(t,!0))return!0;for(;n=e.next();)if(n.getAscendant(t,!0))return!0}return t({ul:1,ol:1})?"list":t("table")?"table":"text"},_applyStylesToTextContext:function(t,e,n){var o=CKEDITOR.plugins.copyformatting,i=o.excludedAttributesFromInlineTransform,r,a;CKEDITOR.env.webkit&&!CKEDITOR.env.chrome&&t.getSelection().selectRanges([e]);for(r=0;r<n.length;r++)if(e=n[r],-1===m(o.excludedElementsFromInlineTransform,e.element)){if(-1!==m(o.elementsForInlineTransform,e.element))for(e.element=e._.definition.element="span",a=0;a<i.length;a++)e._.definition.attributes[i[a]]&&delete e._.definition.attributes[i[a]];e.apply(t)}},_applyStylesToListContext:function(t,e,n){var o,i,r;for(r=0;r<n.length;r++)o=n[r],i=e.createBookmark(),"ol"===o.element||"ul"===o.element?s(e,{ul:1,ol:1},function(t){var e=o;t.getName()!==e.element&&t.renameNode(e.element);e.applyToObject(t)},!0):"li"===o.element?s(e,"li",function(t){o.applyToObject(t)}):CKEDITOR.plugins.copyformatting._applyStylesToTextContext(t,e,[o]),e.moveToBookmark(i)},_applyStylesToTableContext:function(t,e,n){function o(t,e){t.getName()!==e.element&&(e=e.getDefinition(),e.element=t.getName(),e=new CKEDITOR.style(e));e.applyToObject(t)}var i,r,a;for(a=0;a<n.length;a++)i=n[a],r=e.createBookmark(),-1!==m(["table","tr"],i.element)?s(e,i.element,function(t){i.applyToObject(t)}):-1!==m(["td","th"],i.element)?s(e,{td:1,th:1},function(t){o(t,i)}):-1!==m(["thead","tbody"],i.element)?s(e,{thead:1,tbody:1},function(t){o(t,i)}):CKEDITOR.plugins.copyformatting._applyStylesToTextContext(t,e,[i]),e.moveToBookmark(r)},_applyFormat:function(t,e){var n=t.getSelection().getRanges()[0],o=CKEDITOR.plugins.copyformatting,i,r;if(!n)return!1;if(n.collapsed){r=t.getSelection().createBookmarks();if(!(i=o._getSelectedWordOffset(n)))return;n=t.createRange();n.setStart(i.startNode,i.startOffset);n.setEnd(i.endNode,i.endOffset);n.select()}e=o._filterStyles(e);if(!t.copyFormatting.fire("applyFormatting",{styles:e,range:n,preventFormatStripping:!1},t))return!1;r&&t.getSelection().selectBookmarks(r);return!0},_putScreenReaderMessage:function(t,e){var n=this._getScreenReaderContainer();n&&n.setText(t.lang.copyformatting.notification[e])},_addScreenReaderContainer:function(){if(this._getScreenReaderContainer())return this._getScreenReaderContainer();if(!CKEDITOR.env.ie6Compat&&!CKEDITOR.env.ie7Compat)return CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml('<div class="cke_screen_reader_only cke_copyformatting_notification"><div aria-live="polite"></div></div>')).getChild(0)},_getScreenReaderContainer:function(){if(!CKEDITOR.env.ie6Compat&&!CKEDITOR.env.ie7Compat)return CKEDITOR.document.getBody().findOne(".cke_copyformatting_notification div[aria-live]")}};CKEDITOR.config.copyFormatting_outerCursor=!0;CKEDITOR.config.copyFormatting_allowRules="b s u i em strong span p div td th ol ul li(*)[*]{*}";CKEDITOR.config.copyFormatting_disallowRules="*[data-cke-widget*,data-widget*,data-cke-realelement](cke_widget*)";CKEDITOR.config.copyFormatting_allowedContexts=!0;CKEDITOR.config.copyFormatting_keystrokeCopy=CKEDITOR.CTRL+CKEDITOR.SHIFT+67;CKEDITOR.config.copyFormatting_keystrokePaste=CKEDITOR.CTRL+CKEDITOR.SHIFT+86})();(function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(e){if(!e.blockless){var t=e.lang.div,n="div(*)";CKEDITOR.dialog.isTabEnabled(e,"editdiv","advanced")&&(n+=";div[dir,id,lang,title]{*}");e.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:n,requiredContent:"div",contextSensitive:!0,contentTransformations:[["div: alignmentToStyle"]],refresh:function(t,e){this.setState("div"in(t.config.div_wrapTable?e.root:e.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));e.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));e.addCommand("removediv",{requiredContent:"div",exec:function(e){function t(t){(t=CKEDITOR.plugins.div.getSurroundDiv(e,t))&&!t.data("cke-div-added")&&(a.push(t),t.data("cke-div-added"))}for(var n=e.getSelection(),o=n&&n.getRanges(),i,r=n.createBookmarks(),a=[],s=0;s<o.length;s++)i=o[s],i.collapsed?t(n.getStartElement()):(i=new CKEDITOR.dom.walker(i),i.evaluator=t,i.lastForward());for(s=0;s<a.length;s++)a[s].remove(!0);n.selectBookmarks(r)}});e.ui.addButton&&e.ui.addButton("CreateDiv",{label:t.toolbar,command:"creatediv",toolbar:"blocks,50"});e.addMenuItems&&(e.addMenuItems({editdiv:{label:t.edit,command:"editdiv",group:"div",order:1},removediv:{label:t.remove,command:"removediv",group:"div",order:5}}),e.contextMenu&&e.contextMenu.addListener(function(t){return!t||t.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(e)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}});CKEDITOR.plugins.div={getSurroundDiv:function(t,e){var n=t.elementPath(e);return t.elementPath(n.blockLimit).contains(function(t){return t.is("div")&&!t.isReadOnly()},1)}}})();CKEDITOR.plugins.add("resize",{init:function(i){function e(t){var e=c.width,n=c.height,o=e+(t.data.$.screenX-l.x)*("rtl"==a?-1:1);t=n+(t.data.$.screenY-l.y);d&&(e=Math.max(r.resize_minWidth,Math.min(o,r.resize_maxWidth)));u&&(n=Math.max(r.resize_minHeight,Math.min(t,r.resize_maxHeight)));i.resize(d?e:null,n)}function n(){CKEDITOR.document.removeListener("mousemove",e);CKEDITOR.document.removeListener("mouseup",n);i.document&&(i.document.removeListener("mousemove",e),i.document.removeListener("mouseup",n))}var r=i.config,o=i.ui.spaceId("resizer"),a=i.element?i.element.getDirection(1):"ltr";!r.resize_dir&&(r.resize_dir="vertical");void 0===r.resize_maxWidth&&(r.resize_maxWidth=3e3);void 0===r.resize_maxHeight&&(r.resize_maxHeight=3e3);void 0===r.resize_minWidth&&(r.resize_minWidth=750);void 0===r.resize_minHeight&&(r.resize_minHeight=250);if(!1!==r.resize_enabled){var s=null,l,c,d=("both"==r.resize_dir||"horizontal"==r.resize_dir)&&r.resize_minWidth!=r.resize_maxWidth,u=("both"==r.resize_dir||"vertical"==r.resize_dir)&&r.resize_minHeight!=r.resize_maxHeight,m=CKEDITOR.tools.addFunction(function(t){s||(s=i.getResizable());c={width:s.$.offsetWidth||0,height:s.$.offsetHeight||0};l={x:t.screenX,y:t.screenY};r.resize_minWidth>c.width&&(r.resize_minWidth=c.width);r.resize_minHeight>c.height&&(r.resize_minHeight=c.height);CKEDITOR.document.on("mousemove",e);CKEDITOR.document.on("mouseup",n);i.document&&(i.document.on("mousemove",e),i.document.on("mouseup",n));t.preventDefault&&t.preventDefault()});i.on("destroy",function(){CKEDITOR.tools.removeFunction(m)});i.on("uiSpace",function(t){if("bottom"==t.data.space){var e="";d&&!u&&(e=" cke_resizer_horizontal");!d&&u&&(e=" cke_resizer_vertical");var n='<span id="'+o+'" class="cke_resizer'+e+" cke_resizer_"+a+'" title="'+CKEDITOR.tools.htmlEncode(i.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+m+', event)">'+("ltr"==a?"◢":"◣")+"</span>";"ltr"==a&&"ltr"==e?t.data.html+=n:t.data.html=n+t.data.html}},i,null,100);i.on("maximize",function(t){i.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}});(function(){function T(s){function t(){for(var t=l(),e=CKEDITOR.tools.clone(s.config.toolbarGroups)||d(s),n=0;n<e.length;n++){var o=e[n];if("/"!=o){"string"==typeof o&&(o=e[n]={name:o});var i,r=o.groups;if(r)for(var a=0;a<r.length;a++)i=r[a],(i=t[i])&&c(o,i);(i=t[o.name])&&c(o,i)}}return e}function l(){var t={},e,n,o;for(e in s.ui.items)n=s.ui.items[e],o=n.toolbar||"others",o=o.split(","),n=o[0],o=parseInt(o[1]||-1,10),t[n]||(t[n]=[]),t[n].push({name:e,order:o});for(n in t)t[n]=t[n].sort(function(t,e){return t.order==e.order?0:0>e.order?-1:0>t.order?1:t.order<e.order?-1:1});return t}function c(t,e){if(e.length){t.items?t.items.push(s.ui.create("-")):t.items=[];for(var n;n=e.shift();)n="string"==typeof n?n:n.name,o&&-1!=CKEDITOR.tools.indexOf(o,n)||(n=s.ui.create(n))&&s.addFeature(n)&&t.items.push(n)}}function e(t){var e=[],n,o,i;for(n=0;n<t.length;++n)o=t[n],i={},"/"==o?e.push(o):CKEDITOR.tools.isArray(o)?(c(i,CKEDITOR.tools.clone(o)),e.push(i)):o.items&&(c(i,CKEDITOR.tools.clone(o.items)),i.name=o.name,e.push(i));return e}var o=s.config.removeButtons,o=o&&o.split(","),n=s.config.toolbar;"string"==typeof n&&(n=s.config["toolbar_"+n]);return s.toolbar=n?e(n):t()}function d(t){return t._.toolbarGroups||(t._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var k=function(){this.toolbars=[];this.focusCommandExecuted=!1};k.prototype.focus=function(){for(var t=0,e;e=this.toolbars[t++];)for(var n=0,o;o=e.items[n++];)if(o.focus){o.focus();return}};var t={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(t){t.toolbox&&(t.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){t.toolbox.focus()},100):t.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(b){var a,y=function(t,e){var n,o="rtl"==b.lang.dir,i=b.config.toolbarGroupCycling,r=o?37:39,o=o?39:37,i=void 0===i||i;switch(e){case 9:case CKEDITOR.SHIFT+9:for(;!n||!n.items.length;)if(n=9==e?(n?n.next:t.toolbar.next)||b.toolbox.toolbars[0]:(n?n.previous:t.toolbar.previous)||b.toolbox.toolbars[b.toolbox.toolbars.length-1],n.items.length)for(t=n.items[a?n.items.length-1:0];t&&!t.focus;)(t=a?t.previous:t.next)||(n=0);t&&t.focus();return!1;case r:n=t;do{n=n.next,!n&&i&&(n=t.toolbar.items[0])}while(n&&!n.focus);n?n.focus():y(t,9);return!1;case 40:return t.button&&t.button.hasArrow?(b.once("panelShow",function(t){t.data._.panel._.currentBlock.onKeyDown(40)}),t.execute()):y(t,40==e?r:o),!1;case o:case 38:n=t;do{n=n.previous,!n&&i&&(n=t.toolbar.items[t.toolbar.items.length-1])}while(n&&!n.focus);n?n.focus():(a=1,y(t,CKEDITOR.SHIFT+9),a=0);return!1;case 27:return b.focus(),!1;case 13:case 32:return t.execute(),!1}return!0};b.on("uiSpace",function(t){if(t.data.space==b.config.toolbarLocation){t.removeListener();b.toolbox=new k;var e=CKEDITOR.tools.getNextId(),n=['<span id="',e,'" class="cke_voice_label">',b.lang.toolbar.toolbars,"</span>",'<span id="'+b.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',e,'" onmousedown="return false;">'],e=!1!==b.config.toolbarStartupExpanded,o,i;b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&n.push('<span class="cke_toolbox_main"'+(e?">":' style="display:none">'));for(var r=b.toolbox.toolbars,a=T(b),s=a.length,l=0;l<s;l++){var c,d=0,u,m=a[l],p="/"!==m&&("/"===a[l+1]||l==s-1),f;if(m)if(o&&(n.push("</span>"),i=o=0),"/"===m)n.push('<span class="cke_toolbar_break"></span>');else{f=m.items||m;for(var h=0;h<f.length;h++){var g=f[h],C;if(g){var A=function(t){t=t.render(b,n);E=d.items.push(t)-1;0<E&&(t.previous=d.items[E-1],t.previous.next=t);t.toolbar=d;t.onkey=y;t.onfocus=function(){b.toolbox.focusCommandExecuted||b.focus()}};if(g.type==CKEDITOR.UI_SEPARATOR)i=o&&g;else{C=!1!==g.canGroup;if(!d){c=CKEDITOR.tools.getNextId();d={id:c,items:[]};u=m.name&&(b.lang.toolbar.toolbarGroups[m.name]||m.name);n.push('<span id="',c,'" class="cke_toolbar'+(p?' cke_toolbar_last"':'"'),u?' aria-labelledby="'+c+'_label"':"",' role="toolbar">');u&&n.push('<span id="',c,'_label" class="cke_voice_label">',u,"</span>");n.push('<span class="cke_toolbar_start"></span>');var E=r.push(d)-1;0<E&&(d.previous=r[E-1],d.previous.next=d)}C?o||(n.push('<span class="cke_toolgroup" role="presentation">'),o=1):o&&(n.push("</span>"),o=0);i&&(A(i),i=0);A(g)}}}o&&(n.push("</span>"),i=o=0);d&&n.push('<span class="cke_toolbar_end"></span></span>')}}b.config.toolbarCanCollapse&&n.push("</span>");if(b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var v=CKEDITOR.tools.addFunction(function(){b.execCommand("toolbarCollapse")});b.on("destroy",function(){CKEDITOR.tools.removeFunction(v)});b.addCommand("toolbarCollapse",{readOnly:1,exec:function(t){var e=t.ui.space("toolbar_collapser"),n=e.getPrevious(),o=t.ui.space("contents"),i=n.getParent(),r=parseInt(o.$.style.height,10),a=i.$.offsetHeight,s=e.hasClass("cke_toolbox_collapser_min");s?(n.show(),e.removeClass("cke_toolbox_collapser_min"),e.setAttribute("title",t.lang.toolbar.toolbarCollapse)):(n.hide(),e.addClass("cke_toolbox_collapser_min"),e.setAttribute("title",t.lang.toolbar.toolbarExpand));e.getFirst().setText(s?"▲":"◀");o.setStyle("height",r-(i.$.offsetHeight-a)+"px");t.fire("resize",{outerHeight:t.container.$.offsetHeight,contentsHeight:o.$.offsetHeight,outerWidth:t.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});b.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");n.push('<a title="'+(e?b.lang.toolbar.toolbarCollapse:b.lang.toolbar.toolbarExpand)+'" id="'+b.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser');e||n.push(" cke_toolbox_collapser_min");n.push('" onclick="CKEDITOR.tools.callFunction('+v+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}n.push("</span>");t.data.html+=n.join("")}});b.on("destroy",function(){if(this.toolbox){var t,e=0,n,o,i;for(t=this.toolbox.toolbars;e<t.length;e++)for(o=t[e].items,n=0;n<o.length;n++)i=o[n],i.clickFn&&CKEDITOR.tools.removeFunction(i.clickFn),i.keyDownFn&&CKEDITOR.tools.removeFunction(i.keyDownFn)}});b.on("uiReady",function(){var t=b.ui.space("toolbox");t&&b.focusManager.add(t,1)});b.addCommand("toolbarFocus",t);b.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");b.ui.add("-",CKEDITOR.UI_SEPARATOR,{});b.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(t,e){e.push('<span class="cke_toolbar_separator" role="separator"></span>');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(t,e,n){var o=d(this.editor),i=0===e,r={name:t};if(n){if(n=CKEDITOR.tools.search(o,function(t){return t.name==n})){!n.groups&&(n.groups=[]);if(e&&(e=CKEDITOR.tools.indexOf(n.groups,e),0<=e)){n.groups.splice(e+1,0,t);return}i?n.groups.splice(0,0,t):n.groups.push(t);return}e=null}e&&(e=CKEDITOR.tools.indexOf(o,function(t){return t.name==e}));i?o.splice(0,0,t):"number"==typeof e?o.splice(e+1,0,r):o.push(t)}})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){function n(m,t){function i(t){t=h.list[t];var e;t.equals(m.editable())||"true"==t.getAttribute("contenteditable")?(e=m.createRange(),e.selectNodeContents(t),e=e.select()):(e=m.getSelection(),e.selectElement(t));CKEDITOR.env.ie&&m.fire("selectionChange",{selection:e,path:new CKEDITOR.dom.elementPath(t)});m.focus()}function e(){f&&f.setHtml('<span class="cke_path_empty">&nbsp;</span>');delete h.list}var p=m.ui.spaceId("path"),f,h=m._.elementsPath,g=h.idBase;t.html+='<span id="'+p+'_label" class="cke_voice_label">'+m.lang.elementspath.eleLabel+'</span><span id="'+p+'" class="cke_path" role="group" aria-labelledby="'+p+'_label"><span class="cke_path_empty">&nbsp;</span></span>';m.on("uiReady",function(){var t=m.ui.space("path");t&&m.focusManager.add(t,1)});h.onClick=i;var C=CKEDITOR.tools.addFunction(i),A=CKEDITOR.tools.addFunction(function(t,e){var n=h.idBase,o;e=new CKEDITOR.dom.event(e);o="rtl"==m.lang.dir;switch(e.getKeystroke()){case o?39:37:case 9:return(o=CKEDITOR.document.getById(n+(t+1)))||(o=CKEDITOR.document.getById(n+"0")),o.focus(),!1;case o?37:39:case CKEDITOR.SHIFT+9:return(o=CKEDITOR.document.getById(n+(t-1)))||(o=CKEDITOR.document.getById(n+(h.list.length-1))),o.focus(),!1;case 27:return m.focus(),!1;case 13:case 32:return i(t),!1}return!0});m.on("selectionChange",function(){for(var t=[],e=h.list=[],n=[],o=h.filters,i=!0,r=m.elementPath().elements,a,s=r.length;s--;){var l=r[s],c=0;a=l.data("cke-display-name")?l.data("cke-display-name"):l.data("cke-real-element-type")?l.data("cke-real-element-type"):l.getName();(i=l.hasAttribute("contenteditable")?"true"==l.getAttribute("contenteditable"):i)||l.hasAttribute("contenteditable")||(c=1);for(var d=0;d<o.length;d++){var u=o[d](l,a);if(!1===u){c=1;break}a=u||a}c||(e.unshift(l),n.unshift(a))}e=e.length;for(o=0;o<e;o++)a=n[o],i=m.lang.elementspath.eleTitle.replace(/%1/,a),a=E.output({id:g+o,label:i,text:a,jsTitle:"javascript:void('"+a+"')",index:o,keyDownFn:A,clickFn:C}),t.unshift(a);f||(f=CKEDITOR.document.getById(p));n=f;n.setHtml(t.join("")+'<span class="cke_path_empty">&nbsp;</span>');m.fire("elementsPathUpdate",{space:n})});m.on("readOnly",e);m.on("contentDomUnload",e);m.addCommand("elementsPathFocus",o.toolbarFocus);m.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var o={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(t){(t=CKEDITOR.document.getById(t._.elementsPath.idBase+"0"))&&t.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},t="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var E=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+t+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(e){e._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]};e.on("uiSpace",function(t){"bottom"==t.data.space&&n(e,t.data)})}})})();(function(){function e(t,e,n){n=t.config.forceEnterMode||n;"wysiwyg"==t.mode&&(e||(e=t.activeEnterMode),t.elementPath().isContextFor("p")||(e=CKEDITOR.ENTER_BR,n=1),t.fire("saveSnapshot"),e==CKEDITOR.ENTER_BR?E(t,e,null,n):c(t,e,null,n),t.fire("saveSnapshot"))}function h(t){t=t.getSelection().getRanges(!0);for(var e=t.length-1;0<e;e--)t[e].deleteContents();return t[0]}function g(t){var e=t.startContainer.getAscendant(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&"true"==t.getAttribute("contenteditable")},!0);if(t.root.equals(e))return t;e=new CKEDITOR.dom.range(e);e.moveToRange(t);return e}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}});t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}});t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var C=CKEDITOR.dom.walker.whitespaces(),A=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(t,e,n,o){if(n=n||h(t)){n=g(n);var i=n.document,r=n.checkStartOfBlock(),a=n.checkEndOfBlock(),s=t.elementPath(n.startContainer),l=s.block,c=e==CKEDITOR.ENTER_DIV?"div":"p",d;if(r&&a){if(l&&(l.is("li")||l.getParent().is("li"))){l.is("li")||(l=l.getParent());n=l.getParent();d=n.getParent();o=!l.hasPrevious();var u=!l.hasNext(),c=t.getSelection(),m=c.createBookmarks(),r=l.getDirection(1),a=l.getAttribute("class"),p=l.getAttribute("style"),f=d.getDirection(1)!=r;t=t.enterMode!=CKEDITOR.ENTER_BR||f||p||a;if(d.is("li"))o||u?(o&&u&&n.remove(),l[u?"insertAfter":"insertBefore"](d)):l.breakParent(d);else{if(t)if(s.block.is("li")?(d=i.createElement(e==CKEDITOR.ENTER_P?"p":"div"),f&&d.setAttribute("dir",r),p&&d.setAttribute("style",p),a&&d.setAttribute("class",a),l.moveChildren(d)):d=s.block,o||u)d[o?"insertBefore":"insertAfter"](n);else l.breakParent(n),d.insertAfter(n);else if(l.appendBogus(!0),o||u)for(;i=l[o?"getFirst":"getLast"]();)i[o?"insertBefore":"insertAfter"](n);else for(l.breakParent(n);i=l.getLast();)i.insertAfter(n);l.remove()}c.selectBookmarks(m);return}if(l&&l.getParent().is("blockquote")){l.breakParent(l.getParent());l.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||l.getPrevious().remove();l.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||l.getNext().remove();n.moveToElementEditStart(l);n.select();return}}else if(l&&l.is("pre")&&!a){E(t,e,n,o);return}if(r=n.splitBlock(c)){e=r.previousBlock;l=r.nextBlock;s=r.wasStartOfBlock;t=r.wasEndOfBlock;l?(m=l.getParent(),m.is("li")&&(l.breakParent(m),l.move(l.getNext(),1))):e&&(m=e.getParent())&&m.is("li")&&(e.breakParent(m),m=e.getNext(),n.moveToElementEditStart(m),e.move(e.getPrevious()));if(s||t){if(e){if(e.is("li")||!v.test(e.getName())&&!e.is("pre"))d=e.clone()}else l&&(d=l.clone());d?o&&!d.is("li")&&d.renameNode(c):m&&m.is("li")?d=m:(d=i.createElement(c),e&&(u=e.getDirection())&&d.setAttribute("dir",u));if(i=r.elementPath)for(o=0,c=i.elements.length;o<c;o++){m=i.elements[o];if(m.equals(i.block)||m.equals(i.blockLimit))break;CKEDITOR.dtd.$removeEmpty[m.getName()]&&(m=m.clone(),d.moveChildren(m),d.append(m))}d.appendBogus();d.getParent()||n.insertNode(d);d.is("li")&&d.removeAttribute("value");!CKEDITOR.env.ie||!s||t&&e.getChildCount()||(n.moveToElementEditStart(t?e:d),n.select());n.moveToElementEditStart(s&&!t?l:d)}else l.is("li")&&(d=n.clone(),d.selectNodeContents(l),d=new CKEDITOR.dom.walker(d),d.evaluator=function(t){return!(A(t)||C(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.getName()in CKEDITOR.dtd.$inline&&!(t.getName()in CKEDITOR.dtd.$empty))},(m=d.next())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?i.createElement("br"):i.createText(" ")).insertBefore(m)),l&&n.moveToElementEditStart(l);n.select();n.scrollIntoView()}}},enterBr:function(t,e,n,o){if(n=n||h(t)){var i=n.document,r=n.checkEndOfBlock(),a=new CKEDITOR.dom.elementPath(t.getSelection().getStartElement()),s=a.block,l=s&&a.block.getName();o||"li"!=l?(!o&&r&&v.test(l)?(r=s.getDirection())?(i=i.createElement("div"),i.setAttribute("dir",r),i.insertAfter(s),n.setStart(i,0)):(i.createElement("br").insertAfter(s),CKEDITOR.env.gecko&&i.createText("").insertAfter(s),n.setStartAt(s.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(t="pre"==l&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?i.createText("\r"):i.createElement("br"),n.deleteContents(),n.insertNode(t),CKEDITOR.env.needsBrFiller?(i.createText("\ufeff").insertAfter(t),r&&(s||a.blockLimit).appendBogus(),t.getNext().$.nodeValue="",n.setStartAt(t.getNext(),CKEDITOR.POSITION_AFTER_START)):n.setStartAt(t,CKEDITOR.POSITION_AFTER_END)),n.collapse(!0),n.select(),n.scrollIntoView()):c(t,e,n,o)}}};var t=CKEDITOR.plugins.enterkey,E=t.enterBr,c=t.enterBlock,v=/^h[1-6]$/})();(function(){function c(t,o){var i={},r=[],a={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};t=t.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(t,e){var n=o?"&"+e+";":a[e];i[n]=o?a[e]:"&"+e+";";r.push(n);return""});if(!o&&t){t=t.split(",");var e=document.createElement("div"),n;e.innerHTML="&"+t.join(";&")+";";n=e.innerHTML;e=null;for(e=0;e<n.length;e++){var s=n.charAt(e);i[s]="&"+t[e]+";";r.push(s)}}i.regex=r.join(o?"|":"");return i}CKEDITOR.plugins.add("entities",{afterInit:function(t){function e(t){return s[t]}function n(t){return"force"!=o.entities_processNumerical&&r[t]?r[t]:"&#"+t.charCodeAt(0)+";"}var o=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var i=[];!1!==o.basicEntities&&i.push("nbsp,gt,lt,amp");o.entities&&(i.length&&i.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),o.entities_latin&&i.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),o.entities_greek&&i.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),o.entities_additional&&i.push(o.entities_additional));var r=c(i.join(",")),a=r.regex?"["+r.regex+"]":"a^";delete r.regex;o.entities&&o.entities_processNumerical&&(a="[^ -~]|"+a);var a=new RegExp(a,"g"),s=c("nbsp,gt,lt,amp,shy",!0),l=new RegExp(s.regex,"g");t.addRules({text:function(t){return t.replace(l,e).replace(a,n)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,n,o){t=t||"80%";n=n||"70%";"string"==typeof t&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10));"string"==typeof n&&1<n.length&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10));640>t&&(t=640);420>n&&(n=420);var i=parseInt((window.screen.height-n)/2,10),r=parseInt((window.screen.width-t)/2,10);o=(o||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+n+",top="+i+",left="+r;var a=window.open("",null,o,!0);if(!a)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(a.moveTo(r,i),a.resizeTo(t,n)),a.focus(),a.location.href=e}catch(t){window.open(e,null,o,!0)}return!0}});(function(){function i(t,e){var n=[];if(e)for(var o in e)n.push(o+"="+encodeURIComponent(e[o]));else return t;return t+(-1!=t.indexOf("?")?"&":"?")+n.join("&")}function l(t){t+="";return t.charAt(0).toUpperCase()+t.substr(1)}function c(){var t=this.getDialog(),e=t.getParentEditor();e._.filebrowserSe=this;var n=e.config["filebrowser"+l(t.getName())+"WindowWidth"]||e.config.filebrowserWindowWidth||"80%",t=e.config["filebrowser"+l(t.getName())+"WindowHeight"]||e.config.filebrowserWindowHeight||"70%",o=this.filebrowser.params||{};o.CKEditor=e.name;o.CKEditorFuncNum=e._.filebrowserFn;o.langCode||(o.langCode=e.langCode);o=i(this.filebrowser.url,o);e.popup(o,n,t,e.config.filebrowserWindowFeatures||e.config.fileBrowserWindowFeatures)}function d(){var t=this.getDialog();t.getParentEditor()._.filebrowserSe=this;return t.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&t.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function u(t,e,n){var o=n.params||{};o.CKEditor=t.name;o.CKEditorFuncNum=t._.filebrowserFn;o.langCode||(o.langCode=t.langCode);e.action=i(n.url,o);e.filebrowser=n}function m(t,e,n,o){if(o&&o.length)for(var i,r=o.length;r--;)if(i=o[r],"hbox"!=i.type&&"vbox"!=i.type&&"fieldset"!=i.type||m(t,e,n,i.children),i.filebrowser)if("string"==typeof i.filebrowser&&(i.filebrowser={action:"fileButton"==i.type?"QuickUpload":"Browse",target:i.filebrowser}),"Browse"==i.filebrowser.action){var a=i.filebrowser.url;void 0===a&&(a=t.config["filebrowser"+l(e)+"BrowseUrl"],void 0===a&&(a=t.config.filebrowserBrowseUrl));a&&(i.onClick=c,i.filebrowser.url=a,i.hidden=!1)}else if("QuickUpload"==i.filebrowser.action&&i["for"]&&(a=i.filebrowser.url,void 0===a&&(a=t.config["filebrowser"+l(e)+"UploadUrl"],void 0===a&&(a=t.config.filebrowserUploadUrl)),a)){var s=i.onClick;i.onClick=function(t){var e=t.sender;if(s&&!1===s.call(e,t))return!1;if(d.call(e,t)){t=e.getDialog().getContentElement(this["for"][0],this["for"][1]).getInputElement();if(e=new CKEDITOR.dom.element(t.$.form))(t=e.$.elements.ckCsrfToken)?t=new CKEDITOR.dom.element(t):(t=new CKEDITOR.dom.element("input"),t.setAttributes({name:"ckCsrfToken",type:"hidden"}),e.append(t)),t.setAttribute("value",CKEDITOR.tools.getCsrfToken());return!0}return!1};i.filebrowser.url=a;i.hidden=!1;u(t,n.getContents(i["for"][0]).get(i["for"][1]),i.filebrowser)}}function r(t,e,n){if(-1!==n.indexOf(";")){n=n.split(";");for(var o=0;o<n.length;o++)if(r(t,e,n[o]))return!0;return!1}return(t=t.getContents(e).get(n).filebrowser)&&t.url}function e(t,e){var n=this._.filebrowserSe.getDialog(),o=this._.filebrowserSe["for"],i=this._.filebrowserSe.filebrowser.onSelect;o&&n.getContentElement(o[0],o[1]).reset();if("function"!=typeof e||!1!==e.call(this._.filebrowserSe))if(!i||!1!==i.call(this._.filebrowserSe,t,e))if("string"==typeof e&&e&&alert(e),t&&(o=this._.filebrowserSe,n=o.getDialog(),o=o.filebrowser.target||null))if(o=o.split(":"),i=n.getContentElement(o[0],o[1]))i.setValue(t),n.selectPage(o[0])}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(t){t._.filebrowserFn=CKEDITOR.tools.addFunction(e,t);t.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(t){if(t.editor.plugins.filebrowser)for(var e=t.data.definition,n,o=0;o<e.contents.length;++o)if(n=e.contents[o])m(t.editor,t.data.name,e,n.elements),n.hidden&&n.filebrowser&&(n.hidden=!r(e,n.id,n.filebrowser))})})();CKEDITOR.plugins.add("find",{requires:"dialog",init:function(t){var e=t.addCommand("find",new CKEDITOR.dialogCommand("find"));e.canUndo=!1;e.readOnly=1;t.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;t.ui.addButton&&(t.ui.addButton("Find",{label:t.lang.find.find,command:"find",toolbar:"find,10"}),t.ui.addButton("Replace",{label:t.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js")}});CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};(function(){function i(t,e){var n=r.exec(t),o=r.exec(e);if(n){if(!n[2]&&"px"==o[2])return o[1];if("px"==n[2]&&!o[2])return o[1]+"px"}return e}var a=CKEDITOR.htmlParser.cssStyle,s=CKEDITOR.tools.cssLength,r=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,e={elements:{$:function(t){var e=t.attributes;if((e=(e=(e=e&&e["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(e)))&&e.children[0])&&t.attributes["data-cke-resizable"]){var n=new a(t).rules;t=e.attributes;var o=n.width,n=n.height;o&&(t.width=i(t.width,o));n&&(t.height=i(t.height,n))}return e}}};CKEDITOR.plugins.add("fakeobjects",{init:function(t){t.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(t){(t=(t=t.dataProcessor)&&t.htmlFilter)&&t.addRules(e,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(t,e,n,o){var i=this.lang.fakeobjects,i=i[n]||i.unknown;e={class:e,"data-cke-realelement":encodeURIComponent(t.getOuterHtml()),"data-cke-real-node-type":t.type,alt:i,title:i,align:t.getAttribute("align")||""};CKEDITOR.env.hc||(e.src=CKEDITOR.tools.transparentImageData);n&&(e["data-cke-real-element-type"]=n);o&&(e["data-cke-resizable"]=o,n=new a,o=t.getAttribute("width"),t=t.getAttribute("height"),o&&(n.rules.width=s(o)),t&&(n.rules.height=s(t)),n.populate(e));return this.document.createElement("img",{attributes:e})};CKEDITOR.editor.prototype.createFakeParserElement=function(t,e,n,o){var i=this.lang.fakeobjects,i=i[n]||i.unknown,r;r=new CKEDITOR.htmlParser.basicWriter;t.writeHtml(r);r=r.getHtml();e={class:e,"data-cke-realelement":encodeURIComponent(r),"data-cke-real-node-type":t.type,alt:i,title:i,align:t.attributes.align||""};CKEDITOR.env.hc||(e.src=CKEDITOR.tools.transparentImageData);n&&(e["data-cke-real-element-type"]=n);o&&(e["data-cke-resizable"]=o,o=t.attributes,t=new a,n=o.width,o=o.height,void 0!==n&&(t.rules.width=s(n)),void 0!==o&&(t.rules.height=s(o)),t.populate(e));return new CKEDITOR.htmlParser.element("img",e)};CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var e=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var n=t.getStyle("width");t=t.getStyle("height");n&&e.setAttribute("width",i(e.getAttribute("width"),n));t&&e.setAttribute("height",i(e.getAttribute("height"),t))}return e}})();(function(){function o(t){t=t.attributes;return"application/x-shockwave-flash"==t.type||e.test(t.src||"")}function i(t,e){return t.createFakeParserElement(e,"cke_flash","flash",!0)}var e=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(t){var e="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(t,"flash","properties")&&(e+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(t,"flash","advanced")&&(e+=";object[id]{*}; embed[bgcolor]{*}(*)");t.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:e,requiredContent:"embed"}));t.ui.addButton&&t.ui.addButton("Flash",{label:t.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");t.addMenuItems&&t.addMenuItems({flash:{label:t.lang.flash.properties,command:"flash",group:"flash"}});t.on("doubleclick",function(t){var e=t.data.element;e.is("img")&&"flash"==e.data("cke-real-element-type")&&(t.data.dialog="flash")});t.contextMenu&&t.contextMenu.addListener(function(t){if(t&&t.is("img")&&!t.isReadOnly()&&"flash"==t.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF}})},afterInit:function(n){var t=n.dataProcessor;(t=t&&t.dataFilter)&&t.addRules({elements:{"cke:object":function(t){var e=t.attributes;if(!(e.classid&&String(e.classid).toLowerCase()||o(t))){for(e=0;e<t.children.length;e++)if("cke:embed"==t.children[e].name){if(!o(t.children[e]))break;return i(n,t)}return null}return i(n,t)},"cke:embed":function(t){return o(t)?i(n,t):null}}},5)}})})();CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});(function(){function e(h){var g=h.config,t=h.fire("uiSpace",{space:"top",html:""}).html,C=function(){function n(t,e,n){A.setStyle(e,v(n));A.setStyle("position",t)}function o(t){var e=r.getDocumentPosition();switch(t){case"top":n("absolute","top",e.y-c-m);break;case"pin":n("fixed","top",f);break;case"bottom":n("absolute","top",e.y+(s.height||s.bottom-s.top)+m)}i=t}var i,r,a,s,l,c,d,u=g.floatSpaceDockedOffsetX||0,m=g.floatSpaceDockedOffsetY||0,p=g.floatSpacePinnedOffsetX||0,f=g.floatSpacePinnedOffsetY||0;return function(t){if(r=h.editable()){var e=t&&"focus"==t.name;e&&A.show();h.fire("floatingSpaceLayout",{show:e});A.removeStyle("left");A.removeStyle("right");a=A.getClientRect();s=r.getClientRect();l=E.getViewPaneSize();c=a.height;d="pageXOffset"in E.$?E.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;i?(c+m<=s.top?o("top"):c+m>l.height-s.bottom?o("pin"):o("bottom"),t=l.width/2,t=g.floatSpacePreferRight?"right":0<s.left&&s.right<l.width&&s.width>a.width?"rtl"==g.contentsLangDirection?"right":"left":t-s.left>s.right-t?"left":"right",a.width>l.width?(t="left",e=0):(e="left"==t?0<s.left?s.left:0:s.right<l.width?l.width-s.right:0,e+a.width>l.width&&(t="left"==t?"right":"left",e=0)),A.setStyle(t,v(("pin"==i?p:u)+e+("pin"==i?0:"left"==t?d:-d)))):(i="pin",o("pin"),C(t))}}}();if(t){var e=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(h.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(h.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),A=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(e.output({content:t,id:h.id,langDir:h.lang.dir,langCode:h.langCode,name:h.name,style:"display:none;z-index:"+(g.baseFloatZIndex-1),topId:h.ui.spaceId("top"),voiceLabel:h.title}))),n=CKEDITOR.tools.eventsBuffer(500,C),o=CKEDITOR.tools.eventsBuffer(100,C);A.unselectable();A.on("mousedown",function(t){t=t.data;t.getTarget().hasAscendant("a",1)||t.preventDefault()});h.on("focus",function(t){C(t);h.on("change",n.input);E.on("scroll",o.input);E.on("resize",o.input)});h.on("blur",function(){A.hide();h.removeListener("change",n.input);E.removeListener("scroll",o.input);E.removeListener("resize",o.input)});h.on("destroy",function(){E.removeListener("scroll",o.input);E.removeListener("resize",o.input);A.clearCustomData();A.remove()});h.focusManager.hasFocus&&A.show();h.focusManager.add(A,1)}}var E=CKEDITOR.document.getWindow(),v=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(t){t.on("loaded",function(){e(this)},null,null,20)}})})();CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),r=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),n=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),a=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(t,e){return this.addBlock(t,new CKEDITOR.ui.listBlock(this.getHolderElement(),e))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(t,e){e=e||{};var n=e.attributes||(e.attributes={});(this.multiSelect=!!e.multiSelect)&&(n["aria-multiselectable"]=!0);!n.role&&(n.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",n.role);n=this.keys;n[40]="next";n[9]="next";n[38]="prev";n[CKEDITOR.SHIFT+9]="prev";n[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(n[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(t);delete this._.started}},getClick:function(){this._.click||(this._.click=CKEDITOR.tools.addFunction(function(t){var e=this.toggle(t);if(this.onClick)this.onClick(t,e)},this));return this._.click}},proto:{add:function(t,e,n){var o=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[t]=o;var i;i=CKEDITOR.tools.htmlEncodeAttr(t).replace(a,"\\'");t={id:o,val:i,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(n||t),text:e||t};this._.pendingList.push(r.output(t))},startGroup:function(t){this._.close();var e=CKEDITOR.tools.getNextId();this._.groups[t]=e;this._.pendingHtml.push(n.output({id:e,label:t}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(t){var e=this.isMarked(t);e?this.unmark(t):this.mark(t);return!e},hideGroup:function(t){var e=(t=this.element.getDocument().getById(this._.groups[t]))&&t.getNext();t&&(t.setStyle("display","none"),e&&"ul"==e.getName()&&e.setStyle("display","none"))},hideItem:function(t){this.element.getDocument().getById(this._.items[t]).setStyle("display","none")},showAll:function(){var t=this._.items,e=this._.groups,n=this.element.getDocument(),o;for(o in t)n.getById(t[o]).setStyle("display","");for(var i in e)t=n.getById(e[i]),o=t.getNext(),t.setStyle("display",""),o&&"ul"==o.getName()&&o.setStyle("display","")},mark:function(t){this.multiSelect||this.unmarkAll();t=this._.items[t];var e=this.element.getDocument().getById(t);e.addClass("cke_selected");this.element.getDocument().getById(t+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(e)},unmark:function(t){var e=this.element.getDocument();t=this._.items[t];var n=e.getById(t);n.removeClass("cke_selected");e.getById(t+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(n)},unmarkAll:function(){var t=this._.items,e=this.element.getDocument(),n;for(n in t){var o=t[n];e.getById(o).removeClass("cke_selected");e.getById(o+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(t){return this.element.getDocument().getById(this._.items[t]).hasClass("cke_selected")},focus:function(t){this._.focusIndex=-1;var e=this.element.getElementsByTag("a"),n,o=-1;if(t)for(n=this.element.getDocument().getById(this._.items[t]).getFirst();t=e.getItem(++o);){if(t.equals(n)){this._.focusIndex=o;break}}else this.element.focus();n&&setTimeout(function(){n.focus()},0)}}})}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});(function(){var t='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var t=t+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),u=CKEDITOR.addTemplate("combo",t);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(t){CKEDITOR.tools.extend(this,t,{canGroup:!1,title:t.label,modes:{wysiwyg:1},editorFocus:1});t=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=t.parent&&t.parent.getDocument()||CKEDITOR.document;t.className="cke_combopanel";t.block={multiSelect:t.multiSelect,attributes:t.attributes};t.toolbarRelated=!0;this._={panelDefinition:t,items:{}}},proto:{renderHtml:function(t){var e=[];this.render(t,e);return e.join("")},render:function(o,t){function e(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[o.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;o.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED);this.setState(t);this.setValue("");t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var n=CKEDITOR.env,i="cke_"+this.id,r=CKEDITOR.tools.addFunction(function(t){d&&(o.unlockSelection(1),d=0);s.execute(t)},this),a=this,s={id:i,combo:this,focus:function(){CKEDITOR.document.getById(i).getChild(1).focus()},execute:function(t){var e=a._;if(e.state!=CKEDITOR.TRISTATE_DISABLED)if(a.createPanel(o),e.on)e.panel.hide();else{a.commit();var n=a.getValue();n?e.list.mark(n):e.list.unmarkAll();e.panel.showBlock(a.id,new CKEDITOR.dom.element(t),4)}},clickFn:r};o.on("activeFilterChange",e,this);o.on("mode",e,this);o.on("selectionChange",e,this);!this.readOnly&&o.on("readOnly",e,this);var l=CKEDITOR.tools.addFunction(function(t,e){t=new CKEDITOR.dom.event(t);var n=t.getKeystroke();if(40==n)o.once("panelShow",function(t){t.data._.panel._.currentBlock.onKeyDown(40)});switch(n){case 13:case 32:case 40:CKEDITOR.tools.callFunction(r,e);break;default:s.onkey(s,n)}t.preventDefault()}),c=CKEDITOR.tools.addFunction(function(){s.onfocus&&s.onfocus()}),d=0;s.keyDownFn=l;n={id:i,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:n.gecko&&!n.hc?"":(this.title||"").replace("'",""),keydownFn:l,focusFn:c,clickFn:r};u.output(n,t);if(this.onRender)this.onRender();return s},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,n=this._.panelDefinition.block,o=t.parent||CKEDITOR.document.getBody(),i="cke_combopanel__"+this.name,r=new CKEDITOR.ui.floatPanel(e,o,t),a=r.addListBlock(this.id,n),s=this;r.onShow=function(){this.element.addClass(i);s.setState(CKEDITOR.TRISTATE_ON);s._.on=1;s.editorFocus&&!e.focusManager.hasFocus&&e.focus();if(s.onOpen)s.onOpen();e.once("panelShow",function(){a.focus(!a.multiSelect&&s.getValue())})};r.onHide=function(t){this.element.removeClass(i);s.setState(s.modes&&s.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);s._.on=0;if(!t&&s.onClose)s.onClose()};r.onEscape=function(){r.hide(1)};a.onClick=function(t,e){s.onClick&&s.onClick.call(s,t,e);r.hide()};this._.panel=r;this._.list=a;r.getBlock(this.id).onHide=function(){s._.on=0;s.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(t,e){this._.value=t;var n=this.document.getById("cke_"+this.id+"_text");n&&(t||e?n.removeClass("cke_combo_inlinelabel"):(e=this.label,n.addClass("cke_combo_inlinelabel")),n.setText("undefined"!=typeof e?e:t))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(t){this._.list.mark(t)},hideItem:function(t){this._.list.hideItem(t)},hideGroup:function(t){this._.list.hideGroup(t)},showAll:function(){this._.list.showAll()},add:function(t,e,n){this._.items[t]=n||t;this._.list.add(t,e,n)},startGroup:function(t){this._.list.startGroup(t)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(t){if(this._.state!=t){var e=this.document.getById("cke_"+this.id);e.setState(t,"cke_combo");t==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled");this._.state=t}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(t){return new CKEDITOR.ui.richCombo(t)}}}});CKEDITOR.ui.prototype.addRichCombo=function(t,e){this.add(t,CKEDITOR.UI_RICHCOMBO,e)}})();(function(){function n(c,t,e,n,o,r,i,a){var s=c.config,l=new CKEDITOR.style(i),d=o.split(";");o=[];for(var u={},m=0;m<d.length;m++){var p=d[m];if(p){var p=p.split("/"),f={},h=d[m]=p[0];f[e]=o[m]=p[1]||h;u[h]=new CKEDITOR.style(i,f);u[h]._.definition.name=h}else d.splice(m--,1)}c.ui.addRichCombo(t,{label:n.label,title:n.panelTitle,toolbar:"styles,"+a,allowedContent:l,requiredContent:l,contentTransformations:[[{element:"font",check:"span",left:function(t){return!!t.attributes.size||!!t.attributes.align||!!t.attributes.face},right:function(t){var e=" x-small small medium large x-large xx-large 48px".split(" ");t.name="span";t.attributes.size&&(t.styles["font-size"]=e[t.attributes.size],delete t.attributes.size);t.attributes.align&&(t.styles["text-align"]=t.attributes.align,delete t.attributes.align);t.attributes.face&&(t.styles["font-family"]=t.attributes.face,delete t.attributes.face)}}]],panel:{css:[CKEDITOR.skin.getPath("editor")].concat(s.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){this.startGroup(n.panelTitle);for(var t=0;t<d.length;t++){var e=d[t];this.add(e,u[e].buildPreview(),e)}},onClick:function(t){c.focus();c.fire("saveSnapshot");var e=this.getValue(),n=u[t];if(e&&t!=e){var o=u[e],i=c.getSelection().getRanges()[0];if(i.collapsed){var r=c.elementPath(),a=r.contains(function(t){return o.checkElementRemovable(t)});if(a){var s=i.checkBoundaryOfElement(a,CKEDITOR.START),l=i.checkBoundaryOfElement(a,CKEDITOR.END);if(s&&l){for(s=i.createBookmark();r=a.getFirst();)r.insertBefore(a);a.remove();i.moveToBookmark(s)}else s||l?i.moveToPosition(a,s?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_END):(i.splitElement(a),i.moveToPosition(a,CKEDITOR.POSITION_AFTER_END)),g(i,r.elements.slice(),a);c.getSelection().selectRanges([i])}}else c.removeStyle(o)}c[e==t?"removeStyle":"applyStyle"](n);c.fire("saveSnapshot")},onRender:function(){c.on("selectionChange",function(t){var e=this.getValue();t=t.data.path.elements;for(var n=0,o;n<t.length;n++){o=t[n];for(var i in u)if(u[i].checkElementMatch(o,!0,c)){i!=e&&this.setValue(i);return}}this.setValue("",r)},this)},refresh:function(){c.activeFilter.check(l)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function g(t,e,n){var o=e.pop();if(o){if(n)return g(t,e,o.equals(n)?null:n);n=o.clone();t.insertNode(n);t.moveToPosition(n,CKEDITOR.POSITION_AFTER_START);g(t,e)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(t){var e=t.config;n(t,"Font","family",t.lang.font,e.font_names,e.font_defaultLabel,e.font_style,30);n(t,"FontSize","size",t.lang.font.fontSize,e.fontSize_sizes,e.fontSize_defaultLabel,e.fontSize_style,40)}})})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(i){var r=i.lang,a=0,o={email:1,password:1,search:1,tel:1,text:1,url:1},s={checkbox:"input[type,name,checked,required]",radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},l={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},t=function(t,e,n){var o={allowedContent:s[e],requiredContent:l[e]};"form"==e&&(o.context="form");i.addCommand(e,new CKEDITOR.dialogCommand(e,o));i.ui.addButton&&i.ui.addButton(t,{label:r.common[t.charAt(0).toLowerCase()+t.slice(1)],command:e,toolbar:"forms,"+(a+=10)});CKEDITOR.dialog.add(e,n)},e=this.path+"dialogs/";!i.blockless&&t("Form","form",e+"form.js");t("Checkbox","checkbox",e+"checkbox.js");t("Radio","radio",e+"radio.js");t("TextField","textfield",e+"textfield.js");t("Textarea","textarea",e+"textarea.js");t("Select","select",e+"select.js");t("Button","button",e+"button.js");var c=i.plugins.image;c&&!i.plugins.image2&&t("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");t("HiddenField","hiddenfield",e+"hiddenfield.js");i.addMenuItems&&(t={checkbox:{label:r.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:r.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:r.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:r.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:r.forms.button.title,command:"button",group:"button"},select:{label:r.forms.select.title,command:"select",group:"select"},textarea:{label:r.forms.textarea.title,command:"textarea",group:"textarea"}},c&&(t.imagebutton={label:r.image.titleButton,command:"imagebutton",group:"imagebutton"}),!i.blockless&&(t.form={label:r.forms.form.menu,command:"form",group:"form"}),i.addMenuItems(t));i.contextMenu&&(!i.blockless&&i.contextMenu.addListener(function(t,e,n){if((t=n.contains("form",1))&&!t.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),i.contextMenu.addListener(function(t){if(t&&!t.isReadOnly()){var e=t.getName();if("select"==e)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==e)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==e){var n=t.getAttribute("type")||"text";switch(n){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return c?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(o[n])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==e&&"hiddenfield"==t.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}));i.on("doubleclick",function(t){var e=t.data.element;if(!i.blockless&&e.is("form"))t.data.dialog="form";else if(e.is("select"))t.data.dialog="select";else if(e.is("textarea"))t.data.dialog="textarea";else if(e.is("img")&&"hiddenfield"==e.data("cke-real-element-type"))t.data.dialog="hiddenfield";else if(e.is("input")){e=e.getAttribute("type")||"text";switch(e){case"button":case"submit":case"reset":t.data.dialog="button";break;case"checkbox":t.data.dialog="checkbox";break;case"radio":t.data.dialog="radio";break;case"image":t.data.dialog="imagebutton"}o[e]&&(t.data.dialog="textfield")}})},afterInit:function(e){var t=e.dataProcessor,n=t&&t.htmlFilter,t=t&&t.dataFilter;CKEDITOR.env.ie&&n&&n.addRules({elements:{input:function(t){t=t.attributes;var e=t.type;e||(t.type="text");"checkbox"!=e&&"radio"!=e||"on"!=t.value||delete t.value}}},{applyToAll:!0});t&&t.addRules({elements:{input:function(t){if("hidden"==t.attributes.type)return e.createFakeParserElement(t,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}});CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(o){if(!o.blockless){for(var t=o.config,n=o.lang.format,e=t.format_tags.split(";"),i={},r=0,a=[],s=0;s<e.length;s++){var l=e[s],c=new CKEDITOR.style(t["format_"+l]);if(!o.filter.customConfig||o.filter.check(c))r++,i[l]=c,i[l]._.enterMode=o.config.enterMode,a.push(c)}0!==r&&o.ui.addRichCombo("Format",{label:n.label,title:n.panelTitle,toolbar:"styles,20",allowedContent:a,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){this.startGroup(n.panelTitle);for(var t in i){var e=n["tag_"+t];this.add(t,i[t].buildPreview(e),e)}},onClick:function(t){o.focus();o.fire("saveSnapshot");t=i[t];var e=o.elementPath();o[t.checkActive(e,o)?"removeStyle":"applyStyle"](t);setTimeout(function(){o.fire("saveSnapshot")},0)},onRender:function(){o.on("selectionChange",function(t){var e=this.getValue();t=t.data.path;this.refresh();for(var n in i)if(i[n].checkActive(t,o)){n!=e&&this.setValue(n,o.lang.format["tag_"+n]);return}this.setValue("")},this)},onOpen:function(){this.showAll();for(var t in i)o.activeFilter.check(i[t])||this.hideItem(t)},refresh:function(){var t=o.elementPath();if(t){if(t.isContextFor("p"))for(var e in i)if(o.activeFilter.check(i[e]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};(function(){var e={canUndo:!1,exec:function(t){var e=t.document.createElement("hr");t.insertElement(e)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})})();CKEDITOR.plugins.add("htmlwriter",{init:function(t){var e=new CKEDITOR.htmlWriter;e.forceSimpleAmpersand=t.config.forceSimpleAmpersand;e.indentationChars=t.config.dataIndentationChars||"\t";t.dataProcessor.writer=e}});CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" />";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var t=CKEDITOR.dtd,e;for(e in CKEDITOR.tools.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))this.setRules(e,{indent:!t[e]["#"],breakBeforeOpen:1,breakBeforeClose:!t[e]["#"],breakAfterClose:1,needsSpace:e in t.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(t){var e=this._.rules[t];this._.afterCloser&&e&&e.needsSpace&&this._.needsSpace&&this._.output.push("\n");this._.indent?this.indentation():e&&e.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("<",t);this._.afterCloser=0},openTagClose:function(t,e){var n=this._.rules[t];e?(this._.output.push(this.selfClosingEnd),n&&n.breakAfterClose&&(this._.needsSpace=n.needsSpace)):(this._.output.push(">"),n&&n.indent&&(this._.indentation+=this.indentationChars));n&&n.breakAfterOpen&&this.lineBreak();"pre"==t&&(this._.inPre=1)},attribute:function(t,e){"string"==typeof e&&(this.forceSimpleAmpersand&&(e=e.replace(/&amp;/g,"&")),e=CKEDITOR.tools.htmlEncodeAttr(e));this._.output.push(" ",t,'="',e,'"')},closeTag:function(t){var e=this._.rules[t];e&&e.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():e&&e.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("</",t,">");"pre"==t&&(this._.inPre=0);e&&e.breakAfterClose&&(this.lineBreak(),this._.needsSpace=e.needsSpace);this._.afterCloser=1},text:function(t){this._.indent&&(this.indentation(),!this._.inPre&&(t=CKEDITOR.tools.ltrim(t)));this._.output.push(t)},comment:function(t){this._.indent&&this.indentation();this._.output.push("\x3c!--",t,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0;this._.needsSpace=0},setRules:function(t,e){var n=this._.rules[t];n?CKEDITOR.tools.extend(n,e,!0):this._.rules[t]=e}}});(function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(t){var e=t.lang.iframe,n="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";t.plugins.dialogadvtab&&(n+=";iframe"+t.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");t.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:n,requiredContent:"iframe"}));t.ui.addButton&&t.ui.addButton("Iframe",{label:e.toolbar,command:"iframe",toolbar:"insert,80"});t.on("doubleclick",function(t){var e=t.data.element;e.is("img")&&"iframe"==e.data("cke-real-element-type")&&(t.data.dialog="iframe")});t.addMenuItems&&t.addMenuItems({iframe:{label:e.title,command:"iframe",group:"image"}});t.contextMenu&&t.contextMenu.addListener(function(t){if(t&&t.is("img")&&"iframe"==t.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(e){var t=e.dataProcessor;(t=t&&t.dataFilter)&&t.addRules({elements:{iframe:function(t){return e.createFakeParserElement(t,"cke_iframe","iframe",!0)}}})}})})();(function(){function e(t){function e(n){var o=!1;a.attachListener(a,"keydown",function(){var t=i.getBody().getElementsByTag(n);if(!o){for(var e=0;e<t.count();e++)t.getItem(e).setCustomData("retain",!0);o=!0}},null,null,1);a.attachListener(a,"keyup",function(){var t=i.getElementsByTag(n);o&&(1!=t.count()||t.getItem(0).getCustomData("retain")||t.getItem(0).hasAttribute("data-cke-temp")||t.getItem(0).remove(1),o=!1)})}var o=this.editor,i=t.document,n=i.body,r=i.getElementById("cke_actscrpt");r&&r.parentNode.removeChild(r);(r=i.getElementById("cke_shimscrpt"))&&r.parentNode.removeChild(r);(r=i.getElementById("cke_basetagscrpt"))&&r.parentNode.removeChild(r);n.contentEditable=!0;CKEDITOR.env.ie&&(n.hideFocus=!0,n.disabled=!0,n.removeAttribute("disabled"));delete this._.isLoadingData;this.$=n;i=new CKEDITOR.dom.document(i);this.setup();this.fixInitialSelection();var a=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&i.getDocumentElement().addClass(i.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&o.enterMode!=CKEDITOR.ENTER_P?e("p"):CKEDITOR.env.edge&&o.enterMode!=CKEDITOR.ENTER_DIV&&e("div");if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)i.getDocumentElement().on("mousedown",function(t){t.data.getTarget().is("html")&&setTimeout(function(){o.editable().focus()})});s(o);try{o.document.$.execCommand("2D-position",!1,!0)}catch(t){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==o.document.$.compatMode)&&this.attachListener(this,"keydown",function(t){var e=t.data.getKeystroke();if(33==e||34==e)if(CKEDITOR.env.ie)setTimeout(function(){o.getSelection().scrollIntoView()},0);else if(o.window.$.innerHeight>this.$.offsetHeight){var n=o.createRange();n[33==e?"moveToElementEditStart":"moveToElementEditEnd"](this);n.select();t.data.preventDefault()}});CKEDITOR.env.ie&&this.attachListener(i,"blur",function(){try{i.$.selection.empty()}catch(t){}});CKEDITOR.env.iOS&&this.attachListener(i,"touchend",function(){t.focus()});n=o.document.getElementsByTag("title").getItem(0);n.data("cke-title",n.getText());CKEDITOR.env.ie&&(o.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready");o.fire("contentDom");this._.isPendingFocus&&(o.focus(),this._.isPendingFocus=!1);setTimeout(function(){o.fire("dataReady")},0)},0,this)}function s(n){function t(){var e;n.editable().attachListener(n,"selectionChange",function(){var t=n.getSelection().getSelectedElement();t&&(e&&(e.detachEvent("onresizestart",o),e=null),t.$.attachEvent("onresizestart",o),e=t.$)})}function o(t){t.returnValue=!1}if(CKEDITOR.env.gecko)try{var e=n.document.$;e.execCommand("enableObjectResizing",!1,!n.config.disableObjectResizing);e.execCommand("enableInlineTableEditing",!1,!n.config.disableNativeTableHandles)}catch(t){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&n.config.disableObjectResizing&&t(n)}function c(){var t=[];if(8<=CKEDITOR.document.$.documentMode){t.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var e=[],n;for(n in CKEDITOR.dtd.$removeEmpty)e.push("html.CSS1Compat "+n+"[contenteditable=false]");t.push(e.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(t.push("html{height:100% !important}"),t.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));t.push("html{cursor:text;*cursor:auto}");t.push("img,input,textarea{cursor:default}");return t.join("\n")}var d;CKEDITOR.plugins.add("wysiwygarea",{init:function(l){l.config.fullPage&&l.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});l.addMode("wysiwyg",function(e){function t(t){t&&t.removeListener();l.editable(new d(l,o.$.contentWindow.document.body));l.setData(l.getData(1),e)}var n="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",n=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(n)+"}())":"",o=CKEDITOR.dom.element.createFromHtml('<iframe src="'+n+'" frameBorder="0"></iframe>');o.setStyles({width:"100%",height:"100%"});o.addClass("cke_wysiwyg_frame").addClass("cke_reset");n=l.ui.space("contents");n.append(o);var i=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(i)o.on("load",t);var r=l.title,a=l.fire("ariaEditorHelpLabel",{}).label;r&&(CKEDITOR.env.ie&&a&&(r+=", "+a),o.setAttribute("title",r));if(a){var r=CKEDITOR.tools.getNextId(),s=CKEDITOR.dom.element.createFromHtml('<span id="'+r+'" class="cke_voice_label">'+a+"</span>");n.append(s,1);o.setAttribute("aria-describedby",r)}l.on("beforeModeUnload",function(t){t.removeListener();s&&s.remove()});o.setAttributes({tabIndex:l.tabIndex,allowTransparency:"true"});!i&&t();l.fire("ariaWidget",o)})}});CKEDITOR.editor.prototype.addContentsCss=function(t){var e=this.config,n=e.contentsCss;CKEDITOR.tools.isArray(n)||(e.contentsCss=n?[n]:[]);e.contentsCss.push(t)};d=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(t){CKEDITOR.tools.setTimeout(e,0,this,t)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,t){var n=this.editor;if(t)this.setHtml(e),this.fixInitialSelection(),n.fire("dataReady");else{this._.isLoadingData=!0;n._.dataStore={id:1};var o=n.config,i=o.fullPage,r=o.docType,a=CKEDITOR.tools.buildStyleHtml(c()).replace(/<style>/,'<style data-cke-temp="1">');i||(a+=CKEDITOR.tools.buildStyleHtml(n.config.contentsCss));var s=o.baseHref?'<base href="'+o.baseHref+'" data-cke-temp="1" />':"";i&&(e=e.replace(/<!DOCTYPE[^>]*>/i,function(t){n.docType=r=t;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(t){n.xmlDeclaration=t;return""}));e=n.dataProcessor.toHtml(e);i?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),s&&(e=e.replace(/<head[^>]*?>/,"$&"+s)),e=e.replace(/<\/head\s*>/,a+"$&"),e=r+e):e=o.docType+'<html dir="'+o.contentsLangDirection+'" lang="'+(o.contentsLanguage||n.langCode)+'"><head><title>'+this._.docTitle+"</title>"+s+a+"</head><body"+(o.bodyId?' id="'+o.bodyId+'"':"")+(o.bodyClass?' class="'+o.bodyClass+'"':"")+">"+e+"</body></html>";CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(e=e.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e")));o='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(o+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>');s&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(o+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>');e=e.replace(/(?=\s*<\/(:?head)>)/,o);this.clearCustomData();this.clearListeners();n.fire("contentDomUnload");var l=this.getDocument();try{l.write(e)}catch(t){setTimeout(function(){l.write(e)},0)}}},getData:function(t){if(t)return this.getHtml();t=this.editor;var e=t.config,n=e.fullPage,o=n&&t.docType,i=n&&t.xmlDeclaration,r=this.getDocument(),n=n?r.getDocumentElement().getOuterHtml():r.getBody().getHtml();CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/<br>(?=\s*(:?$|<\/body>))/,""));n=t.dataProcessor.toDataFormat(n);i&&(n=i+"\n"+n);o&&(n=o+"\n"+n);return n},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:d.baseProto.focus.call(this)},detach:function(){var t=this.editor,e=t.document,n;try{n=t.window.getFrame()}catch(t){}d.baseProto.detach.call(this);this.clearCustomData();e.getDocumentElement().clearCustomData();CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);n&&n.getParent()?(n.clearCustomData(),(t=n.removeCustomData("onResize"))&&t.removeListener(),n.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;(function(){function r(t,e){e||(e=t.getSelection().getSelectedElement());if(e&&e.is("img")&&!e.data("cke-realelement")&&!e.isReadOnly())return e}function a(t){var e=t.getStyle("float");if("inherit"==e||"none"==e)e=0;e||(e=t.getAttribute("align"));return e}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(e){if(!e.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var t="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(e,"image","advanced")&&(t="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");e.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:t,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));e.ui.addButton&&e.ui.addButton("Image",{label:e.lang.common.image,command:"image",toolbar:"insert,10"});e.on("doubleclick",function(t){var e=t.data.element;!e.is("img")||e.data("cke-realelement")||e.isReadOnly()||(t.data.dialog="image")});e.addMenuItems&&e.addMenuItems({image:{label:e.lang.image.menu,command:"image",group:"image"}});e.contextMenu&&e.contextMenu.addListener(function(t){if(r(e,t))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(i){function t(o){var t=i.getCommand("justify"+o);if(t){if("left"==o||"right"==o)t.on("exec",function(t){var e=r(i),n;e&&(n=a(e),n==o?(e.removeStyle("float"),o==a(e)&&e.removeAttribute("align")):e.setStyle("float",o),t.cancel())});t.on("refresh",function(t){var e=r(i);e&&(e=a(e),this.setState(e==o?CKEDITOR.TRISTATE_ON:"right"==o||"left"==o?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),t.cancel())})}}i.plugins.image2||(t("left"),t("right"),t("center"),t("block"))}})})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function e(e,t){var n,o;t.on("refresh",function(t){var e=[i],n;for(n in t.data.states)e.push(t.data.states[n]);this.setState(CKEDITOR.tools.search(e,r)?r:i)},t,null,100);t.on("exec",function(t){n=e.getSelection();o=n.createBookmarks(1);t.data||(t.data={});t.data.done=!1},t,null,0);t.on("exec",function(){e.forceNextSelectionCheck();n.selectBookmarks(o)},t,null,100)}var i=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(l){var t=CKEDITOR.plugins.indent.genericDefinition;e(l,l.addCommand("indent",new t(!0)));e(l,l.addCommand("outdent",new t));l.ui.addButton&&(l.ui.addButton("Indent",{label:l.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),l.ui.addButton("Outdent",{label:l.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));l.on("dirChanged",function(t){var e=l.createRange(),n=t.data.node;e.setStartBefore(n);e.setEndAfter(n);for(var o=new CKEDITOR.dom.walker(e),i;i=o.next();)if(i.type==CKEDITOR.NODE_ELEMENT)if(!i.equals(n)&&i.getDirection())e.setStartAfter(i),o=new CKEDITOR.dom.walker(e);else{var r=l.config.indentClasses;if(r)for(var a="ltr"==t.data.dir?["_rtl",""]:["","_rtl"],s=0;s<r.length;s++)i.hasClass(r[s]+a[0])&&(i.removeClass(r[s]+a[0]),i.addClass(r[s]+a[1]));r=i.getStyle("margin-right");a=i.getStyle("margin-left");r?i.setStyle("margin-left",r):i.removeStyle("margin-left");a?i.setStyle("margin-right",a):i.removeStyle("margin-right")}})}});CKEDITOR.plugins.indent={genericDefinition:function(t){this.isIndent=!!t;this.startDisabled=!this.isIndent},specificDefinition:function(t,e,n){this.name=e;this.editor=t;this.jobs={};this.enterBr=t.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!n;this.relatedGlobal=n?"indent":"outdent";this.indentKey=n?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(t,e){t.on("pluginsLoaded",function(){for(var t in e)(function(e,n){var t=e.getCommand(n.relatedGlobal),o;for(o in n.jobs)t.on("exec",function(t){t.data.done||(e.fire("lockSnapshot"),n.execJob(e,o)&&(t.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(n.database))},this,null,o),t.on("refresh",function(t){t.data.states||(t.data.states={});t.data.states[n.name+"@"+o]=n.refreshJob(e,o,t.data.path)},this,null,o);e.addFeature(n)})(this,e[t])})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(t,e){var n=this.jobs[e];if(n.state!=i)return n.exec.call(this,t)},refreshJob:function(t,e,n){e=this.jobs[e];t.activeFilter.checkFeature(this)?e.state=e.refresh.call(this,t,n):e.state=i;return e.state},getContext:function(t){return t.contains(this.context)}}})();(function(){function o(t,e,n){if(!t.getCustomData("indent_processed")){var o=this.editor,i=this.isIndent;if(e){o=t.$.className.match(this.classNameRegex);n=0;o&&(o=o[1],n=CKEDITOR.tools.indexOf(e,o)+1);if(0>(n+=i?1:-1))return;n=Math.min(n,e.length);n=Math.max(n,0);t.$.className=CKEDITOR.tools.ltrim(t.$.className.replace(this.classNameRegex,""));0<n&&t.addClass(e[n-1])}else{e=a(t,n);n=parseInt(t.getStyle(e),10);var r=o.config.indentOffset||40;isNaN(n)&&(n=0);n+=(i?1:-1)*r;if(0>n)return;n=Math.max(n,0);n=Math.ceil(n/r)*r;t.setStyle(e,n?n+(o.config.indentUnit||"px"):"");""===t.getAttribute("style")&&t.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,t,"indent_processed",1)}}function a(t,e){return"ltr"==(e||t.getComputedStyle("direction"))?"margin-left":"margin-right"}var s=CKEDITOR.dtd.$listItem,i=CKEDITOR.dtd.$list,l=CKEDITOR.TRISTATE_DISABLED,c=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(t){function e(){n.specificDefinition.apply(this,arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:r?null:"margin-left,margin-right",classes:r||null}};this.contentTransformations=[["div: splitMarginShorthand"],["h1: splitMarginShorthand"],["h2: splitMarginShorthand"],["h3: splitMarginShorthand"],["h4: splitMarginShorthand"],["h5: splitMarginShorthand"],["h6: splitMarginShorthand"],["ol: splitMarginShorthand"],["p: splitMarginShorthand"],["pre: splitMarginShorthand"],["ul: splitMarginShorthand"]];this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(r?"("+r.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function(t,e){var n=e.block||e.blockLimit;if(!n.is(s))var o=n.getAscendant(s),n=o&&e.contains(o)||n;n.is(s)&&(n=n.getParent());if(this.enterBr||this.getContext(e)){if(r){var o=r,n=n.$.className.match(this.classNameRegex),i=this.isIndent,o=n?i?n[1]!=o.slice(-1):!0:i;return o?c:l}return this.isIndent?c:n?CKEDITOR[0>=(parseInt(n.getStyle(a(n)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:l}return l},exec:function(t){var e=t.getSelection(),e=e&&e.getRanges()[0],n;if(n=t.elementPath().contains(i))o.call(this,n,r);else for(e=e.createIterator(),t=t.config.enterMode,e.enforceRealBlocks=!0,e.enlargeBr=t!=CKEDITOR.ENTER_BR;n=e.getNextParagraph(t==CKEDITOR.ENTER_P?"p":"div");)n.isReadOnly()||o.call(this,n,r);return!0}}}}var n=CKEDITOR.plugins.indent,r=t.config.indentClasses;n.registerCommands(t,{indentblock:new e(t,"indentblock",!0),outdentblock:new e(t,"outdentblock")});CKEDITOR.tools.extend(e.prototype,n.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:r?new RegExp("(?:^|\\s+)("+r.join("|")+")(?=$|\\s)"):null})}})})();(function(){function i(d){function t(t){for(var e=f.startContainer,n=f.endContainer;e&&!e.getParent().equals(t);)e=e.getParent();for(;n&&!n.getParent().equals(t);)n=n.getParent();if(!e||!n)return!1;for(var o=e,e=[],i=!1;!i;)o.equals(n)&&(i=!0),e.push(o),o=o.getNext();if(1>e.length)return!1;o=t.getParents(!0);for(n=0;n<o.length;n++)if(o[n].getName&&p[o[n].getName()]){t=o[n];break}for(var o=u.isIndent?1:-1,n=e[0],e=e[e.length-1],i=CKEDITOR.plugins.list.listToArray(t,m),r=i[e.getCustomData("listarray_index")].indent,n=n.getCustomData("listarray_index");n<=e.getCustomData("listarray_index");n++)if(i[n].indent+=o,0<o){var a=i[n].parent;i[n].parent=new CKEDITOR.dom.element(a.getName(),a.getDocument())}for(n=e.getCustomData("listarray_index")+1;n<i.length&&i[n].indent>r;n++)i[n].indent+=o;e=CKEDITOR.plugins.list.arrayToList(i,m,null,d.config.enterMode,t.getDirection());if(!u.isIndent){var s;if((s=t.getParent())&&s.is("li"))for(var o=e.listNode.getChildren(),l=[],c,n=o.count()-1;0<=n;n--)(c=o.getItem(n))&&c.is&&c.is("li")&&l.push(c)}e&&e.listNode.replace(t);if(l&&l.length)for(n=0;n<l.length;n++){for(c=t=l[n];(c=c.getNext())&&c.is&&c.getName()in p;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(h)&&t.append(f.document.createText(" ")),t.append(c);t.insertAfter(s)}e&&d.fire("contentDomInvalidated");return!0}for(var u=this,m=this.database,p=this.context,e=d.getSelection(),e=(e&&e.getRanges()).createIterator(),f;f=e.getNextRange();){for(var n=f.getCommonAncestor();n&&(n.type!=CKEDITOR.NODE_ELEMENT||!p[n.getName()]);){if(d.editable().equals(n)){n=!1;break}n=n.getParent()}n||(n=f.startPath().contains(p))&&f.setEndAt(n,CKEDITOR.POSITION_BEFORE_END);if(!n){var o=f.getEnclosedNode();o&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in p&&(f.setStartAt(o,CKEDITOR.POSITION_AFTER_START),f.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),n=o)}n&&f.startContainer.type==CKEDITOR.NODE_ELEMENT&&f.startContainer.getName()in p&&(o=new CKEDITOR.dom.walker(f),o.evaluator=r,f.startContainer=o.next());n&&f.endContainer.type==CKEDITOR.NODE_ELEMENT&&f.endContainer.getName()in p&&(o=new CKEDITOR.dom.walker(f),o.evaluator=r,f.endContainer=o.previous());if(n)return t(n)}return 0}function r(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.is("li")}function h(t){return e(t)&&n(t)}var e=CKEDITOR.dom.walker.whitespaces(!0),n=CKEDITOR.dom.walker.bookmark(!1,!0),a=CKEDITOR.TRISTATE_DISABLED,s=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(t){function e(n){o.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];n.on("key",function(t){if("wysiwyg"==n.mode&&t.data.keyCode==this.indentKey){var e=this.getContext(n.elementPath());!e||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,n.elementPath(),e)||(n.execCommand(this.relatedGlobal),t.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(t,e){var n=this.getContext(e),o=CKEDITOR.plugins.indentList.firstItemInPath(this.context,e,n);return n&&this.isIndent&&!o?s:a}:function(t,e){return!this.getContext(e)||this.isIndent?a:s},exec:CKEDITOR.tools.bind(i,this)}}var o=CKEDITOR.plugins.indent;o.registerCommands(t,{indentlist:new e(t,"indentlist",!0),outdentlist:new e(t,"outdentlist")});CKEDITOR.tools.extend(e.prototype,o.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(t,e,n){var o=e.contains(r);n||(n=e.contains(t));return n&&o&&o.equals(n.getFirst(r))}})();CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(t){t.config.smiley_path=t.config.smiley_path||this.path+"images/";t.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));t.ui.addButton&&t.ui.addButton("Smiley",{label:t.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" ");CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";");(function(){function m(t,e){e=void 0===e||e;var n;if(e)n=t.getComputedStyle("text-align");else{for(;!t.hasAttribute||!t.hasAttribute("align")&&!t.getStyle("text-align");){n=t.getParent();if(!n)break;t=n}n=t.getStyle("text-align")||t.getAttribute("align")||""}n&&(n=n.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!n&&e&&(n="rtl"==t.getComputedStyle("direction")?"right":"left");return n}function r(t,e,n){this.editor=t;this.name=e;this.value=n;this.context="p";e=t.config.justifyClasses;var o=t.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(e){switch(n){case"left":this.cssClassName=e[0];break;case"center":this.cssClassName=e[1];break;case"right":this.cssClassName=e[2];break;case"justify":this.cssClassName=e[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+e.join("|")+")(?=$|\\s)");this.requiredContent=o+"("+this.cssClassName+")"}else this.requiredContent=o+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}};t.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function a(t){var e=t.editor,n=e.createRange();n.setStartBefore(t.data.node);n.setEndAfter(t.data.node);for(var o=new CKEDITOR.dom.walker(n),i;i=o.next();)if(i.type==CKEDITOR.NODE_ELEMENT)if(!i.equals(t.data.node)&&i.getDirection())n.setStartAfter(i),o=new CKEDITOR.dom.walker(n);else{var r=e.config.justifyClasses;r&&(i.hasClass(r[0])?(i.removeClass(r[0]),i.addClass(r[2])):i.hasClass(r[2])&&(i.removeClass(r[2]),i.addClass(r[0])));r=i.getStyle("text-align");"left"==r?i.setStyle("text-align","right"):"right"==r&&i.setStyle("text-align","left")}}r.prototype={exec:function(t){var e=t.getSelection(),n=t.config.enterMode;if(e){for(var o=e.createBookmarks(),i=e.getRanges(),r=this.cssClassName,a,s,l=t.config.useComputedState,l=void 0===l||l,c=i.length-1;0<=c;c--)for(a=i[c].createIterator(),a.enlargeBr=n!=CKEDITOR.ENTER_BR;s=a.getNextParagraph(n==CKEDITOR.ENTER_P?"p":"div");)if(!s.isReadOnly()){s.removeAttribute("align");s.removeStyle("text-align");var d=r&&(s.$.className=CKEDITOR.tools.ltrim(s.$.className.replace(this.cssClassRegex,""))),u=this.state==CKEDITOR.TRISTATE_OFF&&(!l||m(s,!0)!=this.value);r?u?s.addClass(r):d||s.removeAttribute("class"):u&&s.setStyle("text-align",this.value)}t.focus();t.forceNextSelectionCheck();e.selectBookmarks(o)}},refresh:function(t,e){var n=e.block||e.blockLimit;this.setState("body"!=n.getName()&&m(n,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("justify",{init:function(t){if(!t.blockless){var e=new r(t,"justifyleft","left"),n=new r(t,"justifycenter","center"),o=new r(t,"justifyright","right"),i=new r(t,"justifyblock","justify");t.addCommand("justifyleft",e);t.addCommand("justifycenter",n);t.addCommand("justifyright",o);t.addCommand("justifyblock",i);t.ui.addButton&&(t.ui.addButton("JustifyLeft",{label:t.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),t.ui.addButton("JustifyCenter",{label:t.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),t.ui.addButton("JustifyRight",{label:t.lang.justify.right,command:"justifyright",toolbar:"align,30"}),t.ui.addButton("JustifyBlock",{label:t.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));t.on("dirChanged",a)}}})})();CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(e){var n=this._,t=n.menu;n.state!==CKEDITOR.TRISTATE_DISABLED&&(n.on&&t?t.hide():(n.previousState=n.state,t||(t=n.menu=new CKEDITOR.menu(e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.common.options}}}),t.onHide=CKEDITOR.tools.bind(function(){var t=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!t||t[e.mode]?n.previousState:CKEDITOR.TRISTATE_DISABLED);n.on=0},this),this.onMenu&&t.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),n.on=1,setTimeout(function(){t.show(CKEDITOR.document.getById(n.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel;this.base(t);this.hasArrow=!0;this.click=e},statics:{handler:{create:function(t){return new CKEDITOR.ui.menuButton(t)}}}})},beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});CKEDITOR.UI_MENUBUTTON="menubutton";(function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(o){var t=o.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],i=this,e=o.lang.language,r={},n,a,s,l;o.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(t,e){var n=r["language_"+e];if(n)t[n.style.checkActive(t.elementPath(),t)?"removeStyle":"applyStyle"](n.style)},refresh:function(t){this.setState(i.getCurrentLangElement(t)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}});for(l=0;l<t.length;l++)n=t[l].split(":"),a=n[0],s="language_"+a,r[s]={label:n[1],langId:a,group:"language",order:l,ltr:"rtl"!=(""+n[2]).toLowerCase(),onClick:function(){o.execCommand("language",this.langId)},role:"menuitemcheckbox"},r[s].style=new CKEDITOR.style({element:"span",attributes:{lang:a,dir:r[s].ltr?"ltr":"rtl"}});r.language_remove={label:e.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:r.length,onClick:function(){var t=i.getCurrentLangElement(o);t&&o.execCommand("language",t.getAttribute("lang"))}};o.addMenuGroup("language",1);o.addMenuGroup("language_remove");o.addMenuItems(r);o.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:e.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var t={},e=i.getCurrentLangElement(o),n;for(n in r)t[n]=CKEDITOR.TRISTATE_OFF;t.language_remove=e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e&&(t["language_"+e.getAttribute("lang")]=CKEDITOR.TRISTATE_ON);return t}})},getCurrentLangElement:function(t){var e=t.elementPath();t=e&&e.elements;var n;if(e)for(var o=0;o<t.length;o++)e=t[o],!n&&"span"==e.getName()&&e.hasAttribute("dir")&&e.hasAttribute("lang")&&(n=e);return n}})})();(function(){function u(t){return t.replace(/'/g,"\\$&")}function m(t){for(var e,n=t.length,o=[],i=0;i<n;i++)e=t.charCodeAt(i),o.push(e);return"String.fromCharCode("+o.join(",")+")"}function p(t,e){var n=t.plugins.link,o=n.compiledProtectionFunction.params,i,r;r=[n.compiledProtectionFunction.name,"("];for(var a=0;a<o.length;a++)n=o[a].toLowerCase(),i=e[n],0<a&&r.push(","),r.push("'",i?u(encodeURIComponent(e[n])):"","'");r.push(")");return r.join("")}function e(t){t=t.config.emailProtection||"";var o;t&&"encode"!=t&&(o={},t.replace(/^([^(]+)\(([^)]+)\)$/,function(t,e,n){o.name=e;o.params=[];n.replace(/[^,\s]+/g,function(t){o.params.push(t)})}));return o}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function t(t){return n.replace(/%1/g,"rtl"==t?"right":"left").replace(/%2/g,"cke_contents_"+t)}var e="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+e+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+e+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(t("ltr")+t("rtl"))},init:function(n){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(n,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)"));CKEDITOR.dialog.isTabEnabled(n,"link","target")&&(t=t.replace("]",",target,onclick]"));n.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"}));n.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));n.addCommand("unlink",new CKEDITOR.unlinkCommand);n.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);n.setKeystroke(CKEDITOR.CTRL+76,"link");n.ui.addButton&&(n.ui.addButton("Link",{label:n.lang.link.toolbar,command:"link",toolbar:"links,10"}),n.ui.addButton("Unlink",{label:n.lang.link.unlink,command:"unlink",toolbar:"links,20"}),n.ui.addButton("Anchor",{label:n.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");n.on("doubleclick",function(t){var e=CKEDITOR.plugins.link.getSelectedLink(n)||t.data.element;e.isReadOnly()||(e.is("a")?(t.data.dialog=!e.getAttribute("name")||e.getAttribute("href")&&e.getChildCount()?"link":"anchor",t.data.link=e):CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,e)&&(t.data.dialog="anchor"))},null,null,0);n.on("doubleclick",function(t){t.data.dialog in{link:1,anchor:1}&&t.data.link&&n.getSelection().selectElement(t.data.link)},null,null,20);n.addMenuItems&&n.addMenuItems({anchor:{label:n.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:n.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:n.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:n.lang.link.unlink,command:"unlink",group:"link",order:5}});n.contextMenu&&n.contextMenu.addListener(function(t){if(!t||t.isReadOnly())return null;t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,t);if(!t&&!(t=CKEDITOR.plugins.link.getSelectedLink(n)))return null;var e={};t.getAttribute("href")&&t.getChildCount()&&(e={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});t&&t.hasAttribute("name")&&(e.anchor=e.removeAnchor=CKEDITOR.TRISTATE_OFF);return e});this.compiledProtectionFunction=e(n)},afterInit:function(n){n.dataProcessor.dataFilter.addRules({elements:{a:function(t){return t.attributes.name?t.children.length?null:n.createFakeParserElement(t,"cke_anchor","anchor"):null}}});var t=n._.elementsPath&&n._.elementsPath.filters;t&&t.push(function(t,e){if("a"==e&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,t)||t.getAttribute("name")&&(!t.getAttribute("href")||!t.getChildCount())))return"anchor"})}});var c=/^javascript:/,d=/^mailto:([^?]+)(?:\?(.+))?$/,f=/subject=([^;?:@&=$,\/]*)/i,h=/body=([^;?:@&=$,\/]*)/i,g=/^#(.*)$/,C=/^((?:http|https|ftp|news):\/\/)?(.*)$/,A=/^(_(?:self|top|parent|blank))$/,E=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,v=/^javascript:([^(]+)\(([^)]+)\)$/,b=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,y=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,T={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(t){var e=t.getSelection(),n=e.getSelectedElement();return n&&n.is("a")?n:(e=e.getRanges()[0])?(e.shrink(CKEDITOR.SHRINK_TEXT),t.elementPath(e.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(t){for(var e=t.editable(),n=e.isInline()&&!t.plugins.divarea?t.document:e,e=n.getElementsByTag("a"),n=n.getElementsByTag("img"),o=[],i=0,r;r=e.getItem(i++);)(r.data("cke-saved-name")||r.hasAttribute("name"))&&o.push({name:r.data("cke-saved-name")||r.getAttribute("name"),id:r.getAttribute("id")});for(i=0;r=n.getItem(i++);)(r=this.tryRestoreFakeAnchor(t,r))&&o.push({name:r.getAttribute("name"),id:r.getAttribute("id")});return o},fakeAnchor:!0,tryRestoreFakeAnchor:function(t,e){if(e&&e.data("cke-real-element-type")&&"anchor"==e.data("cke-real-element-type")){var n=t.restoreRealElement(e);if(n.data("cke-saved-name"))return n}},parseLinkAttributes:function(t,e){var n=e&&(e.data("cke-saved-href")||e.getAttribute("href"))||"",s=t.plugins.link.compiledProtectionFunction,o=t.config.emailProtection,i,l={};n.match(c)&&("encode"==o?n=n.replace(E,function(t,e,n){n=n||"";return"mailto:"+String.fromCharCode.apply(String,e.split(","))+n.replace(/\\'/g,"'")}):o&&n.replace(v,function(t,e,n){if(e==s.name){l.type="email";t=l.email={};e=/(^')|('$)/g;n=n.match(/[^,\s]+/g);for(var o=n.length,i,r,a=0;a<o;a++)i=decodeURIComponent,r=n[a].replace(e,"").replace(/\\'/g,"'"),r=i(r),i=s.params[a].toLowerCase(),t[i]=r;t.address=[t.name,t.domain].join("@")}}));if(!l.type)if(o=n.match(g))l.type="anchor",l.anchor={},l.anchor.name=l.anchor.id=o[1];else if(o=n.match(d)){i=n.match(f);n=n.match(h);l.type="email";var r=l.email={};r.address=o[1];i&&(r.subject=decodeURIComponent(i[1]));n&&(r.body=decodeURIComponent(n[1]))}else n&&(i=n.match(C))&&(l.type="url",l.url={},l.url.protocol=i[1],l.url.url=i[2]);if(e){if(n=e.getAttribute("target"))l.target={type:n.match(A)?n:"frame",name:n};else if(n=(n=e.data("cke-pa-onclick")||e.getAttribute("onclick"))&&n.match(b))for(l.target={type:"popup",name:n[1]};o=y.exec(n[2]);)"yes"!=o[2]&&"1"!=o[2]||o[1]in{height:1,width:1,top:1,left:1}?isFinite(o[2])&&(l.target[o[1]]=o[2]):l.target[o[1]]=!0;null!==e.getAttribute("download")&&(l.download=!0);var n={},a;for(a in T)(o=e.getAttribute(a))&&(n[T[a]]=o);if(a=e.data("cke-saved-name")||n.advName)n.advName=a;CKEDITOR.tools.isEmpty(n)||(l.advanced=n)}return l},getLinkAttributes:function(t,e){var n=t.config.emailProtection||"",o={};switch(e.type){case"url":var n=e.url&&void 0!==e.url.protocol?e.url.protocol:"http://",i=e.url&&CKEDITOR.tools.trim(e.url.url)||"";o["data-cke-saved-href"]=0===i.indexOf("/")?i:n+i;break;case"anchor":n=e.anchor&&e.anchor.id;o["data-cke-saved-href"]="#"+(e.anchor&&e.anchor.name||n||"");break;case"email":var r=e.email,i=r.address;switch(n){case"":case"encode":var a=encodeURIComponent(r.subject||""),s=encodeURIComponent(r.body||""),r=[];a&&r.push("subject="+a);s&&r.push("body="+s);r=r.length?"?"+r.join("&"):"";"encode"==n?(n=["javascript:void(location.href='mailto:'+",m(i)],r&&n.push("+'",u(r),"'"),n.push(")")):n=["mailto:",i,r];break;default:n=i.split("@",2),r.name=n[0],r.domain=n[1],n=["javascript:",p(t,r)]}o["data-cke-saved-href"]=n.join("")}if(e.target)if("popup"==e.target.type){for(var n=["window.open(this.href, '",e.target.name||"","', '"],l="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),i=l.length,a=function(t){e.target[t]&&l.push(t+"="+e.target[t])},r=0;r<i;r++)l[r]+=e.target[l[r]]?"=yes":"=no";a("width");a("left");a("height");a("top");n.push(l.join(","),"'); return false;");o["data-cke-pa-onclick"]=n.join("")}else"notSet"!=e.target.type&&e.target.name&&(o.target=e.target.name);e.download&&(o.download="");if(e.advanced){for(var c in T)(n=e.advanced[T[c]])&&(o[c]=n);o.name&&(o["data-cke-saved-name"]=o.name)}o["data-cke-saved-href"]&&(o.href=o["data-cke-saved-href"]);c={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1};e.advanced&&CKEDITOR.tools.extend(c,T);for(var d in o)delete c[d];return{set:o,removed:CKEDITOR.tools.objectKeys(c)}},showDisplayTextForElement:function(t,e){var n={img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1};return e.widgets&&e.widgets.focused?!1:!t||!t.getName||!t.is(n)}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(t){var e=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});t.removeStyle(e)},refresh:function(t,e){var n=e.lastElement&&e.lastElement.getAscendant("a",!0);n&&"a"==n.getName()&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(t){var e=t.getSelection(),n=e.createBookmarks(),o;if(e&&(o=e.getSelectedElement())&&(o.getChildCount()?o.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(t,o)))o.remove(1);else if(o=CKEDITOR.plugins.link.getSelectedLink(t))o.hasAttribute("href")?(o.removeAttributes({name:1,"data-cke-saved-name":1}),o.removeClass("cke_anchor")):o.remove(1);e.selectBookmarks(n)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})})();(function(){function C(e,n,t){function o(t){if(!(!(c=l[t?"getFirst":"getLast"]())||c.is&&c.isBlockBoundary()||!(d=n.root[t?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||d.is&&d.isBlockBoundary({br:1})))e.document.createElement("br")[t?"insertBefore":"insertAfter"](c)}for(var i=CKEDITOR.plugins.list.listToArray(n.root,t),r=[],a=0;a<n.contents.length;a++){var s=n.contents[a];(s=s.getAscendant("li",!0))&&!s.getCustomData("list_item_processed")&&(r.push(s),CKEDITOR.dom.element.setMarker(t,s,"list_item_processed",!0))}s=null;for(a=0;a<r.length;a++)s=r[a].getCustomData("listarray_index"),i[s].indent=-1;for(a=s+1;a<i.length;a++)if(i[a].indent>i[a-1].indent+1){r=i[a-1].indent+1-i[a].indent;for(s=i[a].indent;i[a]&&i[a].indent>=s;)i[a].indent+=r,a++;a--}var l=CKEDITOR.plugins.list.arrayToList(i,t,null,e.config.enterMode,n.root.getAttribute("dir")).listNode,c,d;o(!0);o();l.replace(n.root);e.fire("contentDomInvalidated")}function t(t,e){this.name=t;this.context=this.type=e;this.allowedContent=e+" li";this.requiredContent=e}function c(t,e,n,o){for(var i,r;i=t[o?"getLast":"getFirst"](a);)(r=i.getDirection(1))!==e.getDirection(1)&&i.setAttribute("dir",r),i.remove(),n?i[o?"insertBefore":"insertAfter"](n):e.append(i,o)}function A(n){function t(t){var e=n[t?"getPrevious":"getNext"](O);e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is(n.getName())&&(c(n,e,null,!t),n.remove(),n=e)}t();t(1)}function u(t){return t.type==CKEDITOR.NODE_ELEMENT&&(t.getName()in CKEDITOR.dtd.$block||t.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[t.getName()]["#"]}function m(t,e,n){t.fire("saveSnapshot");n.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var o=n.extractContents();e.trim(!1,!0);var i=e.createBookmark(),r=new CKEDITOR.dom.elementPath(e.startContainer),a=r.block,r=r.lastElement.getAscendant("li",1)||a,s=new CKEDITOR.dom.elementPath(n.startContainer),l=s.contains(CKEDITOR.dtd.$listItem),s=s.contains(CKEDITOR.dtd.$list);a?(a=a.getBogus())&&a.remove():s&&(a=s.getPrevious(O))&&f(a)&&a.remove();(a=o.getLast())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("br")&&a.remove();(a=e.startContainer.getChild(e.startOffset))?o.insertBefore(a):e.startContainer.append(o);l&&(o=p(l))&&(r.contains(l)?(c(o,l.getParent(),l),o.remove()):r.append(o));for(;n.checkStartOfBlock()&&n.checkEndOfBlock();){s=n.startPath();o=s.block;if(!o)break;o.is("li")&&(r=o.getParent(),o.equals(r.getLast(O))&&o.equals(r.getFirst(O))&&(o=r));n.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START);o.remove()}n=n.clone();o=t.editable();n.setEndAt(o,CKEDITOR.POSITION_BEFORE_END);n=new CKEDITOR.dom.walker(n);n.evaluator=function(t){return O(t)&&!f(t)};(n=n.next())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in CKEDITOR.dtd.$list&&A(n);e.moveToBookmark(i);e.select();t.fire("saveSnapshot")}function p(t){return(t=t.getLast(O))&&t.type==CKEDITOR.NODE_ELEMENT&&t.getName()in k?t:null}var k={ol:1,ul:1},e=CKEDITOR.dom.walker.whitespaces(),I=CKEDITOR.dom.walker.bookmark(),O=function(t){return!(e(t)||I(t))},f=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(t,e,n,o,i){if(!k[t.getName()])return[];o||(o=0);n||(n=[]);for(var r=0,a=t.getChildCount();r<a;r++){var s=t.getChild(r);s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(s,e,n,o+1);if("li"==s.$.nodeName.toLowerCase()){var l={parent:t,indent:o,element:s,contents:[]};i?l.grandparent=i:(l.grandparent=t.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent()));e&&CKEDITOR.dom.element.setMarker(e,s,"listarray_index",n.length);n.push(l);for(var c=0,d=s.getChildCount(),u;c<d;c++)u=s.getChild(c),u.type==CKEDITOR.NODE_ELEMENT&&k[u.getName()]?CKEDITOR.plugins.list.listToArray(u,e,n,o+1,l.grandparent):l.contents.push(u)}}return n},arrayToList:function(t,e,n,o,i){n||(n=0);if(!t||t.length<n+1)return null;for(var r,a=t[n].parent.getDocument(),s=new CKEDITOR.dom.documentFragment(a),l=null,c=n,d=Math.max(t[n].indent,0),u=null,m,p,f=o==CKEDITOR.ENTER_P?"p":"div";;){var h=t[c];r=h.grandparent;m=h.element.getDirection(1);if(h.indent==d){l&&t[c].parent.getName()==l.getName()||(l=t[c].parent.clone(!1,1),i&&l.setAttribute("dir",i),s.append(l));u=l.append(h.element.clone(0,1));m!=l.getDirection(1)&&u.setAttribute("dir",m);for(r=0;r<h.contents.length;r++)u.append(h.contents[r].clone(1,1));c++}else if(h.indent==Math.max(d,0)+1)h=t[c-1].element.getDirection(1),c=CKEDITOR.plugins.list.arrayToList(t,null,c,o,h!=m?m:null),!u.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=a.$.documentMode&&u.append(a.createText(" ")),u.append(c.listNode),c=c.nextIndex;else if(-1==h.indent&&!n&&r){k[r.getName()]?(u=h.element.clone(!1,!0),m!=r.getDirection(1)&&u.setAttribute("dir",m)):u=new CKEDITOR.dom.documentFragment(a);var l=r.getDirection(1)!=m,g=h.element,C=g.getAttribute("class"),A=g.getAttribute("style"),E=u.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(o!=CKEDITOR.ENTER_BR||l||A||C),v,b=h.contents.length,y;for(r=0;r<b;r++)if(v=h.contents[r],I(v)&&1<b)E?y=v.clone(1,1):u.append(v.clone(1,1));else if(v.type==CKEDITOR.NODE_ELEMENT&&v.isBlockBoundary()){l&&!v.getDirection()&&v.setAttribute("dir",m);p=v;var T=g.getAttribute("style");T&&p.setAttribute("style",T.replace(/([^;])$/,"$1;")+(p.getAttribute("style")||""));C&&v.addClass(C);p=null;y&&(u.append(y),y=null);u.append(v.clone(1,1))}else E?(p||(p=a.createElement(f),u.append(p),l&&p.setAttribute("dir",m)),A&&p.setAttribute("style",A),C&&p.setAttribute("class",C),y&&(p.append(y),y=null),p.append(v.clone(1,1))):u.append(v.clone(1,1));y&&((p||u).append(y),y=null);u.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&c!=t.length-1&&(CKEDITOR.env.needsBrFiller&&(m=u.getLast())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("br")&&m.remove(),(m=u.getLast(O))&&m.type==CKEDITOR.NODE_ELEMENT&&m.is(CKEDITOR.dtd.$block)||u.append(a.createElement("br")));m=u.$.nodeName.toLowerCase();"div"!=m&&"p"!=m||u.appendBogus();s.append(u);l=null;c++}else return null;p=null;if(t.length<=c||Math.max(t[c].indent,0)<d)break}if(e)for(t=s.getFirst();t;){if(t.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(e,t),t.getName()in CKEDITOR.dtd.$listItem&&(n=t,a=i=o=void 0,o=n.getDirection()))){for(i=n.getParent();i&&!(a=i.getDirection());)i=i.getParent();o==a&&n.removeAttribute("dir")}t=t.getNextSourceNode()}return{listNode:s,nextIndex:c}}};var E=/^h[1-6]$/,a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);t.prototype={exec:function(t){this.refresh(t,t.elementPath());var e=t.config,n=t.getSelection(),o=n&&n.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var i=t.editable();if(i.getFirst(O)){var r=1==o.length&&o[0];(e=r&&r.getEnclosedNode())&&e.is&&this.type==e.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else e.enterMode==CKEDITOR.ENTER_BR?i.appendBogus():o[0].fixBlock(1,e.enterMode==CKEDITOR.ENTER_P?"p":"div"),n.selectRanges(o)}for(var e=n.createBookmarks(!0),i=[],a={},o=o.createIterator(),s=0;(r=o.getNextRange())&&++s;){var l=r.getBoundaryNodes(),c=l.startNode,d=l.endNode;c.type==CKEDITOR.NODE_ELEMENT&&"td"==c.getName()&&r.setStartAt(l.startNode,CKEDITOR.POSITION_AFTER_START);d.type==CKEDITOR.NODE_ELEMENT&&"td"==d.getName()&&r.setEndAt(l.endNode,CKEDITOR.POSITION_BEFORE_END);r=r.createIterator();for(r.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;l=r.getNextParagraph();)if(!l.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(a,l,"list_block",1);for(var u=t.elementPath(l),c=u.elements,d=0,u=u.blockLimit,m,p=c.length-1;0<=p&&(m=c[p]);p--)if(k[m.getName()]&&u.contains(m)){u.removeCustomData("list_group_object_"+s);(c=m.getCustomData("list_group_object"))?c.contents.push(l):(c={root:m,contents:[l]},i.push(c),CKEDITOR.dom.element.setMarker(a,m,"list_group_object",c));d=1;break}d||(d=u,d.getCustomData("list_group_object_"+s)?d.getCustomData("list_group_object_"+s).contents.push(l):(c={root:d,contents:[l]},CKEDITOR.dom.element.setMarker(a,d,"list_group_object_"+s,c),i.push(c)))}}for(m=[];0<i.length;)if(c=i.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(k[c.root.getName()]){o=t;s=c;c=a;r=m;d=CKEDITOR.plugins.list.listToArray(s.root,c);u=[];for(l=0;l<s.contents.length;l++)p=s.contents[l],(p=p.getAscendant("li",!0))&&!p.getCustomData("list_item_processed")&&(u.push(p),CKEDITOR.dom.element.setMarker(c,p,"list_item_processed",!0));for(var p=s.root.getDocument(),f=void 0,h=void 0,l=0;l<u.length;l++){var g=u[l].getCustomData("listarray_index"),f=d[g].parent;f.is(this.type)||(h=p.createElement(this.type),f.copyAttributes(h,{start:1,type:1}),h.removeStyle("list-style-type"),d[g].parent=h)}c=CKEDITOR.plugins.list.arrayToList(d,c,null,o.config.enterMode);d=void 0;u=c.listNode.getChildCount();for(l=0;l<u&&(d=c.listNode.getChild(l));l++)d.getName()==this.type&&r.push(d);c.listNode.replace(s.root);o.fire("contentDomInvalidated")}else{d=t;r=c;l=m;u=r.contents;o=r.root.getDocument();s=[];1==u.length&&u[0].equals(r.root)&&(c=o.createElement("div"),u[0].moveChildren&&u[0].moveChildren(c),u[0].append(c),u[0]=c);r=r.contents[0].getParent();for(p=0;p<u.length;p++)r=r.getCommonAncestor(u[p].getParent());f=d.config.useComputedState;d=c=void 0;f=void 0===f||f;for(p=0;p<u.length;p++)for(h=u[p];g=h.getParent();){if(g.equals(r)){s.push(h);!d&&h.getDirection()&&(d=1);h=h.getDirection(f);null!==c&&(c=c&&c!=h?null:h);break}h=g}if(!(1>s.length)){u=s[s.length-1].getNext();p=o.createElement(this.type);l.push(p);for(f=l=void 0;s.length;)l=s.shift(),f=o.createElement("li"),h=l,h.is("pre")||E.test(h.getName())||"false"==h.getAttribute("contenteditable")?l.appendTo(f):(l.copyAttributes(f),c&&l.getDirection()&&(f.removeStyle("direction"),f.removeAttribute("dir")),l.moveChildren(f),l.remove()),f.appendTo(p);c&&d&&p.setAttribute("dir",c);u?p.insertBefore(u):p.appendTo(r)}}else this.state==CKEDITOR.TRISTATE_ON&&k[c.root.getName()]&&C.call(this,t,c,a);for(p=0;p<m.length;p++)A(m[p]);CKEDITOR.dom.element.clearAllMarkers(a);n.selectBookmarks(e);t.focus()},refresh:function(t,e){var n=e.contains(k,1),o=e.blockLimit||e.root;n&&o.contains(n)?this.setState(n.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(d){d.blockless||(d.addCommand("numberedlist",new t("numberedlist","ol")),d.addCommand("bulletedlist",new t("bulletedlist","ul")),d.ui.addButton&&(d.ui.addButton("NumberedList",{label:d.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),d.ui.addButton("BulletedList",{label:d.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),d.on("key",function(t){var e=t.data.domEvent.getKey(),n;if("wysiwyg"==d.mode&&e in{8:1,46:1}){var o=d.getSelection().getRanges()[0],i=o&&o.startPath();if(o&&o.collapsed){var r=8==e,a=d.editable(),s=new CKEDITOR.dom.walker(o.clone());s.evaluator=function(t){return O(t)&&!f(t)};s.guard=function(t,e){return!(e&&t.type==CKEDITOR.NODE_ELEMENT&&t.is("table"))};e=o.clone();if(r){var l;(l=i.contains(k))&&o.checkBoundaryOfElement(l,CKEDITOR.START)&&(l=l.getParent())&&l.is("li")&&(l=p(l))?(n=l,l=l.getPrevious(O),e.moveToPosition(l&&f(l)?l:n,CKEDITOR.POSITION_BEFORE_START)):(s.range.setStartAt(a,CKEDITOR.POSITION_AFTER_START),s.range.setEnd(o.startContainer,o.startOffset),(l=s.previous())&&l.type==CKEDITOR.NODE_ELEMENT&&(l.getName()in k||l.is("li"))&&(l.is("li")||(s.range.selectNodeContents(l),s.reset(),s.evaluator=u,l=s.previous()),n=l,e.moveToElementEditEnd(n),e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(n)m(d,e,o),t.cancel();else{var c=i.contains(k);c&&o.checkBoundaryOfElement(c,CKEDITOR.START)&&(n=c.getFirst(O),o.checkBoundaryOfElement(n,CKEDITOR.START)&&(l=c.getPrevious(O),p(n)?l&&(o.moveToElementEditEnd(l),o.select()):d.execCommand("outdent"),t.cancel()))}}else if(n=i.contains("li")){if(s.range.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),r=(a=n.getLast(O))&&u(a)?a:n,i=0,(l=s.next())&&l.type==CKEDITOR.NODE_ELEMENT&&l.getName()in k&&l.equals(a)?(i=1,l=s.next()):o.checkBoundaryOfElement(r,CKEDITOR.END)&&(i=2),i&&l){o=o.clone();o.moveToElementEditStart(l);if(1==i&&(e.optimize(),!e.startContainer.equals(n))){for(n=e.startContainer;n.is(CKEDITOR.dtd.$inline);)c=n,n=n.getParent();c&&e.moveToPosition(c,CKEDITOR.POSITION_AFTER_END)}2==i&&(e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END),o.endPath().block&&o.moveToPosition(o.endPath().block,CKEDITOR.POSITION_AFTER_START));m(d,e,o);t.cancel()}}else s.range.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),(l=s.next())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is(k)&&(l=l.getFirst(O),i.block&&o.checkStartOfBlock()&&o.checkEndOfBlock()?(i.block.remove(),o.moveToElementEditStart(l),o.select()):p(l)?(o.moveToElementEditStart(l),o.select()):(o=o.clone(),o.moveToElementEditStart(l),m(d,e,o)),t.cancel());setTimeout(function(){d.selectionChange(1)})}}}))}})})();(function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(t){if(!t.blockless){var e;e=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]; li{list-style-type}[value]",contentTransformations:[["ol: listTypeToStyle"]]});e=t.addCommand("numberedListStyle",e);t.addFeature(e);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");e=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}",contentTransformations:[["ul: listTypeToStyle"]]});e=t.addCommand("bulletedListStyle",e);t.addFeature(e);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");t.addMenuGroup("list",108);t.addMenuItems({numberedlist:{label:t.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:t.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});t.contextMenu.addListener(function(t){if(!t||t.isReadOnly())return null;for(;t;){var e=t.getName();if("ol"==e)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==e)return{bulletedlist:CKEDITOR.TRISTATE_OFF};t=t.getParent()}return null})}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)})();(function(){function d(t,e,n){return E(e)&&E(n)&&n.equals(e.getNext(function(t){return!(X(t)||Z(t)||v(t))}))}function u(t){this.upper=t[0];this.lower=t[1];this.set.apply(this,t.slice(2))}function c(t){var e=t.element;if(e&&E(e)&&(e=e.getAscendant(t.triggers,!0))&&t.editable.contains(e)){var n=a(e);if("true"==n.getAttribute("contenteditable"))return e;if(n.is(t.triggers))return n}return null}function m(t,e,n){R(t,e);R(t,n);t=e.size.bottom;n=n.size.top;return t&&n?0|(t+n)/2:t||n}function p(e,t,n){return t=t[n?"getPrevious":"getNext"](function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!X(t)||E(t)&&!v(t)&&!A(e,t)})}function f(t,e,n){return t>e&&t<n}function a(t,e){if(t.data("cke-editable"))return null;for(e||(t=t.getParent());t&&!t.data("cke-editable");){if(t.hasAttribute("contenteditable"))return t;t=t.getParent()}return null}function h(c){var t=c.doc,e=o('<span contenteditable="false" style="'+W+"position:absolute;border-top:1px dashed "+c.boxColor+'"></span>',t),n=CKEDITOR.getUrl(this.path+"images/"+(x.hidpi?"hidpi/":"")+"icon"+(c.rtl?"-rtl":"")+".png");K(e,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(c.editable,!0);return this},lineChildren:[K(o('<span title="'+c.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:W+"height:17px;width:17px;"+(c.rtl?"left":"right")+":17px;background:url("+n+") center no-repeat "+c.boxColor+";cursor:pointer;"+(x.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(x.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),K(o(J,t),{base:Q+"left:0px;border-left-color:"+c.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),K(o(J,t),{base:Q+"right:0px;border-right-color:"+c.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){R(c,this);var t=c.holdDistance,e=this.size;return e&&f(c.mouse.y,e.top-t,e.bottom+t)&&f(c.mouse.x,e.left-t,e.right+t)?!0:!1},place:function(){var t=c.view,e=c.editable,n=c.trigger,o=n.upper,i=n.lower,r=o||i,a=r.getParent(),s={};this.trigger=n;o&&R(c,o,!0);i&&R(c,i,!0);R(c,a,!0);c.inInlineMode&&_(c,!0);a.equals(e)?(s.left=t.scroll.x,s.right=-t.scroll.x,s.width=""):(s.left=r.size.left-r.size.margin.left+t.scroll.x-(c.inInlineMode?t.editable.left+t.editable.border.left:0),s.width=r.size.outerWidth+r.size.margin.left+r.size.margin.right+t.scroll.x,s.right="");o&&i?s.top=o.size.margin.bottom===i.size.margin.top?0|o.size.bottom+o.size.margin.bottom/2:o.size.margin.bottom<i.size.margin.top?o.size.bottom+o.size.margin.bottom:o.size.bottom+o.size.margin.bottom-i.size.margin.top:o?i||(s.top=o.size.bottom+o.size.margin.bottom):s.top=i.size.top-i.size.margin.top;n.is(U)||f(s.top,t.scroll.y-15,t.scroll.y+5)?(s.top=c.inInlineMode?0:t.scroll.y,this.look(U)):n.is(z)||f(s.top,t.pane.bottom-5,t.pane.bottom+15)?(s.top=c.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(z)):(c.inInlineMode&&(s.top-=t.editable.top+t.editable.border.top),this.look(H));c.inInlineMode&&(s.top--,s.top+=t.editable.scroll.top,s.left+=t.editable.scroll.left);for(var l in s)s[l]=CKEDITOR.tools.cssLength(s[l]);this.setStyles(s)},look:function(t){if(this.oldLook!=t){for(var e=this.lineChildren.length,n;e--;)(n=this.lineChildren[e]).setAttribute("style",n.base+n.looks[0|t/2]);this.oldLook=t}},wrap:new s("span",c.doc)});for(t=e.lineChildren.length;t--;)e.lineChildren[t].appendTo(e);e.look(H);e.appendTo(e.wrap);e.unselectable();e.lineChildren[0].on("mouseup",function(t){e.detach();g(c,function(t){var e=c.line.trigger;t[e.is(B)?"insertBefore":"insertAfter"](e.is(B)?e.lower:e.upper)},!0);c.editor.focus();x.ie||c.enterMode==CKEDITOR.ENTER_BR||c.hotNode.scrollIntoView();t.data.preventDefault(!0)});e.on("mousedown",function(t){t.data.preventDefault(!0)});c.line=e}function g(t,e,n){var o=new CKEDITOR.dom.range(t.doc),i=t.editor,r;x.ie&&t.enterMode==CKEDITOR.ENTER_BR?r=t.doc.createText(V):(r=(r=a(t.element,!0))&&r.data("cke-enter-mode")||t.enterMode,r=new s(l[r],t.doc),r.is("br")||t.doc.createText(V).appendTo(r));n&&i.fire("saveSnapshot");e(r);o.moveToPosition(r,CKEDITOR.POSITION_AFTER_START);i.getSelection().selectRanges([o]);t.hotNode=r;n&&i.fire("saveSnapshot")}function C(i,r){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function o(e){var t=x.ie&&9>x.version?" ":V,n=i.hotNode&&i.hotNode.getText()==t&&i.element.equals(i.hotNode)&&i.lastCmdDirection===!!r;g(i,function(t){n&&i.hotNode&&i.hotNode.remove();t[r?"insertAfter":"insertBefore"](e);t.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!r});i.lastCmdDirection=!!r});x.ie||i.enterMode==CKEDITOR.ENTER_BR||i.hotNode.scrollIntoView();i.line.detach()}return function(t){t=t.getSelection().getStartElement();var e;t=t.getAscendant(G,1);if(!T(i,t)&&t&&!t.equals(i.editable)&&!t.contains(i.editable)){(e=a(t))&&"false"==e.getAttribute("contenteditable")&&(t=e);i.element=t;e=p(i,t,!r);var n;E(e)&&e.is(i.triggers)&&e.is(q)&&(!p(i,e,!r)||(n=p(i,e,!r))&&E(n)&&n.is(i.triggers))?o(e):(n=c(i,t),E(n)&&(p(i,n,!r)?(t=p(i,n,!r))&&E(t)&&t.is(i.triggers)&&o(n):o(n)))}}}()}}function A(t,e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||!e.$)return!1;var n=t.line;return n.wrap.equals(e)||n.wrap.contains(e)}function E(t){return t&&t.type==CKEDITOR.NODE_ELEMENT&&t.$}function v(t){if(!E(t))return!1;var e;(e=b(t))||(E(t)?(e={left:1,right:1,center:1},e=!(!e[t.getComputedStyle("float")]&&!e[t.getAttribute("align")])):e=!1);return e}function b(t){return!!{absolute:1,fixed:1}[t.getComputedStyle("position")]}function y(t,e){return E(e)?e.is(t.triggers):null}function T(t,e){if(!e)return!1;for(var n=e.getParents(1),o=n.length;o--;)for(var i=t.tabuList.length;i--;)if(n[o].hasAttribute(t.tabuList[i]))return!0;return!1}function k(e,t,n){t=t[n?"getLast":"getFirst"](function(t){return e.isRelevant(t)&&!t.is(i)});if(!t)return!1;R(e,t);return n?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y}function I(t){var e=t.editable,n=t.mouse,o=t.view,i=t.triggerOffset;_(t);var r=n.y>(t.inInlineMode?o.editable.top+o.editable.height/2:Math.min(o.editable.height,o.pane.height)/2),e=e[r?"getLast":"getFirst"](function(t){return!(X(t)||Z(t))});if(!e)return null;A(t,e)&&(e=t.line.wrap[r?"getPrevious":"getNext"](function(t){return!(X(t)||Z(t))}));if(!E(e)||v(e)||!y(t,e))return null;R(t,e);return!r&&0<=e.size.top&&f(n.y,0,e.size.top+i)?(t=t.inInlineMode||0===o.scroll.y?U:H,new u([null,e,B,F,t])):r&&e.size.bottom<=o.pane.height&&f(n.y,e.size.bottom-i,o.pane.height)?(t=t.inInlineMode||f(e.size.bottom,o.pane.height-i,o.pane.height)?z:H,new u([e,null,M,F,t])):null}function O(t){var e=t.mouse,n=t.view,o=t.triggerOffset,i=c(t);if(!i)return null;R(t,i);var o=Math.min(o,0|i.size.outerHeight/2),r=[],a,s;if(f(e.y,i.size.top-1,i.size.top+o))s=!1;else if(f(e.y,i.size.bottom-o,i.size.bottom+1))s=!0;else return null;if(v(i)||k(t,i,s)||i.getParent().is($))return null;var l=p(t,i,!s);if(l){if(l&&l.type==CKEDITOR.NODE_TEXT)return null;if(E(l)){if(v(l)||!y(t,l)||l.getParent().is($))return null;r=[l,i][s?"reverse":"concat"]().concat([P,F])}}else i.equals(t.editable[s?"getLast":"getFirst"](t.isRelevant))?(_(t),s&&f(e.y,i.size.bottom-o,n.pane.height)&&f(i.size.bottom,n.pane.height-o,n.pane.height)?a=z:f(e.y,0,i.size.top+o)&&(a=U)):a=H,r=[null,i][s?"reverse":"concat"]().concat([s?M:B,F,a,i.equals(t.editable[s?"getLast":"getFirst"](t.isRelevant))?s?z:U:H]);return 0 in r?new u(r):null}function D(t,e,n,o){for(var i=e.getDocumentPosition(),r={},a={},s={},l={},c=tt.length;c--;)r[tt[c]]=parseInt(e.getComputedStyle.call(e,"border-"+tt[c]+"-width"),10)||0,s[tt[c]]=parseInt(e.getComputedStyle.call(e,"padding-"+tt[c]),10)||0,a[tt[c]]=parseInt(e.getComputedStyle.call(e,"margin-"+tt[c]),10)||0;n&&!o||S(t,o);l.top=i.y-(n?0:t.view.scroll.y);l.left=i.x-(n?0:t.view.scroll.x);l.outerWidth=e.$.offsetWidth;l.outerHeight=e.$.offsetHeight;l.height=l.outerHeight-(s.top+s.bottom+r.top+r.bottom);l.width=l.outerWidth-(s.left+s.right+r.left+r.right);l.bottom=l.top+l.outerHeight;l.right=l.left+l.outerWidth;t.inInlineMode&&(l.scroll={top:e.$.scrollTop,left:e.$.scrollLeft});return K({border:r,padding:s,margin:a,ignoreScroll:n},l,!0)}function R(t,e,n){if(!E(e))return e.size=null;if(!e.size)e.size={};else if(e.size.ignoreScroll==n&&e.size.date>new Date-r)return null;return K(e.size,D(t,e,n),{date:+new Date},!0)}function _(t,e){t.view.editable=D(t,t.editable,e,!0)}function S(t,e){t.view||(t.view={});var n=t.view;if(!(!e&&n&&n.date>new Date-r)){var o=t.win,n=o.getScrollPosition(),o=o.getViewPaneSize();K(t.view,{scroll:{x:n.x,y:n.y,width:t.doc.$.documentElement.scrollWidth-o.width,height:t.doc.$.documentElement.scrollHeight-o.height},pane:{width:o.width,height:o.height,bottom:o.height+n.y},date:+new Date},!0)}}function w(t,e,n,o){for(var i=o,r=o,a=0,s=!1,l=!1,c=t.view.pane.height,d=t.mouse;d.y+a<c&&0<d.y-a;){s||(s=e(i,o));l||(l=e(r,o));!s&&0<d.y-a&&(i=n(t,{x:d.x,y:d.y-a}));!l&&d.y+a<c&&(r=n(t,{x:d.x,y:d.y+a}));if(s&&l)break;a+=2}return new u([i,r,null,null])}CKEDITOR.plugins.add("magicline",{init:function(i){var o=i.config,t=o.magicline_triggerOffset||30,r={editor:i,enterMode:o.enterMode,triggerOffset:t,holdDistance:0|t*(o.magicline_holdDistance||.5),boxColor:o.magicline_color||"#ff0000",rtl:"rtl"==o.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(o.magicline_tabuList||[]),triggers:o.magicline_everywhere?G:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},a,s,l;r.isRelevant=function(t){return E(t)&&!A(r,t)&&!v(t)};i.on("contentDom",function(){var t=i.editable(),e=i.document,n=i.window;K(r,{editable:t,inInlineMode:t.isInline(),doc:e,win:n,hotNode:null},!0);r.boundary=r.inInlineMode?r.editable:r.doc.getDocumentElement();t.is(L.$inline)||(r.inInlineMode&&!b(t)&&t.setStyles({position:"relative",top:null,left:null}),h.call(this,r),S(r),t.attachListener(i,"beforeUndoImage",function(){r.line.detach()}),t.attachListener(i,"beforeGetData",function(){r.line.wrap.getParent()&&(r.line.detach(),i.once("getData",function(){r.line.attach()},null,null,1e3))},null,null,0),t.attachListener(r.inInlineMode?e:e.getWindow().getFrame(),"mouseout",function(t){if("wysiwyg"==i.mode)if(r.inInlineMode){var e=t.data.$.clientX;t=t.data.$.clientY;S(r);_(r,!0);var n=r.view.editable,o=r.view.scroll;e>n.left-o.x&&e<n.right-o.x&&t>n.top-o.y&&t<n.bottom-o.y||(clearTimeout(l),l=null,r.line.detach())}else clearTimeout(l),l=null,r.line.detach()}),t.attachListener(t,"keyup",function(){r.hiddenMode=0}),t.attachListener(t,"keydown",function(t){if("wysiwyg"==i.mode)switch(t.data.getKeystroke()){case 2228240:case 16:r.hiddenMode=1,r.line.detach()}}),t.attachListener(r.inInlineMode?t:e,"mousemove",function(t){s=!0;if("wysiwyg"==i.mode&&!i.readOnly&&!l){var e={x:t.data.$.clientX,y:t.data.$.clientY};l=setTimeout(function(){r.mouse=e;l=r.trigger=null;S(r);s&&!r.hiddenMode&&i.focusManager.hasFocus&&!r.line.mouseNear()&&(r.element=j(r,!0))&&((r.trigger=I(r)||O(r)||Y(r))&&!T(r,r.trigger.upper||r.trigger.lower)?r.line.attach().place():(r.trigger=null,r.line.detach()),s=!1)},30)}}),t.attachListener(n,"scroll",function(){"wysiwyg"==i.mode&&(r.line.detach(),x.webkit&&(r.hiddenMode=1,clearTimeout(a),a=setTimeout(function(){r.mouseDown||(r.hiddenMode=0)},50)))}),t.attachListener(N?e:n,"mousedown",function(){"wysiwyg"==i.mode&&(r.line.detach(),r.hiddenMode=1,r.mouseDown=1)}),t.attachListener(N?e:n,"mouseup",function(){r.hiddenMode=0;r.mouseDown=0}),i.addCommand("accessPreviousSpace",C(r)),i.addCommand("accessNextSpace",C(r,!0)),i.setKeystroke([[o.magicline_keystrokePrevious,"accessPreviousSpace"],[o.magicline_keystrokeNext,"accessNextSpace"]]),i.on("loadSnapshot",function(){var t,e,n,o;for(o in{p:1,br:1,div:1})for(t=i.document.getElementsByTag(o),n=t.count();n--;)if((e=t.getItem(n)).data("cke-magicline-hot")){r.hotNode=e;r.lastCmdDirection="true"===e.data("cke-magicline-dir")?!0:!1;return}}),this.backdoor={accessFocusSpace:g,boxTrigger:u,isLine:A,getAscendantTrigger:c,getNonEmptyNeighbour:p,getSize:D,that:r,triggerEdge:O,triggerEditable:I,triggerExpand:Y})},this)}});var K=CKEDITOR.tools.extend,s=CKEDITOR.dom.element,o=s.createFromHtml,x=CKEDITOR.env,N=CKEDITOR.env.ie&&9>CKEDITOR.env.version,L=CKEDITOR.dtd,l={},B=128,M=64,P=32,F=16,U=4,z=2,H=1,V=" ",$=L.$listItem,i=L.$tableContent,q=K({},L.$nonEditable,L.$empty),G=L.$block,r=100,W="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",Q=W+"border-color:transparent;display:block;border-style:solid;",J="<span>"+V+"</span>";l[CKEDITOR.ENTER_BR]="br";l[CKEDITOR.ENTER_P]="p";l[CKEDITOR.ENTER_DIV]="div";u.prototype={set:function(t,e,n){this.properties=t+e+(n||H);return this},is:function(t){return(this.properties&t)==t}};var j=function(){function a(t,e){var n=t.$.elementFromPoint(e.x,e.y);return n&&n.nodeType?new CKEDITOR.dom.element(n):null}return function(t,e,n){if(!t.mouse)return null;var o=t.doc,i=t.line.wrap;n=n||t.mouse;var r=a(o,n);e&&A(t,r)&&(i.hide(),r=a(o,n),i.show());return!r||r.type!=CKEDITOR.NODE_ELEMENT||!r.$||x.ie&&9>x.version&&!t.boundary.equals(r)&&!t.boundary.contains(r)?null:r}}(),X=CKEDITOR.dom.walker.whitespaces(),Z=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Y=function(){function i(e){var t=e.element,n,o,i;if(!E(t)||t.contains(e.editable)||t.isReadOnly())return null;i=w(e,function(t,e){return!e.equals(t)},function(t,e){return j(t,!0,e)},t);n=i.upper;o=i.lower;if(d(e,n,o))return i.set(P,8);if(n&&t.contains(n))for(;!n.getParent().equals(t);)n=n.getParent();else n=t.getFirst(function(t){return c(e,t)});if(o&&t.contains(o))for(;!o.getParent().equals(t);)o=o.getParent();else o=t.getLast(function(t){return c(e,t)});if(!n||!o)return null;R(e,n);R(e,o);if(!f(e.mouse.y,n.size.top,o.size.bottom))return null;for(var t=Number.MAX_VALUE,r,a,s,l;o&&!o.equals(n)&&(a=n.getNext(e.isRelevant));)r=Math.abs(m(e,n,a)-e.mouse.y),r<t&&(t=r,s=n,l=a),n=a,R(e,n);if(!s||!l||!f(e.mouse.y,s.size.top,l.size.bottom))return null;i.upper=s;i.lower=l;return i.set(P,8)}function c(t,e){return!(e&&e.type==CKEDITOR.NODE_TEXT||Z(e)||v(e)||A(t,e)||e.type==CKEDITOR.NODE_ELEMENT&&e.$&&e.is("br"))}return function(t){var e=i(t),n;if(n=e){n=e.upper;var o=e.lower;n=!n||!o||v(o)||v(n)||o.equals(n)||n.equals(o)||o.contains(n)||n.contains(o)?!1:y(t,n)&&y(t,o)&&d(t,n,o)?!0:!1}return n?e:null}}(),tt=["top","left","right","bottom"]})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function r(t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||"form"!=t.getName())return[];for(var e=[],n=["style","className"],o=0;o<n.length;o++){var i=t.$.elements.namedItem(n[o]);i&&(i=new CKEDITOR.dom.element(i),e.push([i,i.nextSibling]),i.remove())}return e}function a(t,e){if(t&&t.type==CKEDITOR.NODE_ELEMENT&&"form"==t.getName()&&0<e.length)for(var n=e.length-1;0<=n;n--){var o=e[n][0],i=e[n][1];i?o.insertBefore(i):o.appendTo(t)}}function f(t,e){var n=r(t),o={},i=t.$;e||(o["class"]=i.className||"",i.className="");o.inline=i.style.cssText||"";e||(i.style.cssText="position: static; overflow: visible");a(n);return o}function h(t,e){var n=r(t),o=t.$;"class"in e&&(o.className=e["class"]);"inline"in e&&(o.style.cssText=e.inline);a(n)}function g(t){if(!t.editable().isInline()){var e=CKEDITOR.instances,n;for(n in e){var o=e[n];"wysiwyg"!=o.mode||o.readOnly||(o=o.document.getBody(),o.setAttribute("contentEditable",!1),o.setAttribute("contentEditable",!0))}t.editable().hasFocus&&(t.toolbox.focus(),t.focus())}}CKEDITOR.plugins.add("maximize",{init:function(r){function a(){var t=c.getViewPaneSize();r.resize(t.width,t.height,null,!0)}if(r.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var s=r.lang,l=CKEDITOR.document,c=l.getWindow(),d,u,m,p=CKEDITOR.TRISTATE_OFF;r.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var t=r.container.getFirst(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_inner")}),e=r.ui.space("contents");if("wysiwyg"==r.mode){var n=r.getSelection();d=n&&n.getRanges();u=c.getScrollPosition()}else{var o=r.editable().$;d=!CKEDITOR.env.ie&&[o.selectionStart,o.selectionEnd];u=[o.scrollLeft,o.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){c.on("resize",a);m=c.getScrollPosition();for(n=r.container;n=n.getParent();)n.setCustomData("maximize_saved_styles",f(n)),n.setStyle("z-index",r.config.baseFloatZIndex-5);e.setCustomData("maximize_saved_styles",f(e,!0));t.setCustomData("maximize_saved_styles",f(t,!0));e={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};l.getDocumentElement().setStyles(e);!CKEDITOR.env.gecko&&l.getDocumentElement().setStyle("position","fixed");CKEDITOR.env.gecko&&CKEDITOR.env.quirks||l.getBody().setStyles(e);CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(0,0)},0):c.$.scrollTo(0,0);t.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");t.$.offsetLeft;t.setStyles({"z-index":r.config.baseFloatZIndex-5,left:"0px",top:"0px"});t.addClass("cke_maximized");a();e=t.getDocumentPosition();t.setStyles({left:-1*e.x+"px",top:-1*e.y+"px"});CKEDITOR.env.gecko&&g(r)}else if(this.state==CKEDITOR.TRISTATE_ON){c.removeListener("resize",a);for(var n=[e,t],i=0;i<n.length;i++)h(n[i],n[i].getCustomData("maximize_saved_styles")),n[i].removeCustomData("maximize_saved_styles");for(n=r.container;n=n.getParent();)h(n,n.getCustomData("maximize_saved_styles")),n.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(m.x,m.y)},0):c.$.scrollTo(m.x,m.y);t.removeClass("cke_maximized");CKEDITOR.env.webkit&&(t.setStyle("display","inline"),setTimeout(function(){t.setStyle("display","block")},0));r.fire("resize",{outerHeight:r.container.$.offsetHeight,contentsHeight:e.$.offsetHeight,outerWidth:r.container.$.offsetWidth})}this.toggleState();if(n=this.uiItems[0])e=this.state==CKEDITOR.TRISTATE_OFF?s.maximize.maximize:s.maximize.minimize,n=CKEDITOR.document.getById(n._.id),n.getChild(1).setHtml(e),n.setAttribute("title",e),n.setAttribute("href",'javascript:void("'+e+'");');"wysiwyg"==r.mode?d?(CKEDITOR.env.gecko&&g(r),r.getSelection().selectRanges(d),(o=r.getSelection().getStartElement())&&o.scrollIntoView(!0)):c.$.scrollTo(u.x,u.y):(d&&(o.selectionStart=d[0],o.selectionEnd=d[1]),o.scrollLeft=u[0],o.scrollTop=u[1]);d=u=null;p=this.state;r.fire("maximize",this.state)},canUndo:!1});r.ui.addButton&&r.ui.addButton("Maximize",{label:s.maximize.maximize,command:"maximize",toolbar:"tools,10"});r.on("mode",function(){var t=r.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:p)},null,null,100)}}})})();CKEDITOR.plugins.add("newpage",{init:function(t){t.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(t){var e=this;t.setData(t.config.newpage_html||"",function(){t.focus();setTimeout(function(){t.fire("afterCommandExec",{name:"newpage",command:e});t.selectionChange()},200)})},async:!0});t.ui.addButton&&t.ui.addButton("NewPage",{label:t.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}});(function(){function a(t){return{"aria-label":t,class:"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:t}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var t=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+t+"}")},init:function(e){e.blockless||(e.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),e.ui.addButton&&e.ui.addButton("PageBreak",{label:e.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&e.on("contentDom",function(){e.document.on("click",function(t){t=t.data.getTarget();t.is("div")&&t.hasClass("cke_pagebreak")&&e.getSelection().selectElement(t)})}))},afterInit:function(e){function n(t){CKEDITOR.tools.extend(t.attributes,a(e.lang.pagebreak.alt),!0);t.children.length=0}var t=e.dataProcessor,o=t&&t.dataFilter,t=t&&t.htmlFilter,i=/page-break-after\s*:\s*always/i,r=/display\s*:\s*none/i;t&&t.addRules({attributes:{class:function(t,e){var n=t.replace("cke_pagebreak","");if(n!=t){var o=CKEDITOR.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>').children[0];e.children.length=0;e.add(o);o=e.attributes;delete o["aria-label"];delete o.contenteditable;delete o.title}return n}}},{applyToAll:!0,priority:5});o&&o.addRules({elements:{div:function(t){if(t.attributes["data-cke-pagebreak"])n(t);else if(i.test(t.attributes.style)){var e=t.children[0];e&&"span"==e.name&&r.test(e.attributes.style)&&n(t)}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(t){var e=t.document.createElement("div",{attributes:a(t.lang.pagebreak.alt)});t.insertElement(e)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(t){return(t=t.parent)&&"div"==t.name&&t.styles&&t.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"}})();(function(){var n={canUndo:!1,async:!0,exec:function(e){e.getClipboardData({title:e.lang.pastetext.title},function(t){t&&e.fire("paste",{type:"text",dataValue:t.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});e.fire("afterCommandExec",{name:"pastetext",command:n,returnValue:!!t})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(e){e.addCommand("pastetext",n);e.ui.addButton&&e.ui.addButton("PasteText",{label:e.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"});if(e.config.forcePasteAsPlainText)e.on("beforePaste",function(t){"html"!=t.data.type&&(t.data.type="text")});e.on("pasteState",function(t){e.getCommand("pastetext").setState(t.data)})}})})();(function(){function c(t,e,n){var o=CKEDITOR.cleanWord;o?n():(t=CKEDITOR.getUrl(t.config.pasteFromWordCleanupFile||e+"filter/default.js"),CKEDITOR.scriptLoader.load(t,n,null,!0));return!o}function t(t){t.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(a){var s=0,l=this.path;a.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e){var n=this;s=1;e.once("beforePaste",t);e.getClipboardData({title:e.lang.pastefromword.title},function(t){t&&e.fire("paste",{type:"html",dataValue:t.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});e.fire("afterCommandExec",{name:"pastefromword",command:n,returnValue:!!t})})}});a.ui.addButton&&a.ui.addButton("PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});a.on("pasteState",function(t){a.getCommand("pastefromword").setState(t.data)});a.on("paste",function(t){var e=t.data,n=e.dataValue,o=/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,i={dataValue:n};if(n&&(s||o.test(n))&&(!1!==a.fire("pasteFromWord",i)||s)){e.dontFilter=!0;var r=c(a,l,function(){if(r)a.fire("paste",e);else if(!a.config.pasteFromWordPromptCleanup||s||confirm(a.lang.pastefromword.confirmCleanup))i.dataValue=CKEDITOR.cleanWord(i.dataValue,a),a.fire("afterPasteFromWord",i),e.dataValue=i.dataValue;s=0});r&&t.cancel()}},null,null,3)}})})();(function(){var s,e={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(t){var e,n=t.config,o=n.baseHref?'<base href="'+n.baseHref+'"/>':"";if(n.fullPage)e=t.getData().replace(/<head>/,"$&"+o).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+t.lang.preview.preview);else{var n="<body ",i=t.document&&t.document.getBody();i&&(i.getAttribute("id")&&(n+='id="'+i.getAttribute("id")+'" '),i.getAttribute("class")&&(n+='class="'+i.getAttribute("class")+'" '));n+=">";e=t.config.docType+'<html dir="'+t.config.contentsLangDirection+'"><head>'+o+"<title>"+t.lang.preview.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(t.config.contentsCss)+"</head>"+n+t.getData()+"</body></html>"}o=640;n=420;i=80;try{var r=window.screen,o=Math.round(.8*r.width),n=Math.round(.7*r.height),i=Math.round(.1*r.width)}catch(t){}if(!1===t.fire("contentPreview",t={dataValue:e}))return!1;var r="",a;CKEDITOR.env.ie&&(window._cke_htmlToLoad=t.dataValue,a="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )",r="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=t.dataValue,r=CKEDITOR.getUrl(s+"preview.html"));r=window.open(r,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+o+",height="+n+",left="+i);CKEDITOR.env.ie&&r&&(r.location=a);CKEDITOR.env.ie||CKEDITOR.env.gecko||(a=r.document,a.open(),a.write(t.dataValue),a.close());return!0}};CKEDITOR.plugins.add("preview",{init:function(t){t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(s=this.path,t.addCommand("preview",e),t.ui.addButton&&t.ui.addButton("Preview",{label:t.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})})();CKEDITOR.plugins.add("print",{init:function(t){t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(t.addCommand("print",CKEDITOR.plugins.print),t.ui.addButton&&t.ui.addButton("Print",{label:t.lang.print.toolbar,command:"print",toolbar:"document,50"}))}});CKEDITOR.plugins.print={exec:function(t){CKEDITOR.env.gecko?t.window.$.print():t.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}};CKEDITOR.plugins.add("removeformat",{init:function(t){t.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);t.ui.addButton&&t.ui.addButton("RemoveFormat",{label:t.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}});CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(r){for(var a=r._.removeFormatRegex||(r._.removeFormatRegex=new RegExp("^(?:"+r.config.removeFormatTags.replace(/,/g,"|")+")$","i")),t=r._.removeAttributes||(r._.removeAttributes=r.config.removeFormatAttributes.split(",")),s=CKEDITOR.plugins.removeformat.filter,e=r.getSelection().getRanges(),n=e.createIterator(),o=function(t){return t.type==CKEDITOR.NODE_ELEMENT},i;i=n.getNextRange();){i.collapsed||i.enlarge(CKEDITOR.ENLARGE_ELEMENT);var l=i.createBookmark(),c=l.startNode,d=l.endNode,u=function(t){for(var e=r.elementPath(t),n=e.elements,o=1,i;(i=n[o])&&!i.equals(e.block)&&!i.equals(e.blockLimit);o++)a.test(i.getName())&&s(r,i)&&t.breakParent(i)};u(c);if(d)for(u(d),c=c.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);c&&!c.equals(d);)if(c.isReadOnly()){if(c.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;c=c.getNext(o)}else u=c.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==c.getName()&&c.data("cke-realelement")||!s(r,c)||(a.test(c.getName())?c.remove(1):(c.removeAttributes(t),r.fire("removeFormatCleanup",c))),c=u;i.moveToBookmark(l)}r.forceNextSelectionCheck();r.getSelection().selectRanges(e)}}},filter:function(t,e){for(var n=t._.removeFormatFilters||[],o=0;o<n.length;o++)if(!1===n[o](e))return!1;return!0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(t){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(t)};CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";(function(){var e={readOnly:1,exec:function(e){if(e.fire("save")&&(e=e.element.$.form))try{e.submit()}catch(t){e.submit.click&&e.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(t){t.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.addCommand("save",e).modes={wysiwyg:!!t.element.$.form},t.ui.addButton&&t.ui.addButton("Save",{label:t.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})})();(function(){CKEDITOR.plugins.add("selectall",{init:function(t){t.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(t){var e=t.editable();if(e.is("textarea"))t=e.$,CKEDITOR.env.ie?t.createTextRange().execCommand("SelectAll"):(t.selectionStart=0,t.selectionEnd=t.value.length),t.focus();else{if(e.is("body"))t.document.$.execCommand("SelectAll",!1,null);else{var n=t.createRange();n.selectNodeContents(e);n.select()}t.forceNextSelectionCheck();t.selectionChange()}},canUndo:!1});t.ui.addButton&&t.ui.addButton("SelectAll",{label:t.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})})();(function(){var o={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(t){this.toggleState();this.refresh(t)},refresh:function(t){if(t.document){var e=this.state!=CKEDITOR.TRISTATE_ON||t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!t.focusManager.hasFocus?"removeClass":"attachClass";t.editable()[e]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var t="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),e,n,o,i,r=CKEDITOR.getUrl(this.path),a=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),s=a?":not([contenteditable=false]):not(.cke_show_blocks_off)":"",l,c;for(e=n=o=i="";l=t.pop();)c=t.length?",":"",e+=".cke_show_blocks "+l+s+c,o+=".cke_show_blocks.cke_contents_ltr "+l+s+c,i+=".cke_show_blocks.cke_contents_rtl "+l+s+c,n+=".cke_show_blocks "+l+s+"{background-image:url("+CKEDITOR.getUrl(r+"images/block_"+l+".png")+")}";CKEDITOR.addCss((e+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(n,o+"{background-position:top left;padding-left:8px}",i+"{background-position:top right;padding-right:8px}"));a||CKEDITOR.addCss(".cke_show_blocks [contenteditable=false],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable=false],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable=false],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(t){function e(){n.refresh(t)}if(!t.blockless){var n=t.addCommand("showblocks",o);n.canUndo=!1;t.config.startupOutlineBlocks&&n.setState(CKEDITOR.TRISTATE_ON);t.ui.addButton&&t.ui.addButton("ShowBlocks",{label:t.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});t.on("mode",function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)});t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(t.on("focus",e),t.on("blur",e));t.on("contentDom",function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)})}}})})();(function(){var n={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(t){this.toggleState();this.refresh(t)},refresh:function(t){if(t.document){var e=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";t.editable()[e]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var t;t=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(t)},init:function(e){var t=e.addCommand("showborders",n);t.canUndo=!1;!1!==e.config.startupShowBorders&&t.setState(CKEDITOR.TRISTATE_ON);e.on("mode",function(){t.state!=CKEDITOR.TRISTATE_DISABLED&&t.refresh(e)},null,null,100);e.on("contentDom",function(){t.state!=CKEDITOR.TRISTATE_DISABLED&&t.refresh(e)});e.on("removeFormatCleanup",function(t){t=t.data;e.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&t.is("table")&&(!t.hasAttribute("border")||0>=parseInt(t.getAttribute("border"),10))&&t.addClass("cke_show_border")})},afterInit:function(t){var e=t.dataProcessor;t=e&&e.dataFilter;e=e&&e.htmlFilter;t&&t.addRules({elements:{table:function(t){t=t.attributes;var e=t["class"],n=parseInt(t.border,10);n&&!(0>=n)||e&&-1!=e.indexOf("cke_show_border")||(t["class"]=(e||"")+" cke_show_border")}}});e&&e.addRules({elements:{table:function(t){t=t.attributes;var e=t["class"];e&&(t["class"]=e.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}});CKEDITOR.on("dialogDefinition",function(t){var e=t.data.name;if("table"==e||"tableProperties"==e)if(t=t.data.definition,e=t.getContents("info").get("txtBorder"),e.commit=CKEDITOR.tools.override(e.commit,function(o){return function(t,e){o.apply(this,arguments);var n=parseInt(this.getValue(),10);e[!n||0>=n?"addClass":"removeClass"]("cke_show_border")}}),t=(t=t.getContents("advanced"))&&t.get("advCSSClasses"))t.setup=CKEDITOR.tools.override(t.setup,function(t){return function(){t.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),t.commit=CKEDITOR.tools.override(t.commit,function(n){return function(t,e){n.apply(this,arguments);parseInt(e.getAttribute("border"),10)||e.addClass("cke_show_border")}})})})();(function(){CKEDITOR.plugins.add("sourcearea",{init:function(n){function o(){var t=e&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();t&&this.focus()}if(n.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var t=CKEDITOR.plugins.sourcearea;n.addMode("source",function(t){var e=n.ui.space("contents").getDocument().createElement("textarea");e.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",n.config.sourceAreaTabSize||4)));e.setAttribute("dir","ltr");e.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu");n.ui.space("contents").append(e);e=n.editable(new i(n,e));e.setData(n.getData(1));CKEDITOR.env.ie&&(e.attachListener(n,"resize",o,e),e.attachListener(CKEDITOR.document.getWindow(),"resize",o,e),CKEDITOR.tools.setTimeout(o,0,e));n.fire("ariaWidget",this);t()});n.addCommand("source",t.commands.source);n.ui.addButton&&n.ui.addButton("Source",{label:n.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});n.on("mode",function(){n.getCommand("source").setState("source"==n.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var i=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(t){this.setValue(t);this.status="ready";this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(t){this[(t?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){i.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(t){"wysiwyg"==t.mode&&t.fire("saveSnapshot");t.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);t.setMode("source"==t.mode?"wysiwyg":"source")},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var n=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");e.addCommand("specialchar",{exec:function(){var t=e.langCode,t=n.availableLangs[t]?t:n.availableLangs[t.replace(/-.*/,"")]?t.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(n.path+"dialogs/lang/"+t+".js"),function(){CKEDITOR.tools.extend(e.lang.specialchar,n.langEntries[t]);e.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}});CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" ");CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(t){CKEDITOR.plugins.scayt.onLoadTimestamp=(new Date).getTime();"moono-lisa"==(CKEDITOR.skinName||t.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css")},init:function(r){var a=this,e=CKEDITOR.plugins.scayt;this.bindEvents(r);this.parseConfig(r);this.addRule(r);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js"));this.addMenuItems(r);var t=r.lang.scayt,n=CKEDITOR.env;r.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:t.text_title,title:r.plugins.wsc?r.lang.wsc.title:t.text_title,modes:{wysiwyg:!(n.ie&&(8>n.version||n.quirks))},toolbar:"spellchecker,20",refresh:function(){var t=r.ui.instances.Scayt.getState();r.scayt&&(t=e.state.scayt[r.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);r.fire("scaytButtonState",t)},onRender:function(){var e=this;r.on("scaytButtonState",function(t){void 0!==typeof t.data&&e.setState(t.data)})},onMenu:function(){var t=r.scayt;r.getMenuItem("scaytToggle").label=r.lang.scayt[t&&e.state.scayt[r.name]?"btn_disable":"btn_enable"];t={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:r.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};r.config.scayt_uiTabs[0]||delete t.scaytOptions;r.config.scayt_uiTabs[1]||delete t.scaytLangs;r.config.scayt_uiTabs[2]||delete t.scaytDict;return t}});r.contextMenu&&r.addMenuItems&&(r.contextMenu.addListener(function(t,e){var n=r.scayt,o,i;n&&(i=n.getSelectionNode())&&(o=a.menuGenerator(r,i),n.showBanner("."+r.contextMenu._.definition.panel.className.split(" ").join(" .")));return o}),r.contextMenu._.onHide=CKEDITOR.tools.override(r.contextMenu._.onHide,function(e){return function(){var t=r.scayt;t&&t.hideBanner();return e.apply(this)}}))},addMenuItems:function(o){var e=this,n=CKEDITOR.plugins.scayt;o.addMenuGroup("scaytButton");for(var t=o.config.scayt_contextMenuItemsOrder.split("|"),i=0;i<t.length;i++)t[i]="scayt_"+t[i];if((t=["grayt_description","grayt_suggest","grayt_control"].concat(t))&&t.length)for(i=0;i<t.length;i++)o.addMenuGroup(t[i],i-10);o.addCommand("scaytToggle",{exec:function(t){var e=t.scayt;n.state.scayt[t.name]=!n.state.scayt[t.name];!0===n.state.scayt[t.name]?e||n.createScayt(t):e&&n.destroy(t)}});o.addCommand("scaytAbout",{exec:function(t){t.scayt.tabToOpen="about";t.lockSelection();t.openDialog(e.dialogName)}});o.addCommand("scaytOptions",{exec:function(t){t.scayt.tabToOpen="options";t.lockSelection();t.openDialog(e.dialogName)}});o.addCommand("scaytLangs",{exec:function(t){t.scayt.tabToOpen="langs";t.lockSelection();t.openDialog(e.dialogName)}});o.addCommand("scaytDict",{exec:function(t){t.scayt.tabToOpen="dictionaries";t.lockSelection();t.openDialog(e.dialogName)}});t={scaytToggle:{label:o.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:o.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:o.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:o.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:o.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}};o.plugins.wsc&&(t.WSC={label:o.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var t=CKEDITOR.plugins.scayt,e=o.scayt,n=o.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?o.container.getText():o.document.getBody().getText();(n=n.replace(/\s/g,""))?(e&&t.state.scayt[o.name]&&e.setMarkupPaused&&e.setMarkupPaused(!0),o.lockSelection(),o.execCommand("checkspell")):alert("Nothing to check!")}});o.addMenuItems(t)},bindEvents:function(r){var a=CKEDITOR.plugins.scayt,i=r.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,e=function(){a.destroy(r)},s=function(){!a.state.scayt[r.name]||r.readOnly||r.scayt||a.createScayt(r)},n=function(){var t=r.editable();t.attachListener(t,"focus",function(t){CKEDITOR.plugins.scayt&&!r.scayt&&setTimeout(s,0);t=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[r.name]&&r.scayt;var e,n;if((i||t)&&r._.savedSelection){t=r._.savedSelection.getSelectedElement();t=!t&&r._.savedSelection.getRanges();for(var o=0;o<t.length;o++)n=t[o],"string"===typeof n.startContainer.$.nodeValue&&(e=n.startContainer.getText().length,(e<n.startOffset||e<n.endOffset)&&r.unlockSelection(!1))}},this,null,-10)},t=function(){i?r.config.scayt_inlineModeImmediateMarkup?s():(r.on("blur",function(){setTimeout(e,0)}),r.on("focus",s),r.focusManager.hasFocus&&s()):s();n();var t=r.editable();t.attachListener(t,"mousedown",function(t){t=t.data.getTarget();var e=r.widgets&&r.widgets.getByElement(t);e&&(e.wrapper=t.getAscendant(function(t){return t.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};r.on("contentDom",t);r.on("beforeCommandExec",function(t){var e=r.scayt,n=null,o=!1,i=!0;t.data.name in a.options.disablingCommandExec&&"wysiwyg"==r.mode?e&&(a.destroy(r),r.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==t.data.name&&"italic"!==t.data.name&&"underline"!==t.data.name&&"strike"!==t.data.name&&"subscript"!==t.data.name&&"superscript"!==t.data.name&&"enter"!==t.data.name&&"cut"!==t.data.name&&"language"!==t.data.name||!e||("cut"===t.data.name&&(i=!1,o=!0),"language"===t.data.name&&(n=(n=r.plugins.language.getCurrentLangElement(r))&&n.$,o=!0),r.fire("reloadMarkupScayt",{removeOptions:{removeInside:i,forceBookmark:o,selectionNode:n},timeout:0}))});r.on("beforeSetMode",function(t){if("source"==t.data){if(t=r.scayt)a.destroy(r),r.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED);r.document&&r.document.getBody().removeAttribute("_jquid")}});r.on("afterCommandExec",function(t){"wysiwyg"!=r.mode||"undo"!=t.data.name&&"redo"!=t.data.name||setTimeout(function(){a.reloadMarkup(r.scayt)},250)});r.on("readOnly",function(t){var e;t&&(e=r.scayt,!0===t.editor.readOnly?e&&e.fire("removeMarkupInDocument",{}):e?a.reloadMarkup(e):"wysiwyg"==t.editor.mode&&!0===a.state.scayt[t.editor.name]&&(a.createScayt(r),t.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))});r.on("beforeDestroy",e);r.on("setData",function(){e();(r.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||r.plugins.divarea)&&t()},this,null,50);r.on("reloadMarkupScayt",function(t){var e=t.data&&t.data.removeOptions;t=t.data&&t.data.timeout;var n=r.scayt;n&&setTimeout(function(){n.removeMarkupInSelectionNode(e);a.reloadMarkup(n)},t||0)});r.on("insertElement",function(){r.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50);r.on("insertHtml",function(){r.fire("reloadMarkupScayt")},this,null,50);r.on("insertText",function(){r.fire("reloadMarkupScayt")},this,null,50);r.on("scaytDialogShown",function(t){t.data.selectPage(r.scayt.tabToOpen)})},parseConfig:function(t){var e=CKEDITOR.plugins.scayt;e.replaceOldOptionsNames(t.config);"boolean"!==typeof t.config.scayt_autoStartup&&(t.config.scayt_autoStartup=!1);e.state.scayt[t.name]=t.config.scayt_autoStartup;"boolean"!==typeof t.config.grayt_autoStartup&&(t.config.grayt_autoStartup=!1);"boolean"!==typeof t.config.scayt_inlineModeImmediateMarkup&&(t.config.scayt_inlineModeImmediateMarkup=!1);e.state.grayt[t.name]=t.config.grayt_autoStartup;t.config.scayt_contextCommands||(t.config.scayt_contextCommands="ignore|ignoreall|add");t.config.scayt_contextMenuItemsOrder||(t.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");t.config.scayt_sLang||(t.config.scayt_sLang="en_US");if(void 0===t.config.scayt_maxSuggestions||"number"!=typeof t.config.scayt_maxSuggestions||0>t.config.scayt_maxSuggestions)t.config.scayt_maxSuggestions=5;if(void 0===t.config.scayt_minWordLength||"number"!=typeof t.config.scayt_minWordLength||1>t.config.scayt_minWordLength)t.config.scayt_minWordLength=4;if(void 0===t.config.scayt_customDictionaryIds||"string"!==typeof t.config.scayt_customDictionaryIds)t.config.scayt_customDictionaryIds="";if(void 0===t.config.scayt_userDictionaryName||"string"!==typeof t.config.scayt_userDictionaryName)t.config.scayt_userDictionaryName=null;if("string"===typeof t.config.scayt_uiTabs&&3===t.config.scayt_uiTabs.split(",").length){var n=[],o=[];t.config.scayt_uiTabs=t.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(t.config.scayt_uiTabs,function(t){1===Number(t)||0===Number(t)?(o.push(!0),n.push(Number(t))):o.push(!1)});null===CKEDITOR.tools.search(o,!1)?t.config.scayt_uiTabs=n:t.config.scayt_uiTabs=[1,1,1]}else t.config.scayt_uiTabs=[1,1,1];"string"!=typeof t.config.scayt_serviceProtocol&&(t.config.scayt_serviceProtocol=null);"string"!=typeof t.config.scayt_serviceHost&&(t.config.scayt_serviceHost=null);"string"!=typeof t.config.scayt_servicePort&&(t.config.scayt_servicePort=null);"string"!=typeof t.config.scayt_servicePath&&(t.config.scayt_servicePath=null);t.config.scayt_moreSuggestions||(t.config.scayt_moreSuggestions="on");"string"!==typeof t.config.scayt_customerId&&(t.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");"string"!==typeof t.config.scayt_srcUrl&&(e=document.location.protocol,e=-1!=e.search(/https?:/)?e:"http:",t.config.scayt_srcUrl=e+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);CKEDITOR.config.scayt_handleUndoRedo=CKEDITOR.plugins.undo?CKEDITOR.config.scayt_handleUndoRedo:!1;"boolean"!==typeof t.config.scayt_multiLanguageMode&&(t.config.scayt_multiLanguageMode=!1);"object"!==typeof t.config.scayt_multiLanguageStyles&&(t.config.scayt_multiLanguageStyles={});t.config.scayt_ignoreAllCapsWords&&"boolean"!==typeof t.config.scayt_ignoreAllCapsWords&&(t.config.scayt_ignoreAllCapsWords=!1);t.config.scayt_ignoreDomainNames&&"boolean"!==typeof t.config.scayt_ignoreDomainNames&&(t.config.scayt_ignoreDomainNames=!1);t.config.scayt_ignoreWordsWithMixedCases&&"boolean"!==typeof t.config.scayt_ignoreWordsWithMixedCases&&(t.config.scayt_ignoreWordsWithMixedCases=!1);t.config.scayt_ignoreWordsWithNumbers&&"boolean"!==typeof t.config.scayt_ignoreWordsWithNumbers&&(t.config.scayt_ignoreWordsWithNumbers=!1);if(t.config.scayt_disableOptionsStorage){var e=CKEDITOR.tools.isArray(t.config.scayt_disableOptionsStorage)?t.config.scayt_disableOptionsStorage:"string"===typeof t.config.scayt_disableOptionsStorage?[t.config.scayt_disableOptionsStorage]:void 0,r="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),a=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],s=CKEDITOR.tools.search,l=CKEDITOR.tools.indexOf;t.config.scayt_disableOptionsStorage=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n],i=!!s(t,"options");if(!s(r,o)||i&&s(a,function(t){if("lang"===t)return!1}))return;s(a,o)&&a.splice(l(a,o),1);if("all"===o||i&&s(t,"lang"))return[];"options"===o&&(a=["lang"])}return e=e.concat(a)}(e)}},addRule:function(n){var o=CKEDITOR.plugins.scayt,t=n.dataProcessor,e=t&&t.htmlFilter,i=n._.elementsPath&&n._.elementsPath.filters,t=t&&t.dataFilter,r=n.addRemoveFormatFilter,a=function(t){if(n.scayt&&(t.hasAttribute(o.options.data_attribute_name)||t.hasAttribute(o.options.problem_grammar_data_attribute)))return!1},s=function(t){var e=!0;n.scayt&&(t.hasAttribute(o.options.data_attribute_name)||t.hasAttribute(o.options.problem_grammar_data_attribute))&&(e=!1);return e};i&&i.push(a);t&&t.addRules({elements:{span:function(t){var e=t.hasClass(o.options.misspelled_word_class)&&t.attributes[o.options.data_attribute_name],n=t.hasClass(o.options.problem_grammar_class)&&t.attributes[o.options.problem_grammar_data_attribute];o&&(e||n)&&delete t.name;return t}}});e&&e.addRules({elements:{span:function(t){var e=t.hasClass(o.options.misspelled_word_class)&&t.attributes[o.options.data_attribute_name],n=t.hasClass(o.options.problem_grammar_class)&&t.attributes[o.options.problem_grammar_data_attribute];o&&(e||n)&&delete t.name;return t}}});r&&r.call(n,s)},scaytMenuDefinition:function(t){var e=this;t=t.scayt;return{scayt:{scayt_ignore:{label:t.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(t){t.scayt.ignoreWord()}},scayt_ignoreall:{label:t.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(t){t.scayt.ignoreAllWords()}},scayt_add:{label:t.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(t){var e=t.scayt;setTimeout(function(){e.addWordToUserDictionary()},10)}},scayt_option:{label:t.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(t){t.scayt.tabToOpen="options";t.lockSelection();t.openDialog(e.dialogName)},verification:function(t){return 1==t.config.scayt_uiTabs[0]?!0:!1}},scayt_language:{label:t.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(t){t.scayt.tabToOpen="langs";t.lockSelection();t.openDialog(e.dialogName)},verification:function(t){return 1==t.config.scayt_uiTabs[1]?!0:!1}},scayt_dictionary:{label:t.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(t){t.scayt.tabToOpen="dictionaries";t.lockSelection();t.openDialog(e.dialogName)},verification:function(t){return 1==t.config.scayt_uiTabs[2]?!0:!1}},scayt_about:{label:t.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(t){t.scayt.tabToOpen="about";t.lockSelection();t.openDialog(e.dialogName)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(t){}},grayt_ignore:{label:t.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(t){t.scayt.ignorePhrase()}}}}},buildSuggestionMenuItems:function(t,e,n){var o={},i={},r=n?"word":"phrase",a=n?"startGrammarCheck":"startSpellCheck",s=t.scayt;if(0<e.length&&"no_any_suggestions"!==e[0])if(n)for(n=0;n<e.length;n++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_");t.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],r,a));n<t.config.scayt_maxSuggestions?(t.addMenuItem(l,{label:e[n],command:l,group:"scayt_suggest",order:n+1}),o[l]=CKEDITOR.TRISTATE_OFF):(t.addMenuItem(l,{label:e[n],command:l,group:"scayt_moresuggest",order:n+1}),i[l]=CKEDITOR.TRISTATE_OFF,"on"===t.config.scayt_moreSuggestions&&(t.addMenuItem("scayt_moresuggest",{label:s.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return i}}),o.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(n=0;n<e.length;n++)l="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_"),t.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],r,a)),t.addMenuItem(l,{label:e[n],command:l,group:"grayt_suggest",order:n+1}),o[l]=CKEDITOR.TRISTATE_OFF;else o.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,t.addCommand("no_scayt_suggest",{exec:function(){}}),t.addMenuItem("no_scayt_suggest",{label:s.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return o},menuGenerator:function(t,e){var n=t.scayt,o=this.scaytMenuDefinition(t),i={},r=t.config.scayt_contextCommands.split("|"),a=e.getAttribute(n.getLangAttribute())||n.getLang(),s,l;s=n.isScaytNode(e);l=n.isGraytNode(e);s?(o=o.scayt,i=e.getAttribute(n.getScaytNodeAttributeName()),n.fire("getSuggestionsList",{lang:a,word:i}),i=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,s)):l&&(o=o.grayt,i=e.getAttribute(n.getGraytNodeAttributeName()),l=n.getProblemDescriptionText(i,a),o.grayt_problemdescription&&l&&(o.grayt_problemdescription.label=l),n.fire("getGrammarSuggestionsList",{lang:a,phrase:i}),i=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,s));if(s&&"off"==t.config.scayt_contextCommands)return i;for(var c in o)s&&-1==CKEDITOR.tools.indexOf(r,c.replace("scayt_",""))&&"all"!=t.config.scayt_contextCommands||(i[c]="undefined"!=typeof o[c].state?o[c].state:CKEDITOR.TRISTATE_OFF,"function"!==typeof o[c].verification||o[c].verification(t)||delete i[c],t.addCommand(c,{exec:o[c].exec}),t.addMenuItem(c,{label:t.lang.scayt[o[c].label]||o[c].label,command:c,group:o[c].group,order:o[c].order}));return i},createCommand:function(n,o,i){return{exec:function(t){t=t.scayt;var e={};e[o]=n;t.replaceSelectionNode(e);"startGrammarCheck"===i&&t.removeMarkupInSelectionNode({grammarOnly:!0});t.fire(i)}}}});CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var t=CKEDITOR.version.match(/^\d(\.\d*)*/),t=t&&t[0],e;if(t){e="4.5.7";var n,t=t.replace(/\./g,"");e=e.replace(/\./g,"");n=t.length-e.length;n=0<=n?n:0;e=parseInt(t)>=parseInt(e)*Math.pow(10,n)}return e?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],onLoadTimestamp:"",state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("Note: You are using latest version of SCAYT plug-in. It is recommended to upgrade WebSpellChecker.net application to version v4.8.3.Contact us by e-mail at support@webspellchecker.net."),this.warningCounter+=1)},reloadMarkup:function(t){var e;t&&(e=t.getScaytLangList(),t.reloadMarkup?t.reloadMarkup():(this.alarmCompatibilityMessage(),e&&e.ltr&&e.rtl&&t.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(t){for(var e in t)e in this.backCompatibilityMap&&(t[this.backCompatibilityMap[e]]=t[e],delete t[e])},createScayt:function(t){var r=this,a=CKEDITOR.plugins.scayt;this.loadScaytLibrary(t,function(o){function e(t){return new SCAYT.CKSCAYT(t,function(){},function(){})}var n=o.window&&o.window.getFrame()||o.editable();if(n){n={lang:o.config.scayt_sLang,container:n.$,customDictionary:o.config.scayt_customDictionaryIds,userDictionaryName:o.config.scayt_userDictionaryName,localization:o.langCode,customer_id:o.config.scayt_customerId,debug:o.config.scayt_debug,data_attribute_name:r.options.data_attribute_name,misspelled_word_class:r.options.misspelled_word_class,problem_grammar_data_attribute:r.options.problem_grammar_data_attribute,problem_grammar_class:r.options.problem_grammar_class,"options-to-restore":o.config.scayt_disableOptionsStorage,focused:o.editable().hasFocus,ignoreElementsRegex:o.config.scayt_elementsToIgnore,minWordLength:o.config.scayt_minWordLength,multiLanguageMode:o.config.scayt_multiLanguageMode,multiLanguageStyles:o.config.scayt_multiLanguageStyles,graytAutoStartup:a.state.grayt[o.name],charsToObserve:a.charsToObserve};o.config.scayt_serviceProtocol&&(n.service_protocol=o.config.scayt_serviceProtocol);o.config.scayt_serviceHost&&(n.service_host=o.config.scayt_serviceHost);o.config.scayt_servicePort&&(n.service_port=o.config.scayt_servicePort);o.config.scayt_servicePath&&(n.service_path=o.config.scayt_servicePath);"boolean"===typeof o.config.scayt_ignoreAllCapsWords&&(n["ignore-all-caps-words"]=o.config.scayt_ignoreAllCapsWords);"boolean"===typeof o.config.scayt_ignoreDomainNames&&(n["ignore-domain-names"]=o.config.scayt_ignoreDomainNames);"boolean"===typeof o.config.scayt_ignoreWordsWithMixedCases&&(n["ignore-words-with-mixed-cases"]=o.config.scayt_ignoreWordsWithMixedCases);"boolean"===typeof o.config.scayt_ignoreWordsWithNumbers&&(n["ignore-words-with-numbers"]=o.config.scayt_ignoreWordsWithNumbers);var i;try{i=e(n)}catch(t){r.alarmCompatibilityMessage(),delete n.charsToObserve,i=e(n)}i.subscribe("suggestionListSend",function(t){for(var e={},n=[],o=0;o<t.suggestionList.length;o++)e["word_"+t.suggestionList[o]]||(e["word_"+t.suggestionList[o]]=t.suggestionList[o],n.push(t.suggestionList[o]));CKEDITOR.plugins.scayt.suggestions=n});i.subscribe("selectionIsChanged",function(t){o.getSelection().isLocked&&o.lockSelection()});i.subscribe("graytStateChanged",function(t){a.state.grayt[o.name]=t.state});i.addMarkupHandler&&i.addMarkupHandler(function(t){var e=o.editable(),n=e.getCustomData(t.charName);n&&(n.$=t.node,e.setCustomData(t.charName,n))});o.scayt=i;o.fire("scaytButtonState",o.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else a.state.scayt[o.name]=!1})},destroy:function(t){t.scayt&&t.scayt.destroy();delete t.scayt;t.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(t,e){var n,o=function(){CKEDITOR.fireOnce("scaytReady");t.scayt||"function"===typeof e&&e(t)};"undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(n=t.config.scayt_srcUrl+"?"+this.onLoadTimestamp,CKEDITOR.scriptLoader.load(n,function(t){t&&o()})):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&o()}};CKEDITOR.on("dialogDefinition",function(t){var e=t.data.name;t=t.data.definition.dialog;if("scaytDialog"===e)t.on("cancel",function(t){return!1},this,null,-1);if("checkspell"===e)t.on("cancel",function(t){t=t.sender&&t.sender.getParentEditor();var e=CKEDITOR.plugins.scayt,n=t.scayt;n&&e.state.scayt[t.name]&&n.setMarkupPaused&&n.setMarkupPaused(!1);t.unlockSelection()},this,null,-2);if("link"===e)t.on("ok",function(t){var e=t.sender&&t.sender.getParentEditor();e&&setTimeout(function(){e.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)})});CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var t=CKEDITOR.editor.prototype;t.checkDirty=CKEDITOR.tools.override(t.checkDirty,function(o){return function(){var t=null,e=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(t="ready"==this.status)var n=e.removeMarkupFromString(this.getSnapshot()),e=e.removeMarkupFromString(this._.previousValue),t=t&&e!==n}else t=o.call(this);return t}});t.resetDirty=CKEDITOR.tools.override(t.resetDirty,function(e){return function(){var t=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=t.removeMarkupFromString(this.getSnapshot()):e.call(this)}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var t=CKEDITOR.plugins.undo.Image.prototype,e="function"==typeof t.equalsContent?"equalsContent":"equals";t[e]=CKEDITOR.tools.override(t[e],function(r){return function(t){var e=t.editor.scayt,n=this.contents,o=t.contents,i=null;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[t.editor.name]&&t.editor.scayt&&(this.contents=e.removeMarkupFromString(n)||"",t.contents=e.removeMarkupFromString(o)||"");i=r.apply(this,arguments);this.contents=n;t.contents=o;return i}})}});(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(a){var s=a.config,l=a.lang.stylescombo,c={},d=[],u=[];a.on("stylesSet",function(t){if(t=t.data.styles){for(var e,n,o,i=0,r=t.length;i<r;i++)(e=t[i],a.blockless&&e.element in CKEDITOR.dtd.$block||"string"==typeof e.type&&!CKEDITOR.style.customHandlers[e.type]||(n=e.name,e=new CKEDITOR.style(e),a.filter.customConfig&&!a.filter.check(e)))||(e._name=n,e._.enterMode=s.enterMode,e._.type=o=e.assignedTo||e.type,e._.weight=i+1e3*(o==CKEDITOR.STYLE_OBJECT?1:o==CKEDITOR.STYLE_BLOCK?2:3),c[n]=e,d.push(e),u.push(e));d.sort(function(t,e){return t._.weight-e._.weight})}});a.ui.addRichCombo("Styles",{label:l.label,title:l.panelTitle,toolbar:"styles,10",allowedContent:u,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(s.contentsCss),multiSelect:!0,attributes:{"aria-label":l.panelTitle}},init:function(){var t,e,n,o,i,r;i=0;for(r=d.length;i<r;i++)t=d[i],e=t._name,o=t._.type,o!=n&&(this.startGroup(l["panelTitle"+String(o)]),n=o),this.add(e,t.type==CKEDITOR.STYLE_OBJECT?e:t.buildPreview(),e);this.commit()},onClick:function(t){a.focus();a.fire("saveSnapshot");t=c[t];var e=a.elementPath();if(t.group&&t.removeStylesFromSameGroup(a))a.applyStyle(t);else a[t.checkActive(e,a)?"removeStyle":"applyStyle"](t);a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(t){var e=this.getValue();t=t.data.path.elements;for(var n=0,o=t.length,i;n<o;n++){i=t[n];for(var r in c)if(c[r].checkElementRemovable(i,!0,a)){r!=e&&this.setValue(r);return}}this.setValue("")},this)},onOpen:function(){var t=a.getSelection().getSelectedElement(),t=a.elementPath(t),e=[0,0,0,0];this.showAll();this.unmarkAll();for(var n in c){var o=c[n],i=o._.type;o.checkApplicable(t,a,a.activeFilter)?e[i]++:this.hideItem(n);o.checkActive(t,a)&&this.mark(n)}e[CKEDITOR.STYLE_BLOCK]||this.hideGroup(l["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);e[CKEDITOR.STYLE_INLINE]||this.hideGroup(l["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);e[CKEDITOR.STYLE_OBJECT]||this.hideGroup(l["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var t=a.elementPath();if(t){for(var e in c)if(c[e].checkApplicable(t,a,a.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){c={};d=[]}})}})})();(function(){function i(s){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var e=t.getSelection(),n;if(n=new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root).contains({td:1,th:1},1)){var e=t.createRange(),o=CKEDITOR.tools.tryThese(function(){var t=n.getParent().$.cells[n.$.cellIndex+(s?-1:1)];t.parentNode.parentNode;return t},function(){var t=n.getParent(),t=t.getAscendant("table").$.rows[t.$.rowIndex+(s?-1:1)];return t.cells[s?t.cells.length-1:0]});if(o||s)if(o)o=new CKEDITOR.dom.element(o),e.moveToElementEditStart(o),e.checkStartOfBlock()&&e.checkEndOfBlock()||e.selectNodeContents(o);else return!0;else{for(var i=n.getAscendant("table").$,o=n.getParent().$.cells,i=new CKEDITOR.dom.element(i.insertRow(-1),t.document),r=0,a=o.length;r<a;r++)i.append(new CKEDITOR.dom.element(o[r],t.document).clone(!1,!1)).appendBogus();e.moveToElementEditStart(i)}e.select(!0);return!0}}return!1}}}var r={editorFocus:!1,modes:{wysiwyg:1,source:1}},a={exec:function(t){t.container.focusNext(!0,t.tabIndex)}},s={exec:function(t){t.container.focusPrevious(!0,t.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(e){for(var t=!1!==e.config.enableTabKeyTools,n=e.config.tabSpaces||0,o="";n--;)o+=" ";if(o)e.on("key",function(t){9==t.data.keyCode&&(e.insertText(o),t.cancel())});if(t)e.on("key",function(t){(9==t.data.keyCode&&e.execCommand("selectNextCell")||t.data.keyCode==CKEDITOR.SHIFT+9&&e.execCommand("selectPreviousCell"))&&t.cancel()});e.addCommand("blur",CKEDITOR.tools.extend(a,r));e.addCommand("blurBack",CKEDITOR.tools.extend(s,r));e.addCommand("selectNextCell",i());e.addCommand("selectPreviousCell",i(!0))}})})();CKEDITOR.dom.element.prototype.focusNext=function(t,e){var n=void 0===e?this.getTabIndex():e,o,i,r,a,s,l;if(0>=n)for(s=this.getNextSourceNode(t,CKEDITOR.NODE_ELEMENT);s;){if(s.isVisible()&&0===s.getTabIndex()){r=s;break}s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(s=this.getDocument().getBody().getFirst();s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!o)if(!i&&s.equals(this)){if(i=!0,t){if(!(s=s.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;o=1}}else i&&!this.contains(s)&&(o=1);if(s.isVisible()&&!(0>(l=s.getTabIndex()))){if(o&&l==n){r=s;break}l>n&&(!r||!a||l<a)?(r=s,a=l):r||0!==l||(r=s,a=l)}}r&&r.focus()};CKEDITOR.dom.element.prototype.focusPrevious=function(t,e){for(var n=void 0===e?this.getTabIndex():e,o,i,r,a=0,s,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!o)if(!i&&l.equals(this)){if(i=!0,t){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;o=1}}else i&&!this.contains(l)&&(o=1);if(l.isVisible()&&!(0>(s=l.getTabIndex())))if(0>=n){if(o&&0===s){r=l;break}s>a&&(r=l,a=s)}else{if(o&&s==n){r=l;break}s<n&&(!r||s>a)&&(r=l,a=s)}}r&&r.focus()};CKEDITOR.plugins.add("table",{requires:"dialog",init:function(t){function e(t){return CKEDITOR.tools.extend(t||{},{contextSensitive:1,refresh:function(t,e){this.setState(e.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!t.blockless){var n=t.lang.table;t.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(t.plugins.dialogadvtab?"table"+t.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(t){t.styles&&(t.styles.border&&t.styles.border.match(/solid/)&&(t.attributes.border=1),"collapse"==t.styles["border-collapse"]&&(t.attributes.cellspacing=0))}}]]}));t.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e()));t.addCommand("tableDelete",e({exec:function(t){var e=t.elementPath().contains("table",1);if(e){var n=e.getParent(),o=t.editable();1!=n.getChildCount()||n.is("td","th")||n.equals(o)||(e=n);t=t.createRange();t.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);e.remove();t.select()}}}));t.ui.addButton&&t.ui.addButton("Table",{label:n.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");t.addMenuItems&&t.addMenuItems({table:{label:n.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:n.deleteTable,command:"tableDelete",group:"table",order:1}});t.on("doubleclick",function(t){t.data.element.is("table")&&(t.data.dialog="tableProperties")});t.contextMenu&&t.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});(function(){function b(t){function e(t){0<n.length||t.type!=CKEDITOR.NODE_ELEMENT||!f.test(t.getName())||t.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(o,t,"selected_cell",!0),n.push(t))}t=t.getRanges();for(var n=[],o={},i=0;i<t.length;i++){var r=t[i];if(r.collapsed)r=r.getCommonAncestor(),(r=r.getAscendant("td",!0)||r.getAscendant("th",!0))&&n.push(r);else{var r=new CKEDITOR.dom.walker(r),a;for(r.guard=e;a=r.next();)a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.table)||(a=a.getAscendant("td",!0)||a.getAscendant("th",!0))&&!a.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(o,a,"selected_cell",!0),n.push(a))}}CKEDITOR.dom.element.clearAllMarkers(o);return n}function i(t,e){for(var n=b(t),o=n[0],i=o.getAscendant("table"),o=o.getDocument(),r=n[0].getParent(),a=r.$.rowIndex,n=n[n.length-1],s=n.getParent().$.rowIndex+n.$.rowSpan-1,n=new CKEDITOR.dom.element(i.$.rows[s]),a=e?a:s,r=e?r:n,n=CKEDITOR.tools.buildTableMap(i),i=n[a],a=e?n[a-1]:n[a+1],n=n[0].length,o=o.createElement("tr"),s=0;i[s]&&s<n;s++){var l;1<i[s].rowSpan&&a&&i[s]==a[s]?(l=i[s],l.rowSpan+=1):(l=new CKEDITOR.dom.element(i[s]).clone(),l.removeAttribute("rowSpan"),l.appendBogus(),o.append(l),l=l.$);s+=l.colSpan-1}e?o.insertBefore(r):o.insertAfter(r)}function u(t){if(t instanceof CKEDITOR.dom.selection){var e=b(t),n=e[0].getAscendant("table"),o=CKEDITOR.tools.buildTableMap(n);t=e[0].getParent().$.rowIndex;for(var e=e[e.length-1],i=e.getParent().$.rowIndex+e.$.rowSpan-1,e=[],r=t;r<=i;r++){for(var a=o[r],s=new CKEDITOR.dom.element(n.$.rows[r]),l=0;l<a.length;l++){var c=new CKEDITOR.dom.element(a[l]),d=c.getParent().$.rowIndex;1==c.$.rowSpan?c.remove():(--c.$.rowSpan,d==r&&(d=o[r+1],d[l-1]?c.insertAfter(new CKEDITOR.dom.element(d[l-1])):new CKEDITOR.dom.element(n.$.rows[r+1]).append(c,1)));l+=c.$.colSpan-1}e.push(s)}o=n.$.rows;n=new CKEDITOR.dom.element(o[i+1]||(0<t?o[t-1]:null)||n.$.parentNode);for(r=e.length;0<=r;r--)u(e[r]);return n}t instanceof CKEDITOR.dom.element&&(n=t.getAscendant("table"),1==n.$.rows.length?n.remove():t.remove());return null}function l(t,e){for(var n=e?Infinity:0,o=0;o<t.length;o++){var i;i=t[o];for(var r=e,a=i.getParent().$.cells,s=0,l=0;l<a.length;l++){var c=a[l],s=s+(r?1:c.colSpan);if(c==i.$)break}i=s-1;if(e?i<n:i>n)n=i}return n}function r(t,e){for(var n=b(t),o=n[0].getAscendant("table"),i=l(n,1),n=l(n),i=e?i:n,r=CKEDITOR.tools.buildTableMap(o),o=[],n=[],a=r.length,s=0;s<a;s++)o.push(r[s][i]),n.push(e?r[s][i-1]:r[s][i+1]);for(s=0;s<a;s++)o[s]&&(1<o[s].colSpan&&n[s]==o[s]?(i=o[s],i.colSpan+=1):(i=new CKEDITOR.dom.element(o[s]).clone(),i.removeAttribute("colSpan"),i.appendBogus(),i[e?"insertBefore":"insertAfter"].call(i,new CKEDITOR.dom.element(o[s])),i=i.$),s+=i.rowSpan-1)}function a(t,e){var n=t.getStartElement();if(n=n.getAscendant("td",1)||n.getAscendant("th",1)){var o=n.clone();o.appendBogus();e?o.insertBefore(n):o.insertAfter(n)}}function s(t){if(t instanceof CKEDITOR.dom.selection){t=b(t);var e=t[0]&&t[0].getAscendant("table"),n;t:{var o=0;n=t.length-1;for(var i={},r,a;r=t[o++];)CKEDITOR.dom.element.setMarker(i,r,"delete_cell",!0);for(o=0;r=t[o++];)if((a=r.getPrevious())&&!a.getCustomData("delete_cell")||(a=r.getNext())&&!a.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(i);n=a;break t}CKEDITOR.dom.element.clearAllMarkers(i);a=t[0].getParent();(a=a.getPrevious())?n=a.getLast():(a=t[n].getParent(),n=(a=a.getNext())?a.getChild(0):null)}for(a=t.length-1;0<=a;a--)s(t[a]);n?m(n,!0):e&&e.remove()}else t instanceof CKEDITOR.dom.element&&(e=t.getParent(),1==e.getChildCount()?e.remove():t.remove())}function m(t,e){var n=t.getDocument(),o=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(o.focus(),n.focus());n=new CKEDITOR.dom.range(n);n["moveToElementEdit"+(e?"End":"Start")](t)||(n.selectNodeContents(t),n.collapse(e?!1:!0));n.select(!0)}function y(t,e,n){t=t[e];if("undefined"==typeof n)return t;for(e=0;t&&e<t.length;e++){if(n.is&&t[e]==n.$)return e;if(e==n)return new CKEDITOR.dom.element(t[e])}return n.is?-1:null}function c(t,e,n){var o=b(t),i;if((e?1!=o.length:2>o.length)||(i=t.getCommonAncestor())&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("table"))return!1;var r;t=o[0];i=t.getAscendant("table");var a=CKEDITOR.tools.buildTableMap(i),s=a.length,l=a[0].length,c=t.getParent().$.rowIndex,d=y(a,c,t);if(e){var u;try{var m=parseInt(t.getAttribute("rowspan"),10)||1;r=parseInt(t.getAttribute("colspan"),10)||1;u=a["up"==e?c-m:"down"==e?c+m:c]["left"==e?d-r:"right"==e?d+r:d]}catch(t){return!1}if(!u||t.$==u)return!1;o["up"==e||"left"==e?"unshift":"push"](new CKEDITOR.dom.element(u))}e=t.getDocument();var p=c,m=u=0,f=!n&&new CKEDITOR.dom.documentFragment(e),h=0;for(e=0;e<o.length;e++){r=o[e];var g=r.getParent(),C=r.getFirst(),A=r.$.colSpan,E=r.$.rowSpan,g=g.$.rowIndex,v=y(a,g,r),h=h+A*E,m=Math.max(m,v-d+A);u=Math.max(u,g-c+E);n||(A=r,(E=A.getBogus())&&E.remove(),A.trim(),r.getChildren().count()&&(g==p||!C||C.isBlockBoundary&&C.isBlockBoundary({br:1})||(p=f.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!p||p.is&&p.is("br")||f.append("br")),r.moveChildren(f)),e?r.remove():r.setHtml(""));p=g}if(n)return u*m==h;f.moveChildren(t);t.appendBogus();m>=l?t.removeAttribute("rowSpan"):t.$.rowSpan=u;u>=s?t.removeAttribute("colSpan"):t.$.colSpan=m;n=new CKEDITOR.dom.nodeList(i.$.rows);o=n.count();for(e=o-1;0<=e;e--)i=n.getItem(e),i.$.cells.length||(i.remove(),o++);return t}function d(t,e){var n=b(t);if(1<n.length)return!1;if(e)return!0;var n=n[0],o=n.getParent(),i=o.getAscendant("table"),r=CKEDITOR.tools.buildTableMap(i),a=o.$.rowIndex,s=y(r,a,n),l=n.$.rowSpan,c;if(1<l){c=Math.ceil(l/2);for(var l=Math.floor(l/2),o=a+c,i=new CKEDITOR.dom.element(i.$.rows[o]),r=y(r,o),d,o=n.clone(),a=0;a<r.length;a++)if(d=r[a],d.parentNode==i.$&&a>s){o.insertBefore(new CKEDITOR.dom.element(d));break}else d=null;d||i.append(o)}else for(l=c=1,i=o.clone(),i.insertAfter(o),i.append(o=n.clone()),d=y(r,a),s=0;s<d.length;s++)d[s].rowSpan++;o.appendBogus();n.$.rowSpan=c;o.$.rowSpan=l;1==c&&n.removeAttribute("rowSpan");1==l&&o.removeAttribute("rowSpan");return o}function p(t,e){var n=b(t);if(1<n.length)return!1;if(e)return!0;var n=n[0],o=n.getParent(),i=o.getAscendant("table"),i=CKEDITOR.tools.buildTableMap(i),r=y(i,o.$.rowIndex,n),a=n.$.colSpan;if(1<a)o=Math.ceil(a/2),a=Math.floor(a/2);else{for(var a=o=1,s=[],l=0;l<i.length;l++){var c=i[l];s.push(c[r]);1<c[r].rowSpan&&(l+=c[r].rowSpan-1)}for(i=0;i<s.length;i++)s[i].colSpan++}i=n.clone();i.insertAfter(n);i.appendBogus();n.$.colSpan=o;i.$.colSpan=a;1==o&&n.removeAttribute("colSpan");1==a&&i.removeAttribute("colSpan");return i}var f=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(o){function t(t){return CKEDITOR.tools.extend(t||{},{contextSensitive:1,refresh:function(t,e){this.setState(e.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function e(t,e){var n=o.addCommand(t,e);o.addFeature(n)}var n=o.lang.table;e("cellProperties",new CKEDITOR.dialogCommand("cellProperties",t({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table",contentTransformations:[[{element:"td",left:function(t){return t.styles.background&&t.styles.background.match(/^(#[a-fA-F0-9]{3,6}|rgb\([\d, ]+\)|\w+)$/)},right:function(t){t.styles["background-color"]=t.styles.background}}]]})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");e("rowDelete",t({requiredContent:"table",exec:function(t){t=t.getSelection();m(u(t))}}));e("rowInsertBefore",t({requiredContent:"table",exec:function(t){t=t.getSelection();i(t,!0)}}));e("rowInsertAfter",t({requiredContent:"table",exec:function(t){t=t.getSelection();i(t)}}));e("columnDelete",t({requiredContent:"table",exec:function(t){t=t.getSelection();t=b(t);var e=t[0],n=t[t.length-1];t=e.getAscendant("table");for(var o=CKEDITOR.tools.buildTableMap(t),i,r,a=[],s=0,l=o.length;s<l;s++)for(var c=0,d=o[s].length;c<d;c++)o[s][c]==e.$&&(i=c),o[s][c]==n.$&&(r=c);for(s=i;s<=r;s++)for(c=0;c<o.length;c++)n=o[c],e=new CKEDITOR.dom.element(t.$.rows[c]),n=new CKEDITOR.dom.element(n[s]),n.$&&(1==n.$.colSpan?n.remove():--n.$.colSpan,c+=n.$.rowSpan-1,e.$.cells.length||a.push(e));r=t.$.rows[0]&&t.$.rows[0].cells;i=new CKEDITOR.dom.element(r[i]||(i?r[i-1]:t.$.parentNode));a.length==l&&t.remove();i&&m(i,!0)}}));e("columnInsertBefore",t({requiredContent:"table",exec:function(t){t=t.getSelection();r(t,!0)}}));e("columnInsertAfter",t({requiredContent:"table",exec:function(t){t=t.getSelection();r(t)}}));e("cellDelete",t({requiredContent:"table",exec:function(t){t=t.getSelection();s(t)}}));e("cellMerge",t({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(t){m(c(t.getSelection()),!0)}}));e("cellMergeRight",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(t){m(c(t.getSelection(),"right"),!0)}}));e("cellMergeDown",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(t){m(c(t.getSelection(),"down"),!0)}}));e("cellVerticalSplit",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(t){m(p(t.getSelection()))}}));e("cellHorizontalSplit",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(t){m(d(t.getSelection()))}}));e("cellInsertBefore",t({requiredContent:"table",exec:function(t){t=t.getSelection();a(t,!0)}}));e("cellInsertAfter",t({requiredContent:"table",exec:function(t){t=t.getSelection();a(t)}}));o.addMenuItems&&o.addMenuItems({tablecell:{label:n.cell.menu,group:"tablecell",order:1,getItems:function(){var t=o.getSelection(),e=b(t);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:c(t,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:c(t,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:c(t,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:p(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:d(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<e.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:n.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:n.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:n.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:n.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:n.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:n.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:n.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:n.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:n.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:n.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:n.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:n.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:n.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:n.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:n.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:n.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:n.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});o.contextMenu&&o.contextMenu.addListener(function(t,e,n){return(t=n.contains({td:1,th:1},1))&&!t.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:b};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();CKEDITOR.tools.buildTableMap=function(t){t=t.$.rows;for(var e=-1,n=[],o=0;o<t.length;o++){e++;!n[e]&&(n[e]=[]);for(var i=-1,r=0;r<t[o].cells.length;r++){var a=t[o].cells[r];for(i++;n[e][i];)i++;for(var s=isNaN(a.colSpan)?1:a.colSpan,a=isNaN(a.rowSpan)?1:a.rowSpan,l=0;l<a;l++){n[e+l]||(n[e+l]=[]);for(var c=0;c<s;c++)n[e+l][i+c]=t[o].cells[r]}i+=s-1}}return n};(function(){var s=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],n={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(t){function e(t){o.enabled&&!1!==t.data.command.canUndo&&o.save()}function n(){o.enabled=t.readOnly?!1:"wysiwyg"==t.mode;o.onChange()}var o=t.undoManager=new l(t),i=o.editingHandler=new c(o),r=t.addCommand("undo",{exec:function(){o.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),a=t.addCommand("redo",{exec:function(){o.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});t.setKeystroke([[s[0],"undo"],[s[1],"redo"],[s[2],"redo"]]);o.onChange=function(){r.setState(o.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);a.setState(o.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};t.on("beforeCommandExec",e);t.on("afterCommandExec",e);t.on("saveSnapshot",function(t){o.save(t.data&&t.data.contentOnly)});t.on("contentDom",i.attachListeners,i);t.on("instanceReady",function(){t.fire("saveSnapshot")});t.on("beforeModeUnload",function(){"wysiwyg"==t.mode&&o.save(!0)});t.on("mode",n);t.on("readOnly",n);t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"}));t.resetUndo=function(){o.reset();t.fire("saveSnapshot")};t.on("updateSnapshot",function(){o.currentImage&&o.update()});t.on("lockSnapshot",function(t){t=t.data;o.lock(t&&t.dontUpdate,t&&t.forceUpdate)});t.on("unlockSnapshot",o.unlock,o)}});CKEDITOR.plugins.undo={};var l=CKEDITOR.plugins.undo.UndoManager=function(t){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=t.config.undoStackSize||20;this.strokesLimit=25;this.editor=t;this.reset()};l.prototype={type:function(t,e){var n=l.getKeyGroup(t),o=this.strokesRecorded[n]+1;e=e||o>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());e?(o=0,this.editor.fire("saveSnapshot")):this.editor.fire("change");this.strokesRecorded[n]=o;this.previousKeyGroup=n},keyGroupChanged:function(t){return l.getKeyGroup(t)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(t,e,n){var o=this.editor;if(this.locked||"ready"!=o.status||"wysiwyg"!=o.mode)return!1;var i=o.editable();if(!i||"ready"!=i.status)return!1;i=this.snapshots;e||(e=new r(o));if(!1===e.contents)return!1;if(this.currentImage)if(e.equalsContent(this.currentImage)){if(t||e.equalsSelection(this.currentImage))return!1}else!1!==n&&o.fire("change");i.splice(this.index+1,i.length-this.index-1);i.length==this.limit&&i.shift();this.index=i.push(e)-1;this.currentImage=e;!1!==n&&this.refreshState();return!0},restoreImage:function(t){var e=this.editor,n;t.bookmarks&&(e.focus(),n=e.getSelection());this.locked={level:999};this.editor.loadSnapshot(t.contents);t.bookmarks?n.selectBookmarks(t.bookmarks):CKEDITOR.env.ie&&(n=this.editor.document.getBody().$.createTextRange(),n.collapse(!0),n.select());this.locked=null;this.index=t.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();e.fire("change")},getNextImage:function(t){var e=this.snapshots,n=this.currentImage,o;if(n)if(t)for(o=this.index-1;0<=o;o--){if(t=e[o],!n.equalsContent(t))return t.index=o,t}else for(o=this.index+1;o<e.length;o++)if(t=e[o],!n.equalsContent(t))return t.index=o,t;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var t=this.getNextImage(!0);if(t)return this.restoreImage(t),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var t=this.getNextImage(!1);if(t)return this.restoreImage(t),!0}return!1},update:function(t){if(!this.locked){t||(t=new r(this.editor));for(var e=this.index,n=this.snapshots;0<e&&this.currentImage.equalsContent(n[e-1]);)--e;n.splice(e,this.index-e+1,t);this.index=e;this.currentImage=t}},updateSelection:function(t){if(!this.snapshots.length)return!1;var e=this.snapshots,n=e[e.length-1];return n.equalsContent(t)&&!n.equalsSelection(t)?(this.currentImage=e[e.length-1]=t,!0):!1},lock:function(t,e){if(this.locked)this.locked.level++;else if(t)this.locked={level:1};else{var n=null;if(e)n=!0;else{var o=new r(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(o)&&(n=o)}this.locked={update:n,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var t=this.locked.update;this.locked=null;if(!0===t)this.update();else if(t){var e=new r(this.editor,!0);t.equalsContent(e)||this.update()}}}};l.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};l.keyGroups={PRINTABLE:0,FUNCTIONAL:1};l.isNavigationKey=function(t){return!!l.navigationKeyCodes[t]};l.getKeyGroup=function(t){var e=l.keyGroups;return n[t]?e.FUNCTIONAL:e.PRINTABLE};l.getOppositeKeyGroup=function(t){var e=l.keyGroups;return t==e.FUNCTIONAL?e.PRINTABLE:e.FUNCTIONAL};l.ieFunctionalKeysBug=function(t){return CKEDITOR.env.ie&&l.getKeyGroup(t)==l.keyGroups.FUNCTIONAL};var r=CKEDITOR.plugins.undo.Image=function(t,e){this.editor=t;t.fire("beforeUndoImage");var n=t.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=n;e||(this.bookmarks=(n=n&&t.getSelection())&&n.createBookmarks2(!0));t.fire("afterUndoImage")},o=/\b(?:href|src|name)="[^"]*?"/gi;r.prototype={equalsContent:function(t){var e=this.contents;t=t.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(e=e.replace(o,""),t=t.replace(o,""));return e!=t?!1:!0},equalsSelection:function(t){var e=this.bookmarks;t=t.bookmarks;if(e||t){if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var o=e[n],i=t[n];if(o.startOffset!=i.startOffset||o.endOffset!=i.endOffset||!CKEDITOR.tools.arrayCompare(o.start,i.start)||!CKEDITOR.tools.arrayCompare(o.end,i.end))return!1}}return!0}};var c=CKEDITOR.plugins.undo.NativeEditingHandler=function(t){this.undoManager=t;this.ignoreInputEvent=!1;this.keyEventsStack=new e;this.lastKeydownImage=null};c.prototype={onKeydown:function(t){var e=t.data.getKey();if(229!==e)if(-1<CKEDITOR.tools.indexOf(s,t.data.getKeystroke()))t.data.preventDefault();else if(this.keyEventsStack.cleanUp(t),t=this.undoManager,this.keyEventsStack.getLast(e)||this.keyEventsStack.push(e),this.lastKeydownImage=new r(t.editor),l.isNavigationKey(e)||this.undoManager.keyGroupChanged(e))if(t.strokesRecorded[0]||t.strokesRecorded[1])t.save(!1,this.lastKeydownImage,!1),t.resetType()},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var t=this.keyEventsStack.getLast();t||(t=this.keyEventsStack.push(0));this.keyEventsStack.increment(t.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(t.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(t){var e=this.undoManager;t=t.data.getKey();var n=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(t);if(!(l.ieFunctionalKeysBug(t)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new r(e.editor,!0))))if(0<n)e.type(t);else if(l.isNavigationKey(t))this.onNavigationKey(!0)},onNavigationKey:function(t){var e=this.undoManager;!t&&e.save(!0,null,!1)||e.updateSelection(new r(e.editor));e.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var t=this.undoManager.editor,e=t.editable(),n=this;e.attachListener(e,"keydown",function(t){n.onKeydown(t);if(l.ieFunctionalKeysBug(t.data.getKey()))n.onInput()},null,null,999);e.attachListener(e,CKEDITOR.env.ie?"keypress":"input",n.onInput,n,null,999);e.attachListener(e,"keyup",n.onKeyup,n,null,999);e.attachListener(e,"paste",n.ignoreInputEventListener,n,null,999);e.attachListener(e,"drop",n.ignoreInputEventListener,n,null,999);e.attachListener(e.isInline()?e:t.document.getDocumentElement(),"click",function(){n.onNavigationKey()},null,null,999);e.attachListener(this.undoManager.editor,"blur",function(){n.keyEventsStack.remove(9)},null,null,999)}};var e=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};e.prototype={push:function(t){t=this.stack.push({keyCode:t,inputs:0});return this.stack[t-1]},getLastIndex:function(t){if("number"!=typeof t)return this.stack.length-1;for(var e=this.stack.length;e--;)if(this.stack[e].keyCode==t)return e;return-1},getLast:function(t){t=this.getLastIndex(t);return-1!=t?this.stack[t]:null},increment:function(t){this.getLast(t).inputs++},remove:function(t){t=this.getLastIndex(t);-1!=t&&this.stack.splice(t,1)},resetInputs:function(t){if("number"==typeof t)this.getLast(t).inputs=0;else for(t=this.stack.length;t--;)this.stack[t].inputs=0},getTotalInputs:function(){for(var t=this.stack.length,e=0;t--;)e+=this.stack[t].inputs;return e},cleanUp:function(t){t=t.data.$;t.ctrlKey||t.metaKey||this.remove(17);t.shiftKey||this.remove(16);t.altKey||this.remove(18)}}})();CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(t){t.config.wsc_onFinish="function"===typeof t.config.wsc_onFinish?t.config.wsc_onFinish:function(){};t.config.wsc_onClose="function"===typeof t.config.wsc_onClose?t.config.wsc_onClose:function(){}},parseConfig:function(t){t.config.wsc_customerId=t.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";t.config.wsc_customDictionaryIds=t.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"";t.config.wsc_userDictionaryName=t.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";t.config.wsc_customLoaderScript=t.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;t.config.wsc_interfaceLang=t.config.wsc_interfaceLang;CKEDITOR.config.wsc_cmd=t.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version="v4.3.0-master-d769233";CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(t){"moono-lisa"==(CKEDITOR.skinName||t.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css")},init:function(t){var e=CKEDITOR.env;this.parseConfig(t);this.parseApi(t);t.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(e.ie&&(8>e.version||e.quirks))};"undefined"==typeof t.plugins.scayt&&t.ui.addButton&&t.ui.addButton("SpellChecker",{label:t.lang.wsc.toolbar,click:function(t){var e=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.container.getText():t.document.getBody().getText();(e=e.replace(/\s/g,""))?t.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,copyformatting,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc";CKEDITOR.config.skin="moono-lisa";(function(){var t=function(t,e){var n=CKEDITOR.getUrl("plugins/"+e);t=t.split(",");for(var o=0;o<t.length;o++)CKEDITOR.skin.icons[t[o]]={path:n,offset:-t[++o],bgsize:t[++o]}};if(CKEDITOR.env.hidpi)t("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,copyformatting,480,,creatediv,504,,find-rtl,528,,find,552,,replace,576,,flash,600,,button,624,,checkbox,648,,form,672,,hiddenfield,696,,imagebutton,720,,radio,744,,select-rtl,768,,select,792,,textarea-rtl,816,,textarea,840,,textfield-rtl,864,,textfield,888,,horizontalrule,912,,iframe,936,,image,960,,indent-rtl,984,,indent,1008,,outdent-rtl,1032,,outdent,1056,,smiley,1080,,justifyblock,1104,,justifycenter,1128,,justifyleft,1152,,justifyright,1176,,language,1200,,anchor-rtl,1224,,anchor,1248,,link,1272,,unlink,1296,,bulletedlist-rtl,1320,,bulletedlist,1344,,numberedlist-rtl,1368,,numberedlist,1392,,maximize,1416,,newpage-rtl,1440,,newpage,1464,,pagebreak-rtl,1488,,pagebreak,1512,,pastetext-rtl,1536,,pastetext,1560,,pastefromword-rtl,1584,,pastefromword,1608,,preview-rtl,1632,,preview,1656,,print,1680,,removeformat,1704,,save,1728,,selectall,1752,,showblocks-rtl,1776,,showblocks,1800,,source-rtl,1824,,source,1848,,specialchar,1872,,scayt,1896,,table,1920,,redo-rtl,1944,,redo,1968,,undo-rtl,1992,,undo,2016,,spellchecker,2040,","icons_hidpi.png");else t("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,copyformatting,480,auto,creatediv,504,auto,find-rtl,528,auto,find,552,auto,replace,576,auto,flash,600,auto,button,624,auto,checkbox,648,auto,form,672,auto,hiddenfield,696,auto,imagebutton,720,auto,radio,744,auto,select-rtl,768,auto,select,792,auto,textarea-rtl,816,auto,textarea,840,auto,textfield-rtl,864,auto,textfield,888,auto,horizontalrule,912,auto,iframe,936,auto,image,960,auto,indent-rtl,984,auto,indent,1008,auto,outdent-rtl,1032,auto,outdent,1056,auto,smiley,1080,auto,justifyblock,1104,auto,justifycenter,1128,auto,justifyleft,1152,auto,justifyright,1176,auto,language,1200,auto,anchor-rtl,1224,auto,anchor,1248,auto,link,1272,auto,unlink,1296,auto,bulletedlist-rtl,1320,auto,bulletedlist,1344,auto,numberedlist-rtl,1368,auto,numberedlist,1392,auto,maximize,1416,auto,newpage-rtl,1440,auto,newpage,1464,auto,pagebreak-rtl,1488,auto,pagebreak,1512,auto,pastetext-rtl,1536,auto,pastetext,1560,auto,pastefromword-rtl,1584,auto,pastefromword,1608,auto,preview-rtl,1632,auto,preview,1656,auto,print,1680,auto,removeformat,1704,auto,save,1728,auto,selectall,1752,auto,showblocks-rtl,1776,auto,showblocks,1800,auto,source-rtl,1824,auto,source,1848,auto,specialchar,1872,auto,scayt,1896,auto,table,1920,auto,redo-rtl,1944,auto,redo,1968,auto,undo-rtl,1992,auto,undo,2016,auto,spellchecker,2040,auto","icons.png")})();CKEDITOR.lang.languages={af:1,sq:1,ar:1,az:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,"de-ch":1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,oc:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,sv:1,tt:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1}})();$(function(){setTimeout(function(){$("span.cke_button_icon").removeAttr("style");$("span.cke_button_icon").css("overflow","hidden");$("span.cke_button_icon.cke_button__bold_icon").addClass("hc_button__bold_icon");$("span.cke_button_icon.cke_button__cut_icon").addClass("hc_button__cut_icon");$("span.cke_button_icon.cke_button__copy_icon").addClass("hc_button__copy_icon");$("span.cke_button_icon.cke_button__paste_icon").addClass("hc_button__paste_icon");$("span.cke_button_icon.cke_button__pastetext_icon").addClass("hc_button__pastetext_icon");$("span.cke_button_icon.cke_button__pastefromword_icon").addClass("hc_button__pastefromword_icon");$("span.cke_button_icon.cke_button__undo_icon").addClass("hc_button__undo_icon");$("span.cke_button_icon.cke_button__redo_icon").addClass("hc_button__redo_icon");$("span.cke_button_icon.cke_button__link_icon").addClass("hc_button__link_icon");$("span.cke_button_icon.cke_button__unlink_icon").addClass("hc_button__unlink_icon");$("span.cke_button_icon.cke_button__image_icon").addClass("hc_button__image_icon");$("span.cke_button_icon.cke_button__table_icon").addClass("hc_button__table_icon");$("span.cke_button_icon.cke_button__horizontalrule_icon").addClass("hc_button__horizontalrule_icon");$("span.cke_button_icon.cke_button__specialchar_icon").addClass("hc_button__specialchar_icon");$("span.cke_button_icon.cke_button__maximize_icon").addClass("hc_button__maximize_icon");$("span.cke_button_icon.cke_button__source_icon").addClass("hc_button__source_icon");$("span.cke_button_icon.cke_button__removeformat_icon").addClass("hc_button__removeformat_icon");$("span.cke_button_icon.cke_button__strike_icon").addClass("hc_button__strike_icon");$("span.cke_button_icon.cke_button__italic_icon").addClass("hc_button__italic_icon");$("span.cke_button_icon.cke_button__numberedlist_icon").addClass("hc_button__numberedlist_icon");$("span.cke_button_icon.cke_button__blockquote_icon").addClass("hc_button__blockquote_icon");$("span.cke_button_icon.cke_button__indent_icon").addClass("hc_button__indent_icon");$("span.cke_button_icon.cke_button__outdent_icon").addClass("hc_button__outdent_icon");$("span.cke_button_icon.cke_button__bulletedlist_icon").addClass("hc_button__bulletedlist_icon")},2e3)});"use strict";var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n]};return function(t,e){o(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(s){"use strict";var t=function(){function a(){}a.prototype.log=function(t,e,n){var o=JSON.stringify(n);switch(t){case s.TraceLevel.Info:case s.TraceLevel.Verbose:console.log(e,o);break;case s.TraceLevel.Warning:console.warn(e,o);break;case s.TraceLevel.Error:console.error(e,o);break;default:console.log(e,o)}};a.prototype.getPerfToken=function(){return{timestampInMillisUtc:(new Date).getTime()}};a.prototype.logPerf=function(t,e,n,o){var i=new Date;var r=i.getTime()-n.timestampInMillisUtc;if(s.Object.isNullOrUndefined(o)){o=new s.Dictionary}o.addOrUpdate("ElapsedMilliseconds",r);this.log(r<a.warningTreshold?t:s.TraceLevel.Warning,e,o)};a.prototype.logException=function(t,e,n,o){if(s.Object.isNullOrUndefined(o)){o=new s.Dictionary}var i=s.Object.isNullOrUndefined(n.stack)?n.message:n.stack;o.addOrUpdate(s.ParameterKeys.LoggerError,i);this.log(t,e,o)};a.prototype.logMarker=function(t,e,n){};a.prototype.completeCollection=function(t,e){};a.warningTreshold=25;return a}();s.ConsoleLogger=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e;(function(t){t[t["Error"]=0]="Error";t[t["Warning"]=1]="Warning";t[t["Info"]=2]="Info";t[t["Verbose"]=3]="Verbose"})(e=t.TraceLevel||(t.TraceLevel={}))})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.prototype.getJson=function(t){return $.getJSON(t)};return t}();t.AjaxCall=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(a){"use strict";var t=function(){function t(t,e,n){var o=[];for(var i=3;i<arguments.length;i++){o[i-3]=arguments[i]}this.languageCode=t;this.ajaxCall=e;this.logger=n;this.localizationFileExtension=".txt";this.controlCdnPaths=o}t.prototype.setLocalizationFileExtension=function(t){this.localizationFileExtension=t};t.prototype.getLabels=function(){var r=this;var t=this.getLocalizationFilesPaths().map(function(t){var e=r.logger.getPerfToken();var o=new a.Dictionary({Url:t,Method:"GET"});var i="MktSvc.Controls.Common.LabelsProvider.getLabels";return r.ajaxCall.getJson(t).then(function(t){o.addOrUpdate(a.ParameterKeys.ResponseStatusKey,"success");o.addOrUpdate(a.ParameterKeys.ReponseLengthKey,t.length);r.logger.logPerf(a.TraceLevel.Verbose,i,e,o);var n={};$.each(t,function(t,e){n[t]=e.Value});return n}).fail(function(){o.addOrUpdate(a.ParameterKeys.ResponseStatusKey,"failed");r.logger.logPerf(a.TraceLevel.Verbose,i,e,o);return{}})});var e={};var n=$.Deferred();$.when.apply($,t).always(function(){for(var t=0;t<arguments.length;t++){$.extend(e,arguments[t])}n.resolve(e)});return n.promise()};t.prototype.getLocalizationFilesPaths=function(){var e=this;return this.controlCdnPaths.map(function(t){return t+"/Localization/"+e.languageCode+e.localizationFileExtension})};return t}();a.LabelsProvider=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(r){"use strict";var t=function(){function t(t,e,n,o){if(n===void 0){n=false}this.labels=t;this.localeId=e;this.rtl=n;this.logger=o;this.defaultCode="1033";this.mapping={1025:"ar",1026:"bg",1027:"ca",1028:"zh",1029:"cs",1030:"da",1031:"de",1032:"el",1033:"en",1035:"fi",1036:"fr",1037:"he",1038:"hu",1040:"it",1041:"ja",1042:"ko",1043:"nl",1044:"nb",1045:"pl",1046:"pt-br",1048:"ro",1049:"ru",1050:"hr",1051:"sk",1053:"sv",1054:"th",1055:"tr",1057:"id",1058:"uk",1060:"sl",1061:"et",1062:"lv",1063:"lt",1066:"vi",1069:"eu",1081:"hi",1086:"ms",1087:"kk",1110:"gl",2052:"zh-cn",2070:"pt",2074:"sr-latn",3076:"zh-hk",3082:"es",3098:"sr"}}t.prototype.fullyInitialized=function(){return $.Deferred().resolve().promise()};t.prototype.registerLabels=function(t){$.extend(this.labels,t)};t.prototype.getLocalizedString=function(t,e){var n=t;if(t in this.labels){n=this.labels[t]}else if(this.logger){var o="MktSvc.Controls.Common.LocalizationProvider.getLocalizedString";var i=new r.Dictionary({Key:t,LocaleId:this.localeId});this.logger.log(r.TraceLevel.Warning,o,i)}if(e){n=this.stringFormatItems(n,e)}return n};t.prototype.stringFormatItems=function(t,e){var n=e.length;while(n--){t=t.replace(new RegExp("\\{"+n+"\\}","gm"),e[n])}return t};t.prototype.getLocaleId=function(){return this.localeId};t.prototype.isRtl=function(){return this.rtl};t.prototype.getLanguageName=function(){if(this.localeId in this.mapping){return this.mapping[this.localeId]}var t="MktSvc.Controls.Common.LocalizationProvider.getLanguageName not found.";var e=new r.Dictionary({LocaleId:this.localeId});this.logger.log(r.TraceLevel.Warning,t,e);return this.mapping[this.defaultCode]};return t}();r.LocalizationProvider=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(c){"use strict";var t=function(){function t(t,e,n,o,i){this.serviceCallUrl=t;this.serviceClient=e;this.componentName=n;this.languageCode=o;this.logger=i}t.prototype.getLabels=function(){var i=this;var r=$.Deferred();var t={ServiceOperationId:"LocalizationProviderComponentLabels",HttpMethod:"GET",RoutingParameters:JSON.stringify([this.componentName,this.languageCode]),RequestBody:null};var a=this.logger.getPerfToken();var s=new c.Dictionary({ComponentName:this.componentName,LanguageCode:this.languageCode});var l="MktSvc.Controls.Common.ServiceSourceLabelsProvider.getLabels";this.serviceClient.postData(this.serviceCallUrl.build(),t).done(function(t){try{var e=JSON.parse(t).ResponseBody;var n=JSON.parse(e);var o={};$.each(n,function(t,e){o[t]=e.Value});r.resolve(o);s.addOrUpdate(c.ParameterKeys.ResponseStatusKey,"success");i.logger.logPerf(c.TraceLevel.Verbose,l,a,s)}catch(t){s.addOrUpdate(c.ParameterKeys.ResponseStatusKey,"failed");i.logger.logPerf(c.TraceLevel.Verbose,l+".InvalidResponse",a,s);r.reject()}}).fail(function(t){s.addOrUpdate(c.ParameterKeys.ResponseStatusKey,"failed");i.logger.logPerf(c.TraceLevel.Verbose,l,a,s);r.reject()});return r.promise()};return t}();c.ServiceSourceLabelsProvider=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(n){"use strict";var t=function(){function r(t){this.data=t}r.prototype.add=function(t){this.data.push(t);return this};r.prototype.addAt=function(t,e){this.data.splice(e,0,t);return this};r.prototype.remove=function(t){var e=true;while(e){var n=this.data.indexOf(t);if(n>-1){this.data.splice(n,1)}else{e=false}}return this};r.prototype.select=function(t){var e=[];for(var n=0;n<this.data.length;n++){var o=t(this.data[n],n);e.push(o)}return new r(e)};r.prototype.reverseEach=function(t){for(var e=this.data.length-1;e>=0;e--){t(this.data[e],e)}return this};r.prototype.each=function(t){for(var e=0;e<this.data.length;e++){t(this.data[e],e)}return this};r.prototype.where=function(t){var e=[];for(var n=0;n<this.data.length;n++){if(t(this.data[n])){e.push(this.data[n])}}return new r(e)};r.prototype.firstOrDefault=function(t){if(n.Object.isNullOrUndefined(t)){if(this.items().length>0){return this.items()[0]}else{return null}}var e=this.where(t).items();if(e.length>0){return e[0]}return null};r.prototype.contains=function(t){return this.firstOrDefault(t)!=null};r.prototype.items=function(){return this.data};r.prototype.count=function(){return this.data.length};r.prototype.distinct=function(t){var e=[];for(var n=0;n<this.data.length;n++){var o=false;for(var i=0;i<e.length;i++){if(t(this.data[n],e[i])){o=true;break}}if(!o){e.push(this.data[n])}}return new r(e)};r.prototype.clone=function(){return new r(this.data.slice(0))};return r}();n.ArrayQuery=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(n){"use strict";var t=function(){function t(t){this.dictionary={};if(!n.Object.isNullOrUndefined(t)){this.dictionary=t}}t.prototype.addOrUpdate=function(t,e){this.dictionary[t]=e};t.prototype.get=function(t){return this.dictionary[t]};t.prototype.getKeys=function(){var t=new n.ArrayQuery([]);for(var e in this.dictionary){t.add(e)}return t};t.prototype.getValues=function(){var t=new n.ArrayQuery([]);for(var e in this.dictionary){t.add(this.dictionary[e])}return t};t.prototype.hasKey=function(t){return this.dictionary.hasOwnProperty(t)};t.prototype.remove=function(t){delete this.dictionary[t]};t.prototype.concat=function(e){var n=this.clone();if(e){e.getKeys().items().forEach(function(t){n.addOrUpdate(t,e.get(t))})}return n};t.prototype.clone=function(){var e=this;var n=new t;this.getKeys().items().forEach(function(t){n.addOrUpdate(t,e.get(t))});return n};t.prototype.toJsonString=function(){return JSON.stringify(this.dictionary)};return t}();n.Dictionary=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.isNullOrUndefined=function(t){return typeof t==="undefined"||t==null};return t}();t.Object=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.isNullOrEmpty=function(t){return t==null||t.length===0};t.isNullOrWhitespace=function(t){return t==null||t.trim().length===0};t.isNullUndefinedOrWhitespace=function(t){return t==null||t===undefined||t.trim().length===0};t.Format=function(t){var e=[];for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}var o=t;for(var i=1;i<arguments.length;i++){var r=typeof arguments[i]==="undefined"||arguments[i]==null?"":arguments[i].toString();o=o.replace(new RegExp("\\{"+(i-1)+"\\}","g"),r)}return o};t.Replace=function(t,e,n){return t.replace(new RegExp(e,"g"),n)};t.Empty="";return t}();t.String=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(e){"use strict";var t=function(){function t(){}t.generate=function(t){if(e.Object.isNullOrUndefined(t)){t=e.String.Empty}return e.String.Format("{0}{1}{2}",t,Math.random().toString(16).substring(2),(new Date).getTime())};return t}();e.UniqueId=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.loadCssFromUrl=function(t,e,n,o){$("<link/>",{rel:"stylesheet",type:"text/css",id:t,href:e}).load(function(){o.resolve()}).appendTo(n.body)};t.loadLibsFromUrl=function(t,e,n,o){var i=document.createElement("script");i.id=t;i.type="text/javascript";i.src=e;i.onload=function(){o.resolve()};n.body.appendChild(i)};return t}();t.Resources=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(i){"use strict";var n=function(){function t(t,e){this.eventName=t;this.eventData=e}return t}();var t=function(){function t(t){this.logger=t;this.listeners=new i.Dictionary;this.queue=new i.Queue([])}t.prototype.subscribe=function(t,e){if(i.Object.isNullOrUndefined(e)){throw new Error("Error subscribing to event '"+t+"'. Delegate is null or undefined")}if(i.Object.isNullOrUndefined(this.listeners.get(t))){this.listeners.addOrUpdate(t,new i.ArrayQuery([e]))}else{this.listeners.get(t).add(e)}return e};t.prototype.unsubscribe=function(t,e){if(!i.Object.isNullOrUndefined(this.listeners.get(t))){this.listeners.get(t).remove(e)}};t.prototype.notify=function(t,e){this.queue.push(new n(t,e));this.process()};t.prototype.process=function(){var t=null;while(t=this.queue.pop()){var e=new i.Dictionary({EventName:t.eventName});this.logger.log(i.TraceLevel.Verbose,"MktSvc.Controls.Common.EventBroker.process",e);var n=this.logger.getPerfToken();this.processEvent(t.eventName,t.eventData);this.logger.logPerf(i.TraceLevel.Verbose,"MktSvc.Controls.Common.EventBroker.process",n,e)}};t.prototype.processEvent=function(t,e){if(i.Object.isNullOrUndefined(this.listeners)){return}var n=this.listeners.get(t);if(i.Object.isNullOrUndefined(n)||n.count()===0){return}var o=new i.ArrayQuery([]);n.each(function(t){o.add(t)});o.each(function(t){if(i.Object.isNullOrUndefined(e)){t()}else{t(e)}})};t.prototype.dispose=function(){this.listeners=null};return t}();i.EventBroker=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(r){"use strict";var t=function(){function i(t,e,n){var o=this;this.timerStopped=true;this.nonEventPropagationMode=false;this.delay=i.defaultSchedulerDelay;this.eventBroker=t;this.propagationStopEventName=e;this.propagationStartEventName=n;if(!r.Object.isNullOrUndefined(this.propagationStopEventName)){this.eventBroker.subscribe(this.propagationStopEventName,this.onNonEventPropagationStart=function(){o.nonEventPropagationMode=true})}if(!r.Object.isNullOrUndefined(this.propagationStartEventName)){this.eventBroker.subscribe(this.propagationStartEventName,this.onNonEventPropagationEnd=function(){o.nonEventPropagationMode=false})}}i.prototype.init=function(t,e){if(e){this.delay=e}this.action=t};i.prototype.schedule=function(){var t=this;if(this.timerId){clearTimeout(this.timerId)}this.timerStopped=false;this.timerId=setTimeout(function(){t.stop()},this.delay)};i.prototype.stop=function(t){if(this.timerStopped){return}clearTimeout(this.timerId);this.timerId=null;var e=r.Object.isNullOrUndefined(t)||t===false;if(e&&!this.nonEventPropagationMode){this.action()}this.timerStopped=true;this.eventBroker.notify(i.delaySchedulerTimerStopped)};i.prototype.getDelay=function(){return this.delay};i.prototype.dispose=function(){if(!r.Object.isNullOrUndefined(this.propagationStopEventName)){this.eventBroker.unsubscribe(this.propagationStopEventName,this.onNonEventPropagationStart)}if(!r.Object.isNullOrUndefined(this.propagationStartEventName)){this.eventBroker.unsubscribe(this.propagationStartEventName,this.onNonEventPropagationEnd)}};i.defaultSchedulerDelay=1e3;i.delaySchedulerTimerStopped="delaySchedulerTimerStopped";return i}();r.DelayScheduler=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(a){"use strict";var t=function(){function r(t){this.paths=[];this.baseUrl=this.trimCharacter(t,"/");this.valueParameters=new a.Dictionary}r.getBaseWindowUrl=function(){var t=location.protocol;var e=location.hostname;var n=location.port?":"+location.port:"";return t+"//"+e+n};r.prototype.trimCharacter=function(t,e){var n=0;var o=t.length-1;while(n<t.length&&t.charAt(n)===e){n++}while(o>=0&&t.charAt(o)===e){o--}if(n<=o){return t.substring(n,o+1)}else{return""}};r.prototype.setFormatParameter=function(t,e){this.valueParameters.addOrUpdate(t,e);return this};r.prototype.setQueryString=function(t){this.queryString=t;return this};r.prototype.appendSubPath=function(t){if(!a.String.isNullUndefinedOrWhitespace(t)){t=this.trimCharacter(t,"/");this.paths.push(t)}return this};r.prototype.build=function(){var t=this.baseUrl+"/";for(var e=0;e<this.paths.length;e++){t+=this.paths[e]+"/"}for(var n=0,o=this.valueParameters.getKeys().items();n<o.length;n++){var i=o[n];t=t.replace(i,this.valueParameters.get(i))}t=this.trimCharacter(t,"/");if(!a.String.isNullUndefinedOrWhitespace(this.queryString)){t=t+"?"+this.queryString}if(!r.isUriEncoded(t)){t=encodeURI(t)}return t};r.isUriEncoded=function(t){t=t||"";try{return t!==decodeURI(t)}catch(t){return false}};return r}();a.UrlBuilder=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(d){"use strict";var t=function(){function t(t){this.logger=t}t.prototype.createXmlHttpRequest=function(){return new XMLHttpRequest};t.prototype.createRequest=function(t,e,n,o){var i=this;var r=this;var a="MktSvc.Controls.Common.ServiceClient.createRequest";var s=new d.Dictionary({Url:e,Method:t});var l=this.createXmlHttpRequest();l.open(t,e,true);this.setDefaultHeader(l);var c=this.logger.getPerfToken();l.onreadystatechange=function(t){var e=t.target;if(e.readyState===4){s.addOrUpdate(d.ParameterKeys.ResponseStatusKey,e.status);s.addOrUpdate(d.ParameterKeys.ReponseLengthKey,e.responseText.length);i.logger.logPerf(d.TraceLevel.Verbose,a,c,s);if(r.isSuccess(e.status)){n(e.responseText)}else{o(e.responseText,e.status)}}};return l};t.prototype.setDefaultHeader=function(t){t.setRequestHeader("Content-Type","application/json; charset=utf-8");t.setRequestHeader("Accept","application/json")};t.prototype.postData=function(t,e){var n=$.Deferred();var o=this.createRequest("POST",t,function(t){n.resolve(t)},function(t,e){n.reject(t,e)});o.send(JSON.stringify(e));return n.promise()};t.prototype.getData=function(t){var n=$.Deferred();var e=this.createRequest("GET",t,function(t){n.resolve(t)},function(t,e){n.reject(t,e)});e.send();return n.promise()};t.prototype.isSuccess=function(t){return t>199&&t<300};return t}();d.ServiceClient=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(o){__extends(t,o);function t(t,e){if(e===void 0){e=false}var n=o.call(this,t)||this;n.includeAnnotations=e;return n}t.prototype.setDefaultHeader=function(t){o.prototype.setDefaultHeader.call(this,t);t.setRequestHeader("OData-MaxVersion","4.0");t.setRequestHeader("OData-Version","4.0");if(this.includeAnnotations){t.setRequestHeader("Prefer",'odata.include-annotations="*"')}};return t}(t.ServiceClient);t.ODataServiceClient=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
// <copyright file="CommonReferences.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(t,e,n){this.inputKeyCode=t;this.modifiers=e;this.onPressCallback=n}t.prototype.dispose=function(){this.onPressCallback=null};return t}();t.KeyboardCommand=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(c){"use strict";var t=function(){function t(){this.registeredCommands=[]}t.prototype.init=function(t){var e=this;this.controlContainer=t;this.controlContainer.keydown(function(t){e.handleKeyDownEvent(t)})};t.prototype.registerCommand=function(t){if(c.Object.isNullOrUndefined(this.controlContainer)){return}if(this.registeredCommands.indexOf(t)===-1){this.registeredCommands.push(t)}};t.prototype.unregisterCommand=function(t){var e=this.registeredCommands.indexOf(t);if(e!==-1){this.registeredCommands.splice(e,1)}};t.prototype.registerCommandsInIframe=function(t){var e=this;$(t.contentWindow.document).keydown(function(t){e.handleKeyDownEvent(t)})};t.prototype.unregisterCommandsInIframe=function(t){if(c.Object.isNullOrUndefined(t)||c.Object.isNullOrUndefined(t.contentDocument)){return}$(t.contentDocument).off("keydown");t.contentDocument.onkeydown=null};t.prototype.dispose=function(){this.controlContainer.off("keydown");this.controlContainer=null;this.registeredCommands.forEach(function(t,e){t.dispose()});this.registeredCommands=null};t.prototype.handleKeyDownEvent=function(e){var n=this;if(c.Object.isNullOrUndefined(e)){return null}this.registeredCommands.forEach(function(t){if(n.isCommandTriggered(e,t)){e.preventDefault();t.onPressCallback()}})};t.prototype.isCommandTriggered=function(t,e){var n=t.which||t.keyCode;if(n>=c.KeyboardKeyCodes.numpadZeroKey&&n<=c.KeyboardKeyCodes.numpadNineKey){n=n-(c.KeyboardKeyCodes.numpadZeroKey-c.KeyboardKeyCodes.zeroKey)}var o=t.altKey;var i=t.ctrlKey;var r=t.shiftKey;var a=e.modifiers.indexOf(c.KeyboardModifierType.Alt)!==-1;var s=e.modifiers.indexOf(c.KeyboardModifierType.Shift)!==-1;var l=e.modifiers.indexOf(c.KeyboardModifierType.Control)!==-1;if(n!==e.inputKeyCode||a&&!o||s&&!r||l&&!i||!a&&o||!s&&r||!l&&i){return false}return true};return t}();c.KeyboardCommandManager=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.escapeKeyCode=27;t.aKey=65;t.bKey=66;t.cKey=67;t.dKey=68;t.fKey=70;t.gKey=71;t.hKey=72;t.iKey=73;t.mKey=77;t.nKey=78;t.pKey=80;t.sKey=83;t.vKey=86;t.xKey=88;t.zKey=90;t.backspaceKey=8;t.homeKey=36;t.deleteKey=46;t.plusKey=107;t.minusKey=189;t.equalKey=187;t.backslashKey=220;t.zeroKey=48;t.oneKey=49;t.twoKey=50;t.threeKey=51;t.fourKey=52;t.fiveKey=53;t.sixKey=54;t.numpadZeroKey=96;t.numpadNineKey=105;t.f11Key=122;return t}();t.KeyboardKeyCodes=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e;(function(t){t[t["Shift"]=0]="Shift";t[t["Control"]=1]="Control";t[t["Alt"]=2]="Alt"})(e=t.KeyboardModifierType||(t.KeyboardModifierType={}))})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e;(function(t){t[t["Tab"]=9]="Tab";t[t["Enter"]=13]="Enter";t[t["Esc"]=27]="Esc";t[t["Space"]=32]="Space";t[t["Left"]=37]="Left";t[t["Up"]=38]="Up";t[t["Right"]=39]="Right";t[t["Down"]=40]="Down";t[t["q"]=81]="q";t[t["t"]=84]="t";t[t["y"]=89]="y";t[t["z"]=90]="z";t[t["F10"]=121]="F10"})(e=t.KeyCodes||(t.KeyCodes={}))})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.modalCssClass="loadingModal";t.containerLoadingCssClass="containerLoading";return t}();t.CommonConstants=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(i){"use strict";var t=function(){function t(){this.mainContainerCssClass="LoadingIndicator-container";this.loadingIndicatorCssClass="LoadingIndicator"}t.prototype.init=function(t,e,n,o,i,r){if(i===void 0){i="8em"}if(r===void 0){r="4em"}this.parentContainer=t;this.bindElement=e;this.createElement=n;this.createLoadingContainer(o,i,r);this.isVisible=false};t.prototype.show=function(){if(!this.isVisible&&!i.Object.isNullOrUndefined(this.parentContainer)){this.parentContainer.append(this.loadingContainer);this.isVisible=true}};t.prototype.hide=function(){if(this.isVisible&&!i.Object.isNullOrUndefined(this.loadingContainer)){this.loadingContainer.detach();this.isVisible=false}};t.prototype.dispose=function(){if(!i.Object.isNullOrUndefined(this.loadingContainer)){this.loadingContainer.remove()}};t.prototype.createLoadingContainer=function(t,e,n){this.loadingContainer=$("<div />").addClass(t);var o=this.createElement("CONTAINER",{key:this.mainContainerCssClass,id:i.UniqueId.generate(this.mainContainerCssClass),style:{width:"100%",display:"block",overflow:"hidden",height:e,position:"relative","background-color":"transparent"}},this.createElement("PROGRESSINDICATOR",{key:this.loadingIndicatorCssClass,id:i.UniqueId.generate(this.loadingIndicatorCssClass),style:{width:n,height:n,display:"table",margin:"0 auto"},progressType:"ring",active:true},[]));this.bindElement(o,this.loadingContainer[0])};return t}();i.LoadingIndicator=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(e){"use strict";var t=function(){function t(t){this.colorHex=e.String.isNullOrEmpty(t)?"#EFEFEF":t;this.id=e.UniqueId.generate(e.CommonConstants.modalCssClass);this.setBackgroundColor(this.colorHex,.8)}t.prototype.getLoadingIcon=function(){return"data:image/gif;base64,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"};t.prototype.show=function(){if(!e.Object.isNullOrUndefined(this.container)){this.element.show();this.container.addClass(e.CommonConstants.containerLoadingCssClass)}};t.prototype.hide=function(){if(!e.Object.isNullOrUndefined(this.container)){this.element.hide();this.container.removeClass(e.CommonConstants.containerLoadingCssClass);this.eventBroker.notify(e.EventConstants.loadingCompleted)}};t.prototype.isVisible=function(){return this.container.hasClass(e.CommonConstants.containerLoadingCssClass)};t.prototype.setBackgroundColor=function(t,e){this.colorHex=t;this.alphaLevel=this.getValidAlphaLevel(e)};t.prototype.init=function(t,e){this.container=t;this.addLoadingModal();this.eventBroker=e};t.prototype.addLoadingModal=function(){if(!e.Object.isNullOrUndefined(this.container)){this.container.css("position","relative");this.element=this.getHtmlElement();this.element.hide();this.container.append(this.element)}};t.prototype.dispose=function(){if(!e.Object.isNullOrUndefined(this.container)){this.container.find("#"+this.id).remove()}};t.prototype.getHtmlElement=function(){var t=$("<div>");t.attr("id",this.id);t.addClass(e.CommonConstants.modalCssClass);t.css("background",this.getCssBackgroundValue());t.css("opacity",this.alphaLevel);return t};t.prototype.getCssBackgroundValue=function(){return e.String.Format(t.cssBackgroundValueFormat,this.colorHex,this.getLoadingIcon())};t.prototype.getValidAlphaLevel=function(t){var e=t;if(t<0){e=0}else if(t>1){e=1}return e};t.cssBackgroundValueFormat="{0} url('{1}') 50% 50% no-repeat";return t}();e.LoadingModal=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.loadingCompleted="LoadingCompleted";return t}();t.EventConstants=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(s){"use strict";var t=function(l){__extends(t,l);function t(t,e,n,o){if(n===void 0){n=false}var i=l.call(this,{},e,n,o)||this;i.labelPromisesArray=t;i.labelsArray=[];var r=function(e){a.labelsArray.push({});var t=a.labelPromisesArray[e];t.done(function(t){i.labelsArray[e]=t})};var a=this;for(var s=0;s<i.labelPromisesArray.length;++s){r(s)}return i}t.prototype.registerLabels=function(t){this.labelsArray.push(t)};t.prototype.fullyInitialized=function(){var t=$.Deferred();$.when.apply($,this.labelPromisesArray).always(function(){return t.resolve()});return t};t.prototype.getLocalizedString=function(t,e){var n=t;for(var o=this.labelsArray.length-1;o>=0;o--){var i=this.labelsArray[o];if(t in i){n=i[t];if(e){n=this.stringFormatItems(n,e)}return n}}if(this.logger){var r="MktSvc.Controls.Common.ChainedLocalizationProvider.getLocalizedString";var a=new s.Dictionary({Key:t,LocaleId:this.localeId});this.logger.log(s.TraceLevel.Warning,r,a)}return n};return t}(s.LocalizationProvider);s.ChainedLocalizationProvider=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(r){var t;(function(t){var e;(function(i){"use strict";var t=function(){function t(t,e){this.logger=t;this.clientBaseUrl=e}t.prototype.createServiceSourceLabelsProvider=function(t,e){var n=new r.Controls.Common.UrlBuilder(this.clientBaseUrl);n.appendSubPath(i.UrlConstants.marketingServiceCall);var o=new r.Controls.Common.ODataServiceClient(this.logger);return new i.ServiceSourceLabelsProvider(n,o,t,e,this.logger)};return t}();i.ServiceSourceLabelsProviderFactory=t})(e=t.Common||(t.Common={}))})(t=r.Controls||(r.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(a){var t;(function(t){var e;(function(t){"use strict";var e=function(){function r(t,e,n){this.logger=t;this.assertEventName=e;this.logFixedParameters=n}r.prototype.assert=function(t,e,n,o){if(e!==n){var i=this.logFixedParameters.clone();i.addOrUpdate(r.AssertMethod,"assert");i.addOrUpdate(r.AssertKey,t);i.addOrUpdate(r.Expected,e);i.addOrUpdate(r.Actual,n);if(o){i=i.concat(o)}this.logger.log(a.Controls.Common.TraceLevel.Error,this.assertEventName,i);return false}return true};r.prototype.assertValueDefined=function(t,e,n){if(e===null||e===undefined){var o=this.logFixedParameters.clone();o.addOrUpdate(r.AssertMethod,"assertDefined");o.addOrUpdate(r.AssertKey,t);o.addOrUpdate(r.Actual,e);if(n){o=o.concat(n)}this.logger.log(a.Controls.Common.TraceLevel.Error,this.assertEventName,o);return false}return true};r.AssertMethod="AssertMethod";r.AssertKey="AssertKey";r.Expected="Expected";r.Actual="Actual";return r}();t.LoggerAsserter=e})(e=t.Common||(t.Common={}))})(t=a.Controls||(a.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.ReponseLengthKey="ResponseLength";t.ResponseStatusKey="ResponseStatus";t.LoggerError="LoggerError";t.Message="Message";t.ErrorCode="ErrorCode";t.ErrorMessage="ErrorMessage";t.ErrorDetails="ErrorDetails";return t}();t.ParameterKeys=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(o){"use strict";var t=function(n){__extends(t,n);function t(t){var e=n.call(this,t)||this;e.logicalNameKey="{logicalName}";e.appendSubPath("api/data/v9.0/EntityDefinitions"+e.logicalNameKey);e.setEntityLogicalName(o.String.Empty);return e}t.prototype.setEntityLogicalName=function(t){var e=o.String.isNullUndefinedOrWhitespace(t)?o.String.Empty:"(LogicalName='"+t+"')";this.setFormatParameter(this.logicalNameKey,e)};return t}(o.UrlBuilder);o.EntityDefinitionsUrlBuilder=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(i){"use strict";var t=function(o){__extends(t,o);function t(t,e){var n=o.call(this,t)||this;n.recordIdKey="{recordIdKey}";n.appendSubPath("api/data/v8.2/"+e+n.recordIdKey);n.setRecordId(i.String.Empty);return n}t.prototype.setRecordId=function(t){var e=i.String.isNullUndefinedOrWhitespace(t)?i.String.Empty:"("+t+")";this.setFormatParameter(this.recordIdKey,e)};t.prototype.setSelectedFields=function(t){if(!t||t.length===0){this.setQueryString(i.String.Empty)}else{var e="$select="+t[0];for(var n=1;n<t.length;n++){e+=","+t[n]}this.setQueryString(e)}};return t}(i.UrlBuilder);i.EntityRecordUrlBuilder=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(e){"use strict";var t=function(){function t(t){this.baseUrl=t}t.prototype.createEntityRecordUrlBuilder=function(t){return new e.EntityRecordUrlBuilder(this.baseUrl,t)};return t}();e.UrlBuilderFactory=t})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict"})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}return t}();t.IMarketingServiceRequest=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.marketingServiceCall="api/data/v8.0/msdyncrm_MarketingServiceCall";return t}();t.UrlConstants=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function e(t){if(typeof t==="string"){this.guid=t.replace(/[{()}]/g,"");if(!/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(this.guid)){this.guid=e.GetNullGuid()}}else{this.guid=e.GetNullGuid()}}e.prototype.ToStringParentheses=function(){return"("+this.guid+")"};e.prototype.ToStringBraces=function(){return"{"+this.guid+"}"};e.prototype.ToString=function(){return this.guid};e.GetNullGuid=function(){return"00000000-0000-0000-0000-000000000000"};return e}();t.Guid=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.push=function(t){this.addAt(t,0)};e.prototype.pop=function(){return this.data.pop()};return e}(t.ArrayQuery);t.Queue=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvc;(function(t){var e;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.newGuid=function(t){return t+"xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})};return t}();t.ControlGuidGenerator=e})(e=t.Common||(t.Common={}))})(e=t.Controls||(t.Controls={}))})(MktSvc||(MktSvc={}));"use strict";var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n]};return function(t,e){o(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(a){"use strict";var t=function(){function o(t){this.OnRenderEvent=new a.JSEvent;this.OnItemRenderEvent=new a.JSEvent;this.isGridLayout=a.Utils.Object.isNullOrUndefined(t)?true:t}o.SetTabIndex=function(t,e){t.attr(o.tabIndexAttribute,e===undefined?0:e)};o.prototype.initialize=function(t){var e=this;this.accessibleList=t;this.OnRenderEvent.Add(function(t){e.onListRenderedHandler(t)});this.OnItemRenderEvent.Add(function(t){e.onItemRenderedHandler(t)})};o.prototype.dispose=function(){this.accessibleList.onRenderedEvent.RemoveAllListeners();this.accessibleList.onItemRenderedEvent.RemoveAllListeners();if(!a.Utils.Object.isNullOrUndefined(this.itemsList)){this.itemsList.forEach(function(t){t.getJQueryElement().off("keydown.baseAccessibleList")})}if(!a.Utils.Object.isNullOrUndefined(this.listContainer)){this.listContainer.off("keydown.baseAccessibleList")}this.accessibleList=null;this.itemsList=null;this.listContainer=null};o.prototype.onListRenderedHandler=function(t){var e=this;this.listContainer=t;this.itemsList=this.accessibleList.getAllAccessibleItems();o.SetTabIndex(t);t.off("keydown.baseAccessibleList");t.on("keydown.baseAccessibleList",function(t){return e.handlerInnerContainerKeyDown(t)})};o.prototype.onItemRenderedHandler=function(e){var n=this;var t=e.getJQueryElement();o.SetTabIndex(t,-1);t.off("keydown.baseAccessibleList");t.on("keydown.baseAccessibleList",function(t){return n.handlerItemControlKeyDown(t,e)})};o.prototype.handlerInnerContainerKeyDown=function(t){if(t.keyCode!==a.KeyCodes.Left&&t.keyCode!==a.KeyCodes.Up&&t.keyCode!==a.KeyCodes.Right&&t.keyCode!==a.KeyCodes.Down){return}if(t.altKey||t.shiftKey||t.ctrlKey||this.itemsList.length===0){return}var e=this.accessibleList.getSelectedAccesibleItem();if(!a.Utils.Object.isNullOrUndefined(e)){this.handlerItemControlKeyDown(t,e);return}var n=0;switch(t.keyCode){case a.KeyCodes.Right:case a.KeyCodes.Down:n=0;break;case a.KeyCodes.Left:case a.KeyCodes.Up:n=this.itemsList.length-1;break}var o=this.itemsList[n];o.focus()};o.prototype.handlerItemControlKeyDown=function(t,n){if(t.keyCode!==a.KeyCodes.Enter&&t.keyCode!==a.KeyCodes.Space&&t.keyCode!==a.KeyCodes.Left&&t.keyCode!==a.KeyCodes.Up&&t.keyCode!==a.KeyCodes.Right&&t.keyCode!==a.KeyCodes.Down){return}if(t.altKey||t.shiftKey||t.ctrlKey||!this.itemsList.length){return}var o=-1;this.itemsList.some(function(t,e){if(n.getJQueryElement()===t.getJQueryElement()){o=e;return true}});var e=0;switch(t.keyCode){case a.KeyCodes.Space:case a.KeyCodes.Enter:this.itemsList[o].click();break;case a.KeyCodes.Right:e=o+1;if(e>=this.itemsList.length){e=0}this.itemsList[e].focus();break;case a.KeyCodes.Left:e=o-1;if(e<0){e=this.itemsList.length-1}this.itemsList[e].focus();break;case a.KeyCodes.Up:case a.KeyCodes.Down:if(this.isGridLayout){var i=this.itemsList[0];var r=0;this.itemsList.forEach(function(t,e,n){if(t.getJQueryElement().position().top===i.getJQueryElement().position().top){r++}});if(this.itemsList.length===r){break}e=t.keyCode===a.KeyCodes.Up?o-r:o+r}else{e=t.keyCode===a.KeyCodes.Up?0:-1}if(e<0){e=this.itemsList.length-1}else if(e>=this.itemsList.length){if(n.getJQueryElement().position().top===this.itemsList[this.itemsList.length-1].getJQueryElement().position().top){e=0}else{e=this.itemsList.length-1}}this.itemsList[e].focus();break}t.stopPropagation()};o.tabIndexAttribute="tabindex";return o}();a.KeyboardAccessibilityManager=t})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(){function t(t){this.itemInnerContainer=t}t.prototype.focus=function(){this.itemInnerContainer.focus()};t.prototype.getJQueryElement=function(){return this.itemInnerContainer};t.prototype.click=function(){this.itemInnerContainer.click()};return t}();t.AccessibleItem=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(){function t(){}t.ApiPathV81="/api/data/v8.1";t.ApiPathV82="/api/data/v8.2";t.ApiPathV90="/api/data/v9.0";t.OdataUrlMask="{0}{1}/{2}";t.OdataUrlMaskWithFilterExpression="{0}{1}/{2}?$filter={3}";t.OdataUrlMaskWithSelectExpression="{0}{1}/{2}?$select={3}";t.OdataUrlMaskWithId="{0}{1}/{2}({3})";t.OdataUrlMaskForRelationshipEntity="{0}{1}/{2}({3})/{4}/$ref";t.FileEntityLogicalName="msdyncrm_files";t.KeywordEntityLogicalName="msdyncrm_keywords";t.KeywordFileNavigationLogicalName="msdyncrm_msdyncrm_keyword_msdyncrm_file";t.FileEntityNamePropertyField="msdyncrm_name";t.FileEntityWidthPropertyField="msdyncrm_width";t.FileEntityHeightPropertyField="msdyncrm_height";t.FileEntityRethumbnailPropertyField="msdyncrm_rethumbnail";t.KeywordEntityNamePropertyField="msdyncrm_name";t.RelationshipNamePropertyField="@odata.id";t.OdataEntityIdHeader="OData-EntityId";t.ODataCommunityDisplayV1FormattedValue="OData.Community.Display.V1.FormattedValue";return t}();t.WebApiConstants=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(n){"use strict";var t=function(){function r(t){this.data=t}r.prototype.set=function(t,e){this.data[e]=t};r.prototype.get=function(t){return this.data[t]};r.prototype.add=function(t){this.data.push(t)};r.prototype.addRange=function(t){return new r(this.data.concat(t))};r.prototype.removeAt=function(t){this.data.splice(t,1)};r.prototype.remove=function(t){var e=true;while(e){var n=this.data.indexOf(t);if(n>-1){this.removeAt(n)}else{e=false}}};r.prototype.select=function(t){var e=[];for(var n=0;n<this.data.length;n++){var o=t(this.data[n],n);e.push(o)}return new r(e)};r.prototype.reverseEach=function(t){for(var e=this.data.length-1;e>=0;e--){t(this.data[e],e)}return this};r.prototype.each=function(t){for(var e=0;e<this.data.length;e++){t(this.data[e],e)}return this};r.prototype.where=function(t){var e=[];for(var n=0;n<this.data.length;n++){if(t(this.data[n])){e.push(this.data[n])}}return new r(e)};r.prototype.firstOrDefault=function(t){if(n.Object.isNullOrUndefined(t)){if(this.items().length>0){return this.items()[0]}else{return null}}var e=this.where(t).items();if(e.length>0){return e[0]}return null};r.prototype.contains=function(t){return this.firstOrDefault(t)!=null};r.prototype.items=function(){return this.data};r.prototype.count=function(){return this.data.length};r.prototype.distinct=function(t){var e=[];for(var n=0;n<this.data.length;n++){var o=false;for(var i=0;i<e.length;i++){if(t(this.data[n],e[i])){o=true;break}}if(!o){e.push(this.data[n])}}return new r(e)};r.prototype.clear=function(){this.data=[]};return r}();n.ArrayQuery=t})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(o){"use strict";var t=function(){function t(){}t.prototype.createScriptElementFromUrl=function(t,e,n){return o.DomUtils.createScriptElementFromUrl(t,e,n)};t.prototype.createStyleSheetLinkElementFromUrl=function(t,e){return o.DomUtils.createStyleSheetLinkElementFromUrl(t,e)};t.prototype.getScriptElements=function(t){return o.DomUtils.getScriptElements(t)};return t}();o.DomUtilsInstance=t})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
// <copyright file="DomUtils.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){var e;(function(o){"use strict";var l='<div><iframe src="about:blank" style="width:1024px;height:10000px;" frameBorder="0" sandbox="allow-same-origin" tabindex="-1"></iframe></div>';var t=function(){function r(){}r.getInstance=function(){return r.domUtilsInstance};r.renderHtmlInChildIframe=function(t,e,n){var o=$(l);var i=o.find("iframe").get(0);t.append(o);i.onload=function(){i.onload=null;var t=i.contentWindow;t.document.open("text/html","replace");t.document.write(e);t.document.close()};i.src="about:blank";o.css("position","absolute");var r=t.width();var a=$(i).width();var s=r/a;o.css("overflow","visible");o.css("transform","scale("+s+")");o.css("transform-origin","0 0")};r.createScriptElementFromUrl=function(t,e,n){var o=r.getDocOrCurrent(n);var i=o.createElement("script");i.setAttribute("type","text/javascript");i.setAttribute("src",e);i.setAttribute("id",t);return i};r.createStyleSheetLinkElementFromUrl=function(t,e){var n=r.getDocOrCurrent(e);var o=n.createElement("link");o.setAttribute("href",t);o.setAttribute("rel","stylesheet");return o};r.getScriptElements=function(t){var e=r.getDocOrCurrent(t);var n=e.getElementsByTagName("script");var o=new Array(n.length);for(var i=0;i<n.length;++i){o[i]=n[i]}return o};r.stylesheetLinkElementExists=function(t,e){return this.elementExists("link[href$='/"+t+"']",e)};r.scriptElementExists=function(t,e,n){var o="script[src$='/"+t+"'][id$='"+e+"']";return this.elementExists(o,n)};r.elementExists=function(t,e){var n=r.getDocOrCurrent(e);return!o.Object.isNullOrUndefined(n.querySelector(t))};r.getDocOrCurrent=function(t){return o.Object.isNullOrUndefined(t)?document:t};r.domUtilsInstance=new o.DomUtilsInstance;return r}();o.DomUtils=t})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.isNullOrUndefined=function(t){return typeof t==="undefined"||t==null};return t}();t.Object=e})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.isNullOrEmpty=function(t){return t==null||t.length===0};t.isNullOrWhitespace=function(t){return t==null||t.trim().length===0};t.isNullUndefinedOrWhitespace=function(t){return t==null||t===undefined||t.trim().length===0};t.Format=function(t){var e=[];for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}var o=t;for(var i=1;i<arguments.length;i++){var r=typeof arguments[i]==="undefined"||arguments[i]==null?"":arguments[i].toString();o=o.replace(new RegExp("\\{"+(i-1)+"\\}","g"),r)}return o};t.EqualsIgnoreCase=function(t,e){var n=t==null;var o=e==null;var i=t===undefined;var r=e===undefined;if(n&&o||i&&r){return true}if(n!==o||i!==r){return false}return t.toUpperCase()===e.toUpperCase()};t.ReplaceLineBreaksWithBrTags=function(t){return t.replace(/(?:\r\n|&#13;&#10;|\r|&#13;|\n|&#10;)/g,"<br />")};t.Empty="";return t}();t.String=e})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(n){"use strict";var t=function(){function t(t){this.dictionary={};if(!n.Object.isNullOrUndefined(t)){this.dictionary=t}}t.prototype.addOrUpdate=function(t,e){this.dictionary[t]=e};t.prototype.get=function(t){return this.dictionary[t]};t.prototype.getValues=function(){var t=new n.ArrayQuery([]);for(var e in this.dictionary){t.add(this.dictionary[e])}return t};t.prototype.hasKey=function(t){return this.dictionary.hasOwnProperty(t)};t.prototype.isEmpty=function(){for(var t in this.dictionary){if(this.dictionary.hasOwnProperty(t)){return false}}return true};t.prototype.toJsonString=function(){return JSON.stringify(this.dictionary)};return t}();n.Dictionary=t})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict"})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(i){"use strict";var r=i.Utils.String;var t=function(){function t(t,e){this.nullParameterErrorMessage="Argument must not be null";this.baseUrlPart=t;this.apiVersionPart=e}t.prototype.GetODataUrl=function(t){if(i.Utils.String.isNullUndefinedOrWhitespace(t)){console.log(this.nullParameterErrorMessage+"entityName")}var e=r.Format(i.WebApiConstants.OdataUrlMask,this.baseUrlPart,this.apiVersionPart,t);return e};t.prototype.GetODataUrlWithFilter=function(t,e){if(i.Utils.String.isNullUndefinedOrWhitespace(t)){console.log(this.nullParameterErrorMessage+"entityName")}if(i.Utils.String.isNullUndefinedOrWhitespace(e)){console.log(this.nullParameterErrorMessage+"filterExpression")}var n=r.Format(i.WebApiConstants.OdataUrlMaskWithFilterExpression,this.baseUrlPart,this.apiVersionPart,t,e);return n};t.prototype.GetODataUrlWithSelect=function(t,e){if(i.Utils.String.isNullUndefinedOrWhitespace(t)){console.log(this.nullParameterErrorMessage+"entityName")}if(i.Utils.String.isNullUndefinedOrWhitespace(e)){console.log(this.nullParameterErrorMessage+"selectExpression")}var n=r.Format(i.WebApiConstants.OdataUrlMaskWithSelectExpression,this.baseUrlPart,this.apiVersionPart,t,e);return n};t.prototype.GetODataUrlWithId=function(t,e){if(i.Utils.String.isNullUndefinedOrWhitespace(t)){console.log(this.nullParameterErrorMessage+"entityName")}if(i.Utils.String.isNullUndefinedOrWhitespace(e)){console.log(this.nullParameterErrorMessage+"entityId")}var n=r.Format(i.WebApiConstants.OdataUrlMaskWithId,this.baseUrlPart,this.apiVersionPart,t,e);return n};t.prototype.GetOdataUrlForRelationshipEntity=function(t,e,n){if(i.Utils.String.isNullUndefinedOrWhitespace(t)){console.log(this.nullParameterErrorMessage+"entityName")}if(i.Utils.String.isNullUndefinedOrWhitespace(e)){console.log(this.nullParameterErrorMessage+"entityId")}if(i.Utils.String.isNullUndefinedOrWhitespace(n)){console.log(this.nullParameterErrorMessage+"relationshipEntityName")}var o=r.Format(i.WebApiConstants.OdataUrlMaskForRelationshipEntity,this.baseUrlPart,this.apiVersionPart,t,e,n);return o};return t}();i.OdataUrlHelper=t})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(s){"use strict";var t=function(){function t(){}t.prototype.PostRequest=function(t,e,n,o,i){var r=this;var a=new XMLHttpRequest;a.open("POST",t,true);a.setRequestHeader("Accept","application/json");a.setRequestHeader("Content-Type","application/json; charset=utf-8");this.processOptions(a,i);a.onreadystatechange=function(){if(this.readyState===4){a.onreadystatechange=null;if(this.status===204||this.status===200){var t=this.getResponseHeader(s.WebApiConstants.OdataEntityIdHeader);n(t)}else{if(s.Utils.Object.isNullOrUndefined(o)){r.DefaultErrorCallback(this.responseText)}else{o(this.responseText)}}}};a.send(e)};t.prototype.GetRequest=function(t,e,n,o){var i=this;var r=new XMLHttpRequest;r.open("GET",t,true);r.setRequestHeader("Accept","application/json");r.setRequestHeader("Content-Type","application/json; charset=utf-8");this.processOptions(r,o);r.onreadystatechange=function(){if(this.readyState===4){r.onreadystatechange=null;if(this.status===200){e(this.response)}else{if(s.Utils.Object.isNullOrUndefined(n)){i.DefaultErrorCallback(this.responseText)}else{n(this.responseText,this.status)}}}};r.send()};t.prototype.DeleteRequest=function(t,e,n){var o=this;var i=new XMLHttpRequest;i.open("DELETE",t,true);i.setRequestHeader("Accept","application/json");i.setRequestHeader("Content-Type","application/json; charset=utf-8");i.onreadystatechange=function(){if(this.readyState===4){i.onreadystatechange=null;if(this.status===204||this.status===200){e(this.response)}else{if(s.Utils.Object.isNullOrUndefined(n)){o.DefaultErrorCallback(this.responseText)}else{n(this.responseText)}}}};i.send()};t.prototype.PatchRequest=function(t,e,n,o){var i=this;var r=new XMLHttpRequest;r.open("PATCH",t,true);r.setRequestHeader("Accept","application/json");r.setRequestHeader("Content-Type","application/json; charset=utf-8");r.onreadystatechange=function(){if(this.readyState===4){r.onreadystatechange=null;if(this.status===204||this.status===200){n()}else{if(s.Utils.Object.isNullOrUndefined(o)){i.DefaultErrorCallback(this.responseText)}else{o(this.responseText)}}}};r.send(e)};t.prototype.DefaultErrorCallback=function(t){console.log(t)};t.prototype.processOptions=function(t,e){if(e){if(e.includeAnnotations){t.setRequestHeader("Prefer","odata.include-annotations="+s.WebApiConstants.ODataCommunityDisplayV1FormattedValue)}if(e.pageSize){t.setRequestHeader("Prefer","odata.maxpagesize="+e.pageSize)}}};return t}();s.WebApiAjaxHelper=t})(ControlsCommon||(ControlsCommon={}));
// <copyright file="DataProvider.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(e){"use strict";var i=e.Utils.Object;var n=e.Utils.String;var l="/api/data/v9.0/";var t=function(){function s(){}s.GetOptionSetValues=function(e,n,o){if(s.optionSetsCache[e]){n(s.optionSetsCache[e]);return}var t=""+s.getClientUrl()+l+"GlobalOptionSetDefinitions(Name='"+e+"')";var i=function(t){s.optionSetsCache[e]=t;n(t)};var r=function(t){console.log(t);if(o){o(t)}};s.callWebApi(t,i,r)};s.GetData=function(t,e,n,o){var i=t;if(e&&e.length>0){i+="?$select="+e.join(",")}var r=s.getClientUrl()+l;var a=r+i;s.callWebApi(a,n,o)};s.callWebApi=function(t,e,n){var o=new XMLHttpRequest;o.open("get",t,true);o.onreadystatechange=function(){if(o.readyState===s.xmlHttpCompletedState){if(o.status===s.httpStatusOk){var t=JSON.parse(o.responseText);if(!i.isNullOrUndefined(e)){e(t)}}else{if(!i.isNullOrUndefined(n)){n(o.status)}}}};o.send()};s.getClientUrl=function(){var t=e.Utils.ContextProvider.get();try{return t.getClientUrl()}catch(t){return n.Empty}};s.httpStatusOk=200;s.xmlHttpCompletedState=4;s.optionSetsCache={};return s}();e.DataProvider=t})(ControlsCommon||(ControlsCommon={}));
// <copyright file="IViewItem.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
// <copyright file="PreviewAttribute.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){"use strict";var e=function(){function t(t,e){this.Name=t;this.Value=e}return t}();t.PreviewAttribute=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(){function t(t,e){this.odataUrlHelper=t;this.ajaxHelper=e}t.prototype.CreateAsync=function(t,e,n){var o=this.GetEntityLogicalName();var i=this.odataUrlHelper.GetODataUrl(o);var r=this.GetCreateEntityJson(t);this.ajaxHelper.PostRequest(i,r,e,n)};t.prototype.CreateRelationshipAsync=function(t,e,n,o,i,r){var a=this.GetEntityLogicalName();var s=this.odataUrlHelper.GetOdataUrlForRelationshipEntity(a,t,o);var l=this.odataUrlHelper.GetODataUrlWithId(n,e);var c=this.GetCreateRelationshipEntityJson(l);this.ajaxHelper.PostRequest(s,c,i,r)};t.prototype.GetByIdAsync=function(t,e,n){var o=this.GetEntityLogicalName();var i=this.odataUrlHelper.GetODataUrlWithId(o,t);this.ajaxHelper.GetRequest(i,e,n)};t.prototype.GetListAsync=function(t,e){var n=this.GetEntityLogicalName();var o=this.odataUrlHelper.GetODataUrl(n);this.ajaxHelper.GetRequest(o,t,e)};t.prototype.DeleteByIdAsync=function(t,e,n){var o=this.GetEntityLogicalName();var i=this.odataUrlHelper.GetODataUrlWithId(o,t);this.ajaxHelper.DeleteRequest(i,e,n)};t.prototype.UpdateAsync=function(t,e,n,o){var i=this.GetEntityLogicalName();var r=this.odataUrlHelper.GetODataUrlWithId(i,t);var a=this.GetUpdateEntityJson(e);this.ajaxHelper.PatchRequest(r,a,n,o)};t.prototype.GetCreateEntityJson=function(t){var e=JSON.stringify(t);return e};t.prototype.GetCreateRelationshipEntityJson=function(t){var e=JSON.stringify(t);return e};t.prototype.GetUpdateEntityJson=function(t){var e=JSON.stringify(t);return e};return t}();t.BaseEntityRepository=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(o){"use strict";var t=function(n){__extends(t,n);function t(t,e){return n.call(this,t,e)||this}t.prototype.GetEntityLogicalName=function(){return o.WebApiConstants.FileEntityLogicalName};t.prototype.GetCreateEntityJson=function(t){var e={};e[o.WebApiConstants.FileEntityNamePropertyField]=t.msdyncrm_name;e[o.WebApiConstants.FileEntityWidthPropertyField]=t.msdyncrm_width;e[o.WebApiConstants.FileEntityHeightPropertyField]=t.msdyncrm_height;var n=JSON.stringify(e);return n};t.prototype.GetCreateRelationshipEntityJson=function(t){var e={};e[o.WebApiConstants.RelationshipNamePropertyField]=t;var n=JSON.stringify(e);return n};return t}(o.BaseEntityRepository);o.FileRepository=t})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(){function t(){}return t}();t.BaseEntity=e})(ControlsCommon||(ControlsCommon={}));
// <copyright file="FilterInfo.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){"use strict";var e=function(){function t(){}return t}();t.FilterInfo=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(t.BaseEntity);t.FileEntity=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(t.BaseEntity);t.KeywordEntity=e})(ControlsCommon||(ControlsCommon={}));
// <copyright file="JSEvent.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){var o=function(){function t(){}return t}();t.JSEventListener=o;var e=function(){function t(){this.listeners=[]}t.prototype.Add=function(t,e){if(!(typeof t==="function")){return}var n=new o;n.listener=t;n.context=e;this.listeners.push(n)};t.prototype.Remove=function(t){for(var e=0;e<this.listeners.length;e++){if(this.listeners[e].listener===t){this.listeners.splice(e,1)}}};t.prototype.RemoveAllListeners=function(){this.listeners=[]};t.prototype.Trigger=function(t){var e=this.listeners.slice(0);for(var n=0;n<e.length;n++){var o=e[n];o.listener.apply(o.context,[t])}};return t}();t.JSEvent=e;var n=function(){function t(){}return t}();t.EmptyEventArgs=n;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.Trigger=function(){t.prototype.Trigger.call(this,new n)};return e}(e);t.EmptyEventArgsEvent=i})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var o;(function(t){t[t["LTR"]=0]="LTR";t[t["RTL"]=1]="RTL"})(o=t.LocaleOrientation||(t.LocaleOrientation={}));var e=function(){function t(t,e,n){if(n===void 0){n=o.LTR}this.Language="";this.ShortCode="";this.Language=t;this.ShortCode=e;this.Orientation=n}return t}();t.LocaleMetadataItem=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(r){"use strict";var t=function(){function i(){}i.prototype.GetLocaleMetadataItemByLcid=function(t){var e=new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR);if(i.cache.isEmpty()){this.loadCache()}var n=t.toString();if(i.cache.hasKey(n)){var o=i.cache.get(n);if(!r.Utils.Object.isNullOrUndefined(o)){return o}}return e};i.prototype.loadCache=function(){i.cache.addOrUpdate("1078",new r.LocaleMetadataItem("Afrikaans","af",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1052",new r.LocaleMetadataItem("Albanian","sq",r.LocaleOrientation.LTR));i.cache.addOrUpdate("5121",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("15361",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("3073",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("2049",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("11265",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("13313",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("12289",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("4097",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("6145",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("8193",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("16385",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("1025",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("10241",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("7169",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("14337",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("9217",new r.LocaleMetadataItem("Arabic","ar",r.LocaleOrientation.RTL));i.cache.addOrUpdate("1067",new r.LocaleMetadataItem("Armenian","hy",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2092",new r.LocaleMetadataItem("Azeri (Cyrillic)","az",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1068",new r.LocaleMetadataItem("Azeri (Latin)","az",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1069",new r.LocaleMetadataItem("Basque","eu",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1059",new r.LocaleMetadataItem("Belarusian","be",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1026",new r.LocaleMetadataItem("Bulgarian","bg",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1027",new r.LocaleMetadataItem("Catalan","ca",r.LocaleOrientation.LTR));i.cache.addOrUpdate("3076",new r.LocaleMetadataItem("Chinese","zh",r.LocaleOrientation.LTR));i.cache.addOrUpdate("5124",new r.LocaleMetadataItem("Chinese","zh",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2052",new r.LocaleMetadataItem("Chinese","zh",r.LocaleOrientation.LTR));i.cache.addOrUpdate("4100",new r.LocaleMetadataItem("Chinese","zh",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1028",new r.LocaleMetadataItem("Chinese","zh",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1050",new r.LocaleMetadataItem("Croatian","hr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1029",new r.LocaleMetadataItem("Czech","cs",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1030",new r.LocaleMetadataItem("Danish","da",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1125",new r.LocaleMetadataItem("Divehi","dv",r.LocaleOrientation.RTL));i.cache.addOrUpdate("2067",new r.LocaleMetadataItem("Dutch","nl",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1043",new r.LocaleMetadataItem("Dutch","nl",r.LocaleOrientation.LTR));i.cache.addOrUpdate("3081",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("10249",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("4105",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("9225",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("6153",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("8201",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("5129",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("13321",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("7177",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("11273",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2057",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1033",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("12297",new r.LocaleMetadataItem("English","en",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1061",new r.LocaleMetadataItem("Estonian","et",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1080",new r.LocaleMetadataItem("Faroese","fo",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1065",new r.LocaleMetadataItem("Farsi","fa",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1035",new r.LocaleMetadataItem("Finnish","fi",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2060",new r.LocaleMetadataItem("French","fr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("3084",new r.LocaleMetadataItem("French","fr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1036",new r.LocaleMetadataItem("French","fr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("5132",new r.LocaleMetadataItem("French","fr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("6156",new r.LocaleMetadataItem("French","fr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("4108",new r.LocaleMetadataItem("French","fr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1071",new r.LocaleMetadataItem("FYRO Macedonian","mk",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1110",new r.LocaleMetadataItem("Galician","gl",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1079",new r.LocaleMetadataItem("Georgian","ka",r.LocaleOrientation.LTR));i.cache.addOrUpdate("3079",new r.LocaleMetadataItem("German","de",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1031",new r.LocaleMetadataItem("German","de",r.LocaleOrientation.LTR));i.cache.addOrUpdate("5127",new r.LocaleMetadataItem("German","de",r.LocaleOrientation.LTR));i.cache.addOrUpdate("4103",new r.LocaleMetadataItem("German","de",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2055",new r.LocaleMetadataItem("German","de",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1032",new r.LocaleMetadataItem("Greek","el",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1095",new r.LocaleMetadataItem("Gujarati","gu",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1037",new r.LocaleMetadataItem("Hebrew","he",r.LocaleOrientation.RTL));i.cache.addOrUpdate("1081",new r.LocaleMetadataItem("Hindi","hi",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1038",new r.LocaleMetadataItem("Hungarian","hu",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1039",new r.LocaleMetadataItem("Icelandic","is",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1057",new r.LocaleMetadataItem("Indonesian","id",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1040",new r.LocaleMetadataItem("Italian","it",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2064",new r.LocaleMetadataItem("Italian","it",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1041",new r.LocaleMetadataItem("Japanese","ja",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1099",new r.LocaleMetadataItem("Kannada","kn",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1087",new r.LocaleMetadataItem("Kazakh","kk",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1111",new r.LocaleMetadataItem("Konkani","",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1042",new r.LocaleMetadataItem("Korean","ko",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1088",new r.LocaleMetadataItem("Kyrgyz","ky",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1062",new r.LocaleMetadataItem("Latvian","lv",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1063",new r.LocaleMetadataItem("Lithuanian","lt",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2110",new r.LocaleMetadataItem("Malay","ms",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1086",new r.LocaleMetadataItem("Malay","ms",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1102",new r.LocaleMetadataItem("Marathi","mr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1104",new r.LocaleMetadataItem("Mongolian","mn",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1044",new r.LocaleMetadataItem("Norwegian (Bokmål)","nb",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2068",new r.LocaleMetadataItem("Norwegian (Nynorsk)","nn",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1045",new r.LocaleMetadataItem("Polish","pl",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1046",new r.LocaleMetadataItem("Portuguese","pt",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2070",new r.LocaleMetadataItem("Portuguese","pt",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1094",new r.LocaleMetadataItem("Punjabi","pa",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1048",new r.LocaleMetadataItem("Romanian","ro",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1049",new r.LocaleMetadataItem("Russian","ru",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1103",new r.LocaleMetadataItem("Sanskrit","sa",r.LocaleOrientation.LTR));i.cache.addOrUpdate("3098",new r.LocaleMetadataItem("Serbian (Cyrillic)","sr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2074",new r.LocaleMetadataItem("Serbian (Latin)","sr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1051",new r.LocaleMetadataItem("Slovak","sk",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1060",new r.LocaleMetadataItem("Slovenian","sl",r.LocaleOrientation.LTR));i.cache.addOrUpdate("11274",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("16394",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("13322",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("9226",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("5130",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("7178",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("12298",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("17418",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("4106",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("18442",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2058",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("19466",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("6154",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("15370",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("10250",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("20490",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1034",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("14346",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("8202",new r.LocaleMetadataItem("Spanish","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("3082",new r.LocaleMetadataItem("Spanish - Modern Sort","es",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1089",new r.LocaleMetadataItem("Swahili","sw",r.LocaleOrientation.LTR));i.cache.addOrUpdate("2077",new r.LocaleMetadataItem("Swedish","sv",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1053",new r.LocaleMetadataItem("Swedish","sv",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1114",new r.LocaleMetadataItem("Syriac","",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1097",new r.LocaleMetadataItem("Tamil","ta",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1092",new r.LocaleMetadataItem("Tatar","tt",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1098",new r.LocaleMetadataItem("Telugu","te",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1054",new r.LocaleMetadataItem("Thai","th",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1055",new r.LocaleMetadataItem("Turkish","tr",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1058",new r.LocaleMetadataItem("Ukrainian","uk",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1056",new r.LocaleMetadataItem("Urdu","ur",r.LocaleOrientation.RTL));i.cache.addOrUpdate("2115",new r.LocaleMetadataItem("Uzbek (Cyrillic)","uz",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1091",new r.LocaleMetadataItem("Uzbek (Latin)","uz",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1066",new r.LocaleMetadataItem("Vietnamese","vi",r.LocaleOrientation.LTR));i.cache.addOrUpdate("1106",new r.LocaleMetadataItem("Welsh","cy",r.LocaleOrientation.LTR))};i.cache=new r.Utils.Dictionary;return i}();r.LocaleMetadata=t})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(n){"use strict";var t=function(){function t(){this.rltMarkupMask='<bdo dir="rtl">{0}</bdo>'}t.prototype.GetRtlMarkup=function(t,e){if(!n.Utils.Object.isNullOrUndefined(t)&&t.Orientation===n.LocaleOrientation.RTL){return n.Utils.String.Format(this.rltMarkupMask,e)}return e};return t}();n.RtlManager=t})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict";var e=function(){function e(){}e.getXrmNamespace=function(){if(typeof Xrm==="undefined"||Xrm==null||typeof Xrm.Page==="undefined"){var t=document.getElementById(e.XrmFrameId);if(t!=null){return t.contentWindow.Xrm}}return Xrm};e.XrmFrameId="ClientApiFrame_0";return e}();t.XrmProvider=e})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(t,e,n){if(n===void 0){n=null}this.name=t;this.loadPath=e;this.scriptLoadBehavior=n}return t}();t.ScriptDependencyModel=e})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(t,e){this.name=t;this.loadPath=e}return t}();t.StyleSheetDependencyModel=e})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
// <copyright file="CommonReferences.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(){function t(){}t.screenReaderTextCssClass="ms-mktsvc-ScreenReaderText";t.roleAlertElementCssClass="ms-mktsvc-RoleAlertElement";t.emailTemplateGalleryControlClassName="msdyncrm_emailTemplateGalleryControl";return t}();t.ClassNameConstants=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e;(function(t){t[t["Enter"]=13]="Enter";t[t["Space"]=32]="Space";t[t["Left"]=37]="Left";t[t["Up"]=38]="Up";t[t["Right"]=39]="Right";t[t["Down"]=40]="Down"})(e=t.KeyCodes||(t.KeyCodes={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(){function t(){}t.LocalizationFileUrlWithLCIDMask="{0}/WebResources/msdyncrm_/Localizations/{1}";return t}();t.WebResourcesConstants=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(){function t(){}return t}();t.Dependency=e})(ControlsCommon||(ControlsCommon={}));
// <copyright file="IOptionSet.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
// <copyright file="IGridViewItemControl.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict"})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict"})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict";var e=function(){function t(){}t.FileUploadValidationMessageFileTypeNotAllowed="FileUpload_ValidationMessage_FileTypeNotAllowed";t.FileUploadValidationMessageGenericUnknownError="FileUpload_ValidationMessage_GenericUnknownError";t.FileUploadValidationMessageMaxFileSizeExceeded="FileUpload_ValidationMessage_MaxFileSizeExceeded";t.FileUploadValidationMessageMaxNumberOfFilesExceeded="FileUpload_ValidationMessage_MaxNumberOfFilesExceeded";t.FileUploadValidationMessageMinFileSizeNotReached="FileUpload_ValidationMessage_MinFileSizeNotReached";t.FileUploadValidationMessageUploadedFileSizeExceeded="FileUpload_ValidationMessage_UploadedFileSizeExceeded";t.FileUploadValidationMessageIdIsNotValid="FileUpload_ValidationMessage_IdIsNotValid";t.FileUploadValidationMessageFailedToCreateFileWithWebApi="FileUpload_ValidationMessage_FailedToCreateFileWithWebApi";t.FileUploadValidationMessageFailedToCreateFile="FileUpload_ValidationMessage_FailedToCreateFile";t.FileUploadValidationMessageFailedToCreateFileKeywordRelationship="FileUpload_ValidationMessage_FailedToCreateFileKeywordRelationship";t.FileUploadWidgetLabelStartUpload="FileUpload_WidgetLabel_StartUpload";t.FileUploadWidgetLabelDragAPicture="FileUpload_WidgetLabel_DragAPicture";t.FileUploadWidgetLabelOr="FileUpload_WidgetLabel_Or";t.FileUploadWidgetLabelBrowseYourPictureToUpload="FileUpload_WidgetLabel_BrowseYourPictureToUpload";t.FileUploadWidgetLabelProcessing="FileUpload_WidgetLabel_Processing";t.FileUploadWidgetLabelUploading="FileUpload_WidgetLabel_Uploading";t.FileUploadWidgetLabelCancelUpload="FileUpload_WidgetLabel_CancelUpload";t.FileUploadAriaLabelKeywords="FileUpload_AriaLabel_Keywords";t.FileUploadAriaLabelCancel="FileUpload_AriaLabel_Cancel";t.GridViewLabelNoItemFound="GridView_Label_NoItemFound";t.ListViewLayoutAdapterName="ListViewLayoutAdapter_Name";t.ListViewLayoutAdapterStatus="ListViewLayoutAdapter_Status";t.ListViewLayoutAdapterContacts="ListViewLayoutAdapter_Contacts";t.ListViewLayoutAdapterAriaLabelListbox="ListViewLayoutAdapter_AriaLabel_Listbox";t.ImagePickerHeaderTitle="ImagePicker_Header_Title";t.ImagePickerHeaderUploadPicture="ImagePicker_Header_UploadPicture";t.ImagePickerHeaderLibrary="ImagePicker_Header_Library";t.ImagePickerButtonSelect="ImagePicker_Button_Select";t.ImagePickerButtonSave="ImagePicker_Button_Save";t.ImagePickerButtonClose="ImagePicker_Button_Close";t.ImagePickerAriaLabelFacetNavigation="ImagePicker_AriaLabel_FacetNavigation";t.ImagePickerAriaLabelKeywordFilter="ImagePicker_AriaLabel_KeywordFilter";t.ImagePickerControlSearchResultsAlert="ImagePickerControl_SearchResultsAlert";t.KeywordsFilterDropdownPlaceholder="KeywordsFilter_Dropdown_Placeholder";t.KeywordsMoreKeywordsButtonTemplateText="Keywords_More_Keywords_Button_Template_Text";t.KeywordsDropdownPlaceholder="Keywords_Dropdown_Placeholder";t.KeywordsFailedToGetKeywordsList="Keywords_Failed_To_Get_Keywords_List";t.GalleryControlButtonSelect="GalleryControl_Button_Select";t.GalleryControlButtonCancel="GalleryControl_Button_Cancel";t.GalleryControlButtonCloseName="GalleryControl_Button_Close_Name";t.GalleryControlSearchResultsAlert="GalleryControl_SearchResultsAlert";t.GalleryControlAriaLabelLeftPane="GalleryControl_AriaLabel_LeftPane";t.GalleryControlAriaLabelRightPane="GalleryControl_AriaLabel_RightPane";t.BaseGalleryLabelNotDefined="BaseGallery_Label_NotDefined";t.BaseGalleryLabelAll="BaseGallery_Label_All";t.BaseGalleryLabelRecentlyUsed="BaseGallery_Label_RecentlyUsed";t.BaseGalleryLabelSelect="BaseGallery_Label_Select";t.BaseGalleryLabelSelectTitle="BaseGallery_Label_Select_Title";t.BaseGalleryAriaLabelSelectTemplateSuffix="AriaLabel_SelectTemplate";t.EmailTemplateGalleryFacetLabelPurpose="EmailTemplateGallery_FacetLabel_Purpose";t.EmailTemplateGalleryFacetLabelOptimizedFor="EmailTemplateGallery_FacetLabel_OptimizedFor";t.EmailTemplateGalleryFacetLabelMarketType="EmailTemplateGallery_FacetLabel_MarketType";t.EmailTemplateGalleryFacetLabelVisualStyle="EmailTemplateGallery_FacetLabel_VisualStyle";t.EmailTemplateGalleryLabelTitle="EmailTemplateGallery_Label_Title";t.EmailTemplateGalleryPreviewAttributeName="EmailTemplateGallery_PreviewAttribute_Name";t.EmailTemplateGalleryPreviewAttributeType="EmailTemplateGallery_PreviewAttribute_Type";t.EmailTemplateGalleryPreviewAttributeCreatedBy="EmailTemplateGallery_PreviewAttribute_CreatedBy";t.EmailTemplateGalleryPreviewAttributeLastModified="EmailTemplateGallery_PreviewAttribute_LastModified";t.EmailTemplateGalleryPreviewAttributeLastUsed="EmailTemplateGallery_PreviewAttribute_LastUsed";t.EmailTemplateGalleryPreviewAttributePurpose="EmailTemplateGallery_PreviewAttribute_Purpose";t.EmailTemplateGalleryPreviewAttributeOptimizedFor="EmailTemplateGallery_PreviewAttribute_OptimizedFor";t.EmailTemplateGalleryPreviewAttributeVisualStyle="EmailTemplateGallery_PreviewAttribute_VisualStyle";t.EmailTemplateGalleryPreviewAttributeMarketType="EmailTemplateGallery_PreviewAttribute_MarketType";t.FormsTemplateGalleryPreviewAttributeOwner="FormsTemplateGallery_PreviewAttribute_Owner";t.SearchFilterControlButtonName="SearchFilterControl_Button_Name";t.SearchFilterControlLabelSearch="SearchFilterControl_Label_Search";t.SearchFilterControlLabelSearchTemplates="SearchFilterControl_Label_SearchTemplates";t.LanguageFilterControlLabel="LanguageFilterControl_Label";t.CampaignGalleryControlLabelName="CampaignGalleryControl_Label_Name";t.CampaignGalleryControlLabelCreatedBy="CampaignGalleryControl_Label_CreatedBy";t.CampaignGalleryControlLabelLastModified="CampaignGalleryControl_Label_LastModified";t.CampaignGalleryControlLabelPurpose="CampaignGalleryControl_Label_Purpose";t.CampaignGalleryControlLabelRecurring="CampaignGalleryControl_Label_Recurring";t.CampaignGalleryControlLabelDescription="CampaignGalleryControl_Label_Description";t.CampaignGalleryControlLabelStatus="CampaignGalleryControl_Label_Status";t.CampaignGalleryControlLabelContacts="CampaignGalleryControl_Label_Contacts";t.CampaignGalleryControlLabelTitle="CampaignGalleryControl_Label_Title";t.CampaignGalleryControlFacetLabelPurpose="CampaignGalleryControl_FacetLabel_Purpose";t.CampaignGalleryControlItemAriaLabel="CampaignGalleryControl_Item_AriaLabel";t.PageTemplateGalleryControlLabelPurpose="PageTemplateGalleryControl_Label_Purpose";t.PageTemplateGalleryControlLabelName="PageTemplateGalleryControl_Label_Name";t.PageTemplateGalleryControlLabelType="PageTemplateGalleryControl_Label_Type";t.PageTemplateGalleryControlLabelMarketType="PageTemplateGalleryControl_Label_MarketType";t.PageTemplateGalleryControlLabelContentType="PageTemplateGalleryControl_Label_ContentType";t.PageTemplateGalleryControlLabelOptimizedFor="PageTemplateGalleryControl_Label_OptimizedFor";t.PageTemplateGalleryControlLabelVisualStyle="PageTemplateGalleryControl_Label_VisualStyle";t.PageTemplateGalleryControlLabelTitle="PageTemplateGalleryControl_Label_Title";t.PageTemplateGalleryControlLabelCreatedBy="PageTemplateGalleryControl_Label_CreatedBy";t.PageTemplateGalleryControlLabelLastModified="PageTemplateGalleryControl_Label_LastModified";t.PageTemplateGalleryControlLabelLastUsed="PageTemplateGalleryControl_Label_LastUsed";t.BingMapControlMessageBingMapApiKeyIsRequired="BingMapControl_Message_BingMapApiKeyIsRequired";t.BingMapControlMessageCustomerInsightsPermissionIsRequired="BingMapControl_Message_CustomerInsightsPermissionIsRequired";t.BingMapControlAriaLabelKpiSwitcher="BingMapControl_AriaLabel_KpiSwitcher";t.BingMapControlAriaLabelGoBackButton="BingMapControl_AriaLabel_GoBackButton";t.BingMapControlAriaLabelMap="BingMapControl_AriaLabel_Map";t.FormsTemplateGalleryControlLabelTitle="FormsTemplateGalleryControl_Label_Title";t.FormsTemplateGalleryPreviewAttributePurpose="FormsTemplateGallery_PreviewAttribute_Purpose";t.FormsTemplateGalleryPreviewAttributeOptimizedFor="FormsTemplateGallery_PreviewAttribute_OptimizedFor";t.FormsTemplateGalleryPreviewAttributeVisualStyle="FormsTemplateGallery_PreviewAttribute_VisualStyle";t.FormsTemplateGalleryPreviewAttributeMarketType="FormsTemplateGallery_PreviewAttribute_MarketType";t.PreviewControlTitleLabel="PreviewControl_Title_Label";t.PreviewControlValueSeparator="PreviewControl_Value_Separator";t.WebResourcesFileContentInvalidFileTypeErrorMessageMask="WebResources_FileContent_InvalidFileTypeErrorMessageMask";t.WebResourcesShowFileThumbnailThisContentIsNotAvailableForPreview="WebResources_ShowFileThumbnail_ThisContentIsNotAvailableForPreview";t.ImageGalleryControlLabelNoItemFound="ImageGalleryControl_Label_NoItemFound";t.ImageGalleryControlAriaLabelSelectImage="ImageGalleryControl_AriaLabel_SelectImage";t.ImageControlDimensions="ImageControl_Dimensions";t.ResizeMessageOverlayTitle="ResizeMessageOverlay_Title";t.ResizeMessageOverlayBody="ResizeMessageOverlay_Body";t.ClickMapTooltipTotalClicks="ClickMap_ToolTip_TotalClicks";t.ClickMapTooltipUniqueClicks="ClickMap_ToolTip_UniqueClicks";t.ClickMapTooltipClickThroughRate="ClickMap_ToolTip_ClickThroughRate";t.ClickMapTooltipMaximizeMap="ClickMap_Tooltip_MaximizeMap";t.ClickMapTooltipRestoreMap="ClickMap_Tooltip_RestoreMap";t.ClickMapControlMessageCustomerInsightsPermissionIsRequired="ClickMap_Message_CustomerInsightsPermissionIsRequired";t.ClickMapDropdownNoCustomerJourneys="ClickMap_Dropdown_NoCustomerJourneys";t.ClickMapMessageNoEmailBodyAvailable="ClickMap_Message_NoEmailBodyAvailable";t.ClickMapAriaLabelKpiSwitcher="ClickMap_AriaLabel_KpiSwitcher";t.LookupCustomControlInvalidRecord="LookupControl_InvalidRecord_TitleText";t.FilterControlAriaLabelSearch="FilterControl_AriaLabel_Search";t.FilterControlAriaLabelFacetFilter="FilterControl_AriaLabel_FacetFilter";t.FilterControlAriaLabelDropdownFilter="FilterControl_AriaLabel_DropdownFilter";t.FilterControlAriaLabelLanguage="FilterControl_AriaLabel_Language";t.FacetFilterControlAriaLabelSelect="FacetFilterControl_AriaLabel_Select";t.DropdownFilterControlAriaLabelSelect="DropdownFilterControl_AriaLabel_Select";t.LanguageFilterControlAriaLabelSelect="LanguageFilterControl_AriaLabel_Select";return t}();t.LocalizationKeys=e})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(s){"use strict";var t=function(){function a(t,e){this.ajaxHelper=t;this.localizationMedatadataProvider=e}a.prototype.dispose=function(){this.InvalidateCache()};a.prototype.InvalidateCache=function(){a.localizationListCache=null};a.prototype.GetLocalizedStringWithCallback=function(n,o){this.loadLocalizationList().done(function(){var t="";var e=a.localizationListCache[n];if(s.Utils.Object.isNullOrUndefined(e)||s.Utils.Object.isNullOrUndefined(e.Value)){t=n}else{t=e.Value}o(t)}).fail(function(){o(n)})};a.prototype.GetLocalizedStringsWithCallback=function(o,i){this.loadLocalizationList().done(function(){var t=[];for(var e=0;e<o.length;e++){var n=a.localizationListCache[o[e]];if(s.Utils.Object.isNullOrUndefined(n)||s.Utils.Object.isNullOrUndefined(n.Value)){t.push(o[e])}else{t.push(n.Value)}}i(t)}).fail(function(){i(o)})};a.prototype.loadLocalizationList=function(){var e=this;if(typeof t==="undefined"){var t=window["jQuery"]||window.parent["jQuery"]}var n=t.Deferred();if(s.Utils.Object.isNullOrUndefined(a.localizationListCache)||this.localizationMedatadataProvider.LanguageHasChanged()){var o=function(t){n.rejectWith(e,[t])};var i=function(t){a.localizationListCache=JSON.parse(t);n.resolveWith(e,[t])};var r=function(t){e.ajaxHelper.GetRequest(e.localizationMedatadataProvider.GetDefaultLanguageFileUrl(),i,o)};this.ajaxHelper.GetRequest(this.localizationMedatadataProvider.GetLanguageFileUrl(),i,r)}else{n.resolveWith(this,[])}return n.promise()};a.localizationListCache=null;return a}();s.LocalizationManager=t})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(n){"use strict";var t=function(){function e(t){e.currentLanguageCode=t?t:e.DEFAULT_LCID;this.context=n.Utils.ContextProvider.get()}e.prototype.GetLanguageFileUrl=function(){this.checkForLanguageCodeChange();return n.Utils.String.Format(n.WebResourcesConstants.LocalizationFileUrlWithLCIDMask,this.getClientUrl(),this.GetCurrentLanguageCode())};e.prototype.GetDefaultLanguageFileUrl=function(){this.checkForLanguageCodeChange();return n.Utils.String.Format(n.WebResourcesConstants.LocalizationFileUrlWithLCIDMask,this.getClientUrl(),this.GetDefaultLanguageCode())};e.prototype.LanguageHasChanged=function(){return!(this.GetCurrentLanguageCode()===this.getCurrentLcid())};e.prototype.GetCurrentLanguageCode=function(){return e.currentLanguageCode};e.prototype.GetDefaultLanguageCode=function(){return e.DEFAULT_LCID};e.prototype.checkForLanguageCodeChange=function(){if(this.LanguageHasChanged){var t=this.getCurrentLcid();if(t>0){e.currentLanguageCode=t}}};e.prototype.getCurrentLcid=function(){var t=e.DEFAULT_LCID;if(!n.Utils.Object.isNullOrUndefined(this.context)&&!n.Utils.Object.isNullOrUndefined(this.context.getUserLcid))t=this.context.getUserLcid();return t};e.prototype.getClientUrl=function(){var t="";if(!n.Utils.Object.isNullOrUndefined(this.context)&&!n.Utils.Object.isNullOrUndefined(this.context.getClientUrl))t=this.context.getClientUrl();return t};e.DEFAULT_LCID=1033;e.currentLanguageCode=0;return e}();n.LocalizationMetadataProvider=t})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(e){"use strict";var t=function(n){__extends(t,n);function t(t,e){return n.call(this,t,e)||this}t.prototype.GetEntityLogicalName=function(){return e.WebApiConstants.KeywordEntityLogicalName};return t}(e.BaseEntityRepository);e.KeywordRepository=t})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(i){"use strict";var t=function(){function t(t,e){this.messageOverlayContainerCssClass="ms-mktsvc-Gallery-MessageOverlayContainer";this.messageOverlayTitleCssClass="ms-mktsvc-Gallery-MessageOverlayTitle";this.messageOverlayTextCssClass="ms-mktsvc-Gallery-MessageOverlayText";this.localizationManager=null;this.elementToToggle=e;this.localizationManager=t;this.createMessageOverlay()}t.prototype.evaluateScreenSize=function(t,e){if(t.outerWidth()<e){this.showMessageOverlay()}else{this.hideMessageOverlay()}};t.prototype.createMessageOverlay=function(){this.messageOverlay=$("<div>").addClass(this.messageOverlayContainerCssClass);var e="";this.localizationManager.GetLocalizedStringWithCallback(i.LocalizationKeys.ResizeMessageOverlayTitle,function(t){e=t});var t=$("<span>").addClass(this.messageOverlayTitleCssClass).text(e);this.messageOverlay.append(t);var n="";this.localizationManager.GetLocalizedStringWithCallback(i.LocalizationKeys.ResizeMessageOverlayBody,function(t){n=t});var o=$("<p>").addClass(this.messageOverlayTextCssClass).text(n);this.messageOverlay.append(o);this.messageOverlay.insertAfter(this.elementToToggle)};t.prototype.hideMessageOverlay=function(){this.elementToToggle.show();this.messageOverlay.hide()};t.prototype.showMessageOverlay=function(){this.elementToToggle.hide();this.messageOverlay.show()};return t}();i.ResizeMessageOverlay=t})(ControlsCommon||(ControlsCommon={}));
// <copyright file="ILoadingService.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
// <copyright file="IPagingService.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(o){var t;(function(r){"use strict";var n=r.Object;var t=function(){function i(t){this.doc=t}i.prototype.exists=function(t,e){if(i.cache.isEmpty()){this.loadCheckers()}var n=t.toString();if(i.cache.hasKey(n)){var o=i.cache.get(n);if(!r.Object.isNullOrUndefined(o)){return o(e)}}return false};i.prototype.loadCheckers=function(){var e=this;i.cache.addOrUpdate(o.DependencyNamesEnum.FileUploadCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("FileUploadControl.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.FileUploadScript.toString(),function(t){return r.DomUtils.scriptElementExists("FileUpload.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.KeywordsControlCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("KeywordsControl.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.KeywordsFilterCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("KeywordsFilter.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.BaseGalleryControlScript.toString(),function(t){return r.DomUtils.scriptElementExists("BaseGalleryControl.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.FilterControlCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("FilterControl.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.FilterControlScript.toString(),function(t){return r.DomUtils.scriptElementExists("FilterControl.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.PreviewControlCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("PreviewControl.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.PreviewControlScript.toString(),function(t){return r.DomUtils.scriptElementExists("PreviewControl.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.GridViewControlCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("GridViewControl.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.GridViewControlScript.toString(),function(t){return r.DomUtils.scriptElementExists("GridViewControl.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.GalleryControlCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("GalleryControl.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.GalleryControlScript.toString(),function(t){return r.DomUtils.scriptElementExists("GalleryControl.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpCanvasToBlobScript.toString(),function(t){return!n.isNullOrUndefined(window.dataURLtoBlob)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpLoadImageScript.toString(),function(t){return!n.isNullOrUndefined(window.loadImage)&&!n.isNullOrUndefined(window.loadImage.scale)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpLoadImageOrientationScript.toString(),function(t){return i.cache.get(o.DependencyNamesEnum.BlueimpLoadImageScript.toString())(t)&&!n.isNullOrUndefined(window.loadImage.getTransformedOptions)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpLoadImageMetaScript.toString(),function(t){return i.cache.get(o.DependencyNamesEnum.BlueimpLoadImageScript.toString())(t)&&!n.isNullOrUndefined(window.loadImage.parseMetaData)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpLoadImageExifScript.toString(),function(t){return i.cache.get(o.DependencyNamesEnum.BlueimpLoadImageScript.toString())(t)&&!n.isNullOrUndefined(window.loadImage.parseExifData)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpLoadImageExifMapScript.toString(),function(t){return i.cache.get(o.DependencyNamesEnum.BlueimpLoadImageScript.toString())(t)&&!n.isNullOrUndefined(window.loadImage.ExifMap)&&!n.isNullOrUndefined(window.loadImage.ExifMap.prototype.getAll)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpFileUploadScript.toString(),function(t){return!n.isNullOrUndefined(jQuery)&&!n.isNullOrUndefined(jQuery.fn.fileupload)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpFileUploadProcessScript.toString(),function(t){return r.DomUtils.scriptElementExists("jquery.fileupload-process.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpFileUploadImageScript.toString(),function(t){return r.DomUtils.scriptElementExists("jquery.fileupload-image.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpFileUploadUiScript.toString(),function(t){return r.DomUtils.scriptElementExists("jquery.fileupload-ui.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpFileUploadValidateScript.toString(),function(t){return r.DomUtils.scriptElementExists("jquery.fileupload-validate.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpFileUploadCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("jquery.fileupload.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.BlueimpFileUploadUiCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("jquery.fileupload-ui.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.MarketingWorkflowDesignerBundleScript.toString(),function(t){return r.DomUtils.scriptElementExists("MarketingWorkflowDesignerBundle.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.CustomerJourneyDesignerControlBundleScript.toString(),function(t){return r.DomUtils.scriptElementExists("CustomerJourneyDesignerControlBundle.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.Underscore.toString(),function(t){return r.DomUtils.scriptElementExists("underscore.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.Backbone.toString(),function(t){return r.DomUtils.scriptElementExists("backbone.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.GenericWorkflowDesignerCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("GenericWorkflowDesigner.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.PropertyPageCommonCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("PropertyPageCommon.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.MarketingWorkflowDesignerCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("MarketingWorkflowDesigner.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.CustomerJourneyDesignerPropertyPagesCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("CustomerJourneyDesigner.PropertyPages.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.CustomerJourneyDesignerCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("CustomerJourneyDesigner.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.ListBoxControlScript.toString(),function(t){return r.DomUtils.scriptElementExists("ListBoxControl.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.InputAssistEditControlCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("Input.Assist.Edit.Control.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.AttributeSelectControlCoreScript.toString(),function(t){return r.DomUtils.scriptElementExists("AttributeSelectControlCore.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.AttributeMultiSelectControlCoreScript.toString(),function(t){return r.DomUtils.scriptElementExists("AttributeMultiSelectControlCore.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.PageEditorControlBundleScript.toString(),function(t){return r.DomUtils.scriptElementExists("PageEditorControlBundle.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.PageEditorCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("PageEditor.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.FormEditorControlBundleScript.toString(),function(t){return r.DomUtils.scriptElementExists("FormEditorControlBundle.js",t,e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.FormEditorCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("FormBlockEditor.css",e.doc)});i.cache.addOrUpdate(o.DependencyNamesEnum.FormEditorControlCss.toString(),function(t){return r.DomUtils.stylesheetLinkElementExists("FormEditorControl.css",e.doc)})};i.cache=new r.Dictionary;return i}();r.DependencyChecker=t})(t=o.Utils||(o.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(d){var t;(function(c){"use strict";var t=function(){function l(t,e,n){this.doc=t;this.dependencyChecker=e?e:new c.DependencyChecker(t);this.domUtils=n?n:c.DomUtils.getInstance()}l.prototype.loadScriptsIntoDom=function(t,e){this.loadScriptsIntoDomSequentially(this,t,0,e)};l.prototype.loadStylesheetsIntoDom=function(t,e){var n=this;var o=[];t.forEach(function(t){o.push(n.getLoadStylesheetIntoDomPromise(t.name,t.loadPath))});$.when.apply($,o).done(function(){if(!c.Object.isNullOrUndefined(e))e()})};l.getDependency=function(t){return l.dependencies.get(t.toString())};l.prototype.createDependency=function(t,e,n){if(e===void 0){e=d.LoadStatesEnum.Absent}var o=new d.Dependency;o.name=t;o.state=e;o.promise=n;return o};l.addDependency=function(t){l.dependencies.addOrUpdate(t.name.toString(),t)};l.prototype.getLoadStylesheetIntoDomPromise=function(t,e){var n=$.Deferred();var o=l.getDependency(t);if(c.Object.isNullOrUndefined(o)){o=this.createDependency(t,d.LoadStatesEnum.Loading,n.promise());l.addDependency(o);if(this.dependencyChecker.exists(t)){o.state=d.LoadStatesEnum.Loaded;n.resolve()}else{var i=this.domUtils.createStyleSheetLinkElementFromUrl(e,this.doc);i.onload=function(){o.state=d.LoadStatesEnum.Loaded;n.resolve()};this.doc.body.appendChild(i)}}return o.promise};l.prototype.loadScriptsIntoDomSequentially=function(t,e,n,o){if(n>=e.length){o()}else{var i=e[n];this.loadScriptIntoDom(i).done(function(){t.loadScriptsIntoDomSequentially(t,e,n+1,o)})}};l.prototype.loadScriptIntoDom=function(t){var e=$.Deferred();var n=t.name,o=t.loadPath,i=t.scriptLoadBehavior;var r=d.DependencyNamesEnum[n]+"-script";var a=l.getDependency(n);if(c.Object.isNullOrUndefined(a)){a=this.createDependency(n,d.LoadStatesEnum.Loading,e.promise());l.addDependency(a);if(this.dependencyChecker.exists(n,r)){a.state=d.LoadStatesEnum.Loaded;e.resolve()}else{var s=this.domUtils.createScriptElementFromUrl(r,o,this.doc);s.onload=function(){if(i){i.onLoad()}a.state=d.LoadStatesEnum.Loaded;e.resolve()};this.doc.body.appendChild(s)}}return a.promise};l.dependencies=new c.Dictionary;return l}();c.DependencyManager=t})(t=d.Utils||(d.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){t[t["FileUploadCss"]=0]="FileUploadCss";t[t["FileUploadScript"]=1]="FileUploadScript";t[t["KeywordsControlCss"]=2]="KeywordsControlCss";t[t["KeywordsFilterCss"]=3]="KeywordsFilterCss";t[t["FilterControlCss"]=4]="FilterControlCss";t[t["PreviewControlCss"]=5]="PreviewControlCss";t[t["GridViewControlCss"]=6]="GridViewControlCss";t[t["GalleryControlCss"]=7]="GalleryControlCss";t[t["BaseGalleryControlScript"]=8]="BaseGalleryControlScript";t[t["FilterControlScript"]=9]="FilterControlScript";t[t["PreviewControlScript"]=10]="PreviewControlScript";t[t["GridViewControlScript"]=11]="GridViewControlScript";t[t["GalleryControlScript"]=12]="GalleryControlScript";t[t["BlueimpCanvasToBlobScript"]=13]="BlueimpCanvasToBlobScript";t[t["BlueimpLoadImageScript"]=14]="BlueimpLoadImageScript";t[t["BlueimpLoadImageMetaScript"]=15]="BlueimpLoadImageMetaScript";t[t["BlueimpLoadImageExifScript"]=16]="BlueimpLoadImageExifScript";t[t["BlueimpLoadImageExifMapScript"]=17]="BlueimpLoadImageExifMapScript";t[t["BlueimpLoadImageOrientationScript"]=18]="BlueimpLoadImageOrientationScript";t[t["BlueimpFileUploadScript"]=19]="BlueimpFileUploadScript";t[t["BlueimpFileUploadProcessScript"]=20]="BlueimpFileUploadProcessScript";t[t["BlueimpFileUploadImageScript"]=21]="BlueimpFileUploadImageScript";t[t["BlueimpFileUploadUiScript"]=22]="BlueimpFileUploadUiScript";t[t["BlueimpFileUploadValidateScript"]=23]="BlueimpFileUploadValidateScript";t[t["BlueimpFileUploadCss"]=24]="BlueimpFileUploadCss";t[t["BlueimpFileUploadUiCss"]=25]="BlueimpFileUploadUiCss";t[t["BootstrapCss"]=26]="BootstrapCss";t[t["AutomationCoreCss"]=27]="AutomationCoreCss";t[t["GenericWorkflowDesignerScript"]=28]="GenericWorkflowDesignerScript";t[t["GenericWorkflowDesignerCss"]=29]="GenericWorkflowDesignerCss";t[t["PropertyPageCommonScript"]=30]="PropertyPageCommonScript";t[t["PropertyPageCommonCss"]=31]="PropertyPageCommonCss";t[t["MarketingWorkflowDesignerScript"]=32]="MarketingWorkflowDesignerScript";t[t["MarketingWorkflowDesignerCss"]=33]="MarketingWorkflowDesignerCss";t[t["MarketingWorkflowDesignerBundleScript"]=34]="MarketingWorkflowDesignerBundleScript";t[t["ExtendedMarketingWorkflowDesignerBundleScript"]=35]="ExtendedMarketingWorkflowDesignerBundleScript";t[t["CustomerJourneyDesignerPropertyPagesCss"]=36]="CustomerJourneyDesignerPropertyPagesCss";t[t["CustomerJourneyDesignerCss"]=37]="CustomerJourneyDesignerCss";t[t["CustomerJourneyDesignerControlBundleScript"]=38]="CustomerJourneyDesignerControlBundleScript";t[t["EditorCss"]=39]="EditorCss";t[t["EmailEditorCss"]=40]="EmailEditorCss";t[t["MarketingEmailEditorControlCss"]=41]="MarketingEmailEditorControlCss";t[t["EditorScript"]=42]="EditorScript";t[t["LeadScoringDesignerPropertyPagesCss"]=43]="LeadScoringDesignerPropertyPagesCss";t[t["LeadScoringDesignerCss"]=44]="LeadScoringDesignerCss";t[t["LeadScoringDesignerControlBundleScript"]=45]="LeadScoringDesignerControlBundleScript";t[t["MarketingEmailEditorControlBundleScript"]=46]="MarketingEmailEditorControlBundleScript";t[t["ListBoxControlScript"]=47]="ListBoxControlScript";t[t["AssistEditControlBundleScript"]=48]="AssistEditControlBundleScript";t[t["InputAssistEditControlScript"]=49]="InputAssistEditControlScript";t[t["InputAssistEditControlCss"]=50]="InputAssistEditControlCss";t[t["PageEditorCss"]=51]="PageEditorCss";t[t["PageEditorControlBundleScript"]=52]="PageEditorControlBundleScript";t[t["FormEditorCss"]=53]="FormEditorCss";t[t["FormEditorControlBundleScript"]=54]="FormEditorControlBundleScript";t[t["FormEditorControlCss"]=55]="FormEditorControlCss";t[t["AttributeSelectControlCoreScript"]=56]="AttributeSelectControlCoreScript";t[t["AttributeMultiSelectControlCoreScript"]=57]="AttributeMultiSelectControlCoreScript";t[t["Underscore"]=58]="Underscore";t[t["Backbone"]=59]="Backbone"})(e=t.DependencyNamesEnum||(t.DependencyNamesEnum={}))})(ControlsCommon||(ControlsCommon={}));var ControlsCommon;(function(t){var e;(function(t){"use strict"})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
// <copyright file="CachePathFragmentExtractor.ts" company="Microsoft">
//      Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
var ControlsCommon;(function(t){var e;(function(t){"use strict";var e=function(){function s(t,e){this.domUtils=t;this.doc=e}s.prototype.tryExtractCachePathFragment=function(){var t=this.domUtils.getScriptElements(this.doc);for(var e=t.length-1;e>=0;--e){var n=t[e].src.toLowerCase();if(n.indexOf(s.SrcStringRequirement)>0){var o=n.indexOf(s.CachePathFragmentStart);if(o>0){var i=n.indexOf(s.CachePathFragmentEnd)+s.CachePathFragmentEnd.length;var r=n.substr(o+1,i-o-2);r=decodeURI(r);var a=r.substr(1,r.length-2);if(a.length>0&&a.match(s.DigitsOnlyRegex)!==null){return r}}}}return null};s.CachePathFragmentStart="/%7b";s.CachePathFragmentEnd="%7d/";s.SrcStringRequirement="webresources/cc_mscrmcontrols";s.DigitsOnlyRegex=/^[0-9]+$/;return s}();t.CachePathFragmentExtractor=e})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict";var e=function(){function c(t){this.hostElement=t;this.hostElement=$("<div>").appendTo(t);this.hostElement.css({width:"1px",height:"1px",overflow:"hidden"})}c.prototype.render=function(t,e){var n=this;this.iframe=null;this.hostElement.empty();this.iframe=document.createElement("iframe");$(this.iframe).appendTo(this.hostElement);$(this.iframe).css({width:c.canvasSize+"px",height:c.canvasSize+"px"});$(this.iframe).attr({tabindex:"-1",sandbox:"allow-same-origin"});this.iframe.contentWindow.document.open();this.iframe.contentWindow.document.write(t);this.iframe.contentWindow.onload=function(){html2canvas(n.iframe.contentWindow.document.body,{width:c.canvasSize,height:c.canvasSize,useCORS:true,allowTaint:false,background:"#fff"}).then(function(t){return n.resizePreview(t,e)})};this.iframe.contentWindow.document.close()};c.prototype.resizePreview=function(t,e){var n=null;try{var o=c.canvasSize;var i=c.previewSize;var r=t.getContext("2d");var a=Math.round((t.height-o)/2);if(a<0){a=0}var s=t.height>=a+o?a+o:t.height;var l=r.getImageData(0,a,o,s);r.clearRect(0,0,t.width,t.height);t.height=o;r.putImageData(l,0,0);r.drawImage(t,0,0,i,i);l=r.getImageData(0,0,i,i);r.clearRect(0,0,t.width,t.height);t.width=i;t.height=i;r.putImageData(l,0,0);n=t.toDataURL("image/png").replace("data:image/png;base64,","")}catch(t){if(t.message){console.error(t.message)}else{console.error(t)}}finally{e(n)}};c.prototype.dispose=function(){this.hostElement.empty()};c.canvasSize=1024;c.previewSize=144;return c}();t.HtmlToImageConverter=e})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.get=function(){var t=window.GetGlobalContext||window.getGlobalContextObject||window.parent.getGlobalContextObject;if(t)return t();return null};return t}();t.ContextProvider=e})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict"})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){"use strict"})(e=t.Utils||(t.Utils={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){var e;(function(t){t[t["Absent"]=0]="Absent";t[t["Loading"]=1]="Loading";t[t["Loaded"]=2]="Loaded"})(e=t.LoadStatesEnum||(t.LoadStatesEnum={}))})(ControlsCommon||(ControlsCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var ControlsCommon;(function(t){"use strict"})(ControlsCommon||(ControlsCommon={}));"use strict";var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n]};return function(t,e){o(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.ValueOutOfRangeId="CustomControl_OutOfRange_Error";t.InvalidInputMaskId="CustomControl_InvalidInput_Error";t.MaxLengthExceededId="CustomControl_MaxLengthExceeded_Error";return t}();t.ErrorCode=e})(e=t.ErrorHandling||(t.ErrorHandling={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(t,e){this.setNotification=t;this.clearNotification=e;this.setNotification=t;this.clearNotification=e}t.prototype.notify=function(t,e){this.setNotification(t,e)};t.prototype.clear=function(t){this.clearNotification(t)};return t}();t.NotificationHandler=e})(e=t.ErrorHandling||(t.ErrorHandling={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.throwException=function(t){throw t};return t}();t.ExceptionHandler=e})(e=t.ErrorHandling||(t.ErrorHandling={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Mscrm;(function(e){"use strict";var t;(function(t){t[t["DataSet"]=0]="DataSet";t[t["Layout"]=1]="Layout";t[t["Activation"]=2]="Activation"})(t=e.UpdateEventType||(e.UpdateEventType={}));var n=function(){function o(){this.ignoredEvents={};this.ignoredEvents[e.UpdateEventType.DataSet]=false;this.ignoredEvents[e.UpdateEventType.Layout]=false;this.ignoredEvents[e.UpdateEventType.Activation]=true}o.getEventType=function(t){switch(t){case"dataset":return e.UpdateEventType.DataSet;case"layout":return e.UpdateEventType.Layout;case"activation":return e.UpdateEventType.Activation;default:return null}};o.getEventCode=function(t){switch(t){case e.UpdateEventType.DataSet:return"dataset";case e.UpdateEventType.Layout:return"layout";case e.UpdateEventType.Activation:return"activation";default:return null}};o.prototype.shouldIgnoreEvent=function(t,e){if(!MktSvc.Controls.Common.Object.isNullOrUndefined(t)){this.ignoredEvents[t]=e}};o.prototype.isIgnoredEvent=function(t){if(!MktSvc.Controls.Common.Object.isNullOrUndefined(t)){return this.ignoredEvents[t]}return false};o.hasEvent=function(t,e){var n=o.getEventCode(e);return new MktSvc.Controls.Common.ArrayQuery(t).contains(function(t){return t==n})};return o}();e.UpdateEvents=n})(Mscrm||(Mscrm={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}t.Checked="checked";t.ReadOnly="readonly";t.Disabled="disabled";t.Style="style";t.Layout="layout";return t}();t.AttributeConstants=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.assistEditFinalItemSelected="assistEditFinalItemSelected";t.assistEditItemSelected="assistEditItemSelected";t.assistEditClosed="assistEditClosed";t.assistEditCommandExecuted="assistEditCommandExecuted";t.assistEditEnterKeyDown="assistEditEnterKeyDown";t.inputAssistEditFocusout="inputAssistEditFocusout";t.assistEditOptionFocused="assistEditOptionFocused";t.assistEditDataSourceUpdated="assistEditDataSourceUpdated";return t}();t.AssistEditEventConstants=e})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(i){var t;(function(r){"use strict";var t=function(){function t(t){this.styleElementId="span-renderer-assist-edit-style";this.assistEditStyle="/*Assist edit input style*/ assistEditSelectedTextContainer, .assistEditInputWrapper, .assistEditInput { height: 1.1em; display: inline-block; position: static; text-indent: 0; } .assistEditInput { background-color: #bec9dd; } .assistEditActivePlaceholder { min-width:10px; background-color: #bec9dd; } .assistEditSelectedTextContainer { background-color: #edf0f7; } .assistEditInput { min-width: 1px; } .assistEditInput:focus { outline: 0; } .assistEditContainer #closeButtonContainer { display: none; }";this.selectionManager=t}t.prototype.setup=function(t,e){this.eventBroker=t;this.focusOutHandler=e};t.prototype.render=function(t){this.currentDocument=t[0].ownerDocument;this.selectionManager.setup(this.currentDocument);if(!this.selectionManager.isCaretInsideBlock(t[0])){var e=this.findEditableElement(t);this.selectionManager.setCaretAtEndOfElement(e)}var n=this.currentDocument.getSelection();this.selectionRange=n.getRangeAt(0);var o=this.selectionRange.toString();var i=this.attachAssistEditInputSpan(o);this.styleElement=$("<style>").attr("id",this.styleElementId).attr("rel","stylesheet").attr("type","text/css").text(this.assistEditStyle);this.currentDocument.head.appendChild(this.styleElement[0]);i.on("focusout",this.focusOutHandler);return i};t.prototype.insertFinalSelectedItem=function(t){this.replaceInputSpanWithText(t.value)};t.prototype.updateSelectedValue=function(t){var e=this.getByClassInCurrentDocument(r.AssistEditConstants.assistEditInputSpanClassName);e.off("focusout",this.focusOutHandler);if(e.length>0){e.removeAttr("aria-activedescendant");t=i.HtmlEncode.encode(t);t=this.setActivePlaceholder(t);var n=this.getByClassInCurrentDocument(r.AssistEditConstants.assistEditSelectedTextContainer);e.appendTo(n.parent());n.empty();n.append($("<span></span>").html(t));e.appendTo(n.find("."+r.AssistEditConstants.assistEditActivePlaceholder));e.text(MktSvc.Controls.Common.String.Empty);var o=e.parent();this.scrollToViewElement(o);this.addBrForFirefoxBug(e);e.focus()}e.on("focusout",this.focusOutHandler)};t.prototype.insertRawItem=function(){this.replaceInputSpanWithText(this.getByClassInCurrentDocument(r.AssistEditConstants.assistEditSelectedTextContainer).text())};t.prototype.cleanup=function(t){t.find("."+r.AssistEditConstants.assistEditEmptyPlaceholderClassName).remove();t.find("."+r.AssistEditConstants.assistEditInputWrapperClassName).remove()};t.prototype.dispose=function(){if(!MktSvc.Controls.Common.Object.isNullOrUndefined(this.onBlurEventHandler)){this.currentDocument.removeEventListener("blur",this.onBlurEventHandler,true)}this.getByClassInCurrentDocument(r.AssistEditConstants.assistEditInputWrapperClassName).remove();this.eventBroker.unsubscribe(r.AssistEditEventConstants.assistEditOptionFocused,this.assistEditFocusedOptionDelegate);if(!MktSvc.Controls.Common.Object.isNullOrUndefined(this.styleElement)){this.styleElement.remove()}};t.prototype.findEditableElement=function(t){var e=t;if(!e.is("[contenteditable='true']")){e=e.find("[contenteditable='true']")}if(e.children().length>0){e=e.children(":last")}return e[0]};t.prototype.setActivePlaceholder=function(t){var e=/\[([^\]]+)\]/;var n=e.exec(t);if(n!=null&&n.length){return t.replace(n[0],'<span class="'+r.AssistEditConstants.assistEditActivePlaceholder+'"></span>')}return t};t.prototype.replaceInputSpanWithText=function(t){this.getByClassInCurrentDocument(r.AssistEditConstants.assistEditInputSpanClassName).off("focusout");var e=this.getByClassInCurrentDocument(r.AssistEditConstants.assistEditInputWrapperClassName);this.scrollToViewTheInsertedText(t);var n=this.currentDocument.createTextNode(t);e.replaceWith(n);if(this.selectionManager.isSelectionInDocument()){this.selectionManager.setCaretAtEndOfElement(n)}};t.prototype.attachAssistEditInputSpan=function(t){var e=this;var n=$(this.currentDocument.createElement("span")).addClass(r.AssistEditConstants.assistEditInputWrapperClassName).attr("contenteditable","false");$("<span></span>").addClass(r.AssistEditConstants.assistEditSelectedTextContainer).attr("contenteditable","false").appendTo(n);var o=$("<span></span>").addClass(r.AssistEditConstants.assistEditInputSpanClassName).attr("contenteditable","true").appendTo(n).text(t);this.ariaSetup(o);this.selectionManager.insertElementInSelection(n[0],this.selectionRange);this.focusAssistEditSpan(o);this.addBrForFirefoxBug(o);var i=function(t){e.setAriaProperties(t.value,o)};this.assistEditFocusedOptionDelegate=this.eventBroker.subscribe(r.AssistEditEventConstants.assistEditOptionFocused,i);return o};t.prototype.addBrForFirefoxBug=function(t){if(this.isFirefox()){$("<br/>").addClass(r.AssistEditConstants.assistEditEmptyPlaceholderClassName).appendTo(t)}};t.prototype.scrollToViewTheInsertedText=function(t){if(MktSvc.Controls.Common.Object.isNullOrUndefined(this.currentDocument)){return}var e=this.getByClassInCurrentDocument(r.AssistEditConstants.assistEditInputWrapperClassName);var n=$(this.currentDocument.createElement("span")).text(t);e.replaceWith(n);this.scrollToViewElement(n);n.replaceWith(e)};t.prototype.scrollToViewElement=function(t){var e=t.parent();if(e.length===0){return}var n=t.width();var o=t.position().left-e.position().left;var i=n+o;var r=e.width();if(i>r){e.scrollLeft(e.scrollLeft()+(i-r))}};t.prototype.focusAssistEditSpan=function(t){var e=this;this.onBlurEventHandler=function(t){e.currentDocument.removeEventListener("blur",e.onBlurEventHandler,true);t.stopPropagation();t.preventDefault()};this.currentDocument.addEventListener("blur",this.onBlurEventHandler,true);this.selectionManager.setCaretAtEnd(t)};t.prototype.setAriaProperties=function(t,e){e.attr("aria-activedescendant",t)};t.prototype.ariaSetup=function(t){var e=MktSvc.Controls.Common.UniqueId.generate("listBox");t.attr("role","combobox");t.attr("aria-autocomplete","both");t.attr("aria-haspopup","true");t.attr("aria-expanded","true");t.attr("aria-controls",e);t.attr("aria-owns",e);t.attr("aria-activedescendant",e+"_0")};t.prototype.getByClassInCurrentDocument=function(t){return $(this.currentDocument).find("."+t)};t.prototype.isFirefox=function(){return navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Trident/")===-1};return t}();r.AssistEditInputSpanRenderer=t})(t=i.AssistEdit||(i.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var i=MktSvc.Controls.Common.Object;var e=function(){function t(){}t.prototype.setup=function(t){this.currentDocument=t};t.prototype.insertElementInSelection=function(t,e){e.deleteContents();e.insertNode(t)};t.prototype.isCaretInsideBlock=function(t){if(i.isNullOrUndefined(this.currentDocument)){return false}var e=false;if(this.isSelectionInDocument()){var n=this.currentDocument.getSelection().getRangeAt(0).startContainer;e=$.contains(t,n)||n===t}return e};t.prototype.isSelectionInDocument=function(){return this.currentDocument.getSelection().rangeCount>0};t.prototype.setCaretAtEnd=function(t){t.focus();if(this.isSelectionInDocument()){this.setCaretAtEndOfElement(t[0])}};t.prototype.setCaretAtEndOfElement=function(t){if(i.isNullOrUndefined(this.currentDocument)){return}var e=this.currentDocument.getSelection();var n=this.currentDocument.createRange();n.selectNodeContents(t);n.collapse(false);e.removeAllRanges();e.addRange(n)};t.prototype.selectElement=function(t){var e=t[0];this.selectTextNode(e)};t.prototype.selectTextNode=function(t){if(i.isNullOrUndefined(this.currentDocument)){return}var e=this.currentDocument.getSelection();e.removeAllRanges();var n=this.currentDocument.createRange();n.selectNode(t);e.addRange(n)};t.prototype.getCaretPosition=function(t){var e=this.currentDocument.getSelection().getRangeAt(0);var n=e.cloneRange();n.selectNodeContents(t);n.setEnd(e.endContainer,e.endOffset);return n.toString().length};t.prototype.setCaretSelection=function(t,e,n){if(i.isNullOrUndefined(this.currentDocument)||i.isNullOrUndefined(t)){return}var o=this.currentDocument.createRange();o.setStart(t,e);o.setEnd(t,n);this.currentDocument.getSelection().removeAllRanges();this.currentDocument.getSelection().addRange(o)};t.prototype.setCaretPosition=function(t,e){this.setCaretSelection(t,e,e)};return t}();t.SelectionManager=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MscrmControls;(function(t){var e;(function(t){"use strict";var e;(function(t){t[t["Disabled"]=0]="Disabled";t[t["Enabled"]=1]="Enabled"})(e=t.ControlState||(t.ControlState={}))})(e=t.Common||(t.Common={}))})(MscrmControls||(MscrmControls={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(r){"use strict";var t=function(){function i(){this.lastKeyPress=true;this.isInitialized=false;this.isEnabled=false;this.shouldPreventMultipleEventTypes=true;this.isInReadMode=true;this.updateEvents=new Mscrm.UpdateEvents}Object.defineProperty(i.prototype,"isControlInitialized",{get:function(){return this.isInitialized},enumerable:true,configurable:true});i.prototype.init=function(t,e,n,o){if(MktSvc.Controls.Common.Object.isNullOrUndefined(o)){r.ErrorHandling.ExceptionHandler.throwException(i.NullOrUndefinedInitContainer)}if(MktSvc.Controls.Common.Object.isNullOrUndefined(e)){r.ErrorHandling.ExceptionHandler.throwException(i.NullOrUndefinedInitNotifyOutputChangedDelegate)}if(this.isControlInitialized){return}this.container=o;this.notifyOutputChanged=e;this.disablePanoramaScroll=t.utils.disablePanoramaScroll;this.initializeControl(t,n)};i.prototype.updateView=function(t){if(this.shouldIgnoreUpdate(t)){return}this.throwIfPropertyBagNotValid(t);if(!this.isInitialized){r.ErrorHandling.ExceptionHandler.throwException(i.UninitializedErrorMessage)}this.handleEditToReadModeTransition(t);this.isEnabled=this.isControlEnabled(t);this.updateCore(t);if(t.mode.isRead||t.mode.isPreview||t.mode.isControlDisabled){this.renderReadMode(t)}else{this.renderEditMode(t)}};i.prototype.getOutputs=function(){if(!this.isControlInitialized){r.ErrorHandling.ExceptionHandler.throwException(i.UninitializedControl)}return this.getOutputsCore()};i.prototype.onPreNavigation=function(){return};i.prototype.destroy=function(){if(this.isControlInitialized){this.eventGuard.destroy();this.destroyCore()}this.cleanup()};i.prototype.createWrapperContainer=function(t,e){if(t===void 0){t=""}if(e===void 0){e=false}var n=document.createElement("div");n.className=r.CommonControl.ClassName;n.className+=t===""?"":" "+t;if(MktSvc.Controls.Common.Object.isNullOrUndefined(this.container)){r.ErrorHandling.ExceptionHandler.throwException(r.CommonControl.NullOrUndefinedInitContainer)}if(e){n.className+=" "+r.CommonControl.ClassRtl}this.container.appendChild(n);return n};i.prototype.initCore=function(t,e){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(i.MethodNotOverridenFormat,"initCore"))};i.prototype.updateCore=function(t){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(i.MethodNotOverridenFormat,"updateCore"))};i.prototype.destroyCore=function(){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(i.MethodNotOverridenFormat,"destroyCore"))};i.prototype.renderReadMode=function(t){this.shouldNotifyOutputChanged=false};i.prototype.renderEditMode=function(t){this.shouldNotifyOutputChanged=false;if(this.isInReadMode){if(this.preventEditModePanoramaEvents){this.removePanoramaEventsHandlers();this.addPanoramaEventsHandlers()}this.eventGuard.preventClicksUntilUserInteracted()}this.isInReadMode=false};i.prototype.getOutputsCore=function(){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(i.MethodNotOverridenFormat,"getOutputsCore"));return null};i.prototype.notifyEnabledControlOutputChanged=function(){if(this.isEnabled&&this.shouldNotifyOutputChanged){this.notifyOutputChanged()}};i.prototype.isControlEnabled=function(t){return!t.mode.isRead&&!t.mode.isPreview&&!t.mode.isControlDisabled};i.prototype.showDefaultLabelCore=function(t){return false};i.prototype.toggleContainerVisibility=function(t){if(MktSvc.Controls.Common.Object.isNullOrUndefined(this.controlWrapperContainer)){t?$(this.container).show():$(this.container).hide()}else{t?$(this.controlWrapperContainer).show():$(this.controlWrapperContainer).hide()}};i.prototype.initializeControl=function(t,e){try{this.throwIfPropertyBagNotValid(t);this.notificationHandler=new r.ErrorHandling.NotificationHandler(t.utils.setNotification,t.utils.clearNotification);this.htmlEncode=t.utils.crmHtmlEncode;this.eventGuard=new r.EventGuard(this.container,t.client.userAgent);this.initCore(t,e);if(this.shouldPreventMultipleEventTypes){this.eventGuard.preventMultipleEventTypes()}this.isEnabled=this.isControlEnabled(t);this.isInitialized=true}catch(t){if(this.container.hasChildNodes()){var n=this.container.childNodes.length;for(var o=n-1;o>=0;o--){this.container.removeChild(this.container.childNodes[o])}}r.ErrorHandling.ExceptionHandler.throwException(t)}};i.prototype.shouldIgnoreUpdate=function(t){var e=true;if(MktSvc.Controls.Common.Object.isNullOrUndefined(t)||MktSvc.Controls.Common.Object.isNullOrUndefined(t.updatedProperties)||MktSvc.Controls.Common.Object.isNullOrUndefined(this.updateEvents)||t.updatedProperties.length==0){return false}for(var n=0;n<t.updatedProperties.length;n++){var o=Mscrm.UpdateEvents.getEventType(t.updatedProperties[n]);e=e&&this.updateEvents.isIgnoredEvent(o)}return e};i.prototype.throwIfPropertyBagNotValid=function(t){if(MktSvc.Controls.Common.Object.isNullOrUndefined(t)){r.ErrorHandling.ExceptionHandler.throwException(i.UninitializedDataBagMessage)}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.parameters)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.parameters"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.utils)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.utils"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.utils.setNotification)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.utils.setNotification"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.utils.clearNotification)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.utils.clearNotification"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.utils.openInBrowser)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.utils.openInBrowser"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.utils.getServiceUri)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.utils.getServiceUri"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.mode)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.mode"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.mode.isControlDisabled)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.mode.isControlDisabled"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.mode.isRead)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.mode.isRead"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.mode.isPreview)){r.ErrorHandling.ExceptionHandler.throwException(MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.mode.isPreview"))}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.utils)){throw MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.utils")}if(MktSvc.Controls.Common.Object.isNullOrUndefined(t.utils.crmHtmlEncode)){throw MktSvc.Controls.Common.String.Format(r.CommonControl.InvalidDataBagKeyFormat,"dataBag.utils.crmHtmlEncode")}};i.prototype.cleanup=function(){if(!MktSvc.Controls.Common.Object.isNullOrUndefined(this.container)){if(this.preventEditModePanoramaEvents){this.removePanoramaEventsHandlers()}}this.isInitialized=false;this.notifyOutputChanged=null;$(this.container).empty();this.container=null};i.prototype.handleEditToReadModeTransition=function(t){if(!this.isInReadMode&&t.mode.isRead){if(this.preventEditModePanoramaEvents){this.removePanoramaEventsHandlers()}this.eventGuard.stopPreventingClicks();this.isInReadMode=true}};i.prototype.removePanoramaEventsHandlers=function(){$(this.container).off(i.PointerDownEventName);$(this.container).off(i.PointerMoveEventName);$(this.container).off(i.PointerUpEventName);$(this.container).off(i.TouchEndEventName)};i.prototype.addPanoramaEventsHandlers=function(){var e=this;$(this.container).on(i.PointerDownEventName,function(t){if(e.isEnabled){e.disablePanoramaScroll(true);t.stopPropagation()}});$(this.container).on(i.PointerMoveEventName,function(t){if(e.isEnabled){t.stopPropagation()}});$(this.container).on(i.PointerUpEventName,function(t){if(e.isEnabled){e.disablePanoramaScroll(false)}});$(this.container).on(i.TouchEndEventName,function(t){if(e.isEnabled){e.disablePanoramaScroll(false)}})};i.prototype.bindFocusVisibility=function(t,e){var n=this;t.on("focus",function(){if(n.lastKeyPress)e.addClass(i.accessibilityOutlineClassName)});t.on("focusout",function(){e.removeClass(i.accessibilityOutlineClassName);n.lastKeyPress=true});e.on("mousedown touchstart",function(){n.lastKeyPress=false;e.removeClass(i.accessibilityOutlineClassName)});e.on("keydown",function(){n.lastKeyPress=true})};i.prototype.unbindFocusVisibility=function(t,e){t.off("focus");t.off("focusout");e.off("mousedown");e.off("touchstart");e.off("keydown")};i.ClassName="mocaControls";i.ClassRtl="rtl";i.PointerDownEventName="pointerdown.CustomControl";i.PointerMoveEventName="pointermove.CustomControl";i.PointerUpEventName="pointerup.CustomControl";i.TouchEndEventName="touchend.CustomControl";i.DefaultValueLabel="---";i.NullOrUndefinedInitContainer="Null or undefined control container.";i.NullOrUndefinedInitValueContainer="Null or undefined control value container.";i.NullOrUndefinedInitNotifyOutputChangedDelegate="Null or undefined NotifyOutputChanged delegate.";i.UninitializedErrorMessage="init should be called before calling update.";i.UninitializedDataBagMessage="Null or undefined dataBag property.";i.InvalidDataBagKeyFormat="Expected key {0} in the input data bag.";i.UninitializedControl="Control is used uninitialized.";i.InvalidInputParamMinMax="Min and max values do not bound a valid interval.";i.InvalidInputParamStep="Step parameter should be greater than 0 and less than the interval bound by min and max.";i.InvalidInputParamValue="Value for the control is not within the desired interval.";i.NotGreaterThanZeroInputParamValue="Parameter {0} should be greater than zero.";i.InvalidInputParam="One or more of the input parameters are invalid: {0}";i.MethodNotOverridenFormat="Method {0} is not overridden in the specialized class.";i.MethodNotImplementedInControl="Method {0} is not implemented in the control.";i.accessibilityOutlineClassName="outline-for-accessibility";return i}();r.CommonControl=t})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.updateEvents.shouldIgnoreEvent(Mscrm.UpdateEventType.Layout,true);t.updateEvents.shouldIgnoreEvent(Mscrm.UpdateEventType.Activation,true);return t}return t}(t.CommonControl);t.FieldControlBase=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}t.Change="change";t.Click="click";t.JQueryKnobConfigure="configure";t.JQuerySwipeLeft="swipeleft";t.JQuerySwipeRight="swiperight";t.KeyUp="keyup";t.MouseUp="mouseup";t.MouseDown="mousedown";t.MouseOver="mouseover";t.MouseMove="mousemove";t.PointerDown="pointerdown";t.PointerMove="pointermove";t.PointerUp="pointerup";t.PointerOut="pointerout";t.MSPointerOver="MSPointerOver";t.MSPointerDown="MSPointerDown";t.MSPointerOut="MSPointerOut";t.MSPointerUp="MSPointerUp";t.MSPointerMove="MSPointerMove";t.TouchStart="touchstart";t.TouchMove="touchmove";t.TouchEnd="touchend";t.VMouseMove="vmousemove";t.Focus="focus";t.FocusIn="focusin";t.FocusOut="focusout";t.FocusEvents="focusin focusout";t.UndoExecuted="undoExecuted";t.RedoExecuted="redoExecuted";t.StateSaved="stateSaved";t.GalleryImageSelected="galleryImageSelected";t.GalleryPopupClosed="galleryPopupClosed";return t}();t.EventConstants=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(a){"use strict";var t=function(){function r(t,e){this.container=t;this.userAgent=e}r.prototype.destroy=function(){this.stopPreventingClicks();this.stopPreventingFocus();this.stopPreventingMultipleEventTypes();this.container=null;this.userAgent=null};r.prototype.preventClicksUntilUserInteracted=function(){var e=this;if(this.container==null||this.userAgent==null){return}this.stopPreventingClicks();$(this.container).on(r.hasUserInteractedEventName,function(t){e.userInteractedInEditMode=true});this.removeClickEventHandler=r.handleEditModeClickEvents(this.container,this)};r.prototype.stopPreventingClicks=function(){this.userInteractedInEditMode=false;$(this.container).off(r.hasUserInteractedEventName);if(!MktSvc.Controls.Common.Object.isNullOrUndefined(this.removeClickEventHandler)){this.removeClickEventHandler()}this.removeClickEventHandler=null};r.prototype.preventEditModeTransitionFocus=function(){var n=this;if(this.container==null||this.userAgent==null){return}this.stopPreventingFocus();this.userInteractedInEditModeWithAnInputElement=false;var t=$(this.container).find("input");t.each(function(t,e){e.setAttribute(a.AttributeConstants.ReadOnly,a.AttributeConstants.ReadOnly);if(n.userAgent.isAndroid){$(e).on(r.focusRemoveEvent,function(t){$(e).blur();$(e).off(r.focusRemoveEvent)})}$(e).on(r.hasUserInteractedWithElementEventName,function(t){n.stopPreventingFocusEvents(e)})})};r.prototype.stopPreventingFocus=function(){var n=this;if(!this.userInteractedInEditModeWithAnInputElement){var t=$(this.container).find("input");t.each(function(t,e){n.stopPreventingFocusEvents(e)})}};r.prototype.preventMultipleEventTypes=function(){var e=this;if(this.container==null||this.userAgent==null){return}var t=function(t){e.shouldPreventMouseEvents=false;e.shouldPreventTouchEvents=false};var n=r.preventTouchEventsAfterMouseDown(this.container,this);var o=r.preventMouseEventsAfterTouchStart(this.container,this);this.container.addEventListener(a.EventConstants.Click,t,true);var i=function(){n();o();e.container.removeEventListener(a.EventConstants.Click,t,true)};this.removeMultipleEventHandlers=i};r.prototype.stopPreventingMultipleEventTypes=function(){if(!MktSvc.Controls.Common.Object.isNullOrUndefined(this.removeMultipleEventHandlers)){this.removeMultipleEventHandlers()}this.removeMultipleEventHandlers=null};r.prototype.stopPreventingFocusEvents=function(t){t.removeAttribute(a.AttributeConstants.ReadOnly);if(this.userAgent.isAndroid){$(t).off(r.focusRemoveEvent)}$(t).off(r.hasUserInteractedWithElementEventName);this.userInteractedInEditModeWithAnInputElement=true};r.handleEditModeClickEvents=function(e,n){var t=function(t){if(!n.userInteractedInEditMode){t.stopPropagation();n.userInteractedInEditMode=true;$(e).trigger(a.EventConstants.Click)}n.userInteractedInEditMode=true};e.addEventListener(a.EventConstants.Click,t,true);return function(){e.removeEventListener(a.EventConstants.Click,t,true)}};r.preventTouchEventsAfterMouseDown=function(t,e){var n=function(t){if(!e.shouldPreventTouchEvents){e.shouldPreventMouseEvents=true}else{t.stopImmediatePropagation()}};var o=function(t){if(e.shouldPreventTouchEvents){t.stopImmediatePropagation()}};t.addEventListener(a.EventConstants.TouchStart,n,true);t.addEventListener(a.EventConstants.TouchMove,o,true);t.addEventListener(a.EventConstants.TouchEnd,o,true);return function(){t.removeEventListener(a.EventConstants.TouchStart,n,true);t.removeEventListener(a.EventConstants.TouchMove,o,true);t.removeEventListener(a.EventConstants.TouchEnd,o,true)}};r.preventMouseEventsAfterTouchStart=function(t,e){var n=function(t){if(e.shouldPreventMouseEvents&&!t.touchConverted){t.stopImmediatePropagation()}};var o=function(t){if(!e.shouldPreventMouseEvents){e.shouldPreventTouchEvents=true}else{n(t)}};t.addEventListener(a.EventConstants.MouseDown,o,true);t.addEventListener(a.EventConstants.MouseMove,n,true);t.addEventListener(a.EventConstants.MouseUp,n,true);return function(){t.removeEventListener(a.EventConstants.MouseDown,o,true);t.removeEventListener(a.EventConstants.MouseMove,n,true);t.removeEventListener(a.EventConstants.MouseUp,n,true)}};r.focusRemoveEvent="focus.RemoveFocus";r.hasUserInteractedEventName="pointerdown.UserInteracted";r.hasUserInteractedWithElementEventName="pointerdown.UserInteractedElement";return r}();a.EventGuard=t})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}return t}();t.AssistEditItemSelectedEventArgs=e})(e=t.EventArgs||(t.EventArgs={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}return t}();t.ImageSelectedEventParameter=e})(e=t.EventArgs||(t.EventArgs={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(t){this.context=t;this.notificationIds=[]}t.prototype.setNotification=function(t,e,n,o){var i=this;if(!window.Xrm||!window.Xrm.Page){return false}var r=window.Xrm.Page.ui.setFormNotification(t,e,n);if(r&&this.notificationIds.indexOf(n)===-1){this.notificationIds.push(n)}if(o&&o>0&&r){setTimeout(function(){i.clearNotification(n)},o)}return r};t.prototype.clearNotification=function(t){if(!window.Xrm||!window.Xrm.Page){return false}var e=window.Xrm.Page.ui.clearFormNotification(t);if(e&&this.notificationIds.indexOf(t)!==-1){this.notificationIds.slice(this.notificationIds.indexOf(t),1)}return e};t.prototype.clearAllNotifications=function(n){var o=this;var i=true;var r=[];this.notificationIds.forEach(function(t){if(!n||n&&t.indexOf(n)===0){var e=o.clearNotification(t);if(!e){i=false;r.push(t)}}else{r.push(t)}});this.notificationIds=r;return i};return t}();t.NotificationHelper=e})(e=t.NotificationHelper||(t.NotificationHelper={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.NotificationHelper||(t.NotificationHelper={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}t.Destroy="destroy";t.Refresh="refresh";t.Value="value";t.Option="option";t.Disable="disable";t.Enable="enable";return t}();t.MethodConstants=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.itemSelected="ITEM_SELECTED";t.valueChanged="VALUE_CHANGED";t.finalItemSelected="FINAL_ITEM_SELECTED";t.initComplete="INIT_COMPLETE";t.controlCanceled="CONTROL_CANCEL";t.listBoxUpdated="LIST_BOX_UPDATED";t.enterKeyDown="ENTER_KEY_DOWN";t.focusout="FOCUSOUT";t.optionFocused="OPTION_FOCUSED";return t}();t.CustomControlEvent=e})(e=t.ControlUtils||(t.ControlUtils={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.getFromString=function(t,e){for(var n in t){if(t[n]==e){return parseInt(n)}}return-1};return t}();t.Enum=e})(e=t.ControlUtils||(t.ControlUtils={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.createName=function(t,e){return MktSvc.Controls.Common.String.Format("{0}.{1}",t,e)};return t}();t.Event=e})(e=t.ControlUtils||(t.ControlUtils={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(v){var t;(function(E){"use strict";var t=function(){function A(){}A.exists=function(t,e){return t.find(e).length>0};A.create=function(l,c,d,u,m,p,t,f){if(t<p){v.ErrorHandling.ExceptionHandler.throwException("Expected max to be bigger then min")}c.wrap('<div class="'+d+'"/>');var h=t-p;var g=l.find("."+d);var C=function(t){var e=l.find(u).offset();var n=c.width();var o=c.height();var i=t.pageY<e.top||t.pageY>e.top+o;if(!i){return}var r=$(t.target).hasClass(c[0].className)||$(t.target).hasClass(d);if(!r){return}var a=Math.abs(t.pageX+m-e.left)/n;if(a<=1){var s=E.NumericInterval.trunc(p+h*a);f(s)}if(t.type===v.EventConstants.PointerDown){$(document).on(A.mouseUpHitTargetEventName,function(t){A.removeHitTargetSubsequentEvents(g)});g.on(A.subsequentEvents,C)}else if(t.type===v.EventConstants.PointerUp){A.removeHitTargetSubsequentEvents(g)}};g.on(A.initialEvents,C);g.on(v.EventConstants.TouchEnd,function(t){A.removeHitTargetSubsequentEvents(g)})};A.removeHitTargetSubsequentEvents=function(t){$(document).off(A.mouseUpHitTargetEventName);t.off(A.subsequentEvents)};A.initialEvents="click pointerdown";A.subsequentEvents="pointermove pointerup";A.mouseUpHitTargetEventName="mouseup.HitTarget";return A}();E.HitTarget=t})(t=v.ControlUtils||(v.ControlUtils={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(p){var t;(function(t){"use strict";var m=MktSvc.Controls.Common;var e=function(){function u(){}u.throwIfNullDataBagParameters=function(t,e){if(e===void 0){e=true}if(m.Object.isNullOrUndefined(t.parameters.value)){p.ErrorHandling.ExceptionHandler.throwException(m.String.Format(p.CommonControl.InvalidDataBagKeyFormat,"value"))}if(m.Object.isNullOrUndefined(t.parameters.value.attributes.MinValue)){p.ErrorHandling.ExceptionHandler.throwException(m.String.Format(p.CommonControl.InvalidDataBagKeyFormat,"value.attributes.MinValue"))}if(m.Object.isNullOrUndefined(t.parameters.value.attributes.MaxValue)){p.ErrorHandling.ExceptionHandler.throwException(m.String.Format(p.CommonControl.InvalidDataBagKeyFormat,"value.attributes.MaxValue"))}if(e&&m.Object.isNullOrUndefined(t.parameters.step)){p.ErrorHandling.ExceptionHandler.throwException(m.String.Format(p.CommonControl.InvalidDataBagKeyFormat,"step"))}if(m.Object.isNullOrUndefined(t.parameters.min)){p.ErrorHandling.ExceptionHandler.throwException(m.String.Format(p.CommonControl.InvalidDataBagKeyFormat,"min"))}if(m.Object.isNullOrUndefined(t.parameters.max)){p.ErrorHandling.ExceptionHandler.throwException(m.String.Format(p.CommonControl.InvalidDataBagKeyFormat,"max"))}};u.processPropertyBagValues=function(t,e,n){if(n===void 0){n=true}if(m.Object.isNullOrUndefined(t.parameters)){p.ErrorHandling.ExceptionHandler.throwException("Expected context.parameters object")}var o=t.parameters.min;var i=t.parameters.max;var r=t.parameters.value;var a=t.parameters.step;var s=!m.Object.isNullOrUndefined(a);if(m.Object.isNullOrUndefined(e)){p.ErrorHandling.ExceptionHandler.throwException("Expected notificationHandler object")}e.clear(p.ErrorHandling.ErrorCode.ValueOutOfRangeId);if(m.Object.isNullOrUndefined(o.raw)){o.raw=t.parameters.value.attributes.MinValue}if(m.Object.isNullOrUndefined(i.raw)){i.raw=t.parameters.value.attributes.MaxValue}if(i.raw<o.raw){var l=i.raw;i.raw=o.raw;o.raw=l}if(m.Object.isNullOrUndefined(r.raw)||r.error==true){r.raw=o.raw}if(s&&m.Object.isNullOrUndefined(a.raw)){a.raw=u.StepDefaultValue}if(n){o.raw=Math.round(o.raw);i.raw=Math.round(i.raw);r.raw=Math.round(r.raw);if(s){a.raw=Math.round(a.raw)}}if(s&&(a.raw>i.raw-o.raw||a.raw<=0||r.raw%a.raw!==0)){a.raw=u.StepDefaultValue}if(r.raw<o.raw||r.raw>i.raw){var c=t.resources.getString(p.ErrorHandling.ErrorCode.ValueOutOfRangeId);var d=m.String.Format(c,o.raw,i.raw);e.notify(d,p.ErrorHandling.ErrorCode.ValueOutOfRangeId)}};u.createOptionalNumberPropery=function(t){return{raw:t,type:"Optional",error:null,attributes:null,errorMessage:null}};u.moveValueToMultipleOfStep=function(t,e){if(Math.abs(t-e.parameters.min.raw)%e.parameters.step.raw!==0&&t!==e.parameters.max.raw){var n=Math.floor(Math.abs(t-e.parameters.min.raw)/e.parameters.step.raw);if(isNaN(n)){n=0}t=e.parameters.min.raw+n*e.parameters.step.raw;if(t>e.parameters.max.raw){t=e.parameters.max.raw}}return t};u.getFormattedValue=function(t){var e=t.formatted;if(m.Object.isNullOrUndefined(e)||m.String.isNullOrWhitespace(e)){var n=t.raw;e=!m.Object.isNullOrUndefined(n)?n.toString():m.String.Empty}return e};u.isPercent=function(t){return!m.Object.isNullOrUndefined(t)&&t.indexOf("%")>-1};u.setValueContainer=function(t,e){var n=$(t);n.show();n.text(e)};u.getPrecision=function(t){return t.attributes.Precision};u.isNumber=function(t){return!m.Object.isNullOrUndefined(t)&&typeof t=="number"};u.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)};u.isNumeric=function(t){return!isNaN(t)&&isFinite(t)};u.StepDefaultValue=1;return u}();t.NumericInterval=e})(t=p.ControlUtils||(p.ControlUtils={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.isNullOrEmpty=function(t){return MktSvc.Controls.Common.Object.isNullOrUndefined(t)||MktSvc.Controls.Common.Object.isNullOrUndefined(t.raw)||MktSvc.Controls.Common.String.isNullOrEmpty(t.raw)};return t}();t.Property=e})(e=t.ControlUtils||(t.ControlUtils={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}t.encode=function(t){return $("<div>").text(t).html()};return t}();t.HtmlEncode=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}Object.defineProperty(t,"supportsFullscreenApi",{get:function(){var t=document;return t.fullscreenEnabled||t.webkitFullscreenEnabled||t.mozFullScreenEnabled||t.msFullscreenEnabled},enumerable:true,configurable:true});Object.defineProperty(t,"fullscreenElement",{get:function(){var t=document;return t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement},enumerable:true,configurable:true});t.requestFullscreen=function(t){if(t.requestFullscreen){t.requestFullscreen()}else if(t.webkitRequestFullscreen){t.webkitRequestFullscreen()}else if(t.mozRequestFullScreen){t.mozRequestFullScreen()}else if(t.msRequestFullscreen){t.msRequestFullscreen()}};t.requestFullscreenUsingStyling=function(t){$(t).css("width","100vw");$(t).css("height","100vh");$(t).css("overflow","visible !important");$(t).css("position","fixed !important");$(t).css("top","0px");$(t).css("left","0px");$(t).css("background-color","#000000")};t.exitFullscreen=function(){var t=document;if(t.exitFullscreen){t.exitFullscreen()}else if(t.webkitExitFullscreen){t.webkitExitFullscreen()}else if(t.mozCancelFullScreen){t.mozCancelFullScreen()}else if(t.msExitFullscreen){t.msExitFullscreen()}};t.exitFullscreenUsingStyling=function(t){$(t).css("width","");$(t).css("height","");$(t).css("overflow","");$(t).css("position","");$(t).css("top","");$(t).css("left","");$(t).css("background-color","")};return t}();t.FullscreenHelper=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}return t}();t.DataSetColumnSortStatus=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}return t}();t.ConditionExpression=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}return t}();t.FilterExpression=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(t,e){this.value=t;this.dataType=e}return t}();t.PrimitiveValue=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.CrmDecimalTypeName="decimal";t.CrmDoubleTypeName="double";t.CrmIntegerTypeName="integer";t.CrmMoneyTypeName="money";return t}();t.CrmNumberType=e})(e=t.Globalization||(t.Globalization={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(n){var t;(function(t){"use strict";var o=n.ErrorHandling.ExceptionHandler;var e=function(){function n(){this.currencyPositivePatternArray=["$n","n$","$ n","n $"];this.currencyNegativePatternArray=["($n)","-$n","$-n","$n-","(n$)","-n$","n-$","n$-","-n $","-$ n","n $-","$ n-","$ -n","n- $","($ n)","(n $)"];this.percentPositivePatternArray=["n %","n%","%n","% n"];this.percentNegativePatternArray=["-n %","-n%","-%n","%-n","%n-","n-%","n%-","-% n","n %-","% n-","% -n","n- %"]}n.prototype.getCurrencyPositivePattern=function(t){return this.getPattern(this.currencyPositivePatternArray,t)};n.prototype.getCurrencyNegativePattern=function(t){return this.getPattern(this.currencyNegativePatternArray,t)};n.prototype.getPercentPositivePattern=function(t){return this.getPattern(this.percentPositivePatternArray,t)};n.prototype.getPercentNegativePattern=function(t){return this.getPattern(this.percentNegativePatternArray,t)};n.prototype.getPattern=function(t,e){if(e<0||e>=t.length){o.throwException(MktSvc.Controls.Common.String.Format(n.NoSuchPatternError,e))}return t[e]};n.NoSuchPatternError="The number formatting pattern value that you specified does not exist: {0}.";return n}();t.NumberPatternFactory=e})(t=n.Globalization||(n.Globalization={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.assistEditInputSpanClassName="assistEditInput";t.assistEditActivePlaceholder="assistEditActivePlaceholder";t.assistEditInputWrapperClassName="assistEditInputWrapper";t.assistEditSelectedTextContainer="assistEditSelectedTextContainer";t.assistEditContainerClassName="assistEditContainer";t.assistEditEmptyPlaceholderClassName="assistEditEmptyPlaceholder";t.assistEditListBoxClassName="assistEditListBox";return t}();t.AssistEditConstants=e})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}return t}();t.AssistEditControlCallback=e})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MktSvcCommon;(function(m){var t;(function(t){"use strict";var l=MktSvc.Controls.Common.String;var c="exclusionEntityTypeFilter";var d="entityTypeFilter";var u="entityRecordFilter";var e=function(){function t(t,e,n,o){this.context=t;this.parameterProvider=o;this.assistEditSource=e;this.assistEditContainerRenderer=n}t.prototype.setup=function(t){this.onFinalItemSelected=t.finalItemSelectedCallback;this.onItemSelected=t.itemSelectedCallback;this.onOptionFocused=t.optionFocusedCallback};t.prototype.open=function(t,e,n){this.currentDocument=t[0].ownerDocument;this.assistEditControlId=MktSvc.Controls.Common.ControlGuidGenerator.newGuid("assist_edit");var o=this.assistEditContainerRenderer.render(t);o.attr("id",this.assistEditControlId);this.context.utils.bindDOMElement(this.generateChildAssistEditControl(e,n),o[0])};t.prototype.update=function(t){if(!MktSvc.Controls.Common.Object.isNullOrUndefined(this.updateAssistEditCallback)){this.updateAssistEditCallback(t)}};t.prototype.keydown=function(t){if(!MktSvc.Controls.Common.Object.isNullOrUndefined(this.assistEditKeydownCallback)){this.assistEditKeydownCallback(t)}};t.prototype.generateChildAssistEditControl=function(t,e){var n=this.parameterProvider.getDataSetParameter(this.assistEditSource,m.EntityConstants.dynamicContentMetadataTableName);var o=this.context.parameters.hasOwnProperty(c)?this.parameterProvider.getFalseBoundParameter(this.context.parameters[c].raw):this.parameterProvider.getFalseBoundParameter(l.Empty);var i=this.context.parameters.hasOwnProperty(d)?this.parameterProvider.getFalseBoundParameter(this.context.parameters[d].raw):this.parameterProvider.getFalseBoundParameter(l.Empty);var r=this.context.parameters.hasOwnProperty(u)?this.parameterProvider.getFalseBoundParameter(this.context.parameters[u].raw):this.parameterProvider.getFalseBoundParameter(l.Empty);var a=this.parameterProvider.getInputParameter(e);var s={id:this.assistEditControlId,key:this.assistEditControlId,parameters:{dynamicSource:n,exclusionEntityTypeFilter:o,entityTypeFilter:i,entityRecordFilter:r,listBoxId:a},childeventlisteners:this.generateChildListeners(t)};return this.context.factory.createComponent("MscrmControls.AssistEditControl.AssistEditControl",this.assistEditControlId,s)};t.prototype.generateChildListeners=function(e){var n=this;var t=function(t){n.onAssistEditItemSelected(t)};var o=function(t){n.onItemSelected(t)};var i=function(t){n.onOptionFocused(t)};var r=function(t){n.updateAssistEditCallback=t.updateCallback;n.assistEditKeydownCallback=t.keydownCallback;n.updateAssistEditCallback(e)};var a={eventname:m.ControlUtils.CustomControlEvent.finalItemSelected,eventhandler:t};var s={eventname:m.ControlUtils.CustomControlEvent.itemSelected,eventhandler:o};var l={eventname:m.ControlUtils.CustomControlEvent.initComplete,eventhandler:r};var c={eventname:m.ControlUtils.CustomControlEvent.optionFocused,eventhandler:i};return[a,s,l,c]};t.prototype.onAssistEditItemSelected=function(t){this.assistEditControlCallback(t.value);this.dispose()};t.prototype.dispose=function(){this.context.utils.unbindDOMComponent(this.assistEditControlId);this.assistEditContainerRenderer.dispose()};t.prototype.assistEditControlCallback=function(t){var e=new m.EventArgs.AssistEditItemSelectedEventArgs;e.value=t;this.onFinalItemSelected(e)};return t}();t.AssistEditChildControl=e})(t=m.AssistEdit||(m.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(i){"use strict";var t=function(){function t(){}t.prototype.create=function(t,e,n,o){return new i.AssistEditChildControl(t,e,n,o)};return t}();i.AssistEditChildControlFactory=t})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.AssistEdit||(t.AssistEdit={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e=function(){function t(t,e,n,o){this.clientBaseUrl=t;this.webResourceRootNamespace=e;this.controlFolder=n;this.cachePathFragmentExtractor=o}t.prototype.getLocalCrmWebResourcesPath=function(){var t=this.cachePathFragmentExtractor.tryExtractCachePathFragment();var e=new MktSvc.Controls.Common.UrlBuilder(this.clientBaseUrl);if(t!=null&&t.length>0){e=e.appendSubPath(t)}e=e.appendSubPath("WebResources").appendSubPath(this.webResourceRootNamespace).appendSubPath(this.controlFolder);return e.build()};return t}();t.LocalCrmWebResourcesPathProvider=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(t){this.localCrmWebResourcesPathProvider=t}t.prototype.getControlConfiguration=function(t){var e=this.localCrmWebResourcesPathProvider.getLocalCrmWebResourcesPath();t(e,"")};return t}();t.LocalConfigurationProvider=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(t,e,n){this.controlFolder=t;this.cdnConfigurationService=e;this.localCrmWebResourcesPathProvider=n}t.prototype.getControlConfiguration=function(i){var r=this;this.cdnConfigurationService.loadCdnConfiguration(function(t){var e=t.CdnEnabled;var n;if(e==="true"){var o=new MktSvc.Controls.Common.UrlBuilder(t.PublicAssetsCdn);n=o.appendSubPath(r.controlFolder).build()}else{n=r.localCrmWebResourcesPathProvider.getLocalCrmWebResourcesPath()}i(n,t.PublicAssetsCdn)})};return t}();t.CdnEnabledControlConfigProvider=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function s(t,e,n){this.crmUrlBase=t;this.ajaxHelper=e;this.logger=n}s.prototype.loadCdnConfiguration=function(r){var a=this;if(s.CdnConfiguration!=null){r(s.CdnConfiguration);return}var t=this.resolveUrl(s.CdnConfigurationEntityPluralName);this.ajaxHelper.GetRequest(t,function(t){try{var e=JSON.parse(t);if(e.value.length===0){throw Error("Cdn configuration settings info is missing.")}var n=e.value[0];var o={CdnEnabled:n.msdyncrm_cdnenabled,PublicAssetsCdn:n.msdyncrm_publicassetscdn};s.CdnConfiguration=o;r(o)}catch(t){r(s.DefaultCdnConfiguration);a.logger.logException(MktSvc.Controls.Common.TraceLevel.Error,"MktSvcCommon.CdnConfigurationService",t,new MktSvc.Controls.Common.Dictionary((i={},i[MktSvc.Controls.Common.ParameterKeys.ErrorMessage]="Error parsing cdn configuration.",i)))}var i},function(t){r(s.DefaultCdnConfiguration);a.logger.log(MktSvc.Controls.Common.TraceLevel.Error,"MktSvcCommon.CdnConfigurationService",new MktSvc.Controls.Common.Dictionary((e={},e[MktSvc.Controls.Common.ParameterKeys.ErrorMessage]="Error loading cdn configuration",e[MktSvc.Controls.Common.ParameterKeys.ErrorDetails]=t,e)));var e})};s.prototype.resolveUrl=function(t){var e=new MktSvc.Controls.Common.EntityRecordUrlBuilder(this.crmUrlBase,s.CdnConfigurationEntityPluralName);var n=["msdyncrm_cdnenabled","msdyncrm_publicassetscdn"];e.setSelectedFields(n);return e.build()};s.CdnConfigurationEntityPluralName="msdyncrm_cdnconfigurations";s.CdnConfiguration=null;s.DefaultCdnConfiguration={CdnEnabled:"false",PublicAssetsCdn:""};return s}();t.CdnConfigurationService=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}return t}();t.ConfigElementModel=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}t.CDNEnabled="CDNEnabled";t.CDNRoot="PublicAssetsCdn";return t}();t.OrgConfigKeys=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}t.Ui="Ui";t.Endpoints="Endpoints";return t}();t.OrgConfigNamespaces=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(e){"use strict";var t=function(){function t(t){this.controlName=t;this.decoratedControl=null;this.decoratedControlDeferred=null;this.logger=null}t.prototype.assertControl=function(t){};t.prototype.init=function(n,o,i,r){var a=this;if(!this.logger){this.logger=new e.Logger.TelemetryLogger("MktSvcCommon.ControlLoadDecorator",n)}this.controlAsserter=new MktSvc.Controls.Common.LoggerAsserter(this.logger,"MktSvcCommon.ControlLoadDecorator.assertControl",new MktSvc.Controls.Common.Dictionary({ControlName:this.controlName}));var s=MktSvc.Controls.Common.UniqueId.generate();var l=this.logger.getPerfToken();this.startDecorateAsync(n,s);this.decoratedControlDeferred.done(function(t){a.logPerf("init.loadDependencies",l,s);try{a.assertControlInternal(s);var e=a.logger.getPerfToken();t.init(n,o,i,r);a.logPerf("init.initControl",e,s)}catch(t){a.logger.logException(MktSvc.Controls.Common.TraceLevel.Error,"MktSvcCommon.ControlLoadDecorator.init",t,new MktSvc.Controls.Common.Dictionary({ControlName:a.controlName,CorrelationId:s}))}})};t.prototype.updateView=function(n){var o=this;this.decoratedControlDeferred.done(function(t){try{o.assertControlInternal();var e=o.logger.getPerfToken();t.updateView(n);o.logPerf("updateView",e)}catch(t){o.logger.logException(MktSvc.Controls.Common.TraceLevel.Error,"MktSvcCommon.ControlLoadDecorator.updateView",t,new MktSvc.Controls.Common.Dictionary({ControlName:o.controlName}))}})};t.prototype.getOutputs=function(){if(!this.decoratedControl){this.logger.log(MktSvc.Controls.Common.TraceLevel.Info,"MktSvcCommon.ControlLoadDecorator.getOutputs",new MktSvc.Controls.Common.Dictionary({ControlName:this.controlName,Message:"Decorated control is not ready"}));throw Error("Decorated control is not ready")}this.assertControlInternal();return this.decoratedControl.getOutputs()};t.prototype.destroy=function(){var n=this;if(this.decoratedControlDeferred){this.decoratedControlDeferred.done(function(t){try{n.assertControlInternal();var e=n.logger.getPerfToken();t.destroy();n.logPerf("destroy",e)}catch(t){n.logger.logException(MktSvc.Controls.Common.TraceLevel.Error,"MktSvcCommon.ControlLoadDecorator.destroy",t,new MktSvc.Controls.Common.Dictionary({ControlName:n.controlName}))}})}};t.prototype.assertControlInternal=function(t){var e=this.logger.getPerfToken();this.assertControl(this.controlAsserter);this.logPerf("assertControl",e,t)};t.prototype.startDecorateAsync=function(t,e){var n=this;this.decoratedControlDeferred=$.Deferred();var o=this.getControlLoader(t);if(!o){throw Error("ControlLoader not initialized")}o.loadControl(this.getScriptDependencies(),this.getStyleSheetDependencies(),this.controlName,e).done(function(t){n.decoratedControl=n.getDecoratedControlInstance(t);n.decoratedControlDeferred.resolve(n.decoratedControl)})};t.prototype.logPerf=function(t,e,n){var o={ControlName:this.controlName};if(n!=null){o["CorrelationId"]=n}this.logger.logPerf(MktSvc.Controls.Common.TraceLevel.Info,"MktSvcCommon.ControlLoadDecorator."+t,e,new MktSvc.Controls.Common.Dictionary(o))};return t}();e.ControlLoadDecorator=t})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e;(function(t){t.staticFiles="static";t.webResourcesRoot="msdyncrm_";t.assistEdit="AssistEditControl";t.customerJourneyDesigner="CustomerJourneyDesignerControl";t.emailEditor="EmailEditor";t.formEditor="FormEditor";t.inputAssistEdit="InputAssistEditControl";t.leadScoringDesigner="LeadScoringDesignerControl";t.pageEditor="PageEditor";t.captcha="Captcha";t.attributeSelectControl="AttributeSelectControl";t.attributeMultiSelectControl="AttributeMultiSelectControl"})(e=t.ControlResourcesFolderName||(t.ControlResourcesFolderName={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(t){this.sourceId=t}return t}();t.GalleryImageSelectedEventArgs=e})(e=t.EventArgs||(t.EventArgs={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.ImagePicker||(t.ImagePicker={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.ImagePicker||(t.ImagePicker={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MktSvcCommon;(function(a){var t;(function(t){"use strict";var n=MktSvc.Controls.Common.Object;var o=MktSvc.Controls.Common.UniqueId;var e=function(){function t(t,e){this.imagePickerContainerId="imagePickerContainer";this.imagePickerControlId="imagePickerControl";this.imagePickerModalPopupName="ms-mktsvc-ImagePicker-ModalPopup";this.context=t;if(!n.isNullOrUndefined(e)){this.imagePickerId=e}else{this.imagePickerId=o.generate()}}t.prototype.setup=function(t){this.eventBroker=t};t.prototype.open=function(t){var e=$("<div>").attr("id",this.imagePickerContainerId);this.context.utils.bindDOMElement(this.generateChildImagePickerControlControl(),e[0]);this.showPopup(this.imagePickerModalPopupName,e)};t.prototype.getId=function(){return this.imagePickerId};t.prototype.generateChildImagePickerControlControl=function(){var t={id:this.imagePickerControlId,key:this.imagePickerControlId,childeventlisteners:this.generateChildListeners(this.context)};return this.context.factory.createComponent("MscrmControls.ImagePickerControl.ImagePickerControl",this.imagePickerControlId,t)};t.prototype.generateChildListeners=function(t){var e=this;var n=function(t){e.onImagePickerItemSelected(t)};var o={eventname:a.ControlUtils.CustomControlEvent.itemSelected,eventhandler:n};var i=function(){e.eventBroker.notify(a.EventConstants.GalleryPopupClosed);e.dispose()};var r={eventname:a.ControlUtils.CustomControlEvent.controlCanceled,eventhandler:i};return[o,r]};t.prototype.onImagePickerItemSelected=function(t){this.galleryControlCallback(t.cdnUrl)};t.prototype.galleryControlCallback=function(t){var e=new a.EventArgs.GalleryImageSelectedEventArgs(this.imagePickerId);e.imageUrl=t;this.eventBroker.notify(a.EventConstants.GalleryImageSelected,e)};t.prototype.showPopup=function(t,e){this.context.utils.getPopupService().createPopup({name:t,popupToOpen:t,popupStyle:{width:"100%","max-width":"770px",height:"600px",display:"block",margin:"auto","box-shadow":"0px 0px 9px -1px #CFCDCC","background-color":"rgba(255, 255, 255, 1)"},shadowStyle:{position:"fixed","background-color":"rgba(0, 0, 0, 0.3)",width:"100%",height:"100%"},type:1,content:e[0]})};t.prototype.closePopup=function(t){this.context.utils.getPopupService().closePopup(t);this.context.utils.getPopupService().deletePopup(t)};t.prototype.dispose=function(){this.context.utils.unbindDOMComponent(this.imagePickerControlId);this.closePopup(this.imagePickerModalPopupName)};return t}();t.ImagePickerCustomControl=e})(t=a.ImagePicker||(a.ImagePicker={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
 * @license Copyright (c) Microsoft Corporation.  All rights reserved.
 */var MktSvcCommon;(function(n){var t;(function(t){"use strict";var e=function(){function t(t){this.context=t}t.prototype.create=function(t){return new n.ImagePicker.ImagePickerCustomControl(this.context,t)};return t}();t.ImagePickerCustomControlFactory=e})(t=n.ImagePicker||(n.ImagePicker={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(m){"use strict";var t=function(){function t(t,e,n){this.configProvider=t;this.dependencyManager=e;this.logger=n}t.prototype.loadControl=function(a,e,s,l){var c=this;var d=$.Deferred();var u=this.logger.getPerfToken();this.configProvider.getControlConfiguration(function(o,i){c.logPerf("loadControl.controlConfigurationRetrieved",u,s,l);var t=c.logger.getPerfToken();var r=c.getStyleSheetDependenciesCdn(o,e);c.dependencyManager.loadStylesheetsIntoDom(r,function(){c.logPerf("loadControl.stylesLoaded",t,s,l,{ResourcesCount:r.length});var e=c.logger.getPerfToken();var n=c.getScriptDependenciesCdn(o,a);c.dependencyManager.loadScriptsIntoDom(n,function(){c.logPerf("loadControl.scriptsLoaded",e,s,l,{ResourcesCount:n.length});c.logPerf("loadControl.total",u,s,l);var t=new m.ControlLoadResult(o,i);d.resolve(t)})})});return d.promise()};t.prototype.getScriptDependenciesCdn=function(t,e){var n=[];for(var o=0,i=e;o<i.length;o++){var r=i[o];var a=new MktSvc.Controls.Common.UrlBuilder(t);a=a.appendSubPath(r.loadPath);n.push(new ControlsCommon.Utils.ScriptDependencyModel(r.name,a.build(),r.scriptLoadBehavior))}return n};t.prototype.getStyleSheetDependenciesCdn=function(t,e){var n=[];for(var o=0,i=e;o<i.length;o++){var r=i[o];var a=new MktSvc.Controls.Common.UrlBuilder(t);a=a.appendSubPath(r.loadPath);n.push(new ControlsCommon.Utils.StyleSheetDependencyModel(r.name,a.build()))}return n};t.prototype.logPerf=function(t,e,n,o,i){var r=i||{};r["ControlName"]=n;if(o!=null){r["CorrelationId"]=o}this.logger.logPerf(MktSvc.Controls.Common.TraceLevel.Info,"MktSvcCommon.ControlLoader."+t,e,new MktSvc.Controls.Common.Dictionary(r))};return t}();m.ControlLoader=t})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(e){"use strict";var t=function(){function t(t,e){this.configProvider=t;this.logger=e}t.prototype.create=function(){return new e.ControlLoader(this.configProvider,new ControlsCommon.Utils.DependencyManager(document),this.logger)};return t}();e.ControlLoaderFactory=t})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(t,e){this.controlRootPath=t;this.cdnRootPath=e}return t}();t.ControlLoadResult=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict"})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict"})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(t){this.logger=t}t.prototype.onLoad=function(){var t=new MktSvc.Controls.Common.LoggerAsserter(this.logger,"MktSvcCommon.Libraries.BackboneLoadBehavior.onLoad",new MktSvc.Controls.Common.Dictionary);var e=window["_"];if(t.assertValueDefined("Underscore not available upon Backbone initialization",e)){t.assert("Underscore library version upon Backbone initialization","1.8.3",e.VERSION)}window["_"].noConflict();window["MktBackbone"]=window["Backbone"].noConflict()};return t}();t.BackboneLoadBehavior=e})(e=t.Libraries||(t.Libraries={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.prototype.onLoad=function(){window["Mkt_"]=window["_"]};return t}();t.UnderscoreLoadBehavior=e})(e=t.Libraries||(t.Libraries={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(o){var t;(function(t){"use strict";var r=MktSvc.Controls.Common.Object;var a=MktSvc.Controls.Common.String;var c=MktSvc.Controls.Common.Dictionary;var d=MktSvc.Controls.Common.TraceLevel;var s=MktSvc.Controls.Common.ParameterKeys;var e=function(){function t(t,e){this.eventName=t;this.eventParameters=e}return t}();t.TelemetryEvent=e;var l=function(){function t(t,e){this.name=t;this.value=e}return t}();t.TelemetryEventParam=l;var u=function(){function t(t,e){this.name=t;this.timestamp=e}return t}();t.PerformanceMarker=u;var n=function(){function t(t,e){this.componentName=t;this.context=e;this.performanceMarkers=new c;this.getCurrentTimestamp=performance?function(){return performance.now()}:function(){return(new Date).getUTCMilliseconds()};$(window).on("unload",{logger:this},this.windowNavigateHandler)}t.prototype.log=function(t,e,n){var o=this;var i=[];this.addStandardParameters(i,e);this.addParameters(i,n);var r=null;switch(t){case d.Error:r=function(){o.context.reporting.reportFailure("marketing",new Error(e),a.Empty,i)};break;case d.Info:case d.Verbose:case d.Warning:r=function(){o.context.reporting.reportSuccess("marketing",i)};break;default:r=function(){};break}try{r()}catch(t){console.log(e,[this.componentName,e,n])}};t.prototype.getPerfToken=function(){return{timestampInMillisUtc:this.getCurrentTimestamp()}};t.prototype.logPerf=function(t,e,n,o){var i=this.getCurrentTimestamp()-n.timestampInMillisUtc;var r=[];this.addStandardParameters(r,e);r.push(new l("ElapsedMilliseconds",i));this.addParameters(r,o);try{this.context.reporting.reportSuccess("marketingPerf",r)}catch(t){console.log(e,event)}};t.prototype.logException=function(t,e,n,o){if(!o){o=new c}var i=r.isNullOrUndefined(n.stack)?n.message:n.stack;o.addOrUpdate(s.LoggerError,i);this.log(t,e,o)};t.prototype.completeCollection=function(t,e){var n=this;var o=$.Deferred();o.done(function(){n.pushCollection(t,"CompleteCollection",e)});o.resolve()};t.prototype.windowNavigateHandler=function(t){var e=t.data.logger;if(e.performanceMarkers.getValues().count()==0){return}for(var n in e.performanceMarkers.getKeys()){e.pushCollection(n,"WindowNavigate")}};t.prototype.logMarker=function(t,e,n){var o=this;var i=this.getCurrentTimestamp();var r=$.Deferred();r.done(function(){o.logMarkerInternal(t,i,e,n)});r.resolve();return r};t.prototype.logMarkerInternal=function(t,e,n,o){var i=this.getPerformanceCollection(n,o);if(i==null){i=[];this.performanceMarkers.addOrUpdate(this.getCollectionName(n,o),i)}i.push(new u(t,e))};t.prototype.getPerformanceCollection=function(t,e){return this.performanceMarkers.get(this.getCollectionName(t,e))};t.prototype.getCollectionName=function(t,e){return e==undefined?t:t+e};t.prototype.pushCollection=function(t,e,n){var o=this.getCurrentTimestamp();var i=this.getPerformanceCollection(t,n);if(i==null||i.length==0){this.logException(d.Error,e,new Error("PerfMarkers expected, but no perf markers added for collection"),new c({CollectionName:t,CorrelationId:n}));return}this.logMarkerInternal(e,o,t,n);var r=o-i[0].timestamp;var a=JSON.stringify(i);var s=new c((l={},l["Markers"]=a,l["Total"]=r,l["Collection"]=t,l["CorrelationId"]=n,l));this.log(d.Info,"marketingPerfMarkers",s);this.performanceMarkers.remove(this.getCollectionName(t,n));var l};t.prototype.addStandardParameters=function(t,e){t.push(new l("EventName",e));t.push(new l("ComponentName",this.componentName));t.push(new l("LibraryVersion",o.VERSION))};t.prototype.addParameters=function(n,t){if(t){t.getKeys().items().forEach(function(e){switch(typeof t.get(e)){case"number":case"string":n.push(new l(e,t.get(e)));break;case"object":try{n.push(new l(e,JSON.stringify(t.get(e))))}catch(t){n.push(new l(e,"Exception caught trying to serialize JSON:"+t.message))}break;default:}})}};return t}();t.TelemetryLogger=n})(t=o.Logger||(o.Logger={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Mscrm;(function(t){"use strict";var e;(function(t){t[t["Expanded"]=0]="Expanded";t[t["UpArrowHead"]=1]="UpArrowHead";t[t["LeftArrowHead"]=2]="LeftArrowHead";t[t["Collapsed"]=3]="Collapsed";t[t["Edit"]=4]="Edit";t[t["Save"]=5]="Save";t[t["Delete"]=6]="Delete";t[t["Remove"]=7]="Remove";t[t["Add"]=8]="Add";t[t["Cancel"]=9]="Cancel";t[t["HandClick"]=10]="HandClick";t[t["Accept"]=11]="Accept";t[t["More"]=12]="More";t[t["Forward"]=13]="Forward";t[t["Favorite"]=14]="Favorite";t[t["Placeholder"]=15]="Placeholder";t[t["RatingFull"]=16]="RatingFull";t[t["RatingEmpty"]=17]="RatingEmpty";t[t["Options"]=18]="Options";t[t["Manage"]=19]="Manage";t[t["Settings"]=20]="Settings";t[t["Find"]=21]="Find";t[t["Help"]=22]="Help";t[t["ViewNotifications"]=23]="ViewNotifications";t[t["StageAdvance"]=24]="StageAdvance";t[t["CheckMark"]=25]="CheckMark";t[t["Locked"]=26]="Locked";t[t["Lock"]=27]="Lock";t[t["MoreOptions"]=28]="MoreOptions";t[t["ContactInfo"]=29]="ContactInfo";t[t["Pin"]=30]="Pin";t[t["Unpin"]=31]="Unpin";t[t["Refresh"]=32]="Refresh";t[t["Details"]=33]="Details";t[t["VisualFilter"]=34]="VisualFilter";t[t["GlobalFilter"]=35]="GlobalFilter";t[t["Diamond"]=36]="Diamond";t[t["ApplyFilter"]=37]="ApplyFilter";t[t["CancelFilter"]=38]="CancelFilter";t[t["StreamView"]=39]="StreamView";t[t["TileView"]=40]="TileView";t[t["Import"]=41]="Import";t[t["Tools"]=42]="Tools";t[t["Attach"]=43]="Attach";t[t["Filter"]=44]="Filter";t[t["Copy"]=45]="Copy";t[t["HighPriority"]=46]="HighPriority";t[t["ReduceTile"]=47]="ReduceTile";t[t["ExpandTile"]=48]="ExpandTile";t[t["GlobalFilterExpand"]=49]="GlobalFilterExpand";t[t["GlobalFilterCollapse"]=50]="GlobalFilterCollapse";t[t["Clear"]=51]="Clear";t[t["Post"]=52]="Post";t[t["OneNote"]=53]="OneNote";t[t["Home"]=54]="Home";t[t["SetAsHome"]=55]="SetAsHome";t[t["BackButton"]=56]="BackButton";t[t["BackButtonWithoutBorder"]=57]="BackButtonWithoutBorder";t[t["UpArrow"]=58]="UpArrow";t[t["DownArrow"]=59]="DownArrow";t[t["SetActiveButton"]=60]="SetActiveButton";t[t["SearchButton"]=61]="SearchButton";t[t["ForwardButton"]=62]="ForwardButton";t[t["Mail"]=63]="Mail";t[t["CheckedMail"]=64]="CheckedMail";t[t["FailedMail"]=65]="FailedMail";t[t["Phone"]=66]="Phone";t[t["Chat"]=67]="Chat";t[t["OpenPane"]=68]="OpenPane";t[t["ClosePane"]=69]="ClosePane";t[t["AddFriend"]=70]="AddFriend";t[t["Arrow"]=71]="Arrow";t[t["DropdownArrow"]=72]="DropdownArrow";t[t["FlsLocked"]=73]="FlsLocked";t[t["LinkArticle"]=74]="LinkArticle";t[t["UnlinkArticle"]=75]="UnlinkArticle";t[t["CopyLink"]=76]="CopyLink";t[t["EmailLink"]=77]="EmailLink";t[t["Share"]=78]="Share";t[t["Assign"]=79]="Assign";t[t["Connect"]=80]="Connect";t[t["Opportunity"]=81]="Opportunity";t[t["Appointment"]=82]="Appointment";t[t["Task"]=83]="Task";t[t["Case"]=84]="Case";t[t["PhoneCallIncoming"]=85]="PhoneCallIncoming";t[t["PhoneCallOutgoing"]=86]="PhoneCallOutgoing";t[t["EmailIncoming"]=87]="EmailIncoming";t[t["EmailOutgoing"]=88]="EmailOutgoing";t[t["SendEmail"]=89]="SendEmail";t[t["ApplyTemplate"]=90]="ApplyTemplate";t[t["InsertKbArticle"]=91]="InsertKbArticle";t[t["SendSelected"]=92]="SendSelected";t[t["SaveAndClose"]=93]="SaveAndClose";t[t["ReplyEmail"]=94]="ReplyEmail";t[t["ReplyAllEmail"]=95]="ReplyAllEmail";t[t["ForwardEmail"]=96]="ForwardEmail";t[t["Close"]=97]="Close";t[t["Activate"]=98]="Activate";t[t["DeActivate"]=99]="DeActivate";t[t["DeleteBulk"]=100]="DeleteBulk";t[t["SocialActivityIncoming"]=101]="SocialActivityIncoming";t[t["SocialActivityOutgoing"]=102]="SocialActivityOutgoing";t[t["CustomActivity"]=103]="CustomActivity";t[t["SystemPost"]=104]="SystemPost";t[t["Convert"]=105]="Convert";t[t["MarkAsWon"]=106]="MarkAsWon";t[t["MarkAsLost"]=107]="MarkAsLost";t[t["SetRegarding"]=108]="SetRegarding";t[t["SaveAsComplete"]=109]="SaveAsComplete";t[t["SwitchProcess"]=110]="SwitchProcess";t[t["Recalculate"]=111]="Recalculate";t[t["SendDirectEmail"]=112]="SendDirectEmail";t[t["OpenMailbox"]=113]="OpenMailbox";t[t["ReOpenOpportunity"]=114]="ReOpenOpportunity";t[t["ReactivateLead"]=115]="ReactivateLead";t[t["Disqualify"]=116]="Disqualify";t[t["Qualify"]=117]="Qualify";t[t["SelectView"]=118]="SelectView";t[t["SelectChart"]=119]="SelectChart";t[t["OpenInBrowser"]=120]="OpenInBrowser";t[t["NewAppointment"]=121]="NewAppointment";t[t["NewRecurringAppointment"]=122]="NewRecurringAppointment";t[t["NewPhoneCall"]=123]="NewPhoneCall";t[t["NewTask"]=124]="NewTask";t[t["NewEmail"]=125]="NewEmail";t[t["AddExisting"]=126]="AddExisting";t[t["SaveAndEdit"]=127]="SaveAndEdit";t[t["Default"]=128]="Default";t[t["ScrollRight"]=129]="ScrollRight";t[t["ScrollLeft"]=130]="ScrollLeft";t[t["SaveAndRunRoutingRule"]=131]="SaveAndRunRoutingRule";t[t["RunRoutingRule"]=132]="RunRoutingRule";t[t["ResolveCase"]=133]="ResolveCase";t[t["CancelCase"]=134]="CancelCase";t[t["ReactivateCase"]=135]="ReactivateCase";t[t["AddToQueue"]=136]="AddToQueue";t[t["CreateChildCase"]=137]="CreateChildCase";t[t["QueueItemRoute"]=138]="QueueItemRoute";t[t["QueueItemRelease"]=139]="QueueItemRelease";t[t["QueueItemRemove"]=140]="QueueItemRemove";t[t["QueueItemPick"]=141]="QueueItemPick";t[t["Drilldown"]=142]="Drilldown";t[t["PopOverButton"]=143]="PopOverButton";t[t["ExitButton"]=144]="ExitButton";t[t["ExportToExcel"]=145]="ExportToExcel";t[t["WordTemplates"]=146]="WordTemplates";t[t["DocumentTemplates"]=147]="DocumentTemplates";t[t["OpenInPowerBI"]=148]="OpenInPowerBI";t[t["OpenPowerBIReport"]=149]="OpenPowerBIReport";t[t["OpenDelve"]=150]="OpenDelve";t[t["ArticleLink"]=151]="ArticleLink";t[t["ArchiveArticle"]=152]="ArchiveArticle";t[t["ApproveArticle"]=153]="ApproveArticle";t[t["DiscardArticle"]=154]="DiscardArticle";t[t["Minor"]=155]="Minor";t[t["Major"]=156]="Major";t[t["PublishKnowledgeArticle"]=157]="PublishKnowledgeArticle";t[t["RelateArticle"]=158]="RelateArticle";t[t["RelateProduct"]=159]="RelateProduct";t[t["RestoreArticle"]=160]="RestoreArticle";t[t["RevertToDraftArticle"]=161]="RevertToDraftArticle";t[t["Translate"]=162]="Translate";t[t["UpdateArticle"]=163]="UpdateArticle";t[t["RemoveFilter"]=164]="RemoveFilter";t[t["Article"]=165]="Article";t[t["Graph"]=166]="Graph";t[t["CSR"]=167]="CSR";t[t["MembersIcon"]=168]="MembersIcon";t[t["QueueIcon"]=169]="QueueIcon";t[t["SiteMap"]=170]="SiteMap";t[t["NormalPriority"]=171]="NormalPriority";t[t["LowPriority"]=172]="LowPriority";t[t["ViewIcon"]=173]="ViewIcon";t[t["RecentCases"]=174]="RecentCases";t[t["KBRecords"]=175]="KBRecords";t[t["NumberOfViews"]=176]="NumberOfViews";t[t["ResizeHandle"]=177]="ResizeHandle";t[t["TaskBasedFlow"]=178]="TaskBasedFlow";t[t["InformationIcon"]=179]="InformationIcon";t[t["PencilIcon"]=180]="PencilIcon";t[t["ErrorIcon"]=181]="ErrorIcon";t[t["SuccessIcon"]=182]="SuccessIcon";t[t["OptionsetIcon"]=183]="OptionsetIcon";t[t["NotificationIcon"]=184]="NotificationIcon";t[t["PanelHeaderImportDataIcon"]=185]="PanelHeaderImportDataIcon";t[t["SidePanelUpload"]=186]="SidePanelUpload";t[t["New"]=187]="New";t[t["DetailsPageClose"]=188]="DetailsPageClose";t[t["SettingsListIcon"]=189]="SettingsListIcon";t[t["ListIcon"]=190]="ListIcon";t[t["ForwardDisable"]=191]="ForwardDisable";t[t["PdfIconFile"]=192]="PdfIconFile";t[t["PresentationFile"]=193]="PresentationFile";t[t["OneNoteFile"]=194]="OneNoteFile";t[t["AccessFile"]=195]="AccessFile";t[t["VisioFile"]=196]="VisioFile";t[t["ProjectFile"]=197]="ProjectFile";t[t["Plus"]=198]="Plus";t[t["ChevronUp"]=199]="ChevronUp";t[t["ChevronDown"]=200]="ChevronDown";t[t["HappySmiley"]=201]="HappySmiley";t[t["SadSmiley"]=202]="SadSmiley";t[t["CaseResolution"]=203]="CaseResolution";t[t["CampaignResolution"]=204]="CampaignResolution";t[t["ServiceActivity"]=205]="ServiceActivity";t[t["Notes"]=206]="Notes";t[t["Audio"]=207]="Audio";t[t["Camera"]=208]="Camera";t[t["Video"]=209]="Video";t[t["Image"]=210]="Image";t[t["Html"]=211]="Html";t[t["SharePointEditDocument"]=212]="SharePointEditDocument";t[t["SharePointDeleteDocument"]=213]="SharePointDeleteDocument";t[t["SharePointCheckoutDocument"]=214]="SharePointCheckoutDocument";t[t["SharePointCheckinDocument"]=215]="SharePointCheckinDocument";t[t["SharePointEditDocumentProperties"]=216]="SharePointEditDocumentProperties";t[t["SharePointDiscardCheckoutDocument"]=217]="SharePointDiscardCheckoutDocument";t[t["SharePointNewDocument"]=218]="SharePointNewDocument";t[t["SharePointNewWordDocument"]=219]="SharePointNewWordDocument";t[t["SharePointNewExcelDocument"]=220]="SharePointNewExcelDocument";t[t["SharePointNewPowerPointDocument"]=221]="SharePointNewPowerPointDocument";t[t["SharePointNewOneNoteDocument"]=222]="SharePointNewOneNoteDocument";t[t["SharePointUploadDocument"]=223]="SharePointUploadDocument";t[t["SharePointChangeLocation"]=224]="SharePointChangeLocation";t[t["SharePointAddDocumentLocation"]=225]="SharePointAddDocumentLocation";t[t["SharePointEditLocation"]=226]="SharePointEditLocation";t[t["SharePointOpenLocation"]=227]="SharePointOpenLocation";t[t["SharePointOpenDocument"]=228]="SharePointOpenDocument";t[t["SendByEmail"]=229]="SendByEmail";t[t["CreateQuote"]=230]="CreateQuote";t[t["Reply"]=231]="Reply";t[t["Warning"]=232]="Warning";t[t["Play"]=233]="Play";t[t["ExpandButton"]=234]="ExpandButton";t[t["AssociatedArticle"]=235]="AssociatedArticle";t[t["DisassociatedArticle"]=236]="DisassociatedArticle";t[t["FormDesign"]=237]="FormDesign";t[t["GlobalFilterClearAll"]=238]="GlobalFilterClearAll";t[t["GlobalFilterExpandedRow"]=239]="GlobalFilterExpandedRow";t[t["GlobalFilterCollapsedRow"]=240]="GlobalFilterCollapsedRow";t[t["RelationshipAssistant"]=241]="RelationshipAssistant";t[t["AutomaticSuggestions"]=242]="AutomaticSuggestions";t[t["SemanticZoom"]=243]="SemanticZoom";t[t["SemanticZoomMirrored"]=244]="SemanticZoomMirrored";t[t["BackwardButton"]=245]="BackwardButton";t[t["MultiSelect"]=246]="MultiSelect";t[t["MultiSelectMirrored"]=247]="MultiSelectMirrored";t[t["Spinning"]=248]="Spinning";t[t["RetireProduct"]=249]="RetireProduct";t[t["AddProduct"]=250]="AddProduct";t[t["OfflineStatus"]=251]="OfflineStatus";t[t["Abandon"]=252]="Abandon";t[t["Reactivate"]=253]="Reactivate";t[t["FinishStage"]=254]="FinishStage";t[t["SortButton"]=255]="SortButton";t[t["Flows"]=256]="Flows";t[t["OpenEntityRecord"]=257]="OpenEntityRecord";t[t["View"]=258]="View";t[t["CreateView"]=259]="CreateView";t[t["EditView"]=260]="EditView";t[t["GuestUser"]=261]="GuestUser";t[t["History"]=262]="History";t[t["ReassignRecords"]=263]="ReassignRecords";t[t["ManageRoles"]=264]="ManageRoles";t[t["JoinTeams"]=265]="JoinTeams";t[t["ChangeManager"]=266]="ChangeManager";t[t["AddMembers"]=267]="AddMembers";t[t["RemoveMembers"]=268]="RemoveMembers";t[t["Download"]=269]="Download";t[t["SetAsDefaultView"]=270]="SetAsDefaultView";t[t["Pinned"]=271]="Pinned";t[t["DistributionList"]=272]="DistributionList";t[t["MergeRecords"]=273]="MergeRecords";t[t["AssociateChildCase"]=274]="AssociateChildCase";t[t["SetAsDefault"]=275]="SetAsDefault";t[t["ConvertKnowledgeArticle"]=276]="ConvertKnowledgeArticle";t[t["Messenger"]=277]="Messenger";t[t["AssociateCategory"]=278]="AssociateCategory";t[t["OfficeWaffle"]=279]="OfficeWaffle";t[t["TripleColumn"]=280]="TripleColumn";t[t["Tiles"]=281]="Tiles";t[t["HideVisualFilter"]=282]="HideVisualFilter";t[t["InteractiveDashboard"]=283]="InteractiveDashboard";t[t["Dynamics365"]=284]="Dynamics365";t[t["SalesLiterature"]=285]="SalesLiterature";t[t["SelectButton"]=286]="SelectButton";t[t["SelectButtonRTL"]=287]="SelectButtonRTL";t[t["LockPricing"]=288]="LockPricing";t[t["CreateInvoice"]=289]="CreateInvoice";t[t["FulfillOrder"]=290]="FulfillOrder";t[t["CancelInvoice"]=291]="CancelInvoice";t[t["ActivateQuote"]=292]="ActivateQuote";t[t["InvoicePaid"]=293]="InvoicePaid";t[t["GetProducts"]=294]="GetProducts";t[t["UnlockPricing"]=295]="UnlockPricing";t[t["Checkbox"]=296]="Checkbox";t[t["CheckboxComposite"]=297]="CheckboxComposite";t[t["RightChevron"]=298]="RightChevron";t[t["LeftChevron"]=299]="LeftChevron";t[t["UntrackedEmail"]=300]="UntrackedEmail";t[t["OpenEmail"]=301]="OpenEmail";t[t["GlobalFilterCollapsedRowRTL"]=302]="GlobalFilterCollapsedRowRTL";t[t["CancelOrder"]=303]="CancelOrder";t[t["URL"]=304]="URL";t[t["Ticker"]=305]="Ticker";t[t["UseCurrentPricing"]=306]="UseCurrentPricing";t[t["Process"]=307]="Process";t[t["FirstPageButton"]=308]="FirstPageButton";t[t["LinkedInLogo"]=309]="LinkedInLogo";t[t["Health"]=310]="Health";t[t["Family"]=311]="Family";t[t["Sports"]=312]="Sports";t[t["Entertainment"]=313]="Entertainment";t[t["OOF"]=314]="OOF";t[t["CarouselView"]=315]="CarouselView";t[t["HeartEmpty"]=316]="HeartEmpty";t[t["HeartFilled"]=317]="HeartFilled";t[t["Follow"]=318]="Follow";t[t["RunQuery"]=319]="RunQuery";t[t["GroupAnd"]=320]="GroupAnd";t[t["GroupOr"]=321]="GroupOr";t[t["Ungroup"]=322]="Ungroup";t[t["HideInSimpleMode"]=323]="HideInSimpleMode";t[t["ShowInSimpleMode"]=324]="ShowInSimpleMode";t[t["PinnedSolid"]=325]="PinnedSolid";t[t["FilterSolid"]=326]="FilterSolid";t[t["Bot"]=327]="Bot";t[t["SystemDocumentTemplates"]=328]="SystemDocumentTemplates";t[t["MyDocumentTemplates"]=329]="MyDocumentTemplates";t[t["ViewAllMyDocumentTemplates"]=330]="ViewAllMyDocumentTemplates";t[t["EnableSecurityRoles"]=331]="EnableSecurityRoles";t[t["DocumentTemplateUpload"]=332]="DocumentTemplateUpload";t[t["DocumentTemplateEdit"]=333]="DocumentTemplateEdit";t[t["DocumentTemplateActivate"]=334]="DocumentTemplateActivate";t[t["DocumentTemplateDeactivate"]=335]="DocumentTemplateDeactivate";t[t["YammerIcon"]=336]="YammerIcon"})(e=t.MicrosoftIconSymbol||(t.MicrosoftIconSymbol={}))})(Mscrm||(Mscrm={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}return t}();t.ControlInitEventArgs=e})(e=t.EventArgs||(t.EventArgs={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(t.ControlInitEventArgs);t.AssistEditInitControlEventArgs=e})(e=t.EventArgs||(t.EventArgs={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}return t}();t.AssistEditOptionFocusedEventArgs=e})(e=t.EventArgs||(t.EventArgs={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}return t}();t.InputAssistEditValueChangedEventArgs=e})(e=t.EventArgs||(t.EventArgs={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";var e=function(){function t(){}t.dynamicContentMetadataTableName="msdyncrm_marketingemaildynamiccontentmetadata";t.msdyncrm_organization_config="msdyncrm_organization_config";t.itemTypeFieldName="msdyncrm_itemType";t.syntaxFieldName="msdyncrm_syntax";t.fieldsFieldName="msdyncrm_fields";return t}();t.EntityConstants=e})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){"use strict";t.VERSION="1.25.25.0"})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.UndoRedo||(t.UndoRedo={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.UndoRedo||(t.UndoRedo={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(o){var t;(function(t){"use strict";var e=MktSvc.Controls.Common.UniqueId;var n=function(){function t(){this.Id=e.generate()}t.prototype.init=function(t){var e=this;this.control=t;this.control.getEventBroker().subscribe(o.EventConstants.UndoExecuted,this.onUndo=function(){return e.undo()});this.control.getEventBroker().subscribe(o.EventConstants.RedoExecuted,this.onRedo=function(){return e.redo()})};t.prototype.dispose=function(){this.control.getEventBroker().unsubscribe(o.EventConstants.UndoExecuted,this.onUndo);this.control.getEventBroker().unsubscribe(o.EventConstants.RedoExecuted,this.onRedo)};t.prototype.saveState=function(t){if(!this.isStateValidForSave(t))return;this.currentStateIndex++;this.savedStates.splice(this.currentStateIndex,this.savedStates.length-this.currentStateIndex,t);this.control.getEventBroker().notify(o.EventConstants.StateSaved)};t.prototype.undo=function(){if(this.savedStates.length===0||this.currentStateIndex===0){return}this.currentStateIndex--;var t=this.savedStates[this.currentStateIndex];this.restoreState(t)};t.prototype.redo=function(){if(this.savedStates.length===0||this.currentStateIndex===this.savedStates.length-1){return}this.currentStateIndex++;var t=this.savedStates[this.currentStateIndex];this.restoreState(t)};return t}();t.UndoRedoManagerBase=n})(t=o.UndoRedo||(o.UndoRedo={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.Lookup||(t.Lookup={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.Lookup||(t.Lookup={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var C=MktSvc.Controls.Common.Object;var e=function(){function t(t,e,n,o,i){if(o===void 0){o=false}if(i===void 0){i=true}this.context=t;this.logger=e;this.invalidRecordItemName=n;this.disableMru=o;this.isControlEnabled=i;this.lookupControlId="LookupControl";this.lookupContainerId="LookupControl";this.lookupContainerCssClass="lookupInput";this.lookupControlIdPrefix="lookup";this.reload=function(){}}t.prototype.loadLookup=function(e,r,a,s,n,o,i,l,t,c){var d=this;var u=null;var m=t;this.controlId=MktSvc.Controls.Common.UniqueId.generate(this.lookupControlIdPrefix+r);if(!m){var p=$("<div></div>").appendTo(e);p.attr("id",r+this.lookupContainerId);p.addClass(this.lookupContainerCssClass);m=p.get(0)}var f=function(t){d.loadLookup(e,r,a,s,n,t?{Id:t.Id||t.id,Name:t.Name||t.name}:null,i,l,m);n(t)};if(!C.isNullOrUndefined(o)){if(MktSvc.Controls.Common.String.isNullUndefinedOrWhitespace(o.Name)){var h=new MktSvc.Controls.Common.EntityRecordUrlBuilder(this.context.page.getClientUrl(),i);h.setRecordId(o.Id);var g=new MktSvc.Controls.Common.ODataServiceClient(this.logger);g.getData(h.build()).done(function(t){var e=JSON.parse(t);u={Id:o.Id,Name:e[l],LogicalName:r,get_identifier:function(){return o.Id}};d.renderControl(m,d.controlId,r,a,s,f,u)}).fail(function(t,e){var n=e!==404?MktSvc.Controls.Common.TraceLevel.Error:MktSvc.Controls.Common.TraceLevel.Info;d.logger.log(n,"MktSvcCommon.Lookup.LookupCustomControl.loadLookup",new MktSvc.Controls.Common.Dictionary((i={Url:h.build(),Status:e},i[MktSvc.Controls.Common.ParameterKeys.ErrorDetails]=t,i)));if(e===404){var o=MktSvc.Controls.Common.Guid.GetNullGuid();u={Id:o,Name:d.invalidRecordItemName,LogicalName:r,get_identifier:function(){return o}};d.renderControl(m,d.controlId,r,a,s,f,u,c)}var i})}else{u={Id:o.Id,Name:o.Name,LogicalName:r,get_identifier:function(){return o.Id}};this.renderControl(m,this.controlId,r,a,s,f,u,c)}}else{this.renderControl(m,this.controlId,r,a,s,f,u,c)}};t.prototype.setEnabled=function(t){if(t!=this.isControlEnabled){this.isControlEnabled=t;this.reload()}};t.prototype.dispose=function(){this.unbindComponent()};t.prototype.getControlId=function(){return this.controlId};t.prototype.renderControl=function(t,e,n,o,i,r,a,s){var l=this;this.context.utils.bindDOMElement(this.generateChildLookupControlControl(this.controlId,n,o,i,r,a,s),t);this.reload=function(){l.unbindComponent();while(t.firstChild){t.removeChild(t.firstChild)}l.renderControl(t,e,n,o,i,r,a,s)}};t.prototype.unbindComponent=function(){try{this.context.utils.unbindDOMComponent(this.getControlId())}catch(t){this.logger.logException(MktSvc.Controls.Common.TraceLevel.Error,"MktSvcCommon.Lookup.LookupCustomControl.unbindComponent",t)}};t.prototype.generateChildLookupControlControl=function(t,e,n,o,i,r,a){var s=function(t){var e=null;if(!C.isNullOrUndefined(t)){if(Array.isArray(t)){e=t.length?t[0]:null}else{e=t}}i(e)};var l={DisplayName:n,IsSecured:false,Format:"none",LogicalName:e+this.lookupControlId,ImeMode:-1,RequiredLevel:0,Type:"lookup",Targets:[e]};var c={id:t,key:t,parameters:{value:{Attributes:l,Callback:s,Usage:3,Static:false,Type:"Lookup.Simple",Value:r,Primary:true,EntityName:e,Name:"value",ViewId:o,AllowFilterOff:false,DisableQuickFind:false,EnableViewPicker:true,TargetEntityType:e,DisableMru:this.disableMru},valueDataSet:{EntityName:e,ViewId:o,EnableViewPicker:true,TargetEntityType:e,Name:"valueDataSet"}},controlstates:{isControlDisabled:!this.isControlEnabled}};if(a!=null){c.parameters.value.ExtraFilters=[a];c.parameters.value.AllowFilterOff=true}var d=this.context.factory.createComponent("MscrmControls.FieldControls.SimpleLookupControl",t,c);return d};return t}();t.LookupCustomControl=e})(e=t.Lookup||(t.Lookup={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Mscrm;(function(t){"use strict"})(Mscrm||(Mscrm={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(t,e,n){this.context=t;this.logger=e;this.quickViewContainerId="QuickViewControl";this.quickViewContainerCssClass=n?n:"quickViewControl"}t.prototype.loadQuickView=function(t,e,n,o,i){var r=$("<div/>").appendTo(e);r.attr("id",t+this.quickViewContainerId);r.addClass(this.quickViewContainerCssClass);this.context.utils.bindDOMElement(this.generateChildQuickViewControl(t,e,n,o,i),r.get(0))};t.prototype.generateChildQuickViewControl=function(t,e,n,o,i){if(MktSvc.Controls.Common.String.isNullUndefinedOrWhitespace(i)){i="00000000-0000-0000-0000-000000000000"}var r={Usage:0,Type:"Form.QuickForm",Value:o+":Quick|"+n+"|"+i,Static:false,Primary:true};var a={controlstates:{hasFocus:this.context.mode.hasFocus,isControlDisabled:this.context.mode.isControlDisabled},parameters:{value:r}};var s=this.context.factory.createComponent("MscrmControls.Containers.QuickForm",t,a);return s};t.prototype.dispose=function(t){try{this.context.utils.unbindDOMComponent(t)}catch(t){this.logger.logException(MktSvc.Controls.Common.TraceLevel.Error,"MktSvcCommon.QuickView.QuickViewControl.dispose",t)}};return t}();t.QuickViewControl=e})(e=t.QuickView||(t.QuickView={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.getUniqueId=function(){var t="xxxxxxxxxxxx".replace(/[x]/g,function(){var t=Math.floor(Math.random()*16);return t.toString(16)});var e=(new Date).getTime();var n=Math.random().toString(16).slice(2);return""+t+n+e};return t}();t.UniqueId=e})(e=t.ControlUtils||(t.ControlUtils={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict"})(e=t.ControlUtils||(t.ControlUtils={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(t){var e;(function(t){"use strict";var e=function(){function t(){}t.prototype.getDataSetParameter=function(t,e){var n=[];t.columns.forEach(function(t){n.push({Alias:t.alias,Name:t.name,DataType:t.dataType})});return{Columns:n,ViewId:t.getViewId()||t.viewId,TargetEntityType:e,Type:"Grid"}};t.prototype.getInputParameter=function(t){return{Usage:1,Type:"SingleLine.Text",Value:t,Static:true,Primary:false}};t.prototype.getBoundParameter=function(t){return{Usage:0,Type:"SingleLine.Text",Value:t,Static:false,Primary:true}};t.prototype.getFalseBoundParameter=function(t){return{Usage:3,Type:"SingleLine.Text",Value:t}};return t}();t.ControlCompositionParameterProvider=e})(e=t.ControlUtils||(t.ControlUtils={}))})(MktSvcCommon||(MktSvcCommon={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MktSvcCommon;(function(r){"use strict";var t=function(){function t(t){this.controlName=t;this.decoratedControl=null;this.decoratedControlDeferred=null;this.logger=null}t.prototype.init=function(e,n,o){var i=this;this.logger=new r.Logger.TelemetryLogger("MktSvcCommon.VirtualControlLoadDecorator",e);this.startDecorateAsync(e);this.decoratedControlDeferred.done(function(t){try{t.init(e,n,o)}catch(t){i.logger.logException(MktSvc.Controls.Common.TraceLevel.Error,"MktSvcCommon.VirtualControlLoadDecorator.init",t,new MktSvc.Controls.Common.Dictionary({ControlName:i.controlName}))}})};t.prototype.updateView=function(t){if(!this.decoratedControl){this.logger.log(MktSvc.Controls.Common.TraceLevel.Info,"MktSvcCommon.VirtualControlLoadDecorator.updateView",new MktSvc.Controls.Common.Dictionary({ControlName:this.controlName,Message:"Decorated control is not ready"}));return null}return this.decoratedControl.updateView(t)};t.prototype.getOutputs=function(){if(!this.decoratedControl){this.logger.log(MktSvc.Controls.Common.TraceLevel.Info,"MktSvcCommon.VirtualControlLoadDecorator.getOutputs",new MktSvc.Controls.Common.Dictionary({ControlName:this.controlName,Message:"Decorated control is not ready"}));throw Error("Decorated control is not ready")}return this.decoratedControl.getOutputs()};t.prototype.destroy=function(){var e=this;if(this.decoratedControlDeferred){this.decoratedControlDeferred.done(function(t){try{t.destroy()}catch(t){e.logger.logException(MktSvc.Controls.Common.TraceLevel.Error,"MktSvcCommon.VirtualControlLoadDecorator.destroy",t,new MktSvc.Controls.Common.Dictionary({ControlName:e.controlName}))}})}};t.prototype.startDecorateAsync=function(t){var e=this;this.decoratedControlDeferred=$.Deferred();var n=this.getControlLoader(t);if(!n){throw Error("ControlLoader not initialized")}n.loadControl(this.getScriptDependencies(),this.getStyleSheetDependencies(),this.controlName).done(function(t){e.decoratedControl=e.getDecoratedControlInstance(t);e.decoratedControlDeferred.resolve(e.decoratedControl)})};return t}();r.VirtualControlLoadDecorator=t})(MktSvcCommon||(MktSvcCommon={}));"use strict";var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n]};return function(t,e){o(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(s){"use strict";var l=MktSvc.Controls.Common.Object;var a=MktSvc.Controls.Common.String;var c=MktSvc.Controls.Common.TraceLevel;var d=MktSvc.Controls.Common.Dictionary;var t=function(){function t(t,e,n,o,i,r){this.contentSanitizer=new s.jSanityContentSanitizer(this);this.logger=e;this.localizationProvider=t;this.isShimApplication=r;this.cdnPath=n;if(l.isNullOrUndefined(o)){o=a.Empty}this.libsFolder=o;this.configurationProvider=i}t.prototype.getLocalizationProvider=function(){return this.localizationProvider};t.prototype.getLogger=function(){return this.logger};t.prototype.getDelaySchedulerTime=function(){return 1e3};t.prototype.getBasePath=function(){return this.cdnPath};t.prototype.getLibsPath=function(){return this.cdnPath+"/"+this.libsFolder};t.prototype.getContentSanitizer=function(){return this.contentSanitizer};t.prototype.isSandboxed=function(){return true};t.prototype.shouldPreviewBeSanitized=function(){return true};t.prototype.getConfigurationProvider=function(){return this.configurationProvider};t.prototype.isShimApp=function(){if(l.isNullOrUndefined(this.isShimApplication)){return false}return this.isShimApplication};t.prototype.isFocused=function(){return false};t.prototype.tryExecute=function(t,e,n,o,i){var r="Editor.DefaultExecutionContext.tryExecute";var a=l.isNullOrUndefined(i)?new d:i;a.addOrUpdate("EventName",e);try{this.getLogger().log(c.Info,r,a);t();this.getLogger().log(c.Info,r+".successful",a)}catch(t){a.addOrUpdate("Exception",t.stack);this.getLogger().log(c.Error,r,a);if(s.CommonUtils.isFunction(o)){o(t)}if(n){throw t}}};t.prototype.dispose=function(){this.contentSanitizer.dispose();this.contentSanitizer=null;this.localizationProvider=null;this.logger=null};return t}();s.DefaultExecutionContext=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.prototype.setupCkEditor=function(t){this.ckEditorProxy=t};return t}();t.CkEditorCommand=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(m){"use strict";var p=MktSvc.Controls.Common.Object;var f=MktSvc.Controls.Common.String;var h=MktSvc.Controls.Common.UniqueId;var t=function(){function u(){this.okButon="[OK]";this.cancelButon="[Cancel]"}u.prototype.setup=function(t){this.eventBroker=t};u.prototype.render=function(t,n,e,o,i,r,a){var s=this;var l=$("<div></div>");l.attr("title",t);this.popupId=h.generate();m.CommonUtils.setId(l,this.popupId);var c=[];if(o){c=[{text:m.CommonUtils.getLocalizedString(this.cancelButon),title:m.CommonUtils.getLocalizedString(this.cancelButon),class:u.cancelButtonCssClassName,click:function(t){if(!p.isNullOrUndefined(e)){e()}s.close();t.stopPropagation();t.preventDefault()}},{class:u.okButtonCssClassName,text:m.CommonUtils.getLocalizedString(this.okButon),title:m.CommonUtils.getLocalizedString(this.okButon),click:function(t){var e=n();if(e){s.close()}t.stopPropagation();t.preventDefault()}}]}var d=p.isNullOrUndefined(i)?m.CommonConstants.popupCssClassName:f.Format("{0} {1}",i,m.CommonConstants.popupCssClassName);this.dialog=l.dialog({autoOpen:true,modal:true,dialogClass:d,width:"auto",height:"auto",close:function(t){if(!p.isNullOrUndefined(e)){e()}s.close();t.stopPropagation();t.preventDefault()},buttons:c});this.dialog.css({"min-width":"350px"});this.dialog.css({width:r||"auto"});this.dialog.css({height:a||"auto"});$(m.CommonUtils.getClassSelector(m.CommonConstants.popupCssClassName)+","+m.CommonUtils.getClassSelector(m.CommonConstants.overlayCssClassName)).click(function(t){t.stopPropagation();t.preventDefault()});this.editorVisibilityChangedHandler=function(t){if(!t.isVisible){s.close()}};this.eventBroker.subscribe(m.EventConstants.editorVisibilityChanged,this.editorVisibilityChangedHandler);return this.popupId};u.prototype.close=function(){if(!p.isNullOrUndefined(this.popupId)&&m.CommonUtils.getById(this.popupId).length>0){this.dialog.dialog("destroy").remove()}this.dialog=null};u.prototype.dispose=function(){if(!p.isNullOrUndefined(this.eventBroker)){this.eventBroker.unsubscribe(m.EventConstants.editorVisibilityChanged,this.editorVisibilityChangedHandler);this.editorVisibilityChangedHandler=null}this.close()};u.okButtonCssClassName="editorPopupOkButton";u.cancelButtonCssClassName="editorPopupCancelButton";return u}();m.PopupRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(t){this.id=t}t.prototype.init=function(t){this.eventBroker=t};t.prototype.activate=function(){this.isActive=true};t.prototype.deactivate=function(){this.isActive=false};t.prototype.dispose=function(){};t.prototype.getElement=function(){return e.CommonUtils.getById(this.id)};return t}();e.Control=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(s){"use strict";var r=MktSvc.Controls.Common.String;var t=function(){function a(){}a.getById=function(t,e){return a.getBySelector("#"+t,e)};a.setId=function(t,e){if(t){t.attr("id",e)}};a.getId=function(t){return t&&t.get(0)?t.get(0).id:r.Empty};a.getByClass=function(t,e){return a.getBySelector(a.getClassSelector(t),e)};a.getClassSelector=function(t){return r.Format(".{0}",t)};a.getNotClassSelector=function(t){return r.Format(":not(.{0})",t)};a.getAttrSelector=function(t){return r.Format("[{0}]",t)};a.getAttrEqualsSelector=function(t,e){return r.Format("[{0}='{1}']",t,e)};a.setEditable=function(t){return t?t.attr("contenteditable","true"):$()};a.setNonEditable=function(t){return t?t.attr("contenteditable","false"):$()};a.removeEditable=function(t){return t?t.removeAttr("contenteditable"):$()};a.removeClass=function(t,e){if(!t){return}t.removeClass(e);if(r.isNullOrWhitespace(t.attr("class"))){t.removeAttr("class")}};a.getLocalizedString=function(t){if(!a.localizationProvider){throw new Error("CommonUtils.getLocalizedString:ILocalizationProvider has not been initialized.")}return a.localizationProvider.getLocalizedString(t)};a.getOfflineLocalizedString=function(t){if(!a.localizationProvider){throw new Error("CommonUtils.getLocalizedString:ILocalizationProvider has not been initialized.")}return s.OfflineMessages.getLocalizedString(t,a.localizationProvider.getLocaleId())};a.getEditorIdFromBlock=function(t){return this.getEditorFromBlock(t).attr("id")};a.getEditorFromBlock=function(t){return t?t.find("[contenteditable]"):$()};a.createStyleElementFromCode=function(t,e,n){var o=n||document;var i=o.createElement("style");var r=document.createTextNode(e);i.id=t;i.appendChild(r);return i};a.createLinkElementFromUrl=function(t,e,n){var o=n||document;var i=o.createElement("link");i.id=t;i.rel="stylesheet";i.type="text/css";i.href=e;return i};a.createScriptElementFromUrl=function(t,e,n){var o=n||document;var i=o.createElement("script");i.setAttribute("type","text/javascript");i.setAttribute("src",e);i.setAttribute("id",t);return i};a.getBySelector=function(t,e){if(!e){e=$(document)}var n=$();var o=$(e);var i=0;while(i<o.length){var r=$(o[i]);i++;o=o.add(r.find(a.getClassSelector(s.CommonConstants.layoutFrameClassName)).contents());n=n.add(r.find(t))}return n};a.isFirefox=function(){return navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Trident/")===-1};a.isFunction=function(t){return typeof t==="function"};a.isElementDefined=function(t){return t&&t.length>0};a.writeFrameContent=function(t,e){t.contentWindow.document.open();t.contentWindow.document.write(r.isNullOrWhitespace(e)?r.Empty:e);t.contentWindow.document.close()};a.getFrameContent=function(t){return a.getWithDoctype(a.getDocType(t.contentDocument)+t.contentDocument.documentElement.outerHTML)};a.getDocType=function(t){return!t||!t.doctype?r.Empty:(new XMLSerializer).serializeToString(t.doctype)};a.getDocTypeFromString=function(t){var e=r.Empty;var n=t.toLowerCase().indexOf("<!doctype");if(n>=0){var o=t.toLowerCase().indexOf("iframe");if(o===-1||n<o){var i=t.indexOf(">",n)-n+1;e=t.substr(n,i)}}return e};a.getWithDoctype=function(t){if(r.isNullOrWhitespace(t)){return t}if(a.isContentContainingDoctype(t)){return t}return"<!DOCTYPE html>"+t};a.getNewContentDocument=function(t){var e=document.implementation.createHTMLDocument(r.Empty);a.writeDocumentContent(e,t);return e};a.getDocumentContent=function(t,e){var n=t.documentElement.outerHTML;if(!r.isNullUndefinedOrWhitespace(e)&&!a.isContentContainingDoctype(n)){n=e+n}return n};a.writeDocumentContent=function(t,e){if(e||e===r.Empty){t.documentElement.innerHTML=e}};a.setTabIndex=function(t,e){t.attr("tabindex",e)};a.getNormalizedBooleanAttributeValue=function(t,e,n){var o=n===undefined?s.CommonConstants.normalizedBooleanTrue:n?s.CommonConstants.normalizedBooleanTrue:s.CommonConstants.normalizedBooleanFalse;var i=t.attr(e)?t.attr(e).trim().toLowerCase():o;return i!==s.CommonConstants.normalizedBooleanTrue&&i!==s.CommonConstants.normalizedBooleanFalse?o:i};a.getNormalizedTrackAttributeValue=function(t){var e=a.getNormalizedBooleanAttributeValue(t,s.CommonConstants.dataTrackAttributeName);return a.convertNormalizedBooleanToTrackAttributeValue(e)};a.convertNormalizedBooleanToTrackAttributeValue=function(t){return t===s.CommonConstants.normalizedBooleanTrue?null:t};a.getLinkWithProtocol=function(t){if(!r.isNullUndefinedOrWhitespace(t)&&!s.CommonConstants.protocolRegex.exec(t.toLowerCase())){return s.CommonConstants.defaultProtocol+t.toLowerCase()}return t};a.setRole=function(t,e){if(t){t.attr("role",e)}};a.setAriaAttribute=function(t,e,n){if(t){t.attr(e,n)}};a.isVisible=function(t){return t?t.is(":visible"):false};a.isContentContainingDoctype=function(t){return t.toLowerCase().indexOf("<!doctype")!==-1};a.createIframeWithSpecifiedBody=function(t,e){var n=$("<iframe>").appendTo(e);var o=n[0];var i="<!DOCTYPE html>\n                                <html>\n                                    <head></head>\n                                    <body>\n                                        "+t+"\n                                    </body>\n                                </html>";a.writeFrameContent(o,i);return n};a.overlayBlockElement=function(t,e,n){a.removeBlockOverlay(t);t.append(this.createOverlay(n).attr("contenteditable","false"));e.addClass(s.CommonConstants.designerOverlayHiddenElementCssClassName)};a.overlayImageElement=function(t,e){t.attr("src",e).css("max-width","125px").addClass(s.CommonConstants.designerUnconfiguredContentOverlayCssClassName)};a.createOverlay=function(t){var e=$("<img>").addClass(s.CommonConstants.unconfiguredOverlayIconCssClassName).attr("src",t).css("max-width","125px");var n=$("<div></div>").addClass(s.CommonConstants.designerUnconfiguredContentOverlayCssClassName);n.append(e);return n};a.removeBlockOverlay=function(t){if(a.getByClass(s.CommonConstants.designerUnconfiguredContentOverlayCssClassName,t).length>0){a.getByClass(s.CommonConstants.designerUnconfiguredContentOverlayCssClassName,t).remove();a.removeClass(a.getByClass(s.CommonConstants.designerOverlayHiddenElementCssClassName,t),s.CommonConstants.designerOverlayHiddenElementCssClassName)}};a.removeImageOverlay=function(t){t.attr("src",t.attr(s.CommonConstants.designerImageSourceAttributeName));t.css("max-width",r.Empty);t.removeClass(s.CommonConstants.designerUnconfiguredContentOverlayCssClassName)};a.walkTree=function(t,n){var o=this;var e=t.children();e.each(function(t,e){o.walkTree($(e),n)});n(t)};a.getComments=function(t){var e;var n=[];var o=this.isInternetExplorer()?document.createNodeIterator(t,NodeFilter.SHOW_COMMENT,null,false):document.createNodeIterator(t,NodeFilter.SHOW_COMMENT);while(e=o.nextNode()){n.push(e)}return n};a.isInternetExplorer=function(){return this.getInternetExplorerVersion()>-1};a.isEdge=function(){return/edge/.test(navigator.userAgent.toLowerCase())};a.isIOS=function(){return/(ipad|iphone|ipod)/.test(navigator.userAgent.toLowerCase())&&!window.MSStream};a.isHighContrastModeEnabled=function(){var t="rgb(255, 0, 0)";var e=$("<div>").css("background-color",t).height(0).width(0);$(document).find("body").append(e);var n=e.css("background-color");e.remove();if(n!==t){return true}return false};a.getInternetExplorerVersion=function(){var t=-1;var e=navigator.userAgent;if(navigator.appName==="Microsoft Internet Explorer"){var n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(n.exec(e)!=null){t=parseFloat(RegExp.$1)}return t}if(!!e.match(/Trident\/7\./)){t=11}return t};a.getDomainFromUrl=function(t){var e=document.createElement("a");e.href=t;var n=!e.port||e.port==="443"&&e.protocol==="https:"||e.port==="80"&&e.protocol==="http:"?r.Empty:":"+e.port;return e.protocol&&e.hostname?e.protocol+"//"+e.hostname+n:r.Empty};a.appendElementToHead=function(t,e){t.find("head").append(e)};a.getLocalizedImagePlaceholder=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAykAAAJZCAIAAAAiXe1IAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAACf1SURBVHhe7d0te+PKlrDh9///nQOmgYnJEIM2MAkxCfCAHGBiYjCvrp11+upJK+msRNaqKt03Oh97dy87lvzYqqj+3/8CALAW7QUAsB7tBQCwHu0FALAe7QUAsB7tBQCwHu0FALAe7QUAsB7tBQCwHu0FALAe7QUAsB7tBQCwHu0FALAe7QUAsB7tBQCwHu0FALAe7QUAsB7tBQCwHu0FALAe7QUAsB7tBQCwHu0FALAe7QUAsB7tBQCwHu0FALAe7QUAsB7tBQCwnse21xMAQLciaBb12Pb6FwBAtyJoFqW9AADmRdAsSnsBAMyLoFmU9gIAmBdBsyjtBQAwL4JmUdoLAGBeBM2itBcAwLwImkVpLwCAeRE0i9JeAADzImgWpb0AAOZF0CxKewEAzIugWZT2AgCYF0GzKO0FADAvgmZR2gsAYF4EzaK0FwDAvAiaRWkvAIB5ETSL0l4AAPMiaBalvQAA5kXQLEp7AQDMi6BZlPYCAJgXQbMo7QUAMC+CZlHaCwBgXgTNorQXAMC8CJpFaS8AgHkRNIvSXgAA8yJoFqW9AADmRdAsSnsBAMyLoFmU9gIAmBdBsyjtBQAwL4JmUdoLAGBeBM2itBcAwLwImkVpLwCAeRE0i9JeAADzImgWpb0AAOZF0CxKewEAzIugWZT2AgCYF0GzKO0FADAvgmZR2gsAYF4EzaK0FwDAvAiaRWkvAIB5ETSL0l4AAPMiaBY1bHvt9/sXAKBz0xt6vLVXiKBZ1LDt9d///d8xBADQrekNPd7aK8QQi9JeAEC7tFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5Be6Vcr9d///vfT/84Ho/Ts/fG6/81mf6x6R+Ofw1ozPl8jv8Eo5jeg+KtvUIMsSjttVFTPz0/P59Opy+/pne73VRp0x9yu93iDwVKXS6X6dicjsr47zAE7ZUTg1fQXrOm5Jp6a8qmeJoW8tph//M//xN/DbC66VPQjx8/Xo/H+J9gCNorJwavoL1+96Dk+tP0V0x/kYuSsL79fh/H4b/+9fT0FP8r9E975cTgFbTXq+fn55JX7fSXuvABq5k+88Sx948fP37c7/f4/6Bz2isnBq+gvab0WeGLro9NAygweLTpKItD7je++mIY2isnBq+w5fa6XC7l1fW7aZhppBgOWNT1en1d5vUnvwfDGLRXTgxeYZvtNZ1qa1+jH5gG804Ay7rf778v83rj58+f8c9Bz7RXTgxeYYPt9fT0FA++Ya6DwIKOx2McWu/wiy8MQHvlxOAVNtVet9vtg8++rZlG9QUYfN/sMq83NvgplPFor5wYvMJ2zjiXy+W91R7Nmga2Agy+44NlXm+8vLzEvwN90l45MXiFjbTXX684tOx0OsXDADI+Xub1xs6tVumc9sqJwSsM317TyfdwOMSj7db0ENyFCLKyx75bvdA17ZUTg1cYu71Sn3obNz0Q+QWfdz6f4+D5tN1u5yijX9orJwavMHB7jRRer+QXfNL1eo3DJsmvGNMv7ZUTg1cYtb3GC69X8gv+ajpGvnzbZLsM0S/tlRODVxiyvUYNr1fyCz72zSWefruFTmmvnBi8wpDtVfv6W8GQPzVYxBeWef3JrfXokfbKicErjPcu3vXtJD5vepjxgIH/eHl5iSPkew6HQ/yJ0A/tlRODVxisvRb5yNsLvw8Pv7vf7wveP9mtVumO9sqJwSuM1F6fv4H1GKYHaxM6+GXZN57BPpeyBdorJwavMMz5Zez19e+x7h5ePWKPfDt60RftlRODVximvU6nUzykjfE7WbDUMq837DJEX7RXTgxeYYz2etCZtxcWprBlyy7zesOqSjqivXJi8ApjtNcGrzb+bnr48UTA9jz08HerVTqivXJi8AoDtNemfrfxPdOTEE8HbMkKiw3sMkQvtFdODF6h9/Z66OWGjvh0zgZdLpc4AB7JwUUvtFdODF6h9/Z6xC83dcqnczbldrut9rnr58+f8bdCw7RXTgxeoev28qXX73w6Z1NWXuVplyHap71yYvAKXbeXL73esOqLjVh/67DeLxGwBdorJwav0PUJZbfbxcPgH25HxBY8Pz/HK35dbuZC47RXTgxeod/2qjr/Ns7tiBhb4dZhvvqicdorJwav0O/ZpPZF1ixvDwzsXr11mM82tEx75cTgFTp9q77dbvEA+INFwYxq/WVeb7isT8u0V04MXqHT9nI/1Q9Ycc+QGllm4PiiWdorJwav0Gl7HQ6HeAD8YXpy4mmCURQu83rDzVxolvbKicErdNpebuv1genJiacJhjC1TlO/1Ow+xrRJe+XE4BV6bK/pE3BMzzumpyieLOhfa99zTx9vrKqkQdorJwav0GN7Wez1V5akMIw2j3e7DNEg7ZUTg1fosb0s9vorS74YQ8tfcvt2mdZor5wYvEKP7WWx119Z8sUAWlvm9UaPJ0/Gpr1yYvAK3Z0+LPb6JB/K6V3733DbZYimaK+cGLxCd+1lK6FPcgNuutbFTvn7/T7GhQZor5wYvEJ37dXFGbkFfg2efr28vMTruHk+5NAO7ZUTg1fQXqPSXnTqfr93tKbTLkO0Q3vlxOAVumuvnz9/xuh86HQ6xVMGXal9//gCn3NohPbKicErdNde3Z2Xq3T3k4VJj19s/7DLEG3QXjkxeAXtNSrtRXc6Wub1hq+ZaYH2yonBK3T3Dr3f72N0PuQ3sOjL7Xbr+tZ9dhminPbKicErdNdeMTefEE8Z9KD3j1V2GaKc9sqJwStor4HFUwbNO51O8artmVutUkt75cTgFbTXwOIpg7ZdLpd4yXauu9Mpg9FeOTF4he5OFv/1X/8Vo/Oh6YmKpwwa1vsyrzd89UUh7ZUTg1forr1qX1sd6e4nyzYN9tszbrVKIe2VE4NX0F6j0l6073g8xut1IHYZoor2yonBK2ivUWkvGjfqvvi73c6tVimhvXJi8ArdvUPbz/GT7HNCy67X60jLvN5w9FFCe+XE4BW6a6/z+Ryj86HpiYqnDBpzv9/HvkmyXYYoob1yYvAK3bVXv7uOrMzvW9GsIZd5veFWq6xPe+XE4BW6a6/b7Raj8yE7nNCmUZd5/ckxyMq0V04MXqG79pq4xddfubkXbbper/Ea3YDD4RAPG1ahvXJi8Ao9ttd0RovpeYeTPg263++73S5eo9vg0j9r0l45MXiFHtvLcvu/cochGrTBT009nmDpl/bKicEr9Hhq2NRli6+x0ITWbPYj0+VyiacAHkx75cTgFTr9WGbJ1wfsakJrtvx5yfHIarRXTgxeodP2Op1O8QD4w/TkxNMEDdjgMq83rAFgHdorJwav0Gl7uez4genJiacJGlD7ftACt1plHdorJwav0Gl7TTb+Sfo9LnDQFJuAvbLLECvQXjkxeIV+28s5fZathGiHXSh++fHjh9+A4dG0V04MXqHf9nKD+1nO7zTifr8PvFv2F9hliEfTXjkxeIV+22syncviYfAPJ3faUfs20CYfjXgo7ZUTg1four189fWGMzuNsCRgVtfnW9qnvXJi8Aq9nwtqX2pNsY8QjbhcLvGi5A92GeJxtFdODF6h9/aymPcX53RacLvdLPP6QO+nXFqmvXJi8AoDnAhsrT3xpReN2O/38aLkHW61yoNor5wYvMIA7TV9zt74FkPTw7fSixbYcOIz3ISPB9FeOTF4hQHaa7Lxhb1u20gLLPP6PMcsj6C9cmLwCmO012Szt7n3GZoWWOaVYpchHkF75cTgFYZpr83u8Gj3RspNGWGZV5avvlic9sqJwSsM016T8/kcj2oz7CBEC47HY7wiybBMk2Vpr5wYvMJI7TXZ1O88+t1GWvD8/ByvSJJsRMGytFdODF5hsPa63+8b+Z3H3W5nvQjlrterZV7fYc0AC9JeOTF4hcHaazKdy4bPr+kBOmVTzjKv7xvvDEwh7ZUTg1cY8sifuiQe3oiEF42wzGsRdqRgKdorJwavMOqnroHXoLgpNi2wzGsp+/0+nlP4Hu2VE4NXGLW9JkO+NwgvWjD2V8vrc1yzCO2VE4NXGLi9JoPllxM0Lbjf75u9lfGD+NUZFqG9cmLwCmO312SMpffWeNEOu9c/glut8n3aKycGrzB8e016zy/hRTs2eAfjddhliO/TXjkxeIUttNdkOqnVvii/bBrbGZlGWOb1UKfTKZ5o+BLtlRODV9hIe716enqKh90JlyFoh2VeK7DLEN+hvXJi8Aqbaq/Jy8tLF+8f05Du+kNTak/rG2GXIb5De+XE4BW21l6T6eN741+ATeO5zkhTuvvOuF8+dPFl2isnBq+wwfZ6dbvdGvwcP43kogOtmWogXqA83mbPyXyf9sqJwSts/Di/XC6NFNg0xjRMjAXNuN/vdstema+++BrtlRODV9h4e72aznSFL9npr3aqpVm1Z/Nt2u128exDhvbKicEraK9fpgD6+fPnancCm/6i6a9TXbTsdDrF65V12cSCL9BeOTF4Be31p8vl8tAIOxwOLi/SvulVGi9ZVudWq3yB9sqJwStorw9M7z3T5/5FXs37/X76o6Y/0PmULtxuN8u8arm9H1naKycGr6C9Pul6vT4/P7+m2BRS8fS9Y7fbTf/YdOo8n88vLy96i+789UXOo/nqiyztlRODV9Be33S73aa6EliMxDKvRrjVKinaKycGr6C9gN9Z5tUUN/zj87RXTgxeQXsBv1yvV8u8mnI4HOJnA3+jvXJi8AraC3h1v98t82rQizvR8DnaKycGr6C9gFfH4zHOC7TEWZpP0l45MXgFRzUweX5+jpMC7XGrVT5De+XE4BW0F2CZV+PsMsRnaK+cGLyC9oKNs8yrC+fzOX5g8A7tlRODV9BesHGWeXXBrVb5K+2VE4NX0F6wZefzOc4FNM8uQ3xMe+XE4BW0F2zW9XqNEwE9+PHjh1ut8gHtlRODV9BesE33+32328WJgE7YZYgPaK+cGLyC9oJtOhwOcRagK7764j3aKycGr6C9YIMs8+qXkzbv0V45MXgFhzFsjWVevbPLELO0V04MXkF7wabc73e3Ue3dfr+PHyf8RnvlxOAVtBdsSu3ZmaXYZYg/aa+cGLyC9oLteHp6iiOfztlliD9pr5wYvIL2go14eXmJw54huNUqb2ivnBi8gvaCLbDMazx2GeIN7ZUTg1fQXrAFdssekq+++J32yonBK2gvGN7pdIoDnuG41Sq/aK+cGLyC9oKxXS6XONoZkV2G+EV75cTgFbQXDOx2u1nmNbzr9Ro/b7ZNe+XE4BW0FwzMMq8tcBrnlfbKicErOGhhVJZ5bYddhphor5wYvIL2giE9Pz/HQc4GuNUqE+2VE4NX0F4wnuv1apnX1thlCO2VE4NX0F4wmPv9bpnXBu12O7da3TjtlRODV9BeMJjj8RiHNxvjVqsbp71yYvAK2gtGYpnXltllaOO0V04MXkF7wTAs8+J0OsWrge3RXjkxeAXtBWOwzItXdhnaLO2VE4NX0F4whsPhEEc12za9EuI1wcZor5wYvIL2ggGcz+c4pMGtVrdKe+XE4BW0F/Tuer3G8Qz/cGLfJu2VE4NXcIhC1+73+263i+MZ/uNyucRLhM3QXjkxeAXtBV2zzItZdhnaIO2VE4NX0F7QL8u8+IBdhrZGe+XE4BW0F3Tq5eUlDmOY41arW6O9cmLwCtoLejS9p7qNKn9ll6FN0V45MXgF7QU9qj3J0gtffW2K9sqJwStoL+jO09NTHMDwNz9//ozXDaPTXjkxeAXtBX2xzIssuwxthPbKicEraC/oiGVefIHz/EZor5wYvIJjEjpit2y+xi5DW6C9cmLwCtoLenE6neK4hSSn+i3QXjkxeAUHJHThcrnEQQtf4larw9NeOTF4Be0F7bvdbpZ58U12GRqe9sqJwStoL2ifZV4s4nw+x0uKEWmvnBi8gvaCxh2Pxzhc4XvcanVs2isnBq+gvaBlz8/PcazCEuwyNDDtlRODV9Be0Kzr9WqZF4tzq9VRaa+cGLyC9oI23e93y7x4BLsMjUp75cTgFbQXtMkyLx7ner3G64yBaK+cGLyC9oIGWebFQznzD0l75cTgFRyB0BrLvFiBXYbGo71yYvAK2guacr/fd7tdHJ/wMPv9Pl5zjEJ75cTgFbQXj3C9Xt1G6GsOh0McnPBgdhkajPbKicEraC8W97oBzvSp2nrerPP5HEcmPJ5dhgajvXJi8Arai8X9ujPCVGA+WH/elKqvzxusxq1WR6K9cmLwCtqLZZ1Op3ht/cfxeHT98a8s86KEXYZGor1yYvAK2osFXS6XeGH9X64//pVlXlSZPi/Fq5DOaa+cGLyC9mIpr8u84oX1B9cfP/D09BRPE1Swy9AYtFdODF5Be7GUzxz2rj/+6eXlJZ4dKGKXoTFor5wYvIL2YhGf/+bG9cffTSX6wZeFsBq3Wh2A9sqJwStoL74v+82N64+/1J4r4RfvBQPQXjkxeAXHG9/05W9uXH+0zIum+Oqrd9orJwavoL34pu8c7Vu+/miZF61xq9Xeaa+cGLyC9uI7vv/NzTavP378O6FQxWKArmmvnBi8gvbiyxa8D/vWrj/+uvU/NGW32/lN5H5pr5wYvIL24mumE/Sy92HfzvXHP2/9D+2wy1C/tFdODF5Be/E1j7gP+xauP753639oxHQY+uqrU9orJwavoL34gvP5HC+gBzj+I/6msVjmRRfcarVT2isnBq+gvchacJnXB4a8/miZF72wy1CPtFdODF5Be5Gy+DKv94x3/fF4PMZjg+YdDod44dIP7ZUTg1fQXqSsHBDTXzfG0pOpI+MhQSfcarU72isnBq+gvfi8koAY4Pcfp/kt86I73h26o71yYvAKji4+qTAgur7+eL/fLfOiU5fLJV7H9EB75cTgFbQXn9FCQHR6/dEyL/pll6G+aK+cGLyC9uIzGgmI7q4/WuZF787nc7yaaZ72yonBK2gv/qqp24F2dP1xysQYGro1HXFj/L7LFmivnBi8gvbiY23eDrT964/TeOvcjAMezS5DvdBeOTF4Be3Fx5pdJ9749cdH7LkEJaZPX2612gXtlRODV9BefKDxXZ+bvf740D2XYH12GeqC9sqJwStoL97Ty67PrV1/tMyLIfnqq33aKycGr6C9mNXXrs/tXH+0zItRebNon/bKicErOJyYVXsMf0Ej1x+7e97g8+wy1DjtlRODV9Be/Onp6SleH72pvf7Y7/MGn+H9onHaKycGr+BY4o3po228OPpUdf2x9+cNPqPf3b22QHvlxOAVtBe/u9/vHS3zes/61x/HeN7gr+wy1DLtlRODV9Be/K720F3WmtcfR3re4GNutdos7ZUTg1fQXvwy3nKlda4/WubFpvywy1CrtFdODF5Be/Fq1LtSPfr6Yy93QYMF+eqrTdorJwavoL2YTJ9ix74r1YOuP/Z1FzRYkFutNkh75cTgFbQXky1sPviI64/Tnxl/OmyMXYYapL1yYvAK2ovtbD647PXHxje7hEdrZDMJftFeOTF4Be21caMu8/rAItcfLfMCbx+t0V45MXgFB8+WDb/M6z3fvP5omRe8sstQU7RXTgxeQXtt2RaWeb3ny9cfp2C1zAteTcdCHBg0QHvlxOAVtNdmTeURL4IN+8L1x+lfiX8ZsMtQS7RXTgxeQXtt0/V6ddXsVer6o2CFN3a73SNu4MIXaK+cGLyC9togV83e+OT1R8EKs9xqtRHaKycGr6C9NshVs1kfX38UrPCe6TOJr75aoL1yYvAK2mtrXDX7wAfXHwUrfOB0OsWhQh3tlRODV9Bem+LmCH81e/1RsMJf2WWonPbKicEraK9NcdXsk36//njd3u1n4QvsMlROe+XE4BW013bYAyfl9frjVGDbvP0sfIFbrdbSXjkxeAXttRH2wPmCHz9++KYQPs8bSi3tlRODV3CobIFlXsA6po95cd5hddorJwavoL22wJc3wDp2u12cd1id9sqJwStor+E9PT3FDxvg8T5zp2IeQXvlxOAVtNfYXl5e4icNsAq3Wq2ivXJi8Araa2DT6c8yL2B9dhkqob1yYvAK2mtgtcchsFm++iqhvXJi8Araa1SWeQGF3Gp1fdorJwavoL2GZJkXUM4uQyvTXjkxeAXtNR63YgdacDgc4qzEKrRXTgxeQXuNZzrfxU8XoJRdhtakvXJi8AraazDn8zl+tADVvMWsSXvlxOAVHBgjuV6v8XMFaINbra5Ge+XE4BW01zAs8wIaZJeh1WivnBi8gvYahmVeQJvO53Ocp3gk7ZUTg1fQXmN4fn6OnyhAY9xqdR3aKycGr6C9BnC9Xu0dBLTMLkMr0F45MXgF7dW76dPkfr+PHydAk6bPh261+mjaKycGr6C9enc8HuNnCdAwuww9mvbKicEraK+uWeYFdMRXXw+lvXJi8Araq1/TWcwyL6Aj3nEeSnvlxOAVHAn9sswL6I5dhh5He+XE4BW0V6dOp1P8CAH6MX1ojLMYS9NeOTF4Be3Vo8vlEj8/gN7YZehBtFdODF5Be3XHMi+ga3YZehDtlRODV9Be3bHMC+idW60+gvbKicEraK++TCes+MkBdMsuQ4+gvXJi8AraqyMvLy/xYwPonK++Fqe9cmLwCtqrF9NnRMu8gJG41eqytFdODF5Be/Wi9qACWJxdhpalvXJi8AraqwuWeQFDcqvVBWmvnBi8gvZqn2VewKi8By1Ie+XE4BW87htnmRcwNl99LUV75cTgFbRX4w6HQ/yoAEbkVqtL0V45MXgF7dWy8/kcPyeAcdllaBHaKycGr6C9mnW9XuOHBDC03W7nVqvfp71yYvAK2qtN02loOhnFDwlgdG61+n3aKycGr6C92mSZF7Apdhn6Pu2VE4NX0F4NsswL2KDT6RQnQb5Ee+XE4BW0V2uu16ubSgDbZJeh79BeOTF4Be3VlPv9vt/v42cDsDGHwyHOhuRpr5wYvIL2asrxeIwfDMAmudXql2mvnBi8gvZqx/Pzc/xUALbKu9KXaa+cGLyCV3kjLPMCeHW5XOLMSIb2yonBK2ivRljmBfDKLkNfo71yYvAK2qsFp9Mpfh4A2GXoS7RXTgxeQXuVu1wu8cMA4B9utfoF2isnBq+gvWrdbjfLvAD+ZJehLO2VE4NX0F61LPMCmOWrryztlRODV9BehSzzAvjAz58/43TJJ2ivnBi8gvaq8vLyEj8DAN5hl6HP0145MXgF7VXifr9b5gXwV96kPk975cTgFbysS9QeIQAdscvQJ2mvnBi8gvZa39PTUzz7APyN96lP0l45MXgFr+mVWeYFkOVWq5+hvXJi8Araa02WeQF8gV2GPkN75cTgFbTXmg6HQzzvAGScz+c4k/IO7ZUTg1fQXquZThzxpAOQ5Farf6W9cmLwCtprHdfrNZ5xAL7ELkMf0145MXgF7bWC6bPabreLZxyAr3Kr1Q9or5wYvIL2WoFlXgCLsMvQB7RXTgxeQXs9mmVeAAu6Xq9xeuX/0l45MXgF7fVQ0znCTSUAFuRt6z3aKycGr+BF/Dj3+32/38cTDcBC7DI0S3vlxOAVtNfjHI/HeJYBWM70sTbOs/xGe+XE4BW014M8Pz/HUwzA0uwy9CftlRODV9Bej2CZF8BD2WXoT9orJwavoL0WZ5kXwArcavUN7ZUTg1fQXos7nU7x5ALwMHYZekN75cTgFbTXsi6XSzyzADzY9Fk3Tr5or6wYvIL2WtDtdrPMC2BNdhn6RXvlxOAVtNeCLPMCWJldhn7RXjkxeAXttRTLvABKuNXqK+2VE4NX0F6LsMwLoIo3slfaKycGr+Al+333+90yL4BCvvqaaK+cGLyC9vq+2pc7AG61OtFeOTF4Be31TU9PT/FUAlDHLkPaKycGr6C9vuPl5SWeRwBK7Xa7jd9qVXvlxOAVtNeXWeYF0JSN7zKkvXJi8Ara68tqX+UAvLHxXYa0V04MXkF7fc35fI5nEIBmbPlWq9orJwavoL2+4Hq9xtMHQGM2u8uQ9sqJwStor6z7/b7b7eLpA6Axh8Mhztcbo71yYvAK2itrOqrjuQOgSdu81ar2yonBK2ivFMu8ANq3zbc27ZUTg1fQXp9nmRdALy6XS5y7N0N75cTgFbTXJ93v9/1+H88aAG3b4C5D2isnBq+gvT7peDzGUwZAD87nc5zBt0F75cTgFbTXZzw/P8fzBUAntnarVe2VE4NX0F5/db1e7R0E0KNN7TKkvXJi8Ara62OWeQH0a/rkvJ1brWqvnBi8gvb62Ol0imcKgA5tZ5ch7ZUTg1fQXh+4XC7xNAHQrY189aW9cmLwCtrrPdOxapkXwAA28k6nvXJi8Ara6z2WeQEMYwu7DGmvnBi8gvaaZZkXwEi28GanvXJi8Ara60+WeQGM5/n5Oc7yg9JeOTF4Be31hmVeAEMafpch7ZUTg1fQXm/UvnYBeJyxb7WqvXJi8Ara63fTYRnPCwDDGXuXIe2VE4NX0F6/vLy8xJMCwKAG/upLe+XE4BW016vpk5BlXgBbMOqtVrVXTgxeQXu9qn3JArCaUXcZ0l45MXgF7TWxzAtgU67Xa7wBDER75cTgFbTXdATGcwHANgz53qe9cmLwChtvr/v9vtvt4rkAYDPG22VIe+XE4BU23l6HwyGeCAC2ZLxbrWqvnBi8wpbb63w+x7MAwPYMtsuQ9sqJwStstr0s8wLYuN1uN9KtVrVXTgxeYZvtZZkXAJORbrWqvXJi8ArbbK/j8RiPH4ANG2mXIe2VE4NX2GB7PT8/x4MHYPNOp1O8PXROe+XE4BW21l7X69XeQQD8boxdhrRXTgxeYVPtdb/f9/t9PHIA+McYuwxpr5wYvMKm2ssyLwBmDXCrVe2VE4NX2E57XS6XeMwA8H8N8G6ovXJi8Aobaa/b7WaZFwAfmD6ix3tGn7RXTgxeYSPtZZkXAB/rfZch7ZUTg1fYQnudTqd4tADwvq53GdJeOTF4heHbyzIvAD6p61utaq+cGLzC2O1lmRcAKf3uMqS9cmLwCmO3V+0LEYDu9PvVl/bKicErDNxe02eXeJAA8Gmd3mpVe+XE4BVGba+Xl5d4hACQ1OMuQ9orJwavMGR73e93y7wA+LIe3xy1V04MXmHI9qp9/QEwgO52GdJeOTF4hfHayzIvAL6vu/dH7ZUTg1cYrL2u12s8MAD4nr5utaq9cmLwCiO11/1+3+128cAA4Hv62mVIe+XE4BVGaq/D4RCPCgCWcD6f4z2medorJwavMEx7TYdHPCQAWEhHt1rVXjkxeIUx2ssyLwAepJddhrRXTgxeYYD2sswLgMf58eNHF7da1V45MXiFAdrreDzGgwGAB+hilyHtlRODV+i9vZ6fn+ORAMDDXK/XeONplfbKicErdN1e05Fg7yAAVtD+26X2yonBK/TbXvf7fb/fx8MAgAdrfJch7ZUTg1fot70s8wJgTdMH/ngHapL2yonBK3TaXpZ5AbC+lncZ0l45MXiFHtvrdrtZ5gXA+lreZUh75cTgFXpsL8u8AKjS7K1WtVdODF6hu/Y6nU4xOgCsrtldhrRXTgxeocfvvQCAN7RXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXkF7AcAAtFdODF5BewHAALRXTgxeQXsBwAC0V04MXmG/3/8bAOjc9IYeb+0VImgWNWx7AQB8UwTNorQXAMC8CJpFaS8AgHkRNIvSXgAA8yJoFqW9AADmRdAsSnsBAMyLoFmU9gIAmBdBsyjtBQAwL4JmUdoLAGBeBM2itBcAwLwImkVpLwCAeRE0i9JeAADzImgWpb0AAOZF0CxKewEAzIugWZT2AgCYF0GzKO0FADAvgmZR2gsAYF4EzaK0FwDAvAiaRWkvAIB5ETSL0l4AAPMiaBalvQAA5kXQLEp7AQDMi6BZlPYCAJgXQbMo7QUAMC+CZlHaCwBgXgTNorQXAMC8CJpFaS8AgHkRNIvSXgAA8yJoFqW9AADmRdAsSnsBAMyLoFmU9gIAmBdBsyjtBQAwL4JmUdoLAGBeBM2itBcAwLwImkVpLwCAeRE0i9JeAADzImgWpb0AAOZF0CxKewEAzIugWZT2AgCYF0GzKO0FADAvgmZR2gsAYF4EzaIe215PAADdiqBZ1GPbCwCA32kvAID1aC8AgPVoLwCA9WgvAID1aC8AgPVoLwCA9WgvAID1aC8AgPVoLwCA9WgvAID1aC8AgPVoLwCA9WgvAID1aC8AgPVoLwCA9WgvAID1aC8AgPVoLwCA9WgvAID1aC8AgPVoLwCA9WgvAIC1/O///n9bLFduoTwj3gAAAABJRU5ErkJggg=="};a.getLocalizedDynamicImagePlaceholder=function(){return"data:image/png;base64,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"};a.getButtonBlockPlaceholder=function(){return"data:image/png;base64,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"};a.elementType=1;a.commentType=8;return a}();s.CommonUtils=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.fixCheckedNodes=function(t){if(t&&e.CommonUtils.getInternetExplorerVersion()===11){t.find('input[checked="checked"]').each(function(t,e){e.setAttribute("checked")})}};return t}();e.BrowserQuirks=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.buttonToolType="Button";t.buttonToolLabel="[Button]";t.buttonToolImageAltText="[Button]";t.buttonToolTitle="[Button]";t.buttonEmptyHref="#";t.dividerToolType="Divider";t.dividerToolLabel="[Divider]";t.dividerToolImageAltText="[Divider]";t.dividerToolTitle="[Divider]";t.imageToolType="Image";t.imageToolLabel="[Image]";t.imageToolImageAltText="[Image]";t.imageToolTitle="[Image]";t.textToolType="Text";t.textToolLabel="[Text]";t.textToolImageAltText="[Text]";t.textToolTitle="[Text]";t.layoutFrameClassName="editor-control-layout";t.editorContainerCssClass="editorContainer";t.contentEditorCssClass="contentEditor";t.contentResolverFrameClassName="editor-control-content-resolver";t.editorReadonlyTitleClassName="editorReadonlyTitle";t.buttonType="button";t.popupCssClassName="editorPopupCssClass";t.overlayCssClassName="ui-widget-overlay";t.accessibilityButtonClassName="editorAccessibilityButton";t.toolbardataAttrName="data-toolbar";t.makeEditableAttrName="data-makeeditable";t.designerImageSourceAttributeName="data-src";t.designerTextBlockImageSourceAttributeName="src";t.ckEditorAttrName="data-ckEditor";t.draggableCursor="move";t.draggableOpacity=.75;t.draggableHelperWidth=225;t.draggableHelperHeight=15;t.draggableHandleChar="&#x2725;";t.draggableHandleWrapperClassName="handleWrapper";t.draggableHandleClassName="handle";t.sortablePlaceholderClassName="sort-highlight";t.regularSortablePlaceholderClassName="regular-sort-highlight";t.selectedSortablePlaceholderClassName="selected-sort-highlight";t.sortableDragHandlerClassName="grab";t.toolboxItemClassName="tool-card";t.toolboxItemButtonCssClassName="tool-card-button";t.contentViewBlocksClassName="contentViewBlocks";t.toolboxDefaultSectionName="ContentBlock";t.toolboxDefaultSectionLabel="[Content Block]";t.toolboxSelectedToolItemClassName="selectedToolItem";t.toolboxItemTypeDataAttr="editortool-type";t.toolboxItemIdDataAttr="editortool-id";t.toolboxSectionNameDataAttr="section";t.htmlEditorContentAreaClassName="htmlEditorContentTextArea";t.htmlEditorComponentName="htmlEditor";t.htmlTabControlDataId="htmlContentTabButton";t.htmlEditorNotSupportedMessageClassName="htmlEditorNotSupportedMessage";t.selectedDataContainerClassName="selectedDataContainer";t.contentEditableAttrName="contenteditable";t.wrapperContainerClassName="wrapperContainer";t.designerContentEditorFrameClassName="designerContentEditorFrame";t.designerContentEditorFrameId="designer-content-editor";t.designerContentEditorFrameWrapperClassName="designerContentEditorFrameWrapper";t.iosScrollClassName="iosScroll";t.designerIosContainerClassName="designerIosContainer";t.htmlContentEditorFrame="htmlContentEditorFrame";t.designerContentEditorContainerInDragModeClassName="containerDragMode";t.treeViewCssClass="treeView";t.propertiesTitleCssClass="propertiesTitle";t.propertiesTitleButtonCssClass="propertiesTitleButton";t.extrasToggleCssClass="extrasToggle";t.collapsedCssClass="collapsed";t.contentBlockItemsCssClass="contentBlockItems";t.contentBlockSectionCssClass="contentBlockSection";t.contentBlockSectionEmptyCssClass="contentBlockSection-empty";t.contentBlockSectionEmptyMessageCssClass="contentBlockSection-empty-message";t.contentBlockSectionEmptyMessage="[ContentBlockSectionEmptyMessage]";t.contentBlockSectionLoadingCssClass="contentBlockSection-loading";t.contentBlockSectionLoadingMessageCssClass="contentBlockSection-loading-message";t.contentBlockSectionLoadingMessage="[ContentBlockSectionLoadingMessage]";t.tabSelectedCssClass="ui-tabs-active ui-state-active";t.designerControlCssClass="designer";t.designerTabViewCssClass="designerTabView";t.designerTabButtonViewCssClass="designerTabButtonView";t.designerOverlayHiddenElementCssClassName="designer-content-editor-hidden";t.designerUnconfiguredContentOverlayCssClassName="designer-unconfiguredcontent-overlay";t.unconfiguredOverlayIconCssClassName="unconfigured-overlay-icon";t.designerEditorComponentName="designerEditor";t.dataTrackAttributeName="data-msdyn-tracking";t.dataTrackIdAttributeName="data-msdyn-tracking-id";t.protocolRegex=/^([a-z]+:\/\/|mailto:|#|{{)/;t.defaultProtocol="http://";t.designerTabControlDataId="designerContentTabButton";t.fullPageContentEditorcssClass="fullPageContentEditor";t.fullPageContentEditorFrameClassName="fullPageContentEditorFrame";t.fullPageEditorComponentName="fullPageEditor";t.menuBarControlCssClass="menuBarControlLayout";t.menuBarCssClass="menuBar";t.menuBarItemsCssClass="menuBarItems";t.toolbarButtonCssClass="toolbarButton";t.undoButtonCssClass="undoButton";t.undoButtonImageCssClass="undoButtonImage";t.undoButtonLabelCssClass="undoButtonLabel";t.redoButtonCssClass="redoButton";t.redoButtonImageCssClass="redoButtonImage";t.redoButtonLabelCssClass="redoButtonLabel";t.warningIndicatorLabelCssClass="warningButtonLabel";t.warningButtonImageCssClass="warningButtonImage";t.warningButtonCssClass="warningButton";t.maximizeButtonImageCssClass="maximizeButtonImage";t.maximizeButtonCssClass="maximizeButton";t.maximizeButtonLabelCssClass="maximizeButtonLabel";t.maximizeActiveCssClass="maximizeButton-active";t.fullscreenClose="fullscreen_close";t.toolsDropdownCssClass="toolsDropdown";t.selectedToolsDropdownCssClass="selectedToolsDropdown";t.menuBarDividerCssClass="menuBarDivider";t.toolboxTabContentClassName="toolboxTabContent";t.detailsTabContentClassName="detailsTabContent";t.htmlTabContentClassName="htmlContentEditor";t.designerTabContentClassName="designerContentEditor";t.previewViewClassName="previewView";t.browserPreviewTabContentClassName="browserPreview";t.tabButtonPreClassName="tabButton_";t.previewTabControlDataId="previewContentTabButton";t.previewTabControlCssClass="preview";t.previewTabButtonViewCssClass="previewTabButtonView";t.browserPreviewComponentName="browserPreview";t.designerTabContainer="designerTabContainer";t.designerTabAnchor="designerTabAnchor";t.designerTabPaneLabel="designerTabPaneLabel";t.detailsViewPropertiesClassName="detailsViewProperties";t.userDetailsViewSimpleInput="userDetailsViewSimpleInput";t.stylesTabContentClassName="stylesTabContent";t.stylesViewFrameClassName="stylesViewFrame";t.accessibilityPopupClassName="accessibilityPopup";t.accessibilityLegendClassName="accessibilityLegend";t.accessibilityLegendSectionClassName="accessibilityLegendSection";t.accessibilityLegendSectionLabelClassName="accessibilityLegendSectionLabel";t.accessibilityLegendSectionElementClassName="accessibilityLegendSectionElement";t.accessibilityLegendSectionElementCaptionClassName="accessibilityLegendSectionElementCaption";t.colorFieldAriaLabel="colorFieldAriaLabel";t.leftToRightTextDirectionCssClass="ltr";t.rightToLeftTextDirectionCssClass="rtl";t.editorFontCssClass="CCFSymbolFont";t.fontIconSizeCssClass="fontIconSize";t.iconContainerCssClass="iconContainer";t.normalizedBooleanTrue="true";t.normalizedBooleanFalse="false";return t}();t.CommonConstants=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(a){"use strict";var s=MktSvc.Controls.Common.String;var t=function(){function r(t){this.logger=t;this.popup=new a.PopupRenderer;this.popup.setup(new MktSvc.Controls.Common.EventBroker(this.logger))}r.prototype.show=function(){if($("."+a.CommonConstants.accessibilityPopupClassName).length>0){return}if(!r.accessibilityInstructions){r.accessibilityInstructions=a.EditorAccessibilityInstructions.baseControlAccessibilityInstructions}var t=this.popup.render(a.CommonUtils.getLocalizedString("[Accessibility Instructions]"),function(){return true},null,true,a.CommonConstants.accessibilityPopupClassName,"500px","250px");this.render().appendTo("#"+t)};r.prototype.render=function(){var t=$("<div>").attr("role",a.AriaRoleConstants.document).attr("tabindex","0").addClass(a.CommonConstants.accessibilityLegendClassName);var e=r.accessibilityInstructions;for(var n in e){var o=a.CommonUtils.getLocalizedString(n);$("<h1>").text(o).addClass(a.CommonConstants.accessibilityLegendSectionLabelClassName).appendTo(t);var i=$("<dl>").addClass(a.CommonConstants.accessibilityLegendSectionClassName).appendTo(t);e[n].forEach(function(t){var e=$("<dt>").addClass(a.CommonConstants.accessibilityLegendSectionElementCaptionClassName).text(a.CommonUtils.getLocalizedString(t.caption));var n=t.keyboardShortcut?a.CommonUtils.getLocalizedString("Press")+" "+t.keyboardShortcut+" ":s.Empty;var o=$("<dd>").addClass(a.CommonConstants.accessibilityLegendSectionElementClassName).text(n+(t.description?a.CommonUtils.getLocalizedString(t.description):s.Empty));i.append(e).append(o)})}return t};r.prototype.dispose=function(){this.popup.dispose()};return r}();a.AccessibilityInstructionsPopup=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(t){"use strict";var e;(function(t){t.baseControlAccessibilityInstructions={"General actions":[{caption:"[Toggle Full Screen View]",keyboardShortcut:"Alt+F11"}],"Tab Navigation":[{caption:"[Navigate to Menu bar]",keyboardShortcut:"Alt+Ctrl+0"},{caption:"[Navigate to Designer Editor]",keyboardShortcut:"Alt+1"},{caption:"[Navigate to HTML Editor]",keyboardShortcut:"Alt+2"},{caption:"[Navigate to Preview View]",keyboardShortcut:"Alt+3"}]};t.baseFullPageAccessibilityInstructions=$.extend({},t.baseControlAccessibilityInstructions,{"General Editor Commands":[{caption:"[Editor Toolbar]",description:"Press Alt+F10 to navigate to the toolbar"},{caption:"[Editor Dialog]",description:"Press Tab to navigate to the next dialog element, press Shift+Tab to move to the previous dialog element"},{caption:"[Editor List Box]",description:"Inside a list-box, move to next list item with Tab OR Down Arrow"}],"Base Commands":[{caption:"[Undo command]",keyboardShortcut:"Ctrl+Z"},{caption:"[Redo command]",keyboardShortcut:"Shift+Ctrl+Z"},{caption:"[Bold command]",keyboardShortcut:"Ctrl+B"},{caption:"[Italic command]",keyboardShortcut:"Ctrl+I"},{caption:"[Underline command]",keyboardShortcut:"Ctrl+U"},{caption:"[Accessibility Help]",keyboardShortcut:"Alt+0"},{caption:"[Cancel operation]",keyboardShortcut:"ESC"}]});t.baseDesignerAccessibilityInstructions=$.extend({},t.baseFullPageAccessibilityInstructions,{"Designer Commands":[{caption:"[Move Block]",keyboardShortcut:"Alt+M"},{caption:"[Clone Block]",keyboardShortcut:"Alt+Shift+C"},{caption:"[Delete Block]",keyboardShortcut:"Alt+Shift+D"},{caption:"[Focus back to the designer block]",keyboardShortcut:"Alt+X"}],"Designer Tab Navigation":[{caption:"[Navigate to Toolbox view]",keyboardShortcut:"Alt+4"},{caption:"[Navigate to Properties View]",keyboardShortcut:"Alt+5"},{caption:"[Navigate to Styles View]",keyboardShortcut:"Alt+6"}]});t.basePreviewAccessibilityInstructions=$.extend({},t.baseControlAccessibilityInstructions,{"Basic Preview Navigation":[{caption:"[Navigate to Browser Preview View]",keyboardShortcut:"Alt+B"},{caption:"[Navigate to Desktop Preview]",keyboardShortcut:"Alt+Ctrl+1"},{caption:"[Navigate to Tablet Portrait Preview]",keyboardShortcut:"Alt+Ctrl+2"},{caption:"[Navigate to Tablet Landscape Preview]",keyboardShortcut:"Alt+Ctrl+3"},{caption:"[Navigate to Mobile Portrait Preview]",keyboardShortcut:"Alt+Ctrl+4"},{caption:"[Navigate to Mobile Landscape Preview]",keyboardShortcut:"Alt+Ctrl+5"}]})})(e=t.EditorAccessibilityInstructions||(t.EditorAccessibilityInstructions={}))})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.describedBy="aria-describedby";t.hasPopup="aria-haspopup";t.ariaExpanded="aria-expanded";t.role="role";t.ariaLabelledby="aria-labelledby";return t}();t.AriaAttributeNames=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var o=MktSvc.Controls.Common.Object;var t=function(){function t(){}t.prototype.getClosestBlock=function(t){return t.closest(n.CommonUtils.getAttrSelector(n.Contract.blockTypeAttrName))};t.prototype.getBlocks=function(t){return n.CommonUtils.getBySelector(n.CommonUtils.getAttrSelector(n.Contract.blockTypeAttrName),t)};t.prototype.getBlocksOfType=function(t,e){return n.CommonUtils.getBySelector(n.CommonUtils.getAttrEqualsSelector(n.Contract.blockTypeAttrName,e),t)};t.getLastElementBeforeContainer=function(t){if(o.isNullOrUndefined(t)){return null}var e=t.parentsUntil(n.CommonUtils.getAttrSelector(n.Contract.containerAttrName)).last();if(e.length===0){return t}return e};t.getEditableElement=function(t){return t.find(n.CommonUtils.getAttrSelector(n.CommonConstants.contentEditableAttrName))};return t}();n.BlockProvider=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var i=MktSvc.Controls.Common.Object;var t=function(){function t(t){this.availableBlocks=t}t.prototype.getBlockDefinition=function(t){var n=t.attr(e.Contract.blockTypeAttrName);return this.availableBlocks.firstOrDefault(function(t){var e=t.getType().toString();return e.toLowerCase()===n.toLowerCase()})};t.prototype.init=function(e){this.availableBlocks.each(function(t){t.setup(e)})};t.prototype.cleanup=function(t){var o=this;t.each(function(t,e){var n=o.getBlockDefinition($(e));if(!i.isNullOrUndefined(n)){n.setFinalContent($(e))}})};t.prototype.dispose=function(){this.availableBlocks.each(function(t){t.dispose()})};return t}();e.BlockDefinition=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var t=function(){function t(){}t.prototype.create=function(t){var e=t.getToolBlockMapping().getValues();var n=e.distinct(function(t,e){return t.getType()===e.getType()});return new o.BlockDefinition(n)};return t}();o.BlockDefinitionFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var t=function(){function t(t){this.draggableHandleWrapperSelector=o.CommonUtils.getClassSelector(o.CommonConstants.draggableHandleWrapperClassName);this.sortableDragHandlerSelector=o.CommonUtils.getClassSelector(o.CommonConstants.sortableDragHandlerClassName);this.eventBroker=t}t.prototype.getName=function(){return"BlockDraggableController"};t.prototype.setupBlocks=function(t){var n=this;t.each(function(t,e){n.wrapElementWithBlock($(e))});var e=this.getDraggableWrappers(t.first());e.on("mouseleave",function(){e.find(n.sortableDragHandlerSelector).hide()});e.on("mouseenter",function(t){$(t.target).closest(n.draggableHandleWrapperSelector).find(n.sortableDragHandlerSelector).show()});this.eventBroker.notify(o.DesignerInternalEventConstants.controllerReady,new o.ControllerReadyEventArgs(this.getName()))};t.prototype.disposeBlocks=function(t){$(t).off("mouseenter");this.getDraggableWrappers(t.first()).off("mouseleave mouseenter")};t.prototype.cleanupBlocks=function(t){$(o.CommonUtils.getAttrSelector(o.Contract.containerAttrName)).removeClass(o.CommonConstants.designerContentEditorContainerInDragModeClassName);t.siblings().remove();t.unwrap()};t.prototype.dispose=function(){};t.prototype.wrapElementWithBlock=function(t){var e=$("<div>");e.addClass(o.CommonConstants.draggableHandleWrapperClassName);t.wrap(e);var n=$('<span style="display:none">');n.addClass(o.CommonConstants.draggableHandleClassName);n.html(o.CommonConstants.draggableHandleChar);n.addClass(o.CommonConstants.sortableDragHandlerClassName);t.before(n)};t.prototype.getDraggableWrappers=function(t){return $(this.draggableHandleWrapperSelector,t.parentsUntil("html body"))};return t}();o.BlockDraggableController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var o=MktSvc.Controls.Common.DelayScheduler;var n=MktSvc.Controls.Common.Object;var r=MktSvc.Controls.Common.String;var a=MktSvc.Controls.Common.UniqueId;var s=MktSvc.Controls.Common.KeyboardKeyCodes;var t=function(){function t(t,e){var n=this;this.config={attributes:true,childList:true,characterData:true,subtree:true};this.blockProvider=t;this.eventBroker=e;this.id=a.generate(this.getName());this.contentBlock=null;this.isNonEventPropagationEnabled=false;this.changeTimer=new o(this.eventBroker,i.DesignerInternalEventConstants.designerNonEventPropagationStart,i.DesignerInternalEventConstants.designerNonEventPropagationEnd);this.changeTimer.init(function(){n.notifyBlockChanged()});this.eventBroker.subscribe(i.DesignerInternalEventConstants.designerNonEventPropagationStart,this.onNonEventPropagationStart=function(){n.isNonEventPropagationEnabled=true});this.eventBroker.subscribe(i.DesignerInternalEventConstants.designerNonEventPropagationEnd,this.onNonEventPropagationEnd=function(){n.isNonEventPropagationEnabled=false});this.observer=new MutationObserver(function(t){if(n.isBlockChanged(t)){n.changeTimer.schedule();n.isPendingOperationsExists=true}})}t.prototype.getName=function(){return"BlockEditableController"};t.prototype.setupBlocks=function(t){var e=this;this.cancelPendingOperations();if(n.isNullOrUndefined(this.onSelectionChanged)){this.eventBroker.subscribe(i.DesignerInternalEventConstants.selectionChanged,this.onSelectionChanged=function(t){return e.selectionChanged(t.blockElement)})}t.each(function(t,e){var o=$(e);o.on("focusout",function(){o.removeClass(i.CommonConstants.selectedDataContainerClassName)});o.on("keydown",function(t){if(t.keyCode===s.backspaceKey||t.keyCode===s.deleteKey){if(r.isNullOrEmpty(o.text())){t.preventDefault()}if(o.attr(i.Contract.blockTypeAttrName)==="Button"&&o.find("a").text().length<=1){t.preventDefault();o.find("a").text(r.Empty).append("<br>")}}});o.on("keyup",function(t){if((t.keyCode===s.backspaceKey||t.keyCode===s.deleteKey)&&o.attr(i.Contract.blockTypeAttrName)==="Button"&&!o.find("a").length){var e=i.CommonUtils.getEditorFromBlock(o);var n=$("<a></a>").addClass("button").append("<br>");if(e.length){e.prepend(n)}else{o.prepend(n)}if(o.find("br").length>1){o.find("br").last().remove()}}})});this.eventBroker.notify(i.DesignerInternalEventConstants.controllerReady,new i.ControllerReadyEventArgs(this.getName()))};t.prototype.selectionChanged=function(t){if(this.isPendingOperationsExists&&!this.isNonEventPropagationEnabled){this.cancelPendingOperations();this.notifyBlockChanged()}t.addClass(i.CommonConstants.selectedDataContainerClassName);this.contentBlock=t;var e=this.getBlockContent(t);this.observer.observe(e.get(0),this.config)};t.prototype.cleanupBlocks=function(t){i.CommonUtils.removeEditable(t);i.CommonUtils.removeClass(t,i.CommonConstants.selectedDataContainerClassName)};t.prototype.disposeBlocks=function(t){t.each(function(t,e){$(e).removeClass(i.CommonConstants.selectedDataContainerClassName);$(e).off("focusout keydown keyup")})};t.prototype.isBlockChanged=function(t){return t.some(function(t){return t.type!=="attributes"})};t.prototype.cancelPendingOperations=function(){this.changeTimer.stop(true);this.observer.takeRecords();this.isPendingOperationsExists=false};t.prototype.notifyBlockChanged=function(){if(!n.isNullOrUndefined(this.contentBlock)){this.eventBroker.notify(i.DesignerInternalEventConstants.contentBlockChanged,new i.BlockChangedEventArgs(this.id,this.contentBlock))}this.isPendingOperationsExists=false};t.prototype.dispose=function(){if(!n.isNullOrUndefined(this.onSelectionChanged)){this.eventBroker.unsubscribe(i.DesignerInternalEventConstants.selectionChanged,this.onSelectionChanged)}if(!n.isNullOrUndefined(this.onNonEventPropagationStart)){this.eventBroker.unsubscribe(i.DesignerInternalEventConstants.designerNonEventPropagationStart,this.onNonEventPropagationStart)}if(!n.isNullOrUndefined(this.onNonEventPropagationEnd)){this.eventBroker.unsubscribe(i.DesignerInternalEventConstants.designerNonEventPropagationEnd,this.onNonEventPropagationEnd)}this.observer.disconnect();this.isPendingOperationsExists=false;this.onSelectionChanged=null;this.onNonEventPropagationStart=null;this.onNonEventPropagationEnd=null};t.prototype.getBlockContent=function(t){return i.BlockProvider.getEditableElement(t).length?i.BlockProvider.getEditableElement(t):t};return t}();i.BlockEditableController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var i=MktSvc.Controls.Common.String;var r=MktSvc.Controls.Common.UniqueId;var t=function(){function t(t){this.eventBroker=t}t.prototype.getName=function(){return"BlockIdController"};t.prototype.setupBlocks=function(t){t.each(function(t,e){if(i.isNullOrWhitespace(o.CommonUtils.getId($(e)))){var n=r.generate("block");o.CommonUtils.setId($(e),n)}});this.eventBroker.notify(o.DesignerInternalEventConstants.controllerReady,new o.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupBlocks=function(t){t.removeAttr("id")};t.prototype.disposeBlocks=function(t){};t.prototype.dispose=function(){};return t}();o.BlockIdController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(u){"use strict";var n=MktSvc.Controls.Common.ArrayQuery;var m=MktSvc.Controls.Common.Object;var p=MktSvc.Controls.Common.String;var f=MktSvc.Controls.Common.UniqueId;var h=MktSvc.Controls.Common.KeyCodes;var t=function(){function d(t,e,n,o,i){var r=this;this.blockIdsWithInitializedToolbars=[];this.proxyInitialized=false;this.blockSetup=false;this.toolbarPrefix="cke_";this.staticToolbarOffset=15;this.observerConfig={attributes:true,attributeOldValue:true,attributeFilter:["style"]};this.eventBroker=t;this.blockProvider=e;this.blockDefinition=n;this.ckEditorProxy=o;this.commands=i;this.onBlockReadyHandler=this.eventBroker.subscribe(u.DesignerInternalEventConstants.ckEditorInstanceReadyEvent,function(t){r.setElementConfiguration(t)});this.onCkEditorFocusHandler=this.eventBroker.subscribe(u.DesignerInternalEventConstants.ckEditorFocus,function(t){return r.onToolbarShown.apply(r,[t])});this.onDesignerInitializedHandler=this.eventBroker.subscribe(u.DesignerInternalEventConstants.designerFrameInitialized,function(){return r.onDesignerInitialized.apply(r)});this.onDesignerDisposedHandler=this.eventBroker.subscribe(u.DesignerInternalEventConstants.designerFrameDisposed,function(){return r.onDesignerDisposed.apply(r)})}d.prototype.getName=function(){return"BlockInlineToolbarController"};d.prototype.onDesignerInitialized=function(){var e=this;this.blockIdsWithInitializedToolbars=[];this.ckEditorProxy.init(this.getDesignerFrame().get(0),function(){e.commands.forEach(function(t){e.setupCommand(t)});e.proxyInitialized=true;e.notifyControllerReady()})};d.prototype.setupBlocks=function(t){var c=this;this.ckEditorProxy.getCkEditorInitializedPromise().done(function(){t.each(function(t,e){var a=$(e);var s=c.blockDefinition.getBlockDefinition(a);if(!m.isNullOrUndefined(s)){var l=s.getInlineToolbar();if(!m.isNullOrUndefined(l)&&!p.isNullOrWhitespace(l.getName())){a.attr(u.CommonConstants.toolbardataAttrName,"true");u.CommonUtils.setTabIndex(a,0);u.CommonUtils.removeEditable(a);a.on("focus focusin click",function(){var t=u.CommonUtils.getId(a);var e;if(!c.isToolbarInitialized(t)){var n=a.children();var o=f.generate(d.editorIdPrefix);if(n.length!==0){u.BrowserQuirks.fixCheckedNodes(n);e=n.wrapAll(c.createCkEditorWrapper(o)).parent()}else{e=c.createCkEditorWrapper(o).appendTo(a)}u.CommonUtils.setAriaAttribute(e,"aria-label",a.attr("aria-label"));c.initInlineToolbar(e,l,t)}a.blur().focusout();var i=c.ckEditorProxy.getCkEditorId(a);c.ckEditorProxy.setEditorFocus(i,function(){e=e||u.BlockProvider.getEditableElement(a);e.off("focus click focusout");var t=function(){if(c.selectedBlockId!==a.attr("id")){c.selectedBlockId=a.attr("id");c.notifySelectionChanged(a,e);c.fixContentPosition(i);c.createObserver();c.observeToolbar(i);c.appendAccessibilityButton(e,"toolbarnav_"+a.attr("id"),"[Navigate to toolbar]",function(){c.ckEditorProxy.setEditorFocus(i,function(){var t=new Event("keydown",{bubbles:true});t.altKey=true;t.keyCode=h.F10;t.which=h.F10;e[0].dispatchEvent(t)})})}};e.on("focus click",t);e.on("focusout",function(){if(c.toolbarObserver){c.toolbarObserver.takeRecords();c.toolbarObserver.disconnect()}setTimeout(function(){e.children("#toolbarnav_"+a.attr("id")).remove()},0);c.selectedBlockId=p.Empty;e.css("margin-top","0")});t();c.appendAccessibilityButton(c.getToolbar(i),"toolbarret_"+a.attr("id"),"[Leave toolbar]",function(){e.focus()})});if(s.isEditable()&&s.usePlainText()){var r=c.ckEditorProxy.getCkEditorInstance(i);if(!m.isNullOrUndefined(r)){r.config.pasteFilter="plain-text";r.on("paste",function(t){t.data.dataValue=$("<p>").html(t.data.dataValue).text()})}}})}}});c.blockSetup=true;c.notifyControllerReady()})};d.prototype.fixContentPosition=function(t){var e=this.getDesignerFrame();var n=e.contents().find("#"+t);var o=this.getToolbar(t,true);if(!n.length||!o.length){return}var i=n.get(0).getBoundingClientRect().top+e.get(0).contentWindow.pageYOffset;if(o.get(0).getBoundingClientRect().top===0&&i<o.height()){var r=o.height()+this.staticToolbarOffset-i;n.css("margin-top",r+"px");this.eventBroker.notify(u.DesignerInternalEventConstants.designerToolbarPositionChanged)}};d.prototype.createObserver=function(){var n=this;if(!this.toolbarObserver){this.toolbarObserver=new MutationObserver(function(t){if(t.length&&t[0].target&&t[0].oldValue!==t[0].target.getAttribute("style")){var e=$(t[0].target).attr("id").replace(n.toolbarPrefix,p.Empty);n.fixContentPosition(e)}})}};d.prototype.observeToolbar=function(t){var e=this.getToolbar(t);if(e.length){this.toolbarObserver.observe(e.get(0),this.observerConfig)}};d.prototype.getToolbar=function(t,e){if(e===void 0){e=false}return this.getDesignerFrame().contents().find("#"+this.toolbarPrefix+t+(e?":visible":p.Empty))};d.prototype.getDesignerFrame=function(){return u.CommonUtils.getByClass(u.CommonConstants.designerContentEditorFrameClassName)};d.prototype.cleanupBlocks=function(e){var o=this;new n(e.toArray()).select(function(t){return $(t)}).where(function(t){return t.attr(u.CommonConstants.toolbardataAttrName)==="true"}).each(function(t){var e=u.BlockProvider.getEditableElement(t);var n=u.CommonUtils.getId(e);if(!m.isNullOrUndefined(n)&&e.length){e.get(0).outerHTML=o.ckEditorProxy.getContent(n)}t.removeAttr(u.CommonConstants.toolbardataAttrName);t.removeAttr("tabIndex");t.removeAttr("aria-label")});this.commands.forEach(function(t){t.cleanup(e)});this.ckEditorProxy.cleanup(e.first().parentsUntil("body html"))};d.prototype.disposeBlocks=function(t){var i=this;new n(t.toArray()).select(function(t){return $(t)}).where(function(t){return t.attr(u.CommonConstants.toolbardataAttrName)==="true"}).each(function(t){var e=u.CommonUtils.getId(t);if(i.isToolbarInitialized(e)){var n=u.BlockProvider.getEditableElement(t);var o=u.CommonUtils.getId(n);i.destroyToolbar(o)}t.find(d.editorWrapperSelector).children().unwrap()});t.off("focus focusin click");t.each(function(t,e){u.BlockProvider.getEditableElement($(e)).off("focus click")});if(this.toolbarObserver){this.toolbarObserver.disconnect();this.toolbarObserver=null}if(this.proxyInitialized){this.commands.forEach(function(t){t.dispose()})}this.ckEditorProxy.cleanup(t.first().parents("html"));this.proxyInitialized=false;this.blockSetup=false};d.prototype.onDesignerDisposed=function(){if(this.proxyInitialized){this.commands.forEach(function(t){t.dispose()})}this.ckEditorProxy.dispose();this.proxyInitialized=false;this.blockSetup=false};d.prototype.notifySelectionChanged=function(t,e){var n=this.blockDefinition.getBlockDefinition(t);if(!m.isNullOrUndefined(n)){var o=new u.SelectionChangedEventArgs(n,t);this.eventBroker.notify(u.DesignerInternalEventConstants.selectionChanged,o);this.eventBroker.notify(u.EventConstants.onElementFocusedIn,new u.ElementFocusedEventArgs(e))}};d.prototype.dispose=function(){this.eventBroker.unsubscribe(u.DesignerInternalEventConstants.ckEditorInstanceReadyEvent,this.onBlockReadyHandler);this.eventBroker.unsubscribe(u.DesignerInternalEventConstants.ckEditorFocus,this.onCkEditorFocusHandler);this.eventBroker.unsubscribe(u.DesignerInternalEventConstants.designerFrameInitialized,this.onDesignerInitializedHandler);this.eventBroker.unsubscribe(u.DesignerInternalEventConstants.designerFrameDisposed,this.onDesignerDisposedHandler);this.onCkEditorFocusHandler=this.onDesignerInitializedHandler=this.onDesignerDisposedHandler=this.onBlockReadyHandler=null;this.ckEditorProxy.dispose();this.ckEditorProxy=null};d.prototype.initInlineToolbar=function(t,e,n){if(!m.isNullOrUndefined(this.ckEditorProxy.createEditor(t,e))){this.blockIdsWithInitializedToolbars.push(n)}};d.prototype.destroyToolbar=function(t){this.ckEditorProxy.destroyEditor(t)};d.prototype.isToolbarInitialized=function(t){return t&&$.inArray(t,this.blockIdsWithInitializedToolbars)>=0};d.prototype.createCkEditorWrapper=function(t){var e=$("<div>");u.CommonUtils.setEditable(e);u.CommonUtils.setId(e,t);e.attr(u.CommonConstants.ckEditorAttrName,"true");return e};d.prototype.appendAccessibilityButton=function(t,e,n,o){if(!t.children(e).length){var i=$("<div>");i.attr("tabindex","0");i.attr("id",e);i.attr("aria-label",u.CommonUtils.getLocalizedString(n));i.attr("role","button");i.addClass(u.CommonConstants.accessibilityButtonClassName);i.on("focus click",o);t.append(i);t.attr("aria-owns",e)}};d.prototype.setElementConfiguration=function(t){var e=t.ckEditorInstanceName;var n=t.sourceId;if(this.ckEditorProxy.instanceId()!==n){return}this.ckEditorProxy.setRequiredAttributes(e);var o=this.ckEditorProxy.getCkEditorElement(e);o.removeAttribute("role");var i=$(o).closest("["+u.Contract.blockTypeAttrName+"]");i.removeAttr("tabindex");i.off("focus focusin click");var r=this.blockDefinition.getBlockDefinition(i);if(!m.isNullOrUndefined(r)&&!r.isEditable()){this.ckEditorProxy.setReadOnly(e)}};d.prototype.onToolbarShown=function(t){var e=t.sourceId;if(this.ckEditorProxy.instanceId()!==e){return}var n=this.blockProvider.getClosestBlock(u.CommonUtils.getById(t.ckEditorInstanceName));this.eventBroker.notify(u.EventConstants.toolbarShown,new u.ToolbarShownEventArgs(u.CommonUtils.getId(n)))};d.prototype.setupCommand=function(t){t.setup(this.eventBroker);if(t instanceof u.CkEditorCommand){var e=t;e.setupCkEditor(this.ckEditorProxy)}};d.prototype.notifyControllerReady=function(){if(this.proxyInitialized&&this.blockSetup){this.eventBroker.notify(u.DesignerInternalEventConstants.controllerReady,new u.ControllerReadyEventArgs(this.getName()))}};d.editorIdPrefix="editorIdPrefix";d.editorWrapperSelector=p.Format('[id^="{0}"]',d.editorIdPrefix);return d}();u.BlockInlineToolbarController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var r=MktSvc.Controls.Common.Object;var t=function(){function t(t,e){this.eventBroker=t;this.blockDefinition=e;this.blockDefinition.init(this.eventBroker)}t.prototype.getName=function(){return"BlockLoadedController"};t.prototype.setupBlocks=function(t){var o=this;t.each(function(t,e){var n=o.blockDefinition.getBlockDefinition($(e));if(!r.isNullOrUndefined(n)){o.blockDefinition.getBlockDefinition($(e)).decorate($(e));o.eventBroker.notify(i.DesignerInternalEventConstants.blockLoaded,new i.BlockLoadedEventArgs($(e),null))}});this.eventBroker.notify(i.DesignerInternalEventConstants.controllerReady,new i.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupBlocks=function(t){var o=this;t.each(function(t,e){var n=o.blockDefinition.getBlockDefinition($(e));if(!r.isNullOrUndefined(n)){o.blockDefinition.getBlockDefinition($(e)).setFinalContent($(e))}})};t.prototype.disposeBlocks=function(t){};t.prototype.dispose=function(){};return t}();i.BlockLoadedController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var e=MktSvc.Controls.Common.Object;var t=function(){function t(t){this.eventBroker=t}t.prototype.getName=function(){return"BlockClickedController"};t.prototype.setupBlocks=function(t){var n=this;var o=new i.BlockClickedEventArgs;t.each(function(t,e){$(e).on("click",function(){o.block=$(e);n.eventBroker.notify(i.DesignerInternalEventConstants.blockClicked,o)})});this.eventBroker.notify(i.DesignerInternalEventConstants.controllerReady,new i.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupBlocks=function(t){};t.prototype.disposeBlocks=function(t){if(!e.isNullOrUndefined(t)){t.off("click")}};t.prototype.dispose=function(){};return t}();i.BlockClickedController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(l){"use strict";var n=MktSvc.Controls.Common.Object;var c=MktSvc.Controls.Common.KeyCodes;var t=function(){function t(t,e){this.blockSortablePlaceholderClassName="block-sort-highlight";this.ariaLabelText="Placeholder. Press enter to insert tool here";this.eventBroker=t;this.blockProvider=e}t.prototype.getName=function(){return"BlockAddModeController"};t.prototype.setupBlocks=function(t){var e=this;if(n.isNullOrUndefined(this.onDesignerAddStart)){this.eventBroker.subscribe(l.DesignerInternalEventConstants.designerAddStart,this.onDesignerAddStart=function(t){return e.designerAddStart(t.block,t.movingExistingBlock)})}if(n.isNullOrUndefined(this.onDesignerAddEnd)){this.eventBroker.subscribe(l.DesignerInternalEventConstants.designerAddEnd,this.onDesignerAddEnd=function(){return e.cleanup()})}this.eventBroker.notify(l.DesignerInternalEventConstants.controllerReady,new l.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupBlocks=function(t){this.cleanup()};t.prototype.disposeBlocks=function(t){this.cleanup()};t.prototype.dispose=function(){if(!n.isNullOrUndefined(this.onDesignerAddStart)){this.eventBroker.unsubscribe(l.DesignerInternalEventConstants.designerAddStart,this.onDesignerAddStart)}if(!n.isNullOrUndefined(this.onDesignerAddEnd)){this.eventBroker.unsubscribe(l.DesignerInternalEventConstants.designerAddEnd,this.onDesignerAddEnd)}this.onDesignerAddStart=this.onDesignerAddEnd=null;this.cleanup()};t.prototype.designerAddStart=function(o,i){var r=this;var e=l.CommonUtils.getByClass(l.CommonConstants.designerContentEditorFrameClassName);var t=this.blockProvider.getBlocks(e.contents());var n;t.focusout();this.eventBroker.notify(l.DesignerInternalEventConstants.designerNonEventPropagationStart);l.CommonUtils.getByClass(this.blockSortablePlaceholderClassName,e.contents()).remove();l.CommonUtils.setTabIndex(t.filter(l.CommonUtils.getAttrSelector("tabindex")),-1);l.CommonUtils.setTabIndex(t.find(l.CommonUtils.getAttrSelector(l.CommonConstants.ckEditorAttrName)),-1);var a=$("<div>+</div>");a.addClass(l.CommonConstants.sortablePlaceholderClassName).addClass(l.CommonConstants.regularSortablePlaceholderClassName).addClass(this.blockSortablePlaceholderClassName).attr("tabindex","0").attr("role","button").attr("aria-label",l.CommonUtils.getLocalizedString(this.ariaLabelText)).attr(l.Contract.dataIdAttrName,l.TestabilityConstants.sortablePlaceholderId);a.on("touchstart mousedown",function(t){n=$(t.target)});a.on("touchend mouseup",function(t){var e=$(t.target);if(n&&e.get(0)===n.get(0)){r.replacePlaceholder(e,o,i)}});a.on("touchmove",function(){n=null});a.on("keydown",function(t){var e=t.which||t.keyCode;var n=$(t.target);if(e===c.Enter){t.preventDefault();r.replacePlaceholder(n,o,i)}});a.on("focus focusin",function(t){l.CommonUtils.getByClass(l.CommonConstants.sortablePlaceholderClassName,e.contents()).removeClass(l.CommonConstants.selectedSortablePlaceholderClassName);$(t.target).addClass(l.CommonConstants.selectedSortablePlaceholderClassName)});var s=e.contents().find(l.CommonUtils.getAttrEqualsSelector(l.Contract.containerAttrName,"true")).not(":has("+l.CommonUtils.getAttrSelector(l.Contract.blockTypeAttrName)+")");if(l.CommonUtils.isElementDefined(s)){s.append(a.clone(true))}t.each(function(t,e){var n=l.BlockProvider.getLastElementBeforeContainer($(e));if(l.CommonUtils.isElementDefined(n)){if(!r.hasBlockPlaceholder(n.next())){n.after(a.clone(true))}if(!r.hasBlockPlaceholder(n.prev())){n.before(a.clone(true))}}});l.CommonUtils.getByClass(l.CommonConstants.sortablePlaceholderClassName,e.contents()).first().focus().focusin()};t.prototype.replacePlaceholder=function(t,e,n){t.replaceWith(e);if(n){this.eventBroker.notify(l.EventConstants.blockMoved,new l.BlockMovedEventArgs(e))}else{this.eventBroker.notify(l.EventConstants.blockAdded,new l.BlockAddedEventArgs(e))}this.eventBroker.notify(l.DesignerInternalEventConstants.designerAddEnd)};t.prototype.cleanup=function(){var t=l.CommonUtils.getByClass(l.CommonConstants.designerContentEditorFrameClassName);var e=this.blockProvider.getBlocks(t.contents());this.eventBroker.notify(l.DesignerInternalEventConstants.designerNonEventPropagationEnd);l.CommonUtils.setTabIndex(e.filter(l.CommonUtils.getAttrSelector("tabindex")),0);l.CommonUtils.setTabIndex(e.find(l.CommonUtils.getAttrSelector(l.CommonConstants.ckEditorAttrName)),0)};t.prototype.hasBlockPlaceholder=function(t){return t.hasClass(l.CommonConstants.sortablePlaceholderClassName)};return t}();l.BlockAddModeController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.collapsableIconClassName="extrasToggle";t.headingClassName="propertiesTitleButton";t.headingLabelClassName="propertiesTitle";t.sectionContentClassName="treeView";t.sectionContainerClassName="detailsViewProperties";t.emptyWatermarkClassName="empty-watermark";t.inputControlContainerClassName="treeViewItem";t.inputItemField="treeViewItemField";t.propertyNameCssClass="propertyName";t.inputAttributeClassName="attributeInput";t.inputColorCssClass="inputColor";t.inputImageCssClass="inputImage";t.inputCheckboxCssClass="inputCheckbox";t.inputRadioButtonCssClass="inputRadioButton";t.colorFilledRectangleCssClass="colorFilledRectangle";t.colorPickerInputCssClassName="colorPickerInput";t.colorPickerFocusedCssClass="siblingFocused";t.inputTag="input";t.selectTag="select";t.inputTypeText="text";t.inputTypeNumber="number";t.linkSectionTitle="Link";t.srcInputCssClass="srcInput";t.altInputCssClass="altInput";t.linkInputCssClass="linkInput";t.imageWidthInputCssClass="imageWidthInput";t.imageHeightInputCssClass="imageHeightInput";t.imageHSpaceInputCssClass="imageHSpaceInput";t.imageVSpaceInputCssClass="imageVSpaceInput";t.imageAlignmentDropDownCssClass="imageAlignmentDropDown";t.imgGalleryCssClass="detailsViewButton";t.imageSectionTitle="Image";t.imageAlignmentLabel="[Alignment]";t.imageWrapperClassName="imageWrapper";t.imageTag="img";t.altAttribute="alt";t.alignAttribute="align";t.srcAttribute=e.CommonConstants.designerImageSourceAttributeName;t.titleAttribute="title";t.srcLabel="[Source]";t.altLabel="[Alt Text]";t.linkLabel="[Link]";t.hSpaceLabel="[HSpace]";t.vSpaceLabel="[VSpace]";t.hrefInputCssClass="hrefInput";t.anchorTag="a";t.hrefAttribute="href";t.urlLabel="[URL]";t.buttonLinkLabel="[Link]";t.buttonLinkInputCssClass="buttonLinkInput";t.stylesSectionTitle="[Styles Title]";t.buttonBackgroundColorLabel="[Background Color]";t.buttonBackgroundColorInputCssClass="buttonBackgroundColorInput";t.buttonTextColorLabel="[Text Color]";t.buttonTextColorInputCssClass="buttonTextColorInput";t.buttonAlignmentLabel="[Alignment]";t.buttonAlignmentDropDownCssClass="buttonAlignmentDropDown";t.buttonSizeSectionTitle="[Size]";t.buttonWidthLabel="[Width px]";t.buttonWidthInputCssClass="buttonWidthInput";t.buttonHeightLabel="[Height px]";t.buttonHeightInputCssClass="buttonHeightInput";t.backgroundColorAttribute="background-color";t.textColorAttribute="color";t.marginLeftAttribute="margin-left";t.marginRightAttribute="margin-right";t.lineHeightAttribute="line-height";t.dividerSectionTitle="Divider";t.tableTag="table";t.tdTag="td";t.pTag="p";t.widthAttribute="width";t.widthLabel="[Width %]";t.dividerWidthInputCssClass="dividerWidthInput";t.colorAttribute="border-bottom-color";t.colorLabel="[Color]";t.colorInputCssClass="colorInput";t.paddingSectionTitle="Padding";t.paddingTopAttribute="padding-top";t.paddingTopLabel="[Padding Top px]";t.paddingTopInputCssClass="paddingTopInput";t.paddingBottomAttribute="padding-bottom";t.paddingBottomLabel="[Padding Bottom px]";t.paddingBottomInputCssClass="paddingBottomInput";return t}();e.DetailsViewConstants=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(c){"use strict";var d=MktSvc.Controls.Common.Object;var o=MktSvc.Controls.Common.String;var i=MktSvc.Controls.Common.UniqueId;var t=function(){function t(t){this.detailsViewControl=t}t.prototype.init=function(t,e){this.eventBroker=t;this.containerId=e;this.detailsViewControl.init(this.containerId,this.eventBroker)};t.prototype.dispose=function(){this.detailsViewControl.dispose()};t.prototype.render=function(e){var n=this;this.clearContainer();var t=this.detailsViewControl.createSection(c.CommonUtils.getLocalizedString("["+c.DetailsViewConstants.dividerSectionTitle+"]"));this.detailsViewControl.createInputField(t,c.CommonUtils.getLocalizedString(c.DetailsViewConstants.widthLabel),c.DetailsViewConstants.inputTypeNumber,c.DetailsViewConstants.dividerWidthInputCssClass,this.getWidth(e),{min:"1",max:"100",role:"spinbutton",id:i.generate(c.DetailsViewConstants.dividerWidthInputCssClass)},function(t){n.onWidthFieldUpdated(e,t)});this.detailsViewControl.createInputColorField(t,c.CommonUtils.getLocalizedString(c.DetailsViewConstants.colorLabel),c.DetailsViewConstants.inputTypeText,c.DetailsViewConstants.colorInputCssClass,this.getColor(e),{id:i.generate(c.DetailsViewConstants.colorInputCssClass)},function(t){n.onColorFieldUpdated(e,t)});var o=this.detailsViewControl.createSection(c.CommonUtils.getLocalizedString("["+c.DetailsViewConstants.paddingSectionTitle+"]"));this.detailsViewControl.createInputField(o,c.CommonUtils.getLocalizedString(c.DetailsViewConstants.paddingTopLabel),c.DetailsViewConstants.inputTypeNumber,c.DetailsViewConstants.paddingTopInputCssClass,this.getPaddingTop(e),{min:"0",max:"200",role:"spinbutton",id:i.generate(c.DetailsViewConstants.paddingTopInputCssClass)},function(t){n.onPaddingTopFieldUpdated(e,t)});this.detailsViewControl.createInputField(o,c.CommonUtils.getLocalizedString(c.DetailsViewConstants.paddingBottomLabel),c.DetailsViewConstants.inputTypeNumber,c.DetailsViewConstants.paddingBottomInputCssClass,this.getPaddingBottom(e),{min:"0",max:"200",role:"spinbutton",id:i.generate(c.DetailsViewConstants.paddingBottomInputCssClass)},function(t){n.onPaddingBottomFieldUpdated(e,t)})};t.prototype.getWidth=function(t){var e=this.getTable(t).get(0);var n=e&&e.style.width?e.style.width.replace("%",o.Empty):"100";return n};t.prototype.onWidthFieldUpdated=function(t,e){var n=e.val();if(n>100||n<1){n=100;e.val(n)}var o=this.getTable(t);o.css(c.DetailsViewConstants.widthAttribute,n+"%");var i=t.find("["+c.CommonConstants.ckEditorAttrName+"]");var r=i.attr("aria-label");var a=c.CommonUtils.getLocalizedString("[Width]");if(!d.isNullOrUndefined(r)&&r.indexOf(a)===-1){r=r+(" "+a+" = %.")}var s="("+a+")(.+?)(?= %.)";var l=new RegExp(s);r=!d.isNullOrUndefined(r)?r.replace(l,"$1 = "+n):r;i.attr("aria-label",r);this.eventBroker.notify(c.DesignerInternalEventConstants.contentChanged,new c.DesignerInternalContentChangedEventArgs(this.containerId))};t.prototype.getTable=function(t){return t.find(c.DetailsViewConstants.tableTag)};t.prototype.getColor=function(t){var e=this.getParagraph(t).css(c.DetailsViewConstants.colorAttribute);if(d.isNullOrUndefined(e)){e=o.Empty}return c.ColorUtils.rgbToHex(e)};t.prototype.onColorFieldUpdated=function(t,e){var n=e.val();var o=this.getParagraph(t);o.css(c.DetailsViewConstants.colorAttribute,n);var i=t.find("["+c.CommonConstants.ckEditorAttrName+"]");var r=i.attr("aria-label");var a=c.CommonUtils.getLocalizedString("[Color]");if(!d.isNullOrUndefined(r)&&r.indexOf(a)===-1){r=r+(" "+a+" = .")}var s="("+a+")(.+?)(?= \\.)";var l=new RegExp(s);r=!d.isNullOrUndefined(r)?r.replace(l,"$1 = "+n):r;i.attr("aria-label",r);this.eventBroker.notify(c.DesignerInternalEventConstants.contentChanged,new c.DesignerInternalContentChangedEventArgs(this.containerId))};t.prototype.getParagraph=function(t){return t.find(c.DetailsViewConstants.pTag)};t.prototype.getPaddingTop=function(t){var e=this.getTableCell(t).css(c.DetailsViewConstants.paddingTopAttribute);if(d.isNullOrUndefined(e)){e="0"}else{e=e.replace("px",o.Empty)}return e};t.prototype.onPaddingTopFieldUpdated=function(t,e){var n=e.val();if(n>200||n<0){n=0;e.val(n)}var o=this.getTableCell(t);o.css(c.DetailsViewConstants.paddingTopAttribute,n+"px");this.eventBroker.notify(c.DesignerInternalEventConstants.contentChanged,new c.DesignerInternalContentChangedEventArgs(this.containerId))};t.prototype.getPaddingBottom=function(t){var e=this.getTableCell(t).css(c.DetailsViewConstants.paddingBottomAttribute);if(d.isNullOrUndefined(e)){e="0"}else{e=e.replace("px",o.Empty)}return e};t.prototype.onPaddingBottomFieldUpdated=function(t,e){var n=e.val();if(n>200||n<0){n=0;e.val(n)}var o=this.getTableCell(t);o.css(c.DetailsViewConstants.paddingBottomAttribute,n+"px");this.eventBroker.notify(c.DesignerInternalEventConstants.contentChanged,new c.DesignerInternalContentChangedEventArgs(this.containerId))};t.prototype.getTableCell=function(t){return t.find(c.DetailsViewConstants.tdTag)};t.prototype.clearContainer=function(){c.CommonUtils.getById(this.containerId).empty()};return t}();c.DividerDetailsView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(r){"use strict";var n=MktSvc.Controls.Common.Object;var o=MktSvc.Controls.Common.String;var i=MktSvc.Controls.Common.UniqueId;var t=function(){function t(t,e,n){this.detailsViewControl=n;this.linkSectionLabel=t;this.buttonCommonDetailsView=e}t.prototype.init=function(t,e){this.eventBroker=t;this.containerId=e;this.detailsViewControl.init(this.containerId,this.eventBroker);this.buttonCommonDetailsView.init(t,e)};t.prototype.dispose=function(){this.detailsViewControl.dispose();this.buttonCommonDetailsView.dispose()};t.prototype.render=function(e){var n=this;this.clearContainer();this.linkSection=this.detailsViewControl.createSection(r.CommonUtils.getLocalizedString(this.linkSectionLabel));this.detailsViewControl.createLinkField(this.linkSection,r.CommonUtils.getLocalizedString(r.DetailsViewConstants.buttonLinkLabel),r.DetailsViewConstants.inputTypeText,r.DetailsViewConstants.buttonLinkInputCssClass,this.getButtonLink(e),{id:i.generate(r.DetailsViewConstants.buttonLinkInputCssClass)},function(t){n.onLinkFieldUpdated(e,t)},{hasFocus:false});this.updateAriaAttr(e);this.buttonCommonDetailsView.render(e)};t.prototype.getAnchor=function(t){return t.find(r.DetailsViewConstants.anchorTag)};t.prototype.getButtonLink=function(t){var e=this.getAnchor(t).attr(r.DetailsViewConstants.hrefAttribute);if(n.isNullOrUndefined(e)){e=o.Empty}return e};t.prototype.onLinkFieldUpdated=function(t,e){var n=r.CommonUtils.getLinkWithProtocol(e.val());var o=this.getAnchor(t);o.attr(r.DetailsViewConstants.hrefAttribute,n);var i=new r.HrefAttributeChangedEventArgs(o,n);this.eventBroker.notify(r.EventConstants.hrefAttributeChanged,i);this.eventBroker.notify(t.attr(r.Contract.blockTypeAttrName)+"_"+r.EventConstants.hrefAttributeChanged,i);this.eventBroker.notify(r.DesignerInternalEventConstants.contentBlockChanged,new r.BlockChangedEventArgs(this.containerId,t))};t.prototype.clearContainer=function(){r.CommonUtils.getById(this.containerId).empty()};t.prototype.isConfigured=function(t){var e=this.getButtonLink(t);return!o.isNullUndefinedOrWhitespace(e)&&e!=="#"};t.prototype.updateAriaAttr=function(t){var e=this.getAnchor(t);var n=r.BlockProvider.getEditableElement(t);var o=t.attr("aria-label");if(this.isConfigured(t)){o+=" "+e.text()}n.attr("aria-label",o)};return t}();r.ButtonDetailsView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(a){"use strict";var o=MktSvc.Controls.Common.Object;var s=MktSvc.Controls.Common.String;var i=MktSvc.Controls.Common.UniqueId;var r=MktSvc.Controls.Common.Dictionary;var t=function(){function t(t,e){this.detailsViewControl=t;this.blockDefinition=e}t.prototype.init=function(t,e){this.eventBroker=t;this.containerId=e;this.detailsViewControl.init(this.containerId,this.eventBroker)};t.prototype.dispose=function(){if(!o.isNullOrUndefined(this.detailsViewControl)){this.detailsViewControl.dispose()}this.eventBroker=null;this.clearContainer()};t.prototype.render=function(e){var n=this;this.clearContainer();var t=this.detailsViewControl.createSection(a.CommonUtils.getLocalizedString("["+a.DetailsViewConstants.imageSectionTitle+"]"));this.detailsViewControl.createImageField(t,a.CommonUtils.getLocalizedString(a.DetailsViewConstants.srcLabel),a.DetailsViewConstants.inputTypeText,a.DetailsViewConstants.srcInputCssClass,this.getImgAttributeInitialValue(e,a.DetailsViewConstants.srcAttribute),{id:i.generate(a.DetailsViewConstants.srcInputCssClass)},function(t){n.onImgAttributeFieldUpdated(e,t,a.DetailsViewConstants.srcAttribute)},{hasFocus:false});this.detailsViewControl.createInputField(t,a.CommonUtils.getLocalizedString(a.DetailsViewConstants.altLabel),a.DetailsViewConstants.inputTypeText,a.DetailsViewConstants.altInputCssClass,this.getImgAttributeInitialValue(e,a.DetailsViewConstants.altAttribute),{id:i.generate(a.DetailsViewConstants.altInputCssClass)},function(t){n.onImgAttributeFieldUpdated(e,t,a.DetailsViewConstants.altAttribute)});this.detailsViewControl.createLinkField(t,a.CommonUtils.getLocalizedString(a.DetailsViewConstants.linkLabel),a.DetailsViewConstants.inputTypeText,a.DetailsViewConstants.linkInputCssClass,this.getLinkWrapperHrefValue(e),{id:i.generate(a.DetailsViewConstants.linkInputCssClass)},function(t){n.onLinkWrapperFieldUpdated(e,t)},{hasFocus:false});this.detailsViewControl.createDropdownList(t,a.CommonUtils.getLocalizedString(a.DetailsViewConstants.imageAlignmentLabel),new r({Left:a.CommonUtils.getLocalizedString("[Left]"),Center:a.CommonUtils.getLocalizedString("[Center]"),Right:a.CommonUtils.getLocalizedString("[Right]")}),a.DetailsViewConstants.imageAlignmentDropDownCssClass,this.getImageAlignment(e),function(t){n.onImageAlignmentUpdated(e,t)})};t.prototype.getImgAttributeInitialValue=function(t,e){var n=this.getImage(t).attr(e);n=o.isNullOrUndefined(n)?"":n;if(!this.blockDefinition.isConfigured(t)){n=s.Empty}return n};t.prototype.getLinkWrapperHrefValue=function(t){return this.getLinkWrapperOfImg(this.getImage(t)).attr(a.DetailsViewConstants.hrefAttribute)};t.prototype.getImageAlignment=function(t){var e=this.getImageWrapper(t);return e.attr(a.DetailsViewConstants.alignAttribute)?e.attr(a.DetailsViewConstants.alignAttribute):s.Empty};t.prototype.onImgAttributeFieldUpdated=function(t,e,n){var o=this.getImage(t);var i=e.val();o.attr(n,i);this.eventBroker.notify(a.EventConstants.imageAttributeChanged,new a.ImageAttributeChangedEventArgs(o,n,i,null));this.eventBroker.notify(a.DesignerInternalEventConstants.contentChanged,new a.DesignerInternalContentChangedEventArgs(this.containerId))};t.prototype.onLinkWrapperFieldUpdated=function(t,e){var n=this.getImage(t);var o=this.getLinkWrapperOfImg(n);var i=e.val();if(o.length>0){if(s.isNullOrWhitespace(i)){n.unwrap()}else{o.attr(a.DetailsViewConstants.hrefAttribute,i);o.attr(a.DetailsViewConstants.titleAttribute,i)}}else{n.wrap($("<a>").attr(a.DetailsViewConstants.hrefAttribute,i).attr(a.DetailsViewConstants.titleAttribute,i))}var r=new a.HrefAttributeChangedEventArgs(this.getLinkWrapperOfImg(n),i);this.eventBroker.notify(a.EventConstants.hrefAttributeChanged,r);this.eventBroker.notify(a.DesignerInternalEventConstants.contentBlockChanged,new a.BlockChangedEventArgs(this.containerId,t))};t.prototype.onImageAlignmentUpdated=function(t,e){if(!this.getImageWrapper(t).length){var n=$("<div>").addClass(a.DetailsViewConstants.imageWrapperClassName);this.getImage(t).wrap(n)}var o=e.val();this.getImageWrapper(t).attr(a.DetailsViewConstants.alignAttribute,o);this.eventBroker.notify(a.DesignerInternalEventConstants.contentChanged,new a.DesignerInternalContentChangedEventArgs(this.containerId))};t.prototype.getImage=function(t){return t.find(a.DetailsViewConstants.imageTag)};t.prototype.getLinkWrapperOfImg=function(t){return t.parent("a")};t.prototype.getImageWrapper=function(t){return t.find("."+a.DetailsViewConstants.imageWrapperClassName)};t.prototype.clearContainer=function(){a.CommonUtils.getById(this.containerId).empty()};return t}();a.ImageDetailsView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(c){"use strict";var s=MktSvc.Controls.Common.Object;var t=function(){function t(t,e,n,o,i,r,a,s){this.sectionRenderer=t;this.inputElementRenderer=e;this.inputColorFieldRenderer=n;this.lookupContainerRenderer=o;this.dropdownElementRenderer=i;this.linkFieldRenderer=r;this.imageFieldRenderer=a;this.ignoreChangesWhileInputStrategy=s}t.prototype.init=function(t,e){this.eventBroker=e;this.containerId=t;this.linkFieldRenderer.setup(this.eventBroker);this.imageFieldRenderer.setup(this.eventBroker);this.ignoreChangesWhileInputStrategy.setup(e)};t.prototype.createSection=function(t,e){var n=this.sectionRenderer.render(c.DetailsViewConstants.sectionContainerClassName,t);c.CommonUtils.getById(this.containerId).append(n);if(e){var o=n.find("."+c.DetailsViewConstants.sectionContentClassName);o.append(e)}return n};t.prototype.createInputField=function(t,e,n,o,i,r,a){var s=this.inputElementRenderer.render(e,n,o,i,r,a);t.find("."+c.DetailsViewConstants.sectionContentClassName).append(s);this.ignoreChangesWhileInputStrategy.addStopEventPropogationWhileInput(s);return s};t.prototype.createLinkField=function(t,e,n,o,i,r,a,s){var l=this.linkFieldRenderer.render(e,n,o,i,r,a,s);t.find("."+c.DetailsViewConstants.sectionContentClassName).append(l);this.ignoreChangesWhileInputStrategy.addStopEventPropogationWhileInput(l);return l};t.prototype.createImageField=function(t,e,n,o,i,r,a,s){var l=this.imageFieldRenderer.render(e,n,o,i,r,a,s);t.find("."+c.DetailsViewConstants.sectionContentClassName).append(l);this.ignoreChangesWhileInputStrategy.addStopEventPropogationWhileInput(l);return l};t.prototype.createInputColorField=function(t,e,n,o,i,r,a){var s=this.inputColorFieldRenderer.render(e,n,o,i,r,a);t.find("."+c.DetailsViewConstants.sectionContentClassName).append(s);this.ignoreChangesWhileInputStrategy.addStopEventPropogationWhileInput(s);return s};t.prototype.createDropdownList=function(t,e,n,o,i,r){var a=this.dropdownElementRenderer.render(e,n,o,i);if(!s.isNullOrUndefined(r)){this.setHandlerOnDropdownUpdate(a,r)}t.find("."+c.DetailsViewConstants.sectionContentClassName).append(a);return a};t.prototype.createLookupContainer=function(t,e,n,o){var i=this.lookupContainerRenderer.render(e,n,o);t.find("."+c.DetailsViewConstants.sectionContentClassName).append(i);this.ignoreChangesWhileInputStrategy.addStopEventPropogationWhileInput(i);return i};t.prototype.addCustomElement=function(t,e){e.append(t)};t.prototype.dispose=function(){this.linkFieldRenderer.dispose();this.imageFieldRenderer.dispose();this.clearContainer()};t.prototype.setHandlerOnDropdownUpdate=function(t,e){t.find(c.DetailsViewConstants.selectTag).on("change",function(){e(t.find(c.DetailsViewConstants.selectTag));return false})};t.prototype.clearContainer=function(){c.CommonUtils.getById(this.containerId).empty()};return t}();c.DetailsViewControl=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(r){"use strict";var a=MktSvc.Controls.Common.KeyCodes;var t=function(){function t(){}t.prototype.render=function(t,e){var n=$("<div>",{class:t});this.renderSectionHeading(n,e);this.renderSectionContentContainer(n);return n};t.prototype.renderSectionHeading=function(t,e){var n=$("<span>",{class:r.DetailsViewConstants.collapsableIconClassName+" "+r.CommonConstants.editorFontCssClass});n.on("click",function(){t.find("."+r.DetailsViewConstants.sectionContentClassName).toggle();n.toggleClass(r.CommonConstants.collapsedCssClass)});t.append(n);var o=$("<button>").addClass(r.DetailsViewConstants.headingClassName).attr("type",r.CommonConstants.buttonType);o.on("keypress",function(t){if(t.keyCode===a.Enter){n.click()}});var i=$("<p>",{class:r.DetailsViewConstants.headingLabelClassName}).text(e);o.append(i);t.append(o)};t.prototype.renderSectionContentContainer=function(t){t.append($("<div>",{class:r.DetailsViewConstants.sectionContentClassName}))};return t}();r.SectionRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(c){"use strict";var l=MktSvc.Controls.Common.Object;var t=function(){function t(){}t.prototype.render=function(t,e,n,o,i,r,a){var s=$("<div>",{class:c.DetailsViewConstants.inputControlContainerClassName});this.renderInputLabel(s,t,i["id"]);this.renderInputField(s,e,n,o,i,t,a);if(!l.isNullOrUndefined(r)){this.setHandlerOnInputUpdate(s,r)}return s};t.prototype.renderInputLabel=function(t,e,n){var o=$("<label>",{class:c.DetailsViewConstants.inputItemField+" "+c.DetailsViewConstants.propertyNameCssClass}).text(e);t.append(o)};t.prototype.renderInputField=function(t,e,n,o,i,r,a){var s=$("<input type = "+e+" />");if(i.hasOwnProperty("min")){s.attr("aria-valuemin",i.min)}if(i.hasOwnProperty("max")){s.attr("aria-valuemax",i.max)}s.attr(i);s.addClass(c.DetailsViewConstants.inputAttributeClassName+" "+n);s.val(o);if(a){s.attr("aria-label",r+". "+c.CommonUtils.getLocalizedString(a))}else{s.attr("aria-label",""+r)}var l=$("<div>",{class:c.DetailsViewConstants.inputItemField});l.append(s);t.append(l)};t.prototype.setHandlerOnInputUpdate=function(n,o){var t=n.find(c.DetailsViewConstants.inputTag).first();var i=t.val();var e=function(){var t=n.find(c.DetailsViewConstants.inputTag).first();var e=t.val();if(i!==e){i=e;o(t);return false}};t.on("keydown",function(t){if(t.keyCode===$.ui.keyCode.ENTER){e()}}).on("focusout",function(){e()})};return t}();c.InputFieldRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(t){this.eventBroker=t}t.prototype.getName=function(){return"BlockDroppableController"};t.prototype.setupBlocks=function(t){t.on("drop",function(t){t.preventDefault()});this.eventBroker.notify(e.DesignerInternalEventConstants.controllerReady,new e.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupBlocks=function(t){};t.prototype.disposeBlocks=function(t){t.off("drop")};t.prototype.dispose=function(){};return t}();e.BlockDroppableController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.prototype.getContainers=function(t){return t.find(e.CommonUtils.getAttrSelector(e.Contract.containerAttrName))};return t}();e.ContainerProvider=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(l){"use strict";var c=MktSvc.Controls.Common.Object;var r=MktSvc.Controls.Common.String;var t=function(){function t(t){this.mousePositionDifference=5;this.eventBroker=t}t.prototype.getName=function(){return"ContainerDroppableController"};t.prototype.setupContainers=function(e){var n=this;this.frameDocument=l.CommonUtils.getByClass(l.CommonConstants.designerContentEditorFrameClassName).contents();if(c.isNullOrUndefined(this.pageDropHandler)){$(document).on("dragend",this.pageDropHandler=function(){n.restoreEditableContentBlocks(e);n.cleanupUIHints(e)})}if(c.isNullOrUndefined(this.onFrameDocumentDragOver)){this.frameDocument.on("dragover",this.onFrameDocumentDragOver=function(t){if(!n.isDropable($(t.target))){n.cleanupSortableHighlightMarker(e)}})}e.on("dragover",function(t){if(n.isSupportedDragObject){var e=!c.isNullOrUndefined($(t.target).attr("contenteditable"))?$(t.target):$(t.target).closest(l.CommonUtils.getAttrSelector("contenteditable"));if(e.length>0&&c.isNullOrUndefined(e.attr(l.CommonConstants.makeEditableAttrName))&&e.attr("contenteditable")==="true"){e.attr(l.CommonConstants.makeEditableAttrName,r.Empty);l.CommonUtils.setNonEditable(e)}n.addSortableHighlightMarker.apply(n,[t])}});e.on("drop",function(t){n.replaceSortableHighlightMarkerWithElement.apply(n,[t]);n.isSupportedDragObject=false});this.eventBroker.subscribe(l.DesignerInternalEventConstants.designerDragStart,this.onDesignerDragStart=function(){n.isSupportedDragObject=true});this.eventBroker.subscribe(l.DesignerInternalEventConstants.designerDragEnd,this.onDesignerDragEnd=function(){n.isSupportedDragObject=false});this.eventBroker.notify(l.DesignerInternalEventConstants.controllerReady,new l.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupContainers=function(t){this.cleanupEditableDataAttr(t.find(l.CommonUtils.getAttrSelector(l.CommonConstants.makeEditableAttrName)));l.CommonUtils.removeEditable(t);this.cleanupUIHints(t);if(r.isNullOrWhitespace(t.attr("class"))){t.removeAttr("class")}};t.prototype.disposeContainers=function(t){t.off("dragover drop");if(!c.isNullOrUndefined(this.pageDropHandler)){$(document).off("dragend",this.pageDropHandler);this.pageDropHandler=null}if(!c.isNullOrUndefined(this.onFrameDocumentDragOver)){if(!c.isNullOrUndefined(this.frameDocument)){this.frameDocument.off("dragover",this.onFrameDocumentDragOver);this.frameDocument=null}this.onFrameDocumentDragOver=null}this.eventBroker.unsubscribe(l.DesignerInternalEventConstants.designerDragStart,this.onDesignerDragStart);this.eventBroker.unsubscribe(l.DesignerInternalEventConstants.designerDragEnd,this.onDesignerDragEnd)};t.prototype.dispose=function(){this.onFrameDocumentDragOver=null;this.onDesignerDragStart=null;this.onDesignerDragEnd=null;this.pageDropHandler=null;this.lastContainer=null;this.frameDocument=null;this.eventBroker=null};t.prototype.addSortableHighlightMarker=function(t){t.preventDefault();t.stopPropagation();var n=t.originalEvent;if(Math.abs(n.clientY-this.dragYPosition)<this.mousePositionDifference&&Math.abs(n.clientX-this.dragXPosition)<this.mousePositionDifference){return}this.dragYPosition=n.clientY;this.dragXPosition=n.clientX;if(!this.isSupportedDragObject){return}if($(t.target).hasClass(l.CommonConstants.sortablePlaceholderClassName)){return}var e=!c.isNullOrUndefined($(t.target).attr(l.Contract.containerAttrName))?$(t.target):$(t.target).closest(l.CommonUtils.getAttrSelector(l.Contract.containerAttrName));var o=0;var i=e.children(l.CommonUtils.getNotClassSelector(l.CommonConstants.sortablePlaceholderClassName));var r=l.CommonUtils.getByClass(l.CommonConstants.designerContentEditorFrameClassName).contents().scrollTop();var a=false;i.each(function(t,e){o=t;if(n.clientY<$(e).offset().top-r+$(e).height()/2){a=true;return false}});if(this.lastContainer===e&&this.lastIndexAtContainer===o){return}this.lastIndexAtContainer=o;this.lastContainer=e;$(l.CommonUtils.getClassSelector(l.CommonConstants.sortablePlaceholderClassName),e.parentsUntil("body html")).remove();var s=$("<div>+</div>");l.CommonUtils.setEditable(s);s.addClass(l.CommonConstants.sortablePlaceholderClassName);if(a){s.insertBefore(i[o])}else{e.append(s)}};t.prototype.replaceSortableHighlightMarkerWithElement=function(t){t.preventDefault();t.stopPropagation();var e=$(t.target);var n=t.originalEvent.dataTransfer;if(!this.isSupportedDragObject){$(l.CommonUtils.getClassSelector(l.CommonConstants.sortablePlaceholderClassName),e.parentsUntil("body html")).replaceWith(r.Empty);return}var o=$(n.getData("Text"));o.removeAttr("style");o.removeAttr("class");$(l.CommonUtils.getClassSelector(l.CommonConstants.sortablePlaceholderClassName),e.parentsUntil("body html")).replaceWith(o);var i=new l.BlockAddedEventArgs(o);this.eventBroker.notify(l.EventConstants.blockAdded,i)};t.prototype.cleanupSortableHighlightMarker=function(t){$(t).find(l.CommonUtils.getClassSelector(l.CommonConstants.sortablePlaceholderClassName)).remove()};t.prototype.isDropable=function(t){return t.closest(".ui-sortable").length>0};t.prototype.cleanupUIHints=function(t){this.eventBroker.notify(l.DesignerInternalEventConstants.designerDragEnd);this.cleanupSortableHighlightMarker(t)};t.prototype.restoreEditableContentBlocks=function(t){var o=this;var e=t.find(l.CommonUtils.getAttrSelector(l.CommonConstants.makeEditableAttrName));e.each(function(t,e){var n=$(e);l.CommonUtils.setEditable(n);o.cleanupEditableDataAttr(n)})};t.prototype.cleanupEditableDataAttr=function(t){if(!c.isNullOrUndefined(t)){t.removeAttr(l.CommonConstants.makeEditableAttrName)}};return t}();l.ContainerDroppableController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var e=MktSvc.Controls.Common.String;var t=function(){function t(t){this.eventBroker=t}t.prototype.getName=function(){return"ContainerSortableController"};t.prototype.setupContainers=function(t){var n=this;var e="."+i.CommonConstants.sortableDragHandlerClassName;var o="> div";t.sortable({cursor:i.CommonConstants.draggableCursor,cursorAt:{top:5,left:112},connectWith:t,placeholder:i.CommonConstants.sortablePlaceholderClassName,items:o,helper:"clone",handle:e,update:function(){n.eventBroker.notify(i.DesignerInternalEventConstants.designerDragEnd);n.eventBroker.notify(i.DesignerInternalEventConstants.contentChanged)},start:function(t,e){e.helper.width(i.CommonConstants.draggableHelperWidth);e.helper.height(i.CommonConstants.draggableHelperHeight);n.eventBroker.notify(i.DesignerInternalEventConstants.designerDragStart,new i.DesignerDragStartEventArgs(e.item))},stop:function(){return n.eventBroker.notify(i.DesignerInternalEventConstants.designerDragEnd)}});this.eventBroker.notify(i.DesignerInternalEventConstants.controllerReady,new i.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupContainers=function(t){t.removeClass("ui-sortable");if(e.isNullOrWhitespace(t.attr("class"))){t.removeAttr("class")}};t.prototype.disposeContainers=function(t){t.sortable("destroy")};t.prototype.dispose=function(){this.eventBroker=null};return t}();i.ContainerSortableController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var t=function(){function t(t){this.eventBroker=t}t.prototype.getName=function(){return"ContainerDragModeController"};t.prototype.setupContainers=function(t){var e=this;this.designerDragStartDelegate=this.eventBroker.subscribe(n.DesignerInternalEventConstants.designerDragStart,function(){e.setupDragMode(t)});this.designerDragEndDelegate=this.eventBroker.subscribe(n.DesignerInternalEventConstants.designerDragEnd,function(){e.cleanupDragMode(t)});this.eventBroker.notify(n.DesignerInternalEventConstants.controllerReady,new n.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupContainers=function(t){this.cleanupDragMode(t)};t.prototype.disposeContainers=function(t){this.cleanupDragMode(t);this.eventBroker.unsubscribe(n.DesignerInternalEventConstants.designerDragStart,this.designerDragStartDelegate);this.eventBroker.unsubscribe(n.DesignerInternalEventConstants.designerDragEnd,this.designerDragEndDelegate)};t.prototype.dispose=function(){};t.prototype.setupDragMode=function(t){$(t).addClass(n.CommonConstants.designerContentEditorContainerInDragModeClassName)};t.prototype.cleanupDragMode=function(t){n.CommonUtils.removeClass($(t),n.CommonConstants.designerContentEditorContainerInDragModeClassName)};return t}();n.ContainerDragModeController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var r=MktSvc.Controls.Common.Object;var t=function(){function t(t,e){this.eventBroker=t;this.containerProvider=e}t.prototype.getName=function(){return"ContainerAddModeController"};t.prototype.setupContainers=function(t){var e=this;if(r.isNullOrUndefined(this.onDesignerAddStart)){this.eventBroker.subscribe(i.DesignerInternalEventConstants.designerAddStart,this.onDesignerAddStart=function(t){return e.designerAddStart(t.block,t.movingExistingBlock)})}if(r.isNullOrUndefined(this.onDesignerAddEnd)){this.eventBroker.subscribe(i.DesignerInternalEventConstants.designerAddEnd,this.onDesignerAddEnd=function(){return e.cleanup()})}this.eventBroker.notify(i.DesignerInternalEventConstants.controllerReady,new i.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupContainers=function(t){this.cleanup()};t.prototype.disposeContainers=function(t){this.cleanup();if(!r.isNullOrUndefined(this.onDesignerAddStart)){this.eventBroker.unsubscribe(i.DesignerInternalEventConstants.designerAddStart,this.onDesignerAddStart)}if(!r.isNullOrUndefined(this.onDesignerAddEnd)){this.eventBroker.unsubscribe(i.DesignerInternalEventConstants.designerAddEnd,this.onDesignerAddEnd)}if(!r.isNullOrUndefined(this.onDesignerAddCanceled)){this.eventBroker.unsubscribe(i.TabControlEventConstants.tabsStateUpdated,this.onDesignerAddCanceled)}this.onDesignerAddStart=this.onDesignerAddEnd=this.onDesignerAddCanceled=null};t.prototype.dispose=function(){};t.prototype.designerAddStart=function(t,e){var n=this;var o=i.CommonUtils.getByClass(i.CommonConstants.designerContentEditorFrameClassName);if(r.isNullOrUndefined(this.onDesignerAddCanceled)){this.onDesignerAddCanceled=function(){n.addCanceled()};o.contents().on("mousedown",function(t){t.preventDefault();t.stopPropagation();if($(t.target).hasClass(i.CommonConstants.sortableDragHandlerClassName)){n.onDesignerAddCanceled()}});o.contents().on("click",function(t){if(!n.isIgnoredTarget($(t.target))){t.preventDefault();t.stopPropagation();n.onDesignerAddCanceled()}});this.eventBroker.subscribe(i.TabControlEventConstants.tabsStateUpdated,this.onDesignerAddCanceled)}};t.prototype.cleanup=function(){var t=i.CommonUtils.getByClass(i.CommonConstants.designerContentEditorFrameClassName);i.CommonUtils.getByClass(i.CommonConstants.sortablePlaceholderClassName,t.contents()).remove();t.contents().off("mousedown click");if(!r.isNullOrUndefined(this.onDesignerAddCanceled)){this.eventBroker.unsubscribe(i.TabControlEventConstants.tabsStateUpdated,this.onDesignerAddCanceled);this.onDesignerAddCanceled=null}};t.prototype.isIgnoredTarget=function(t){return t.hasClass(i.CommonConstants.selectedSortablePlaceholderClassName)||t.attr("class")&&t.attr("class").indexOf("moveblockbtn")!==-1};t.prototype.addCanceled=function(){this.eventBroker.notify(i.DesignerInternalEventConstants.designerAddEnd)};return t}();i.ContainerAddModeController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t){this.sourceId=t}return t}();t.EventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.block=t;return e}return t}(t.EventArgs);t.BlockAddedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(o){__extends(t,o);function t(t,e){var n=o.call(this,null)||this;n.block=t;n.movingExistingBlock=e;return n}return t}(t.EventArgs);t.DesignerAddStartEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(t.EventArgs);t.BlockCleanupRequestedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.selectionChanged="designer.selectionChanged";t.contentChanged="designer.contentChanged";t.contentRefreshed="designer.contentRefreshed";t.contentBlockChanged="designer.contentBlockChanged";t.blockCleanupRequested="designer.blockCleanupRequested";t.blockLoaded="designer.blockLoaded";t.blockClicked="designer.blockClicked";t.ckEditorInstanceReadyEvent="designer.ckEditorInstanceReady";t.ckEditorFocus="designer.ckEditorFocus";t.designerFrameInitialized="designer.designerInitialized";t.designerFrameDisposed="designer.designerDisposed";t.designerReady="designer.designerReady";t.designerDragStart="designer.dragStart";t.designerDragEnd="designer.dragEnd";t.controllerReady="designer.controllerReady";t.designerAddStart="designer.addStart";t.designerAddEnd="designer.addEnd";t.designerNonEventPropagationStart="designer.nonEventPropagationStart";t.designerNonEventPropagationEnd="designer.nonEventPropagationEnd";t.designerToolbarPositionChanged="designer.toolbarPositionChanged";t.fullPageNonEventPropagationStart="fullPage.nonEventPropagationStart";t.fullPageNonEventPropagationEnd="fullPage.nonEventPropagationEnd";t.stylesViewContentUpdated="stylesViewContentUpdated";return t}();t.DesignerInternalEventConstants=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(t.EventArgs);t.CkEditorInstanceReadyEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(t.EventArgs);t.CkEditorFocusEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var a=MktSvc.Controls.Common.String;var e=function(r){__extends(t,r);function t(t,e,n,o){var i=r.call(this,e)||this;i.html=t;i.originalSourceId=a.isNullUndefinedOrWhitespace(n)?i.sourceId:n;i.component=o;return i}return t}(t.EventArgs);t.ContentChangedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(r){__extends(t,r);function t(t,e,n,o){var i=r.call(this,o)||this;i.imageElement=t;i.attributeName=e.toLowerCase();i.attributeValue=n;return i}return t}(t.EventArgs);t.ImageAttributeChangedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this,null)||this;e.blockId=t;return e}return t}(t.EventArgs);t.ToolbarShownEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(o){__extends(t,o);function t(t,e){var n=o.call(this)||this;n.element=t;n.href=e;return n}return t}(t.EventArgs);t.HrefAttributeChangedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(o){__extends(t,o);function t(t,e){var n=o.call(this)||this;n.viewId=t;n.html=e;return n}return t}(t.EventArgs);t.ControlRenderedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.controllerName=t;return e}return t}(t.EventArgs);t.ControllerReadyEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(o){__extends(t,o);function t(t,e){var n=o.call(this)||this;n.blockDefinition=t;n.blockElement=e;return n}return t}(t.EventArgs);t.SelectionChangedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var e=MktSvc.Controls.Common.Object;var o=MktSvc.Controls.Common.KeyboardCommand;var r=MktSvc.Controls.Common.KeyboardKeyCodes;var a=MktSvc.Controls.Common.KeyboardModifierType;var t=function(i){__extends(t,i);function t(t,e,n){var o=i.call(this,t)||this;o.keyboardCommandManager=n;o.menuBarItems=e;return o}t.prototype.init=function(t){this.eventBroker=t;this.render();this.keyboardCommandManager.registerCommand(new o(r.zeroKey,[a.Alt,a.Control],function(){n.CommonUtils.getByClass(n.CommonConstants.menuBarItemsCssClass).find("button:visible").eq(0).focus()}));this.keyboardCommandManager.registerCommand(new o(r.f11Key,[a.Alt],function(){$(n.CommonUtils.getByClass(n.CommonConstants.maximizeButtonCssClass)).click()}))};t.prototype.activate=function(){if(!this.isActive){i.prototype.activate.call(this)}};t.prototype.render=function(){var e=this;var t=$("<div>").addClass(n.CommonConstants.menuBarDividerCssClass);this.getElement().append(t);this.menuBarContainer=$("<div>").addClass(n.CommonConstants.menuBarItemsCssClass);this.getElement().append(this.menuBarContainer);this.menuBarItems.each(function(t){t.init(e.eventBroker)});this.eventBroker.notify(n.EventConstants.controlRendered,new n.ControlRenderedEventArgs(this.id))};t.prototype.dispose=function(){if(!e.isNullOrUndefined(this.menuBarItems)){this.menuBarItems.each(function(t){t.dispose()})}this.getElement().off();this.getElement().empty();this.keyboardCommandManager=null;this.menuBarContainer=null;this.menuBarItems=null};return t}(n.Control);n.MenuBarView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(t){e.prototype.init.call(this,t);this.render()};t.prototype.activate=function(){};t.prototype.render=function(){var t=this;var e=$("<span>").addClass(n.CommonConstants.undoButtonImageCssClass).addClass(n.CommonConstants.editorFontCssClass);this.undoButtonContainer=$("<button></button>").addClass(n.CommonConstants.toolbarButtonCssClass).addClass(n.CommonConstants.undoButtonCssClass).attr("title",n.CommonUtils.getLocalizedString("[Undo]")).attr("aria-label",n.CommonUtils.getLocalizedString("[Undo]")).attr("type",n.CommonConstants.buttonType).append(e);n.CommonUtils.getByClass(n.CommonConstants.menuBarItemsCssClass).append(this.undoButtonContainer);this.undoButtonContainer.on("click",function(){return t.onClick()})};t.prototype.onClick=function(){this.eventBroker.notify(MktSvcCommon.EventConstants.UndoExecuted)};t.prototype.deactivate=function(){};t.prototype.dispose=function(){this.undoButtonContainer.off("click");this.undoButtonContainer.remove()};return t}(n.Control);n.UndoButton=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(t){e.prototype.init.call(this,t);this.render()};t.prototype.activate=function(){};t.prototype.render=function(){var t=this;var e=$("<span>").addClass(n.CommonConstants.redoButtonImageCssClass).addClass(n.CommonConstants.editorFontCssClass);this.redoButtonContainer=$("<button></button>").addClass(n.CommonConstants.toolbarButtonCssClass).addClass(n.CommonConstants.redoButtonCssClass).attr("title",n.CommonUtils.getLocalizedString("[Redo]")).attr("aria-label",n.CommonUtils.getLocalizedString("[Redo]")).attr("type",n.CommonConstants.buttonType).append(e);n.CommonUtils.getByClass(n.CommonConstants.menuBarItemsCssClass).append(this.redoButtonContainer);this.redoButtonContainer.on("click",function(){return t.onClick()})};t.prototype.onClick=function(){this.eventBroker.notify(MktSvcCommon.EventConstants.RedoExecuted)};t.prototype.deactivate=function(){};t.prototype.dispose=function(){this.redoButtonContainer.off("click");this.redoButtonContainer.remove()};return t}(n.Control);n.RedoButton=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(s){"use strict";var l=MktSvc.Controls.Common.Object;var n=MktSvc.Controls.Common.UniqueId;var i=MktSvc.Controls.Common.KeyCodes;var t=function(r){__extends(a,r);function a(t,e,n,o){var i=r.call(this,t)||this;i.defaultValueText="[Select to add a new block]";i.toolsDropdownButton=e;i.tools=n;i.toolBlockMapping=o;i.renderedTools=[];return i}a.prototype.init=function(t){var e=this;r.prototype.init.call(this,t);this.eventBroker.subscribe(s.DesignerInternalEventConstants.designerAddEnd,this.onDesignerAddEnd=function(){return e.resetDropdown()});this.eventBroker.subscribe(s.TabControlEventConstants.tabsStateUpdated,this.onTabsStateUpdated=function(){return e.tabsStateUpdated()});this.render()};a.prototype.activate=function(){};a.prototype.render=function(){this.toolsDropdownContainer=$("<div>").addClass(s.CommonConstants.toolsDropdownCssClass);this.plusButton=this.createPlusButton();this.toolsList=this.createToolsList();this.toolsDropdownContainer.append(this.plusButton);this.toolsDropdownContainer.append(this.toolsList);this.toolsList.hide();this.setupOnClick();this.setupClosingOnFocusOut();this.setupKeyboardNavigation();s.CommonUtils.getByClass(s.CommonConstants.menuBarItemsCssClass).append(this.toolsDropdownContainer)};a.prototype.setupOnClick=function(){var t=this;this.plusButton.on("click",function(){t.toggleDropdownButton()})};a.prototype.setupClosingOnFocusOut=function(){var e=this;this.toolsList.on("mouseleave",function(t){t.preventDefault();t.stopPropagation();e.closeToolsList();e.plusButton.focus()})};a.prototype.setupKeyboardNavigation=function(){var o=this;this.toolsDropdownContainer.on("keydown",function(t){var e=t.which||t.keyCode;switch(e){case i.Up:if(s.CommonUtils.isVisible(o.toolsList)){t.preventDefault();t.stopPropagation();o.focusPrevListItem()}break;case i.Down:if(s.CommonUtils.isVisible(o.toolsList)){t.preventDefault();t.stopPropagation();o.focusNextListItem()}break;case i.Enter:t.preventDefault();t.stopPropagation();if(!l.isNullOrUndefined(o.currentItem)){var n=o.currentItem.find("button");o.onToolItemChanged(n,o.currentItem,n.attr("data-type"));o.closeToolsList()}else{o.toggleDropdownButton()}break;case i.Esc:o.closeToolsList();o.plusButton.focus();break}})};a.prototype.focusNextListItem=function(){var t;var e=this.toolsList.children("li");var n=this.toolsList.find("."+a.focusedToolsListItemCssClass);if(n.length===0||e.last().hasClass(a.focusedToolsListItemCssClass)){t=e.first()}else{t=n.next()}this.focus(t)};a.prototype.focusPrevListItem=function(){var t;var e=this.toolsList.children("li");var n=this.toolsList.find("."+a.focusedToolsListItemCssClass);if(n.length===0||e.first().hasClass(a.focusedToolsListItemCssClass)){t=e.last()}else{t=n.prev()}this.focus(t)};a.prototype.focus=function(t){if(!l.isNullOrUndefined(this.currentItem)){this.currentItem.removeClass(a.focusedToolsListItemCssClass)}t.addClass(a.focusedToolsListItemCssClass);this.currentItem=t;t.find("button").focus().focusin()};a.prototype.onToolItemChanged=function(t,e,n){var o=parseInt(t.attr("tool-index"));var i=this.getBlock(o,n);if(!l.isNullOrUndefined(i)){this.eventBroker.notify(s.DesignerInternalEventConstants.designerAddStart,new s.DesignerAddStartEventArgs(i))}this.closeToolsList()};a.prototype.toggleDropdownButton=function(){if(this.plusButton.hasClass(s.CommonConstants.selectedToolsDropdownCssClass)){this.closeToolsList()}else{this.plusButton.addClass(s.CommonConstants.selectedToolsDropdownCssClass);this.plusButton.attr(s.AriaAttributeNames.ariaExpanded,"true");this.toolsList.show();this.focusNextListItem()}};a.prototype.closeToolsList=function(){this.plusButton.removeClass(s.CommonConstants.selectedToolsDropdownCssClass);this.plusButton.attr(s.AriaAttributeNames.ariaExpanded,"false");this.toolsList.hide();this.resetDropdown()};a.prototype.getBlock=function(t,e){if(t>=this.renderedTools.length){return null}var n=this.renderedTools[t];if(l.isNullOrUndefined(n)){return null}var o=this.toolBlockMapping.get(e);if(l.isNullOrUndefined(o)){return null}var i=$("<div>").attr(s.Contract.blockTypeAttrName,o.getType());var r=n.getContentTransformation();i.append(r);return i};a.prototype.resetDropdown=function(){if(!l.isNullOrUndefined(this.currentItem)){this.currentItem.removeClass(a.focusedToolsListItemCssClass);this.currentItem=null}};a.prototype.createPlusButton=function(){var e=$("<button>").attr("id",n.generate(this.toolsDropdownButton.getLabel())).attr("type",this.toolsDropdownButton.getType()).attr("aria-label",this.toolsDropdownButton.getTitle()).attr("title",this.toolsDropdownButton.getTitle()).addClass(s.CommonConstants.toolbarButtonCssClass).addClass(this.toolsDropdownButton.getClass());a.plusButtonAccasibilityAttributes.forEach(function(t){e.attr(t[0],t[1])});var t=$("<span>").addClass(this.toolsDropdownButton.getButtonImageClass()).addClass(s.CommonConstants.editorFontCssClass);e.append(t);return e};a.prototype.createToolsList=function(){var i=this;var r=$("<ul>").addClass(a.toolsListCssClass).attr("role","menu").append($("<span>").addClass(a.toolsListTitleCssClass).text(s.CommonUtils.getLocalizedString(this.defaultValueText)));this.renderedTools=[];this.tools.items().forEach(function(t,e){var n=$("<li>").addClass(a.toolsListItemCssClass).attr("role","menuitem");var o=$("<button>").attr("data-type",t.getType()).attr("type",s.CommonConstants.buttonType).attr("title",t.getLabel()).attr("tool-index",e.toString()).addClass(t.getCssClass()).text(t.getLabel()).on("click",function(){i.onToolItemChanged(o,n,t.getType())});n.append(o);r.append(n);i.renderedTools.push(t)});return r};a.prototype.tabsStateUpdated=function(){if(s.CommonUtils.isVisible(s.CommonUtils.getByClass(s.CommonConstants.designerTabContentClassName))){this.toolsDropdownContainer.show()}else{this.toolsDropdownContainer.hide()}};a.prototype.deactivate=function(){};a.prototype.dispose=function(){this.eventBroker.unsubscribe(s.DesignerInternalEventConstants.designerAddEnd,this.onDesignerAddEnd);this.eventBroker.unsubscribe(s.TabControlEventConstants.tabsStateUpdated,this.onTabsStateUpdated);this.toolsDropdownContainer.remove()};a.toolsListCssClass="toolsList";a.toolsListTitleCssClass="toolsListTitle";a.toolsListItemCssClass="toolsListItem";a.focusedToolsListItemCssClass="focusedToolsListItem";a.plusButtonAccasibilityAttributes=[[s.AriaAttributeNames.ariaExpanded,"false"],[s.AriaAttributeNames.hasPopup,"true"]];return a}(s.Control);s.ToolsDropdown=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(G){"use strict";var W=MktSvc.Controls.Common.EventBroker;var Q=MktSvc.Controls.Common.ArrayQuery;var J=MktSvc.Controls.Common.UniqueId;var j=MktSvc.Controls.Common.KeyboardCommandManager;var t=function(){function t(){}t.prototype.create=function(t,e){G.CommonUtils.localizationProvider=e.getLocalizationProvider();var n=new W(e.getLogger());var o=(new G.BlockDefinitionFactory).create(t);var i=new j;var r=new Q(t.getTools());var a=t.getToolBlockMapping();var s=t.getSections?new Q(t.getSections()):null;var l=t.getSectionToolsMapping?t.getSectionToolsMapping():null;var c=new G.AccessibilityInstructionsPopup(e.getLogger());var d=new G.ControlToTabItemConverter(n);var u=new G.FocusManagerFactory;var m=u.create(n,G.EventConstants.onElementFocusedIn,G.EventConstants.onKeypressToFocusPreviousElementCalled);var p=(new G.DesignerContentEditorFactory).create(t,e,n,m,i,o);var f=new G.KeyboardAccessibilityManager;var h=(new G.FullPageContentEditorFactory).create(t,e,n,i);var g=new G.ToolboxView(J.generate("toolboxId"),r,a,f,i,e,s,l);var C=new G.DetailsView(J.generate("detailsViewId"),t.getBlockDetailsViewMapping(),i);var A=(new G.BrowserPreviewFactory).create(J.generate("browserPreviewViewId"),true,i,e);var E=new G.MenuBarView(J.generate("menuBarViewId"),new Q([new G.UndoButton(J.generate("undoButtonId")),new G.RedoButton(J.generate("redoButtonId")),new G.ToolsDropdown(J.generate("toolsDropdownId"),new G.AddToolsDropdownButton,r,a),new G.MaximizeButton(J.generate("maximizeButtonId"))]),i);var v=new G.DetailsViewControlFactory;var b=new G.StylesView(J.generate("stylesViewId"),v.create(),new G.MetadataFieldRendererFactory(t.getBlockDetailsViewMapping(),v.create()),i);var y=(new G.HtmlContentEditorFactory).create(i,e);var T=new G.LayoutRenderer;var k=new G.LayoutConfiguration;k.cssClass=G.CommonConstants.designerTabContentClassName;var I=new G.LayoutConfiguration;I.cssClass=G.CommonConstants.fullPageContentEditorcssClass;var O=new G.LayoutConfiguration;O.cssClass=G.CommonConstants.previewTabControlCssClass;var D=new G.LayoutConfiguration;D.cssClass=G.CommonConstants.editorContainerCssClass;var R=new G.LayoutConfiguration;R.cssClass=G.CommonConstants.menuBarControlCssClass;var _=new G.ComponentLayoutConfiguration;_.cssClass=G.CommonConstants.designerTabButtonViewCssClass;_.id=J.generate("designerTabButtonView");var S=new G.ComponentLayoutConfiguration;S.cssClass=G.CommonConstants.previewTabButtonViewCssClass;S.id=J.generate("previewTabButtonView");var w=new G.ComponentLayoutConfiguration;w.id=E.id;w.cssClass=G.CommonConstants.menuBarCssClass;var K=new G.ComponentLayoutConfiguration;K.id=p.id;K.cssClass=G.CommonConstants.designerControlCssClass;var x=new G.TabControl(J.generate("designerTabView"),new Q([d.convert(g,G.CommonUtils.getLocalizedString("[TOOLBOX]"),G.CommonConstants.toolboxTabContentClassName),d.convert(C,G.CommonUtils.getLocalizedString("[PROPERTIES]"),G.CommonConstants.detailsTabContentClassName),d.convert(b,G.CommonUtils.getLocalizedString("[STYLES]"),G.CommonConstants.stylesTabContentClassName)]),e,_.id,null,false);var N=new G.TabControl(J.generate("previewTabView"),new Q([d.convert(A,G.CommonUtils.getLocalizedString("[BASICPREVIEW]"),G.CommonConstants.browserPreviewTabContentClassName)]),e,S.id);var L=new G.ComponentLayoutConfiguration;L.cssClass=G.CommonConstants.designerTabViewCssClass;L.id=x.id;k.components=new Q([new Q([K,_,L])]);var B=new G.ComponentLayoutConfiguration;B.id=N.id;B.cssClass=G.CommonConstants.previewViewClassName;O.components=new Q([new Q([S]),new Q([B])]);var M=new G.ComposeControl(J.generate("designerContentEditor"),new Q([p,x]),T,k);var P=new G.ComposeControl(J.generate("previewView"),new Q([N]),T,O);R.components=new Q([new Q([w])]);var F=new G.ComposeControl(J.generate("menuBarControl"),new Q([E]),T,R);var U=new G.TabControlItem(G.CommonUtils.getLocalizedString("[DESIGNER]"),M.id,function(){return M.init(n)},function(){return M.activate()},function(){return M.deactivate()},function(){return M.dispose()},G.CommonConstants.designerTabContentClassName);var z=new G.TabControlItem(G.CommonUtils.getLocalizedString("[FULL PAGE]"),h.id,function(){return h.init(n)},function(){return h.activate()},function(){return h.deactivate()},function(){return h.dispose()},G.CommonConstants.fullPageContentEditorcssClass);var H=new G.TabControlVisibilityManager(new MktSvc.Controls.Common.ArrayQuery([new G.DesignerTabItemVisibility(U),new G.FullPageTabItemVisibility(z)]),n);var V=new G.TabControl(J.generate("contentEditorTab"),new Q([U,z,d.convert(y,G.CommonUtils.getLocalizedString("[HTML]"),G.CommonConstants.htmlTabContentClassName),d.convert(P,G.CommonUtils.getLocalizedString("[PREVIEW]"),G.CommonConstants.previewViewClassName)]),e,E.id,H);var $=new G.ComponentLayoutConfiguration;$.id=V.id;$.cssClass=G.CommonConstants.contentEditorCssClass;D.components=new Q([new Q([w]),new Q([$])]);var q=new G.DocumentContentModel(e,new G.MetadataParser(e),n,new Q([new G.SetOrphanBlockContainerWrapContentModelProcessor,new G.SetContainerIdContentModelProcessor,new G.SetBlockIdContentModelProcessor,new G.TableDecoratorContentModelProcessor,new G.AddTextBreakContentModelProcessor]),new Q([new G.RemoveContainerIdContentModelProcessor,new G.RemoveBlockIdContentModelProcessor]));return new G.EditorControl(e,T,D,new Q([V,F]),n,q,i,new G.UndoRedoManager,c)};return t}();G.EditorControlFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.prototype.create=function(t){return new e.BasicPlugin(t)};return t}();e.BasicPluginFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(l){"use strict";var c=MktSvc.Controls.Common.LoadingModal;var t=function(){function t(){}t.prototype.create=function(t,e,n,o,i,r,a){l.CommonUtils.localizationProvider=o.getLocalizationProvider();var s=new c;if(r){return new l.OfflineBrowserPreviewView(t,o)}return new l.BrowserPreviewView(t,e,s,n,o,null,i,a)};return t}();l.BrowserPreviewFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(l){"use strict";var t=function(){function t(){}t.prototype.create=function(){var t=new l.SectionRenderer;var e=new l.InputFieldRenderer;var n=new l.LookupContainerRenderer;var o=new l.InputColorFieldRenderer(e);var i=new l.DropdownListRenderer;var r=new l.LinkFieldRenderer(e);var a=new l.InputImageFieldRenderer(e);var s=new l.IgnoreChangesWhileInputStrategy;return new l.DetailsViewControl(t,e,o,n,i,r,a,s)};return t}();l.DetailsViewControlFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(c){"use strict";var n=MktSvc.Controls.Common.DelayScheduler;var r=MktSvc.Controls.Common.Object;var d=MktSvc.Controls.Common.String;var o=MktSvc.Controls.Common.KeyboardCommand;var a=MktSvc.Controls.Common.KeyboardKeyCodes;var i=MktSvc.Controls.Common.KeyboardModifierType;var t=function(l){__extends(t,l);function t(t,e,n,o,i,r,a){if(r===void 0){r=c.EventConstants.contentModelUpdated}if(a===void 0){a=null}var s=l.call(this,t)||this;s.html=d.Empty;s.monacoVsPath="Monaco/vs";s.iframe=null;s.defaultTheme="vs";s.highContrastTheme="hc-black";s.placeholderKeyCode=229;s.contentChangedDelay=2e3;s.onContentModelUpdated=function(t){var e=t.html;if(s.html!==e&&t.originalSourceId!==s.id&&t.sourceId!==s.id){s.setContent(e)}};s.onEditorVisibilityChanged=function(){s.resizeEditor()};s.onMaximizeExecuted=function(){$(window).one("animationstart",s.onAnimationStart);$(window).one("animationend",s.onAnimationEnd);s.resizeTimer.schedule()};s.onAnimationStart=function(t){if($(t.target).find("#"+s.id).length){s.resizeTimer.stop(true)}};s.onAnimationEnd=function(t){if($(t.target).find("#"+s.id).length){s.resizeTimer.stop(true);s.resizeEditor()}};s.keyboardCommandManager=o;s.executionContext=i;s.cdnBasePath=s.executionContext.getLibsPath();s.localeProvider=n;s.loadingModal=e;s.htmlChangedEventName=r;s.settings=a;return s}t.prototype.init=function(t){var e=this;this.eventBroker=t;this.eventBroker.subscribe(this.htmlChangedEventName,this.onContentModelUpdated);this.eventBroker.subscribe(c.EventConstants.editorVisibilityChanged,this.onEditorVisibilityChanged);this.eventBroker.subscribe(c.EventConstants.maximizeExecuted,this.onMaximizeExecuted);this.changeTimer=new n(this.eventBroker);this.changeTimer.init(function(){var t=r.isNullOrUndefined(e.editor)?d.Empty:e.editor.getValue();if(e.html!==t){e.html=t;e.broadcastContentChanged()}},this.contentChangedDelay);this.resizeTimer=new n(this.eventBroker);this.resizeTimer.init(function(){$(window).off("animationstart",e.onAnimationStart);$(window).off("animationend",e.onAnimationEnd);e.resizeEditor()});this.keyboardCommandManager.registerCommand(new o(a.twoKey,[i.Alt],function(){$(c.CommonUtils.getClassSelector(c.CommonConstants.tabButtonPreClassName+c.CommonConstants.htmlTabContentClassName)).focus().click()}))};t.prototype.activate=function(){l.prototype.activate.call(this);this.render();c.AccessibilityInstructionsPopup.accessibilityInstructions=c.EditorAccessibilityInstructions.baseControlAccessibilityInstructions};t.prototype.setContent=function(t){this.html=t;this.cancelPendingOperations();if(!this.isActive){return}this.render()};t.prototype.getContent=function(){return this.html};t.prototype.render=function(){var t=this;if(r.isNullOrUndefined(this.editor)&&!this.monacoEditorIsLoading){var e=this.getElement();e.empty();this.iframe=this.createIFrameForEditor(e);this.monacoEditorIsLoading=true;this.loadingModal.init(e,this.eventBroker);this.loadingModal.show();if(!r.isNullOrUndefined(this.cdnBasePath)){var n=c.CommonUtils.createScriptElementFromUrl("html-editor-dependency-monaco",d.Format("{0}/{1}/{2}",this.cdnBasePath,this.monacoVsPath,"loader.js"),this.iframe.contentDocument);n.onload=function(){t.executionContext.tryExecute(function(){t.iframe.contentWindow.require.config({paths:{vs:d.Format("{0}/{1}",t.cdnBasePath,t.monacoVsPath)},"vs/nls":{availableLanguages:{"*":t.localeProvider.getLanguageCode()}}});t.createMonaco()},"Render the Html editor",true)};this.iframe.contentDocument.head.appendChild(n);this.keyboardCommandManager.registerCommandsInIframe(this.iframe)}this.eventBroker.notify(c.EventConstants.controlRendered,new c.ControlRenderedEventArgs(this.id))}else if(!r.isNullOrUndefined(this.editor)){this.editor.setValue(this.html);this.resizeEditor();this.eventBroker.notify(c.EventConstants.controlRendered,new c.ControlRenderedEventArgs(this.id));this.eventBroker.notify(c.HtmlContentEditorInternalEventConstants.monacoEditorValueSet,new c.ControlRenderedEventArgs(this.id))}};t.prototype.createMonaco=function(){var i=this;var t=this.getEditorDimensions(this.iframe);var e=$("<div />");e.attr("style","width: 100%; height: 100%; min-height: "+t.height+"px; overflow: hidden;");this.iframe.contentWindow.document.body.appendChild(e[0]);this.iframe.contentWindow.require(["vs/editor/editor.main"],function(){i.executionContext.tryExecute(function(){i.editor=i.iframe.contentWindow.monaco.editor.create(e[0],i.getMonacoSettings());i.editor.layout(t);i.editor.onDidChangeModelContent(function(){i.changeTimer.schedule()});i.monacoEditorIsLoading=false;i.loadingModal.hide();$(i.iframe.contentWindow.document).on("keyup",function(t){if(t.keyCode===i.placeholderKeyCode||t.which===i.placeholderKeyCode){var o=t.target.value;$(t.target).one("input",function(t){var e=t.target.value;if(!r.isNullOrUndefined(o)&&!r.isNullOrUndefined(e)&&e.length<o.length){var n=i.iframe.contentWindow.document.createEvent("Event");n.initEvent("keydown",true,true);n["keyCode"]=n["keyChar"]=n["which"]=a.backspaceKey;t.target.dispatchEvent(n)}})}});if(c.CommonUtils.isFirefox()){$(i.iframe.contentWindow.document).on("click",function(){var t=$(document.activeElement);if(!t.is($(i.iframe))){t.blur();$(i.iframe).focus()}})}i.eventBroker.notify(c.HtmlContentEditorInternalEventConstants.monacoEditorCreated,new c.MonacoEditorCreatedEventArgs(i.editor))},"Create the Monaco editor",true)})};t.prototype.createIFrameForEditor=function(t){var e=document.createElement("iframe");var n=$(e);n.addClass(c.CommonConstants.htmlContentEditorFrame).addClass(c.CommonConstants.layoutFrameClassName);t.append(e);var o=e.contentDocument;o.open();o.write("<!DOCTYPE html>");o.write('<html lang="'+this.executionContext.getLocalizationProvider().getLanguageName()+'">');o.write("<head></head>");o.write('<body style="margin-top: 0; margin-bottom: 0; overflow: hidden;"></body>');o.close();return e};t.prototype.resizeEditor=function(){if(!r.isNullOrUndefined(this.editor)&&!r.isNullOrUndefined(this.iframe)&&c.CommonUtils.isVisible($(this.iframe))){this.editor.layout(this.getEditorDimensions(this.iframe))}};t.prototype.getEditorDimensions=function(t){var e=20;return{width:$(t).parent().width()-e,height:$(t).parent().height()-e}};t.prototype.broadcastContentChanged=function(){var t=new c.ContentChangedEventArgs(this.html,this.id,null,c.CommonConstants.htmlEditorComponentName);this.eventBroker.notify(c.EventConstants.contentChanged,t)};t.prototype.getMonacoSettings=function(){var t={value:this.html,language:"html",wrappingColumn:0,scrollBeyondLastLine:false,theme:c.CommonUtils.isHighContrastModeEnabled()?this.highContrastTheme:this.defaultTheme,minimap:{enabled:false}};if(!r.isNullOrUndefined(this.settings)){for(var e in this.settings){t[e]=this.settings[e]}}return t};t.prototype.dispose=function(){var t=this;this.executionContext.tryExecute(function(){t.cancelPendingOperations();if(t.editor){t.loadingModal.dispose();t.loadingModal=null;t.editor.dispose();t.editor=null}t.getElement().empty();t.monacoEditorIsLoading=false;if(t.changeTimer){t.changeTimer.dispose();t.changeTimer=null}if(t.resizeTimer){t.resizeTimer.dispose();t.resizeTimer=null}t.keyboardCommandManager.unregisterCommandsInIframe(t.iframe);$(t.iframe).remove();t.iframe=null;t.keyboardCommandManager=null;t.eventBroker.unsubscribe(c.EventConstants.maximizeExecuted,t.onMaximizeExecuted);t.eventBroker.unsubscribe(c.EventConstants.editorVisibilityChanged,t.onEditorVisibilityChanged);t.eventBroker.unsubscribe(c.EventConstants.contentModelInitialized,t.onContentModelUpdated);t.eventBroker=null},"Dispose the Html editor")};t.prototype.cancelPendingOperations=function(){if(!r.isNullOrUndefined(this.changeTimer)){this.changeTimer.stop(true)}if(!r.isNullOrUndefined(this.resizeTimer)){this.resizeTimer.stop(true)}};return t}(c.Control);c.HtmlContentEditor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var t=function(n){__extends(t,n);function t(t){var e=n.call(this,t)||this;e.htmlEditorErrorMessage="HTML mode not supported.";e.id=t;return e}t.prototype.init=function(){};t.prototype.activate=function(){n.prototype.activate.call(this);this.render();o.AccessibilityInstructionsPopup.accessibilityInstructions=o.EditorAccessibilityInstructions.baseControlAccessibilityInstructions};t.prototype.dispose=function(){this.getElement().empty()};t.prototype.render=function(){if(this.isActive){var t=this.getElement().empty();var e=$("<p>").text(o.CommonUtils.getLocalizedString(this.htmlEditorErrorMessage)).addClass(o.CommonConstants.htmlEditorNotSupportedMessageClassName);t.append(e)}};return t}(o.Control);o.HtmlNotSupportedView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.prototype.getName=function(){return"BasicTextInlineToolbar"};t.prototype.getConfig=function(){return[["Cut","Copy","Paste","PasteFromWord","PasteText"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Find","Replace"],["SelectAll"],["BidiLtr","BidiRtl"],["Link","Unlink","Anchor"],["NumberedList","BulletedList"],["HorizontalRule"],"/",["Bold","Italic","Underline","Strike","Subscript","Superscript"],["RemoveFormat"],["Styles","Font","FontSize"],["TextColor","BGColor"],["SpecialChar"],["moveBlockBtn","cloneBlockBtn","deleteBlockBtn"]]};return t}();t.BasicTextInlineToolbar=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.prototype.getName=function(){return"BasicButtonInlineToolbar"};t.prototype.getConfig=function(){return[["Font","Styles","FontSize"],["TextColor","BGColor"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["BidiLtr","BidiRtl"],["moveBlockBtn","cloneBlockBtn","deleteBlockBtn"]]};return t}();t.BasicButtonInlineToolbar=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.prototype.getName=function(){return"BasicImageToolbar"};t.prototype.getConfig=function(){return[["imgGalleryBtn"],["moveBlockBtn","cloneBlockBtn","deleteBlockBtn"]]};return t}();t.BasicImageInlineToolbar=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.prototype.getName=function(){return"BasicDividerToolbar"};t.prototype.getConfig=function(){return[["dividerHeightCombo"],["dividerAlignLeftBtn","dividerAlignCenterBtn","dividerAlignRightBtn"],["dividerBorderStyleCombo"],["moveBlockBtn","cloneBlockBtn","deleteBlockBtn"]]};return t}();t.BasicDividerInlineToolbar=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var n=MktSvc.Controls.Common.Object;var r=MktSvc.Controls.Common.String;var t=function(){function t(t){this.inlineToolbar=new i.BasicImageInlineToolbar;if(n.isNullOrUndefined(t)){t=new i.ImagePlaceholderHelper}this.imagePlaceholderHelper=t}t.prototype.getType=function(){return t.type};t.prototype.usePlainText=function(){return false};t.prototype.isEditable=function(){return false};t.prototype.getInlineToolbar=function(){return this.inlineToolbar};t.prototype.setup=function(t){var e=this;this.eventBroker=t;if(n.isNullOrUndefined(this.onImageSourceChanged)){this.eventBroker.subscribe(i.EventConstants.imageAttributeChanged,this.onImageSourceChanged=function(t){return e.updateImageSource(t)})}};t.prototype.dispose=function(){if(!n.isNullOrUndefined(this.eventBroker)){this.eventBroker.unsubscribe(i.EventConstants.imageAttributeChanged,this.onImageSourceChanged);this.onImageSourceChanged=null}};t.prototype.isConfigured=function(t){return this.imagePlaceholderHelper.isImageConfigured(this.getSource(t))};t.prototype.decorate=function(t){if(t.attr(i.Contract.blockTypeAttrName)===this.getType()){var e=this.getImage(t);this.decorateDataSrcAttribute(e);this.decorateBlockOverlay(e);this.setAriaLabel(t)}};t.prototype.setFinalContent=function(t){if(this.imagePlaceholderHelper.isPlaceholderNeeded(this.getSource(t))){i.CommonUtils.removeBlockOverlay(t)}this.getImage(t).removeAttr(i.CommonConstants.designerImageSourceAttributeName);t.removeAttr("aria-label")};t.prototype.updateImageSource=function(t){if(t.attributeName===i.CommonConstants.designerImageSourceAttributeName){t.imageElement.attr("src",t.attributeValue);this.decorateDataSrcAttribute(t.imageElement);this.decorateBlockOverlay(t.imageElement);this.setAriaLabel(t.imageElement.closest("["+i.Contract.blockTypeAttrName+"]"))}};t.prototype.setAriaLabel=function(t){var e="["+(!this.isConfigured(t)?"Unconfigured ":r.Empty)+t.attr(i.Contract.blockTypeAttrName)+" block]";var n=i.CommonUtils.getLocalizedString(e);var o=i.BlockProvider.getEditableElement(t);i.CommonUtils.setAriaAttribute(t,"aria-label",n);i.CommonUtils.setAriaAttribute(o,"aria-label",n);i.CommonUtils.setAriaAttribute(o,"title",n)};t.prototype.decorateDataSrcAttribute=function(t){t.attr(i.CommonConstants.designerImageSourceAttributeName,t.attr("src"))};t.prototype.getImage=function(t){return t.find("img").not("."+i.CommonConstants.unconfiguredOverlayIconCssClassName)};t.prototype.getBlock=function(t){return(new i.BlockProvider).getClosestBlock(t)};t.prototype.getSource=function(t){return this.getImage(t).attr("src")};t.prototype.decorateBlockOverlay=function(t){var e=this.getBlock(t);var n=t.parent();i.CommonUtils.removeBlockOverlay(e);if(this.imagePlaceholderHelper.isPlaceholderNeeded(this.getSource(e))){i.CommonUtils.overlayBlockElement(n,t,this.imagePlaceholderHelper.getImagePlaceholder(this.getSource(e)))}};t.type="Image";return t}();i.ImageBlock=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var n=MktSvc.Controls.Common.Object;var t=function(){function t(t,e){if(n.isNullOrUndefined(t)){t=new i.BasicTextInlineToolbar}this.inlineToolbar=t;if(n.isNullOrUndefined(e)){e=new i.ImagePlaceholderHelper}this.imagePlaceholderHelper=e}t.prototype.getType=function(){return t.type};t.prototype.usePlainText=function(){return false};t.prototype.isEditable=function(){return true};t.prototype.getInlineToolbar=function(){return this.inlineToolbar};t.prototype.setup=function(t){var e=this;this.eventBroker=t;if(n.isNullOrUndefined(this.onImageSourceChanged)){this.eventBroker.subscribe(i.EventConstants.imageAttributeChanged,this.onImageSourceChanged=function(t){return e.updateImageSource(t)})}if(n.isNullOrUndefined(this.onSelectionChanged)){this.eventBroker.subscribe(i.DesignerInternalEventConstants.selectionChanged,this.onSelectionChanged=function(t){return e.updateAriaLabels(t)})}};t.prototype.dispose=function(){if(!n.isNullOrUndefined(this.eventBroker)){this.eventBroker.unsubscribe(i.EventConstants.imageAttributeChanged,this.onImageSourceChanged);this.onImageSourceChanged=null;this.eventBroker.unsubscribe(i.DesignerInternalEventConstants.selectionChanged,this.onSelectionChanged);this.onSelectionChanged=null}};t.prototype.isConfigured=function(t){return i.CommonUtils.getByClass(i.CommonConstants.designerUnconfiguredContentOverlayCssClassName,t).length===0};t.prototype.decorate=function(t){var o=this;var e=i.CommonUtils.getLocalizedString("["+t.attr(i.Contract.blockTypeAttrName)+" block]");i.CommonUtils.setAriaAttribute(t,"aria-label",e);t.find("img").each(function(t,e){var n=$(e);n.attr(i.CommonConstants.designerImageSourceAttributeName,n.attr("src"));o.decorateImageOverlay(n,n.attr("src"))})};t.prototype.updateAriaLabels=function(t){if(t.blockDefinition.getType()===this.getType()){var e=i.BlockProvider.getEditableElement(t.blockElement);e.attr("aria-label",t.blockElement.attr("aria-label")+" "+t.blockElement.find("p").text().substr(0,50))}};t.prototype.updateImageSource=function(t){if(t.attributeName===i.CommonConstants.designerTextBlockImageSourceAttributeName){t.imageElement.attr(i.CommonConstants.designerImageSourceAttributeName,t.attributeValue);this.decorateImageOverlay(t.imageElement,t.attributeValue)}};t.prototype.decorateImageOverlay=function(t,e){if(this.imagePlaceholderHelper.isPlaceholderNeeded(e)){i.CommonUtils.overlayImageElement(t,this.imagePlaceholderHelper.getImagePlaceholder(e))}else{i.CommonUtils.removeImageOverlay(t)}};t.prototype.setFinalContent=function(t){var e=t.find("img");if(!this.isConfigured(t)){var n=e.filter(i.CommonUtils.getClassSelector(i.CommonConstants.designerUnconfiguredContentOverlayCssClassName));n.each(function(t,e){var n=$(e);i.CommonUtils.removeImageOverlay(n)})}e.removeAttr(i.CommonConstants.designerImageSourceAttributeName);t.removeAttr("aria-label")};t.type="Text";return t}();i.TextBlock=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var r=MktSvc.Controls.Common.Object;var a=MktSvc.Controls.Common.String;var t=function(){function t(){this.inlineToolbar=new i.BasicButtonInlineToolbar}t.prototype.getType=function(){return"Button"};t.prototype.usePlainText=function(){return true};t.prototype.isEditable=function(){return true};t.prototype.getInlineToolbar=function(){return this.inlineToolbar};t.prototype.setup=function(t){var e=this;this.eventBroker=t;if(r.isNullOrUndefined(this.onTargetLinkUpdated)){this.eventBroker.subscribe(this.getType()+"_"+i.EventConstants.hrefAttributeChanged,this.onTargetLinkUpdated=function(t){return e.buttonHrefChanged(t)})}};t.prototype.dispose=function(){if(!r.isNullOrUndefined(this.onTargetLinkUpdated)){this.eventBroker.unsubscribe(this.getType()+"_"+i.EventConstants.hrefAttributeChanged,this.onTargetLinkUpdated);this.onTargetLinkUpdated=null}};t.prototype.decorate=function(t){this.decorateBlockOverlay(t);this.setAriaLabel(t)};t.prototype.decorateBlockOverlay=function(t){var e=this.getLinkElement(t);var n=e.parent();i.CommonUtils.removeBlockOverlay(t);if(!this.isConfigured(t)){i.CommonUtils.overlayBlockElement(n,e,i.CommonUtils.getButtonBlockPlaceholder());t.find("."+i.CommonConstants.designerUnconfiguredContentOverlayCssClassName).attr(i.DetailsViewConstants.alignAttribute,this.getButtonAlignment(t))}};t.prototype.setAriaLabel=function(t){var e="["+(!this.isConfigured(t)?"Unconfigured ":a.Empty)+t.attr(i.Contract.blockTypeAttrName)+" block]";var n=i.CommonUtils.getLocalizedString(e);var o=i.BlockProvider.getEditableElement(t);i.CommonUtils.setAriaAttribute(t,"aria-label",n);i.CommonUtils.setAriaAttribute(o,"aria-label",n);i.CommonUtils.setAriaAttribute(o,"title",n)};t.prototype.isConfigured=function(t){var e=this.getTargetLink(t);return!a.isNullUndefinedOrWhitespace(e)&&e!=="#"};t.prototype.setFinalContent=function(t){i.CommonUtils.removeBlockOverlay(t);t.removeAttr("aria-label")};t.prototype.buttonHrefChanged=function(t){this.decorate(this.getBlock(t.element));this.setAriaLabel(t.element.closest("["+i.Contract.blockTypeAttrName+"]"))};t.prototype.getTargetLink=function(t){return this.getLinkElement(t).attr("href")};t.prototype.getLinkElement=function(t){return t.find("a")};t.prototype.getBlock=function(t){return(new i.BlockProvider).getClosestBlock(t)};t.prototype.getButtonAlignment=function(t){var e=t.find("a").get(0);if(!r.isNullOrUndefined(e)){var n=e.style.marginLeft;var o=e.style.marginRight;if(n==="0px"&&o==="auto"){return"Left"}if(n==="auto"&&o==="0px"){return"Right"}if(n==="auto"&&o==="auto"){return"Center"}}return null};return t}();i.ButtonBlock=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var t=function(){function t(){this.inlineToolbar=new n.BasicDividerInlineToolbar}t.prototype.getType=function(){return"Divider"};t.prototype.usePlainText=function(){return false};t.prototype.isEditable=function(){return false};t.prototype.getInlineToolbar=function(){return this.inlineToolbar};t.prototype.setup=function(t){this.eventBroker=t};t.prototype.dispose=function(){};t.prototype.isConfigured=function(t){return true};t.prototype.decorate=function(t){var e=n.CommonUtils.getLocalizedString("["+t.attr(n.Contract.blockTypeAttrName)+" block]");n.CommonUtils.setAriaAttribute(t,"aria-label",e)};t.prototype.setFinalContent=function(t){t.removeAttr("aria-label")};return t}();n.DividerBlock=t})(Editor||(Editor={}));var Editor;(function(c){"use strict";var d=MktSvc.Controls.Common.Object;var t=function(){function t(t,e,n,o,i,r){this.align=t;this.commandName=e;this.groupButtonsNames=n;this.buttonName=o;this.defaultButton=i;this.defaultAlign=r}t.prototype.getName=function(){return this.commandName};t.prototype.enabledOnReadOnly=function(){return true};t.prototype.setup=function(t){this.eventBroker=t};t.prototype.exec=function(t,e,n){if(d.isNullOrUndefined(t)){return false}if(d.isNullOrUndefined(this.eventBroker)){return false}var o=this.align;var i=new c.InlineToolbar(t.children().attr("id"));var r=[];this.groupButtonsNames.forEach(function(t){r.push(i.getButton(t))});var a=i.getButton(this.buttonName);if(a.isSelected()&&o!==this.defaultAlign){o=this.defaultAlign;a=i.getButton(this.defaultButton)}r.forEach(function(t){t.turnOff()});var s=t.find("p");var l=t.find(".dividerWrapper");s.css("margin-left","auto");s.css("margin-right","auto");a.turnOn();l.attr("align",o);if(o!=="center"){s.css("margin-"+o,"0")}this.eventBroker.notify(c.DesignerInternalEventConstants.contentChanged);return true};t.prototype.dispose=function(){};t.prototype.cleanup=function(t){};return t}();c.DividerAlignCommand=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.blockTypeAttrName="data-editorBlockType";t.containerAttrName="data-container";t.dataIdAttrName="data-id";t.styleMetadataTypeAttr="xrm/designer/setting";t.metadataNameAttr="name";t.metadataDatatypeAttr="datatype";t.metadataLabelAttr="label";t.metadataValueAttr="value";t.metadataGroupAttr="group";t.styleMetadataGroupType="style";t.metadataFormatAttr="format";t.styleMetadataColorDataType="color";t.styleMetadataPictureDataType="picture";t.styleMetadataNumberDataType="number";t.styleMetadataFontDataType="font";t.styleMetadataTestDataType="text";t.metadataDocumentVersionName="version";t.metadataDocumentTypeName="type";t.metadataDocumentTypeDesignerValue="marketing-designer-content-editor-document";return t}();t.Contract=e})(Editor||(Editor={}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */var Editor;(function(t){"use strict";var e=function(){function t(){}t.contentModelInitialized="contentModelInitialized";t.contentModelUpdated="contentModelUpdated";t.contentChanged="contentChanged";t.contentResolved="contentResolved";t.contentFinalized="contentFinalized";t.controlRendered="controlRendered";t.browserPreviewReady="browserPreviewReady";t.blockAdded="blockAdded";t.blockMoved="blockMoved";t.blockDeleted="blockDeleted";t.imageAttributeChanged="imageAttributeChanged";t.imageInputChanged="imageInputChanged";t.hrefAttributeChanged="hrefAttributeChanged";t.imageGalleryCommandExecuted="imageGalleryCommandExecuted";t.toolbarShown="toolbarShown";t.maximizeExecuted="maximizeExecuted";t.previewSizeChanged="previewSizeChanged";t.exitFullScreenButtonClicked="exitFullScreenButtonClicked";t.fullPageEditorContentChanged="fullPageEditorContentChanged";t.standardCkEditorInitialized="standardCkEditorInitialized";t.sectionToolsPublishStarted="sectionToolsPublishStarted";t.sectionToolsPublishCompleted="sectionToolsPublishCompleted";t.toolPublished="toolPublished";t.fullPageEditorRendered="fullPageEditorRendered";t.basicPreviewModeSwitched="basicPreviewModeSwitched";t.onElementFocusedIn="onElementFocusedIn";t.onKeypressToFocusPreviousElementCalled="onKeypressToFocusPreviousElementCalled";t.onToolboxAccessibleContainerRendered="onToolboxAccessibleContainerRendered";t.onToolboxAccessibleItemRendered="onToolboxAccessibleItemRendered";t.onPreviewAccessibleContainerRendered="onPreviewAccessibleContainerRendered";t.onPreviewAccessibleItemRendered="onPreviewAccessibleItemRendered";t.editorVisibilityChanged="editorVisibilityChanged";t.contentRefreshed="contentRefreshed";t.contentModelProcessCompleted="contentModelProcessCompleted";t.litmusStatusChanged="litmusStatusChanged";t.litmusUnavailable="litmusUnavailable";t.litmusTrialOrg="litmusTrialOrg";t.litmusDisabled="litmusDisabled";t.imagePopupRendered="imagePopupRendered";return t}();t.EventConstants=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(m){"use strict";var p=MktSvc.Controls.Common.Object;var r=MktSvc.Controls.Common.String;var a=MktSvc.Controls.Common.UniqueId;var s=MktSvc.Controls.Common.KeyCodes;var t=function(){function u(t,e,n,o){this.ckEditorBasePath="ckeditor";this.ckEditorScriptId="designer-dependency-ckeditor";this.cdnBasePath=t.getLibsPath();this.localeProvider=e;this.fontsProvider=n;this.executionContext=t;this.customCkEditorConfiguration=o}u.prototype.init=function(a,s,l){var c=this;this.ckEditorInitialization=$.Deferred();a.contentWindow.CKEDITOR_GETURL=function(t){if(t.indexOf(":/")===-1&&t.indexOf("/")!==0){t=c.cdnBasePath+"/"+c.ckEditorBasePath+"/"+t}if(t.indexOf("?t=")!==-1){t=t.substring(0,t.indexOf("?t="))}return t};var d=m.CommonUtils.createScriptElementFromUrl(this.ckEditorScriptId,r.Format("{0}/{1}/{2}",this.cdnBasePath,this.ckEditorBasePath,"ckeditor.js"),a.contentDocument);d.onload=function(){c.executionContext.tryExecute(function(){c.contentWindow=a.contentWindow;var t=c.getCkEditor();if(t){window.CKEDITOR=t;CKEDITOR.disableAutoInline=true;CKEDITOR.config.fillEmptyBlocks=false;CKEDITOR.config.basicEntities=true;CKEDITOR.config.language=c.localeProvider.getLanguageCode();CKEDITOR.config.removePlugins=u.removePlugins;CKEDITOR.config.extraPlugins=u.extraPlugins;CKEDITOR.config.title=false;CKEDITOR.config.keystrokes=[];var e=CKEDITOR.config.font_names.split(";");e=e.concat(u.extraFonts).sort();CKEDITOR.config.font_names=e.join(";");if(p.isNullOrUndefined(CKEDITOR.stylesSet.get(u.styleSetName))){CKEDITOR.stylesSet.add(u.styleSetName,(new m.CkEditorContentStyleSetFactory).createStyleSet())}CKEDITOR.config.stylesSet=u.styleSetName;$(a).contents().find("head").append(c.getCustomCkEditorSkinStylesElement());if(!p.isNullOrUndefined(l)){var n=c.fontsProvider.getAdditionalFontsString(l.getStyleMetaEntries()).items().join(";").trim();if(n){CKEDITOR.config.font_names=n+";"+CKEDITOR.config.font_names}}if(c.customCkEditorConfiguration){var o=c.customCkEditorConfiguration.ckeditorSettings;if(o){for(var i in o){if(o.hasOwnProperty(i)){CKEDITOR[i]=o[i]}}}var r=c.customCkEditorConfiguration.globalConfiguration;if(r){for(var i in r){if(r.hasOwnProperty(i)){CKEDITOR.config[i]=r[i]}}}}c.registerAccessibilityFixes($(a));d.onload=null;d=null;c.ckEditorInitialization.resolve();s()}},"Configure the static ckeditor",true)};a.contentDocument.head.appendChild(d)};u.prototype.getCkEditorInitializedPromise=function(){return this.ckEditorInitialization?this.ckEditorInitialization.promise():(this.ckEditorInitialization=$.Deferred()).promise()};u.prototype.cleanup=function(t){var i=this;m.CommonUtils.getBySelector(m.CommonUtils.getAttrSelector(m.CkEditorConstants.ckEditorSharedResourceAttribute),t).remove();m.CommonUtils.getBySelector(m.CommonUtils.getAttrSelector("data-cke-temp"),t).remove();m.CommonUtils.getBySelector(m.CommonUtils.getAttrSelector('class^="cke"'),t).remove();m.CommonUtils.getBySelector("script",t).each(function(t,e){var n=$(e);var o=n.attr("src");if(o&&o.indexOf(i.ckEditorBasePath)>=0){n.remove()}});m.CommonUtils.getBySelector("link",t).each(function(t,e){var n=$(e);var o=n.attr("href");if(o&&o.indexOf(i.ckEditorBasePath)>=0){n.remove()}});m.CommonUtils.getBySelector("style",t).each(function(t,e){var n=$(e);if(n.html().indexOf(".cke")>=0){n.remove()}})};u.prototype.dispose=function(){if(!p.isNullOrUndefined(this.contentWindow)){m.CommonUtils.getById("designer-dependency-ckeditor",$(this.contentWindow.document)).remove();this.contentWindow=null}if(!p.isNullOrUndefined(this.pluginAdapter)){this.pluginAdapter.dispose();this.pluginAdapter=null}if(!p.isNullOrUndefined(this.ckEditorInitialization)){this.ckEditorInitialization.reject()}};u.prototype.destroyEditor=function(e){var n=this;this.executionContext.tryExecute(function(){var t=n.getCkEditorInstance(e);if(t){if(t.focusManager){t.focusManager.hasFocus=false}t.destroy()}},"Destroy the ckeditor")};u.prototype.destroyAllEditors=function(){var n=this;this.executionContext.tryExecute(function(){var t=n.getCkEditor().instances;for(var e in t){if(t.hasOwnProperty(e)){n.destroyEditor(e)}}},"Destroy all ckeditor instances")};u.prototype.setupToolbarConfiguration=function(t){var e={};e["toolbar"]=t.getName();e["toolbar_"+t.getName()]=t.getConfig();e["allowedContent"]=true;return e};u.prototype.getContent=function(t){var e=r.Empty;if(!p.isNullOrUndefined(t)){this.executionContext.tryExecute(function(){e=t.getData()},"Get ckeditor content")}return e};u.prototype.setContent=function(t,e,n){this.executionContext.tryExecute(function(){if(!p.isNullOrUndefined(e)){e.setData(t,{callback:function(){e.updateElement();if(m.CommonUtils.isFunction(n)){n()}}})}},"Set ckeditor content")};u.prototype.setRequiredAttributes=function(t){var e=this.getCkEditorElement(t);if(!p.isNullOrUndefined(e)){e.setAttribute("tabIndex","0");$(e).find("input").removeAttr(m.CommonConstants.contentEditableAttrName);$(e).find("textarea").removeAttr(m.CommonConstants.contentEditableAttrName)}};u.prototype.setReadOnly=function(e){var n=this;this.executionContext.tryExecute(function(){var t=n.getCkEditorInstance(e);if(!p.isNullOrUndefined(t)){t.setReadOnly()}},"Set ckeditor readonly mode")};u.prototype.registerAccessibilityFixes=function(i){var t=this;this.getCkEditor().on("dialogDefinition",function(o){t.executionContext.tryExecute(function(){var t=o.data.definition;var r=t.dialog;var e=o.data.name;$(r.parts.title.$).attr("role","heading");if(r.parts.close){setTimeout(function(){r.addFocusable(r.parts.close);var t=r.parts.close.getCustomData(m.CkEditorConstants.ckEditorNativeListeners);r.parts.close.$.removeEventListener("keydown",t["keydown"]);$(r.parts.close.$).on("keydown",function(t){if(t.keyCode===s.Enter||t.keyCode===s.Space){t.preventDefault();t.stopPropagation();r.parts.close.$.click()}})},0)}if(e==="paste"){var n=t.onShow;t.onShow=function(){n.call(this);var i=$(r.parts.contents.$).find(m.CkEditorConstants.ckEditorDialogTextAreaSelector);var t=i.find(m.CkEditorConstants.ckEditorDialogPasteFrameSelector);t.one("load",function(){t.contents().find("body").off("keydown");t.contents().find("body").on("keydown",function(t){if(t.keyCode===s.Tab&&t.shiftKey){t.preventDefault();t.stopPropagation();var e=r._.focusList;var n=e.map(function(t){return t.domId}).indexOf(m.CommonUtils.getId(i));var o=n<=0?e.length-1:n-1;e[o].focus()}})})}}},"Apply accessibility fixes to ckeditor dialog")});this.getCkEditor().on(m.CkEditorConstants.ckEditorInstanceReadyInternalEventName,function(t){if(t.editor&&t.editor.name){var e=i.contents().find("#cke_"+t.editor.name);var n=e.find(m.CkEditorConstants.ckEditorButtonSelector);var o=e.find(m.CkEditorConstants.ckEditorComboButtonSelector);n.each(function(t,e){if(r.isNullUndefinedOrWhitespace($(e).attr("name"))){var n=$(e).find(m.CkEditorConstants.ckEditorButtonLabelSelector).text();$(e).attr("name",n)}var o=$(e).attr("onfocus");if(o&&m.CommonUtils.isIOS()){$(e).removeAttr("onfocus");$(e).attr("onfocus","keepFocus($(button));"+o)}});o.each(function(t,e){if(r.isNullUndefinedOrWhitespace($(e).attr("name"))){var n=$(e).attr("title");$(e).attr("name",n)}})}})};u.prototype.keepFocus=function(t){setTimeout(function(){if(!t.is(":focus")){t.focus()}},0)};u.prototype.upsertImage=function(e,t,n,o,i){var r=this;if(i===void 0){i=false}var a=t.is("img")?t:t.find("img");this.executionContext.tryExecute(function(){var t;if(a.length===0){t=e.document.createElement("img")}else{t=new CKEDITOR.dom.element(a.get(0))}r.setCkEditorElementAttribute(t,"src",n.src);r.setCkEditorElementAttribute(t,"alt",n.alt);if(i){r.setCkEditorElementStyle(t,"width",n.width);r.setCkEditorElementStyle(t,"height",n.height);r.setCkEditorElementAttribute(t,"vSpace",n.vSpace);r.setCkEditorElementAttribute(t,"hSpace",n.hSpace);r.setCkEditorElementAlignment(t,n.alignment.toLowerCase())}e.insertElement(t);r.setEditorFocus(e);e.getSelection().selectElement(t);o($(t.$))},"Upsert the image",false,function(){r.setEditorFocus(e);o(a)})};u.prototype.setCkEditorElementStyle=function(t,e,n){if(!p.isNullOrUndefined(e)&&!p.isNullOrUndefined(n)){t.setStyle(e,n)}};u.prototype.setCkEditorElementAttribute=function(t,e,n){if(!p.isNullOrUndefined(e)&&!p.isNullOrUndefined(n)){t.setAttribute(e,n)}};u.prototype.setCkEditorElementAlignment=function(t,e){if(!r.isNullUndefinedOrWhitespace(e)){this.setCkEditorElementAttribute(t,"align",e);this.setCkEditorElementStyle(t,"margin-left","auto");this.setCkEditorElementStyle(t,"margin-right","auto");this.setCkEditorElementStyle(t,"float","none");if(e!=="center"){this.setCkEditorElementStyle(t,"float",e);this.setCkEditorElementStyle(t,"margin-"+e,"0")}}};u.prototype.getSelectedLink=function(e){var n=this;var o=$();this.executionContext.tryExecute(function(){var t=n.getCkEditor().plugins.link.getSelectedLink(e);if(t!=null&&t.hasAttribute("href")){e.getSelection().selectElement(t);o=$(t.$)}},"Get selected link");return o};u.prototype.upsertLink=function(i,r){var a=this;this.executionContext.tryExecute(function(){var t=a.getCkEditor().plugins.link.getSelectedLink(i);var e=i.getSelection().getRanges()[0];if(t==null){if(e.collapsed){var n=new CKEDITOR.dom.text(r.href,i.document);e.insertNode(n);e.selectNodeContents(n)}var o=new CKEDITOR.style({element:"a",attributes:r.getAttributes()});o.type=CKEDITOR.STYLE_INLINE;o.applyToRange(e,i);e.select()}else{t.setAttribute("href",r.href);t.setAttribute(m.CkEditorConstants.ckEditorHrefAttribute,r.href)}a.setEditorFocus(i)},"Upsert the link",false,function(){a.setEditorFocus(i)})};u.prototype.registerImageCommand=function(n){var o=this;this.executionContext.tryExecute(function(){if(p.isNullOrUndefined(o.getCkEditor().plugins.get(n))){o.getCkEditor().config.extraPlugins=CKEDITOR.config.extraPlugins+","+n;o.getCkEditor().plugins.add(n,{init:function(t){t.on("doubleclick",function(e){o.executionContext.tryExecute(function(){var t=e.data.element;if(!p.isNullOrUndefined(t.find("img"))&&!t.data("cke-realelement")&&!t.isReadOnly()){o.preventCkEditorDefaultDialogToShow(e);if(t.is("img")){e.editor.execCommand(n)}}},"Execute image command on doubleclick")})}})}},"Register image command")};u.prototype.registerLinkCommand=function(n){var o=this;this.executionContext.tryExecute(function(){if(p.isNullOrUndefined(o.getCkEditor().plugins.get(n))){o.getCkEditor().config.extraPlugins=CKEDITOR.config.extraPlugins+","+n;o.getCkEditor().plugins.add(n,{init:function(t){t.setKeystroke(CKEDITOR.CTRL+76,n);t.on("doubleclick",function(e){o.executionContext.tryExecute(function(){var t=e.data.element;if(!p.isNullOrUndefined(t.find("a"))&&!t.data("cke-realelement")&&!t.isReadOnly()){o.preventCkEditorDefaultDialogToShow(e);if(t.is("a")){e.editor.execCommand(n)}}},"Execute link command on doubleclick")})}})}},"Register link command")};u.prototype.preventCkEditorDefaultDialogToShow=function(t){t.data.dialog=null};u.prototype.setEditorFocus=function(t,e){var n=this;this.executionContext.tryExecute(function(){if(p.isNullOrUndefined(t)){return}if(t&&t.focusManager&&!t.focusManager.hasFocus){if(t.status!==m.CkEditorConstants.ckEditorLoadedStatus&&t.status!==m.CkEditorConstants.ckEditorReadyStatus){t.on(m.CkEditorConstants.ckEditorInstanceReadyInternalEventName,function(){setTimeout(function(){n.executionContext.tryExecute(function(){if(t.editable()){n.getCkEditor().currentInstance=t;t.focus()}if(m.CommonUtils.isFunction(e)){e()}},"Set editor focus on instance ready",false,function(){if(m.CommonUtils.isFunction(e)){e()}})},0)})}else{if(t.editable()){n.getCkEditor().currentInstance=t;t.focusManager.focus();t.focus()}if(m.CommonUtils.isFunction(e)){e()}}}else{if(m.CommonUtils.isFunction(e)){e()}}},"Set editor focus",false,function(){if(m.CommonUtils.isFunction(e)){e()}})};u.prototype.getCkEditorElement=function(t){var e=null;this.executionContext.tryExecute(function(){e=t.element.$},"Get ckeditor html element",true);return e};u.prototype.getCkEditorInstance=function(t){var e=this;var n=null;this.executionContext.tryExecute(function(){n=(e.getCkEditor()||CKEDITOR).instances[t]},"Get ckeditor instance",true);return n};u.prototype.getCkEditorId=function(t){return m.CommonUtils.getId(t.find(m.CommonUtils.getAttrSelector(m.CommonConstants.ckEditorAttrName)))};u.prototype.registerPlugin=function(n,o,i){var r=this;this.executionContext.tryExecute(function(){var t=a.generate();r.pluginAdapter=new m.CKEditorPluginAdapter(CKEDITOR,n,o,function(){return i()},m.BlockProvider.getLastElementBeforeContainer,r.executionContext);r.getCkEditor().plugins.add(t,r.pluginAdapter);r.getCkEditor().config.extraPlugins+=t+",";var e=n.getToolbarButtons();$.each(e,function(t,e){r.registerToolbarStyles(e)})},"Register custom plugins",true)};u.prototype.setImageAttribute=function(t,e){t.attr(m.CkEditorConstants.ckEditorImageSrcAttribute,e)};u.prototype.setHrefAttribute=function(t,e){if(!p.isNullOrUndefined(t)){t.attr(m.CkEditorConstants.ckEditorHrefAttribute,e)}};u.prototype.setToolbarBlur=function(n){var o=this;this.executionContext.tryExecute(function(){if(!p.isNullOrUndefined(n.block)){var t=m.BlockProvider.getEditableElement(n.block);if(t.length){var e=o.getCkEditorInstance(m.CommonUtils.getId(t));if(!p.isNullOrUndefined(e)){CKEDITOR.focusManager(e).blur(true)}}}},"Set ckeditor toolbar to blur")};u.prototype.registerToolbarStyles=function(t){var e="btnStyle_"+t.getName();var n=m.CommonUtils.getById(e,$(this.contentWindow.document.body));if(n.length>0){return}var o=".cke_button__"+t.getName().toLowerCase()+"_icon";var i='{ background-image: url("'+t.getIconSrc()+'"); }';var r=$(this.contentWindow.document.body);$("<style>").prop("type","text/css").attr("id",e).attr(m.CkEditorConstants.ckEditorSharedResourceAttribute,"yes").html(o+" "+i).appendTo(r)};u.prototype.getCustomCkEditorSkinStylesElement=function(){var t=this.cdnBasePath+"/"+this.ckEditorBasePath+"/skins/moono-lisa";return $("<style>").attr("id",m.DesignerContentEditorStyles.ckEditorSkinStylesId).text(r.Format(m.DesignerContentEditorStyles.ckEditorSkinStyles,t))};u.prototype.getCkEditor=function(){return this.contentWindow?this.contentWindow.CKEDITOR:null};u.prototype.getWindow=function(){return this.contentWindow};u.prototype.getChildEditableElementId=function(e){var n=this;var o=null;this.executionContext.tryExecute(function(){var t=n.getCkEditorInstance(e);if(!p.isNullOrUndefined(t)&&!p.isNullOrUndefined(t.elementPath())){o=n.getCkEditorInstance(e).elementPath().elements[0].$.id}},"Get the child editable element",true);return o};u.prototype.onCkEditorInitialized=function(o,i){var r=this;var t=this.getCkEditor()||CKEDITOR;t.on(m.CkEditorConstants.ckEditorInstanceReadyInternalEventName,function(t){var e=new m.CkEditorInstanceReadyEventArgs;e.sourceId=o;var n=t.editor;if(!(n&&n.name)){return}if(m.CommonUtils.isIOS()&&n.editable()){if(n.editable().isInline()){r.registerIOSScrollFixes(n)}else{t.editor.on(m.CkEditorConstants.ckEditorContentDomInternalEventName,function(){r.registerIOSScrollFixes(n)})}}e.ckEditorInstanceName=n.name;i(n,e)})};u.prototype.registerIOSScrollFixes=function(t){var e=this;var n=t.editable();n.on(m.CkEditorConstants.ckEditorInputInternalEventName,function(){e.fixIOSScroll(t)})};u.prototype.fixIOSScroll=function(i){this.executionContext.tryExecute(function(){var t=i.getSelection();if(t){var e=t.getRanges()[0];var n=t.getNative();if(!(e&&e.startContainer&&e.startContainer.$&&e.endContainer&&e.endContainer.$)){return}var o=document.createRange();o.setStart(e.startContainer.$,e.startOffset);o.setEnd(e.endContainer.$,e.endOffset);n.removeAllRanges();setTimeout(function(){n.addRange(o);if(!i.editable().isInline()){i.fire(m.CkEditorConstants.ckEditorChangeInternalEventName)}},0)}},"Fix IOS scrolling issue when typing")};u.prototype.setEnterMode=function(e){var n=CKEDITOR.ENTER_P;m.CkEditorEnterModeExceptions.enterBrTagList.forEach(function(t){if(e.children().is(t)){n=CKEDITOR.ENTER_BR}});CKEDITOR.config.enterMode=n;CKEDITOR.config.title=e.attr("aria-label")};u.removePlugins="showborders,codemirror,magicline,liststyle,tabletools,scayt,contextmenu,a11yhelp";u.extraPlugins=r.Empty;u.extraFonts=["Segoe UI/Segoe UI,Frutiger,Helvetica Neue,Arial,sans-serif"];u.styleSetName="editorStyleSet";return u}();m.CkEditorProxy=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(a){"use strict";var s=MktSvc.Controls.Common.Object;var l=MktSvc.Controls.Common.UniqueId;var t=function(){function t(t,e,n,o,i){var r=this;this.ckeditorSharedResourceAttribute="ckEditorSharedResource";this.ckeditorFocusInternalEventName="focus";this.ckeditorDropEventName="drop";this.id=l.generate("inlineCkEditorProxy");this.onSelectionChanged=function(t){r.selectedBlockElement=t.blockElement;r.setEditorFocus(a.CommonUtils.getEditorIdFromBlock(t.blockElement))};this.onImageAttributeChanged=function(t){if(t.attributeName===a.CommonConstants.designerImageSourceAttributeName&&t.imageElement){r.ckEditorHelper.setImageAttribute(t.imageElement,t.attributeValue)}};this.onHrefAttributeChanged=function(t){r.ckEditorHelper.setHrefAttribute(t.element,t.href)};this.onDesignerDragStart=function(t){if(!s.isNullOrUndefined(t)){r.ckEditorHelper.setToolbarBlur(t)}};this.onContentModelInitialized=function(t){r.documentContentModel=t.documentContentModel};this.resizeEditor=function(t){};this.plugin=n;this.eventBroker=t;this.ckEditorHelper=e;this.executionContext=o;this.customCkEditorConfiguration=i;this.eventBroker.subscribe(a.EventConstants.contentModelInitialized,this.onContentModelInitialized)}t.prototype.instanceId=function(){return this.id};t.prototype.init=function(t,e){var n=this;this.ckEditorHelper.init(t,function(){n.executionContext.tryExecute(function(){n.eventBroker.subscribe(a.DesignerInternalEventConstants.selectionChanged,n.onSelectionChanged);n.eventBroker.subscribe(a.EventConstants.imageAttributeChanged,n.onImageAttributeChanged);n.eventBroker.subscribe(a.EventConstants.hrefAttributeChanged,n.onHrefAttributeChanged);n.eventBroker.subscribe(a.DesignerInternalEventConstants.designerDragStart,n.onDesignerDragStart);n.registerPlugins();n.notifyOnCkEditorInstanceInitialized();e()},"Initialize the inline ckeditor proxy",true)},this.documentContentModel)};t.prototype.getCkEditorInitializedPromise=function(){return this.ckEditorHelper.getCkEditorInitializedPromise()};t.prototype.registerPlugins=function(){var t=this;this.ckEditorHelper.registerPlugin(this.plugin,this.eventBroker,function(){return t.selectedBlockElement})};t.prototype.cleanup=function(t){this.ckEditorHelper.cleanup(t)};t.prototype.createEditor=function(o,i){var r=this;var a=null;this.executionContext.tryExecute(function(){r.ckEditorHelper.setEnterMode(o);if(r.ckEditorHelper.getCkEditor()){var t=r.ckEditorHelper.setupToolbarConfiguration(i);if(r.customCkEditorConfiguration){var e=r.customCkEditorConfiguration.instanceConfiguration;if(e){for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}}}a=r.ckEditorHelper.getCkEditor().inline(o.get(0),t)}},"Create inline editor");return a};t.prototype.notifyOnCkEditorInstanceInitialized=function(){var n=this;var t=function(t,e){t.on(n.ckeditorFocusInternalEventName,function(t){var e=new a.CkEditorFocusEventArgs;if(t.editor&&t.editor.name){e.ckEditorInstanceName=t.editor.name;e.sourceId=n.instanceId();n.eventBroker.notify(a.DesignerInternalEventConstants.ckEditorFocus,e)}});t.on(n.ckeditorDropEventName,function(t){if(t.data.dataTransfer.sourceEditor&&t.data.dataTransfer.sourceEditor.name!==t.editor.name){t.cancel()}});n.eventBroker.notify(a.DesignerInternalEventConstants.ckEditorInstanceReadyEvent,e)};this.ckEditorHelper.onCkEditorInitialized(this.instanceId(),t)};t.prototype.destroyEditor=function(t){this.ckEditorHelper.destroyEditor(t)};t.prototype.destroyAllEditors=function(){this.ckEditorHelper.destroyAllEditors()};t.prototype.dispose=function(){this.eventBroker.unsubscribe(a.EventConstants.contentModelInitialized,this.onContentModelInitialized);this.eventBroker.unsubscribe(a.DesignerInternalEventConstants.selectionChanged,this.onSelectionChanged);this.eventBroker.unsubscribe(a.EventConstants.imageAttributeChanged,this.onImageAttributeChanged);this.eventBroker.unsubscribe(a.EventConstants.hrefAttributeChanged,this.onHrefAttributeChanged);this.eventBroker.unsubscribe(a.DesignerInternalEventConstants.designerDragStart,this.onDesignerDragStart);this.ckEditorHelper.dispose()};t.prototype.getContent=function(t){return this.ckEditorHelper.getContent(this.ckEditorHelper.getCkEditorInstance(t))};t.prototype.setContent=function(t,e,n){return this.ckEditorHelper.setContent(t,this.ckEditorHelper.getCkEditorInstance(e),n)};t.prototype.setRequiredAttributes=function(t){this.ckEditorHelper.setRequiredAttributes(this.ckEditorHelper.getCkEditorInstance(t))};t.prototype.setReadOnly=function(t){this.ckEditorHelper.getCkEditorInstance(t).setReadOnly()};t.prototype.upsertImage=function(t,e,n,o){var i=this;if(o===void 0){o=false}this.ckEditorHelper.upsertImage(this.ckEditorHelper.getCkEditorInstance(t),e,n,function(t){i.eventBroker.notify(a.EventConstants.imageAttributeChanged,new a.ImageAttributeChangedEventArgs(t,"src",n.src,null));i.eventBroker.notify(a.EventConstants.imageAttributeChanged,new a.ImageAttributeChangedEventArgs(t,"alt",n.alt,null));i.ckEditorHelper.setImageAttribute(t,n.src);i.notifyContentChanged()},o)};t.prototype.getSelectedLink=function(t){return this.ckEditorHelper.getSelectedLink(this.ckEditorHelper.getCkEditorInstance(t))};t.prototype.upsertLink=function(t,e){this.ckEditorHelper.upsertLink(this.ckEditorHelper.getCkEditorInstance(t),e)};t.prototype.registerImageCommand=function(t){this.ckEditorHelper.registerImageCommand(t)};t.prototype.registerLinkCommand=function(t){this.ckEditorHelper.registerLinkCommand(t)};t.prototype.setEditorFocus=function(t,e){this.ckEditorHelper.setEditorFocus(this.ckEditorHelper.getCkEditorInstance(t),e)};t.prototype.getCkEditorElement=function(t){return this.ckEditorHelper.getCkEditorElement(this.ckEditorHelper.getCkEditorInstance(t))};t.prototype.getCkEditorInstance=function(t){return this.ckEditorHelper.getCkEditorInstance(t)};t.prototype.getCkEditorId=function(t){return this.ckEditorHelper.getCkEditorId(t)};t.prototype.notifyContentChanged=function(){this.eventBroker.notify(a.DesignerInternalEventConstants.contentChanged)};t.prototype.getChildEditableElementId=function(t){return this.ckEditorHelper.getChildEditableElementId(t)};return t}();a.InlineCkEditorProxy=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(a){"use strict";var r=MktSvc.Controls.Common.Object;var s=MktSvc.Controls.Common.String;var l=MktSvc.Controls.Common.UniqueId;var t=function(){function t(t,e,n,o,i){this.id=l.generate("standardCkEditorProxy");this.plugin=null;this.editor=null;this.ckEditorTopToolbarClassName="cke_top";this.ckEditorBottomToolbarClassName="cke_bottom";this.ckEditorContentsPartClassName="cke_contents";this.eventBroker=t;this.ckEditorHelper=e;this.plugin=n;this.executionContext=o;this.customCkEditorConfiguration=i}t.prototype.instanceId=function(){return this.id};t.prototype.init=function(t,e){var n=this;this.designerFrame=$(t);this.ckEditorHelper.init(t,function(){n.executionContext.tryExecute(function(){n.registerPlugins();n.onCkEditorInitialized();e()},"Initialize the standard ckeditor proxy",true)})};t.prototype.getCkEditorInitializedPromise=function(){return this.ckEditorHelper.getCkEditorInitializedPromise()};t.prototype.registerPlugins=function(){var n=this;this.ckEditorHelper.registerPlugin(this.plugin,this.eventBroker,function(){return n.getSelectedElement()});this.plugin.getCommands().forEach(function(t){t.setup(n.eventBroker);if(t instanceof a.CkEditorCommand){var e=t;e.setupCkEditor(n)}})};t.prototype.onCkEditorInitialized=function(){var n=this;var t=function(t,e){n.resizeEditor();n.eventBroker.notify(a.EventConstants.standardCkEditorInitialized,e)};this.ckEditorHelper.onCkEditorInitialized(this.instanceId(),t)};t.prototype.cleanup=function(t){this.ckEditorHelper.cleanup(t)};t.prototype.createEditor=function(t,e){var n=this;var o={};o["toolbar"]=e.getName();o["toolbar_"+e.getName()]=e.getConfig().filter(function(t){return t!=="/"});o["allowedContent"]=true;o["fullPage"]=true;o["resize_enabled"]=false;o["title"]=false;CKEDITOR.config.basicEntities=true;CKEDITOR.config.enterMode=CKEDITOR.ENTER_BR;if(this.customCkEditorConfiguration){var i=this.customCkEditorConfiguration.instanceConfiguration;if(i){for(var r in i){if(i.hasOwnProperty(r)){o[r]=i[r]}}}}this.editor=this.ckEditorHelper.getCkEditor().replace(a.CommonUtils.getId(t),o);this.editor.on("change",function(){n.notifyContentChanged()});return this.editor};t.prototype.destroyEditor=function(t){this.ckEditorHelper.destroyEditor(t)};t.prototype.destroyAllEditors=function(){this.ckEditorHelper.destroyAllEditors()};t.prototype.dispose=function(){if(!r.isNullOrUndefined(this.editor)){this.editor.destroy();this.editor=null}this.ckEditorHelper.dispose();this.designerFrame=null};t.prototype.getContent=function(){return this.ckEditorHelper.getContent(this.editor)};t.prototype.setContent=function(t,e,n){this.ckEditorHelper.setContent(t,this.editor,n)};t.prototype.setRequiredAttributes=function(t){this.ckEditorHelper.setRequiredAttributes(this.ckEditorHelper.getCkEditorInstance(t))};t.prototype.setReadOnly=function(t){this.ckEditorHelper.getCkEditorInstance(t).setReadOnly()};t.prototype.upsertImage=function(t,e,n,o){var i=this;if(o===void 0){o=false}this.ckEditorHelper.upsertImage(this.editor,e,n,function(t){i.eventBroker.notify(a.EventConstants.imageAttributeChanged,new a.ImageAttributeChangedEventArgs(t,"src",n.src,null));i.ckEditorHelper.setImageAttribute(t,n.src);i.notifyContentChanged()},o)};t.prototype.getSelectedLink=function(t){return this.ckEditorHelper.getSelectedLink(this.editor)};t.prototype.upsertLink=function(t,e){this.ckEditorHelper.upsertLink(this.editor,e)};t.prototype.registerImageCommand=function(t){this.ckEditorHelper.registerImageCommand(t)};t.prototype.registerLinkCommand=function(t){this.ckEditorHelper.registerLinkCommand(t)};t.prototype.setEditorFocus=function(t,e){this.ckEditorHelper.setEditorFocus(this.editor,e)};t.prototype.notifyContentChanged=function(){this.eventBroker.notify(a.EventConstants.fullPageEditorContentChanged)};t.prototype.getCkEditorElement=function(t){return this.ckEditorHelper.getCkEditorElement(this.editor)};t.prototype.getCkEditorId=function(t){return this.ckEditorHelper.getCkEditorId(t)};t.prototype.getCkEditorInstance=function(t){return this.ckEditorHelper.getCkEditorInstance(t)};t.prototype.getChildEditableElementId=function(t,e){var n=null;if(!r.isNullOrUndefined(this.editor.elementPath())&&!r.isNullOrUndefined(this.editor.elementPath().elements)&&this.editor.elementPath().elements.length){var o=this.editor.elementPath().elements;var i=$(o[o.length-1].$);if(i.is("body")&&r.isNullOrUndefined(i.attr("id"))){n=l.generate(e?e:s.Empty);i.attr("id",n)}o.some(function(t){n=t.$.id;return!s.isNullOrEmpty(n)})}return n};t.prototype.getSelectedElement=function(){var e=this;var n=$();this.executionContext.tryExecute(function(){var t=e.editor.document.$.getSelection();if(t.rangeCount>0){n=$(t.getRangeAt(0).commonAncestorContainer);if(n[0].nodeType===Node.TEXT_NODE){n=n.parent()}}},"Get selected element");return n};t.prototype.resizeEditor=function(t){if($(this.designerFrame).is(":visible")){var e=a.CommonUtils.getByClass(this.ckEditorTopToolbarClassName,this.designerFrame.contents()).outerHeight()+a.CommonUtils.getByClass(this.ckEditorBottomToolbarClassName,this.designerFrame.contents()).outerHeight();var n=t>0?t:this.designerFrame.contents().innerHeight();a.CommonUtils.getByClass(this.ckEditorContentsPartClassName,this.designerFrame.contents()).height(n-e-20)}};return t}();a.StandardCkEditorProxy=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}return t}();t.ComponentLayoutConfiguration=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}return t}();t.LayoutConfiguration=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(p){"use strict";var f=MktSvc.Controls.Common.Dictionary;var t=function(){function t(t){this.textTool=new p.TextTool;this.imageTool=new p.ImageTool;this.buttonTool=new p.ButtonTool;this.dividerTool=new p.DividerTool;this.textBlock=new p.TextBlock;this.imageBlock=new p.ImageBlock;this.buttonBlock=new p.ButtonBlock;this.dividerBlock=new p.DividerBlock;this.buttonDetailsViewFactory=new p.ButtonDetailsViewFactory;var e=new p.ImageGalleryCommand(t,new p.PopupRenderer);this.tools=[this.textTool,this.imageTool,this.dividerTool,this.buttonTool];this.toolBlockMapping=new f;this.toolBlockMapping.addOrUpdate(this.textTool.getType(),this.textBlock);this.toolBlockMapping.addOrUpdate(this.imageTool.getType(),this.imageBlock);this.toolBlockMapping.addOrUpdate(this.buttonTool.getType(),this.buttonBlock);this.toolBlockMapping.addOrUpdate(this.dividerBlock.getType(),this.dividerBlock);this.blockDetailsViewMapping=new f;var n=new p.DetailsViewControlFactory;this.blockDetailsViewMapping.addOrUpdate(this.dividerBlock.getType(),new p.DividerDetailsView(n.create()));this.blockDetailsViewMapping.addOrUpdate(this.imageBlock.getType(),new p.ImageDetailsView(n.create(),this.imageBlock));this.blockDetailsViewMapping.addOrUpdate(this.buttonBlock.getType(),this.buttonDetailsViewFactory.create(n.create()));this.metadataStylesRendererMapping=new MktSvc.Controls.Common.Dictionary;var o=new p.CloneBlockCommand;var i=new p.DeleteBlockCommand;var r=new p.ImageGalleryCommand(t,new p.PopupRenderer);var a=[p.DividerAlignLeftButton.buttonName,p.DividerAlignCenterButton.buttonName,p.DividerAlignRightButton.buttonName];var s=new p.DividerAlignCommand("left","dividerAlignLeftCommand",a,p.DividerAlignLeftButton.buttonName,p.DividerAlignCenterButton.buttonName,"center");var l=new p.DividerAlignCommand("center","dividerAlignCenterCommand",a,p.DividerAlignCenterButton.buttonName,p.DividerAlignCenterButton.buttonName,"center");var c=new p.DividerAlignCommand("right","dividerAlignRightCommand",a,p.DividerAlignRightButton.buttonName,p.DividerAlignCenterButton.buttonName,"center");var d=new p.SetDividerHeightCommand;var u=new p.SetDividerBorderStyleCommand;var m=new p.MoveBlockCommand;this.commands=[o,i,e,s,l,c,d,u,m];this.toolbarButtons=[new p.CloneBlockButton(o),new p.DeleteBlockButton(i),new p.ImageGalleryButton(r),new p.DividerAlignLeftButton(s),new p.DividerAlignCenterButton(l),new p.DividerAlignRightButton(c),new p.MoveBlockButton(m)];this.toolbarCombos=[new p.DividerHeightCombo(d),new p.DividerBorderStyleCombo(u)]}t.prototype.getTools=function(){return this.tools};t.prototype.getToolBlockMapping=function(){return this.toolBlockMapping};t.prototype.getBlockDetailsViewMapping=function(){return this.blockDetailsViewMapping};t.prototype.getCommands=function(){return this.commands};t.prototype.getToolbarButtons=function(){return this.toolbarButtons};t.prototype.getToolbarCombos=function(){return this.toolbarCombos};t.prototype.getMetadataStylesRendererMapping=function(){return this.metadataStylesRendererMapping};return t}();p.BasicPlugin=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(l){"use strict";var i=MktSvc.Controls.Common.Object;var a=MktSvc.Controls.Common.String;var n=MktSvc.Controls.Common.DelayScheduler;var c=MktSvc.Controls.Common.KeyboardCommand;var d=MktSvc.Controls.Common.KeyboardKeyCodes;var m=MktSvc.Controls.Common.KeyboardModifierType;var t=function(u){__extends(s,u);function s(t,e,n,o,i,r,a,s,l,c){var d=u.call(this,t)||this;d.blockControllers=e;d.containerControllers=n;d.blockProvider=o;d.blockDefinition=i;d.containerProvider=r;d.focusManager=a;d.keyboardCommandManager=s;d.executionContext=l;d.accessibilityInstructions=c;d.resizeTimerDelay=3500;d.isFullscreen=false;d.isDirty=true;d.onMaximizeExecuted=function(t){d.isFullscreen=t.isFullscreen;d.resizeTimer.schedule()};d.onContentModelInitialized=function(t){d.documentContentModel=t.documentContentModel};d.onContentModelUpdated=function(){d.documentContentModel.isDesignerContent()?d.keyboardCommandManager.registerCommand(d.keyboardCommand):d.keyboardCommandManager.unregisterCommand(d.keyboardCommand)};d.contentSanitizer=l.getContentSanitizer();return d}s.prototype.init=function(t){var e=this;this.eventBroker=t;this.onBlockCleanupRequestedHandler=this.eventBroker.subscribe(l.DesignerInternalEventConstants.blockCleanupRequested,function(t){e.onBlockCleanupRequested.apply(e,[t])});this.onBlockAddedHandler=this.eventBroker.subscribe(l.EventConstants.blockAdded,function(t){e.onBlockAdded.apply(e,[t]);e.broadcastContentChanged()});this.onBlockMovedHandler=this.eventBroker.subscribe(l.EventConstants.blockMoved,function(t){e.onBlockMoved.call(e,t);e.broadcastContentChanged()});this.onContentBlockChangedHandler=this.eventBroker.subscribe(l.DesignerInternalEventConstants.contentBlockChanged,function(t){e.broadcastContentChanged(t)});this.onBlockDeletedHandler=this.eventBroker.subscribe(l.EventConstants.blockDeleted,function(t){e.onBlockDeleted.apply(e,[t]);e.broadcastContentChanged()});this.onContentChangedHandler=this.eventBroker.subscribe(l.DesignerInternalEventConstants.contentChanged,function(t){e.broadcastContentChanged(t)});this.onContentRefreshedHandler=this.eventBroker.subscribe(l.DesignerInternalEventConstants.contentRefreshed,function(){e.broadcastContentRefreshed()});this.onContentResolvedHandler=this.eventBroker.subscribe(l.EventConstants.contentResolved,function(t){e.setContent(t)});this.eventBroker.subscribe(l.EventConstants.contentModelInitialized,this.onContentModelInitialized);this.eventBroker.subscribe(l.EventConstants.maximizeExecuted,this.onMaximizeExecuted);this.focusManager.init();this.keyboardCommand=new c(d.oneKey,[m.Alt],function(){if(e.documentContentModel.isDesignerContent()){$(l.CommonUtils.getClassSelector(l.CommonConstants.tabButtonPreClassName+l.CommonConstants.designerTabContentClassName)).focus().click()}});this.resizeTimer=new n(this.eventBroker);this.resizeTimer.init(function(){e.setMaxHeightOnDesignerTabContent()},this.resizeTimerDelay);this.eventBroker.subscribe(l.EventConstants.contentModelUpdated,this.onContentModelUpdated)};s.prototype.activate=function(){u.prototype.activate.call(this);this.render();l.AccessibilityInstructionsPopup.accessibilityInstructions=this.accessibilityInstructions||l.EditorAccessibilityInstructions.baseDesignerAccessibilityInstructions};s.prototype.setContent=function(t){if(this.html===t.html||t.sourceId===this.id||t.originalSourceId===this.id){return}this.html=t.html;this.isDirty=true;if(!this.isActive){return}this.eventBroker.unsubscribe(l.DesignerInternalEventConstants.controllerReady,this.onControllerReady);this.onControllerReady=null;this.render()};s.prototype.render=function(){var a=this;if(this.isDirty){this.contentSanitizer.init(function(){var t=a.getElement();a.disposeDesignerIframe();var i=document.createElement("iframe");var r=$(i);r.addClass(l.CommonConstants.designerContentEditorFrameClassName).addClass(l.CommonConstants.layoutFrameClassName).attr("id",l.CommonConstants.designerContentEditorFrameId).attr("title",a.executionContext.getLocalizationProvider().getLocalizedString("[Designer canvas]"));var e=$("<div>").addClass(l.CommonConstants.designerContentEditorFrameWrapperClassName);e.append(r);if(l.CommonUtils.isIOS()){e.addClass(l.CommonConstants.iosScrollClassName);var n=$("<div>").addClass(l.CommonConstants.designerIosContainerClassName).addClass(l.CommonConstants.iosScrollClassName).append(e);t.append(n)}else{t.append(e)}a.initialHeight=t.outerHeight(true);if(!a.onWindowSizeChanged){$(window).on("resize",a.onWindowSizeChanged=function(){if(!a.isFullscreen&&a.getElement().is(":visible")){a.initialHeight=a.getElement().outerHeight(true);a.setMaxHeightOnDesignerTabContent()}})}var o=l.CommonUtils.getNewContentDocument(l.CommonUtils.getWithDoctype("<body></body>"));l.CommonUtils.writeFrameContent(i,l.CommonUtils.getDocumentContent(o,s.safeDocumentDoctype));a.contentSanitizer.getSanitizedContent(l.CommonUtils.getWithDoctype(a.html),function(o){a.executionContext.tryExecute(function(){$(i.contentDocument.body).append($(o).children());$(i.contentDocument).attr("lang",a.executionContext.getLocalizationProvider().getLanguageName());$(o).remove();var e=a.blockProvider.getBlocks(r.contents());var n=a.containerProvider.getContainers(r.contents());a.subscribeToControllersReady();a.eventBroker.notify(l.DesignerInternalEventConstants.designerFrameInitialized);a.containerControllers.each(function(t){a.executionContext.tryExecute(function(){t.setupContainers(n)},t.getName()+" setup container",true)});a.blockControllers.each(function(t){a.executionContext.tryExecute(function(){t.setupBlocks(e)},t.getName()+" setup blocks",true)});var t=r.contents();if(l.CommonUtils.isIOS()){t.find("html").addClass(l.CommonConstants.iosScrollClassName);t.find("body").addClass(l.CommonConstants.iosScrollClassName);a.resizeIFrame(i)}l.CommonUtils.appendElementToHead(t,a.getDesignerStylesElement());l.CommonUtils.appendElementToHead(t,a.getCustomCkEditorStylesElement());a.isDirty=false;a.keyboardCommandManager.registerCommand(new c(d.xKey,[m.Alt],function(){if(a.isActive&&!$(document.activeElement).hasClass(l.CommonConstants.designerContentEditorFrameClassName)){a.eventBroker.notify(l.EventConstants.onKeypressToFocusPreviousElementCalled)}}));a.keyboardCommandManager.registerCommand(new c(d.escapeKeyCode,[],function(){if(l.CommonUtils.getByClass(l.CommonConstants.selectedSortablePlaceholderClassName,l.CommonUtils.getByClass(l.CommonConstants.designerContentEditorFrameClassName).contents()).length){a.eventBroker.notify(l.DesignerInternalEventConstants.designerAddEnd)}}));a.keyboardCommandManager.registerCommandsInIframe(i)},"Initialize the designer content editor",true)})})}else{this.eventBroker.notify(l.DesignerInternalEventConstants.designerReady)}this.setMaxHeightOnDesignerTabContent();this.eventBroker.notify(l.EventConstants.controlRendered,new l.ControlRenderedEventArgs(this.id))};s.prototype.resizeIFrame=function(o){var i=this;if(o&&o.contentDocument){this.applyIFrameHeight(o)}$(o).contents().find("img").each(function(t,e){var n=$(e);n.off("load");n.on("load",function(){i.applyIFrameHeight(o)})})};s.prototype.resetIFrameHeight=function(t){$(t).height(a.Empty);$(t).contents().find("html").height(a.Empty);$(t).contents().find("body").height(a.Empty)};s.prototype.applyIFrameHeight=function(t){var e=$("."+l.CommonConstants.designerContentEditorFrameWrapperClassName).scrollTop();this.resetIFrameHeight(t);var n=$("."+l.CommonConstants.designerControlCssClass).height();var o=$("."+l.CommonConstants.designerControlCssClass).width();$("."+l.CommonConstants.designerIosContainerClassName).height(n).width(o);var i=$(t).contents().height();$("."+l.CommonConstants.designerContentEditorFrameWrapperClassName).scrollTop(e);var r=$(t).outerHeight()-$(t).innerHeight();var a=$("."+l.CommonConstants.designerControlCssClass+":visible").height()-r;if(a<i){$(t).height(i);$(t).contents().find("html").height(i);$(t).contents().find("body").height(i)}else{$(t).height(a);$(t).contents().find("html").height(i);$(t).contents().find("body").height(i)}};s.prototype.disposeDesignerIframe=function(){var e=this;var t=this.getElement().find(l.CommonUtils.getClassSelector(l.CommonConstants.designerContentEditorFrameClassName)).first();if(t.length>0){var n=this.blockProvider.getBlocks(t.contents());this.blockControllers.each(function(t){e.executionContext.tryExecute(function(){t.disposeBlocks(n)},t.getName()+" dispose blocks")});var o=this.containerProvider.getContainers(t.contents());this.containerControllers.each(function(t){e.executionContext.tryExecute(function(){t.disposeContainers(o)},t.getName()+" dispose containers")});this.eventBroker.notify(l.DesignerInternalEventConstants.designerFrameDisposed);this.keyboardCommandManager.unregisterCommandsInIframe(t[0]);t.off();t.remove();l.CommonUtils.getByClass(l.CommonConstants.designerIosContainerClassName).remove();l.CommonUtils.getByClass(l.CommonConstants.designerContentEditorFrameWrapperClassName).remove()}};s.prototype.onControllerReadyCallback=function(t,e){var n=t.indexOf(e.controllerName);if(n!==-1){t.splice(n,1)}if(t.length===0){this.eventBroker.notify(l.DesignerInternalEventConstants.designerReady)}};s.prototype.subscribeToControllersReady=function(){var e=this;this.controllerNames=[];this.containerControllers.each(function(t){e.controllerNames.push(t.getName())});this.blockControllers.each(function(t){e.controllerNames.push(t.getName())});if(i.isNullOrUndefined(this.onControllerReady)){this.onControllerReady=this.eventBroker.subscribe(l.DesignerInternalEventConstants.controllerReady,function(t){e.onControllerReadyCallback.apply(e,[e.controllerNames,t])})}};s.prototype.broadcastContentChanged=function(t){var e=new l.ContentChangedEventArgs(this.getContent(),this.id,t!=null?t.sourceId:null,l.CommonConstants.designerEditorComponentName);if(l.CommonUtils.isIOS()){this.resizeIFrame($("."+l.CommonConstants.designerContentEditorFrameClassName).get(0))}this.eventBroker.notify(l.EventConstants.contentChanged,e)};s.prototype.broadcastContentRefreshed=function(){var t=new l.EventArgs(this.id);this.eventBroker.notify(l.EventConstants.contentRefreshed,t)};s.prototype.getContent=function(){var e=this;var t=l.CommonUtils.getByClass(l.CommonConstants.designerContentEditorFrameClassName)[0];if(i.isNullOrUndefined(t)){return a.Empty}var r=l.CommonUtils.getNewContentDocument(this.html);l.CommonUtils.walkTree($(t).contents().children().find("body"),function(t){var e=t.attr("id");var n=!a.isNullUndefinedOrWhitespace(t.attr(l.Contract.containerAttrName));var o=!a.isNullUndefinedOrWhitespace(t.attr(l.Contract.blockTypeAttrName));if(!a.isNullUndefinedOrWhitespace(e)&&(o||n)){var i=l.CommonUtils.getById(e,$(r).contents());if(i.length>0){i.html(t.html())}}});var n=this.containerProvider.getContainers($(r).contents());var o=this.blockProvider.getBlocks($(r).contents());this.blockControllers.each(function(t){e.executionContext.tryExecute(function(){t.cleanupBlocks(o)},t.getName()+" cleanup blocks",true)});this.containerControllers.each(function(t){e.executionContext.tryExecute(function(){t.cleanupContainers(n)},t.getName()+" cleanup containers",true)});return l.CommonUtils.getDocumentContent(r,i.isNullOrUndefined(this.documentContentModel)?a.Empty:this.documentContentModel.getDoctype())};s.prototype.dispose=function(){var e=this;this.executionContext.tryExecute(function(){e.disposeDesignerIframe();e.blockControllers.each(function(t){e.executionContext.tryExecute(function(){t.dispose()},"Dispose the "+t.getName())});e.containerControllers.each(function(t){e.executionContext.tryExecute(function(){t.dispose()},"Dispose the "+t.getName())});if(e.onWindowSizeChanged){$(window).off("resize",e.onWindowSizeChanged)}if(e.resizeTimer){e.resizeTimer.stop(true);e.resizeTimer.dispose()}e.onWindowSizeChanged=null;e.unsubscribeFromEvent(l.EventConstants.contentModelInitialized,e.onContentModelInitialized);e.unsubscribeFromEvent(l.EventConstants.blockAdded,e.onBlockAddedHandler);e.unsubscribeFromEvent(l.EventConstants.blockMoved,e.onBlockMovedHandler);e.unsubscribeFromEvent(l.EventConstants.blockDeleted,e.onBlockDeletedHandler);e.unsubscribeFromEvent(l.EventConstants.contentResolved,e.onContentResolvedHandler);e.unsubscribeFromEvent(l.EventConstants.contentModelUpdated,e.onContentModelUpdated);e.unsubscribeFromEvent(l.DesignerInternalEventConstants.contentBlockChanged,e.onContentBlockChangedHandler);e.unsubscribeFromEvent(l.DesignerInternalEventConstants.blockCleanupRequested,e.onBlockCleanupRequestedHandler);e.unsubscribeFromEvent(l.DesignerInternalEventConstants.contentChanged,e.onContentChangedHandler);e.unsubscribeFromEvent(l.DesignerInternalEventConstants.controllerReady,e.onControllerReady);e.unsubscribeFromEvent(l.EventConstants.maximizeExecuted,e.onMaximizeExecuted);e.focusManager.dispose();e.contentSanitizer.dispose();e.documentContentModel=null},"Dispose the designer content editor")};s.prototype.unsubscribeFromEvent=function(t,e){if(!i.isNullOrUndefined(e)){this.eventBroker.unsubscribe(t,e);e=null}};s.prototype.onBlockCleanupRequested=function(t){var e=this;var n=t.block;this.blockControllers.each(function(t){e.executionContext.tryExecute(function(){t.cleanupBlocks(n)},t.getName()+" cleanup block",true)});t.onAfterBlockCleanup(n)};s.prototype.onBlockAdded=function(e){var n=this;var t=e.block;this.blockControllers.each(function(t){n.executionContext.tryExecute(function(){t.setupBlocks(e.block)},t.getName()+" setup blocks",true)});t.focusin()};s.prototype.onBlockMoved=function(t){setTimeout(function(){l.BlockProvider.getEditableElement(t.block).focus()},0)};s.prototype.onBlockDeleted=function(e){var n=this;this.blockControllers.each(function(t){n.executionContext.tryExecute(function(){t.disposeBlocks(e.block)},t.getName()+" dispose blocks")})};s.prototype.getDesignerStylesElement=function(){return $("<style>").attr("id",l.DesignerContentEditorStyles.designerStylesId).text(l.DesignerContentEditorStyles.designerStyles)};s.prototype.setMaxHeightOnDesignerTabContent=function(){var t=this.getElement();var e=t.siblings(l.CommonUtils.getClassSelector(l.CommonConstants.designerTabViewCssClass));if(this.isFullscreen){e.css("max-height",a.Empty)}else{var n=t.siblings(l.CommonUtils.getClassSelector(l.CommonConstants.designerTabButtonViewCssClass)).outerHeight(true);if(n!==0){e.css("max-height",this.initialHeight-n)}}if(l.CommonUtils.isIOS()){this.resizeIFrame($("."+l.CommonConstants.designerContentEditorFrameClassName).get(0))}};s.prototype.getCustomCkEditorStylesElement=function(){return $("<style>").attr("id",l.DesignerContentEditorStyles.ckEditorStylesId).text(l.DesignerContentEditorStyles.ckEditorStyles)};s.safeDocumentDoctype="<!DOCTYPE html>";return s}(l.Control);l.DesignerContentEditor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var t=function(){function t(){}t.prototype.render=function(t,e){t.addClass(e.cssClass);var n=$("<table></table>");n.attr("role","presentation");var o=$("<tbody></tbody>");e.components.each(function(t){var n=$("<tr></tr>");t.each(function(t){var e=$("<td></td>");e.addClass(t.cssClass);i.CommonUtils.setId(e,t.id);n.append(e)});o.append(n)});n.append(o);t.append(n)};t.prototype.dispose=function(){};return t}();i.LayoutRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){var t=function(r){__extends(t,r);function t(t,e,n,o){var i=r.call(this,t)||this;i.controls=e;i.layoutRenderer=n;i.layoutConfiguration=o;return i}t.prototype.init=function(e){this.layoutRenderer.render(n.CommonUtils.getById(this.id),this.layoutConfiguration);this.controls.each(function(t){return t.init(e)})};t.prototype.activate=function(){r.prototype.activate.call(this);this.controls.each(function(t){return t.activate()})};t.prototype.deactivate=function(){r.prototype.deactivate.call(this);this.controls.each(function(t){return t.deactivate()})};t.prototype.dispose=function(){this.controls.each(function(t){return t.dispose()})};return t}(n.Control);n.ComposeControl=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t,e,n,o,i,r,a,s,l){if(l===void 0){l=true}this.tabContentElementId=e;this.tabContentActivateAction=o;this.tabContentElementStyle=a;this.tabContentElementDataId=s;this.tabContentDisposeAction=r;this.tabContentDeactivateAction=i;this.tabContentInitAction=n;this.caption=t;this.enabled=l}t.prototype.init=function(){this.tabContentInitAction()};t.prototype.activate=function(){this.tabContentActivateAction()};t.prototype.enable=function(){this.enabled=true};t.prototype.disable=function(){this.enabled=false};t.prototype.isEnabled=function(){return this.enabled};t.prototype.deactivate=function(){this.tabContentDeactivateAction()};t.prototype.dispose=function(){this.tabContentDisposeAction()};return t}();t.TabControlItem=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(d){var l=MktSvc.Controls.Common.Object;var e=MktSvc.Controls.Common.String;var a=MktSvc.Controls.Common.KeyCodes;var t=function(s){__extends(r,s);function r(t,e,n,o,i,r){if(r===void 0){r=true}var a=s.call(this,t)||this;a.internalTabulationEnabled=r;a.tabsPanels=[];a.activateRenderedControlTab=function(t){var e=t.viewId;if(a.tabItems.where(function(t){return t.tabContentElementId===e}).count()===0){return}a.activateTabById(e)};a.updateTabVisibility=function(){a.tabItems.each(function(t){t.isEnabled()?a.showTab(t):a.hideTab(t)});if(!a.selectedTabIsVisible()){a.activateTabById(a.getFirstVisibleTab().tabContentElementId)}};a.tabItems=e;a.executionContext=n;if(!l.isNullOrUndefined(o)){a.tabButtonsContainerId=o}if(!l.isNullOrUndefined(i)){a.tabVisibilityManager=i}return a}r.prototype.init=function(t){var n=this;if(!l.isNullOrUndefined(this.tabVisibilityManager)){this.tabVisibilityManager.init(this.updateTabVisibility)}this.eventBroker=t;this.renderContainer();this.initializeControl();this.tabs.on(r.tabActivatedEventName,function(t,e){n.activateSelectedTab(t,e)});if(d.CommonUtils.isVisible(this.getElement())){this.activateFirstTab()}t.subscribe(d.EventConstants.controlRendered,this.activateRenderedControlTab);if(!this.onFocusFirstElement){t.subscribe(d.DesignerInternalEventConstants.designerReady,this.onFocusFirstElement=function(){if(n.executionContext.isFocused()){n.focusFirstElement()}})}};r.prototype.activate=function(){s.prototype.activate.call(this);var n=this.getSelectedTabIndex();this.tabItems.each(function(t,e){if(e===n){t.activate()}else{t.deactivate()}})};r.prototype.deactivate=function(){s.prototype.deactivate.call(this);this.tabItems.each(function(t){t.deactivate()})};r.prototype.dispose=function(){var e=this;this.executionContext.tryExecute(function(){if(e.eventBroker){e.eventBroker.unsubscribe(d.EventConstants.controlRendered,e.activateRenderedControlTab);if(e.onFocusFirstElement){e.eventBroker.unsubscribe(d.DesignerInternalEventConstants.designerReady,e.onFocusFirstElement)}}e.onFocusFirstElement=null;e.tabItems.each(function(t){t.dispose()});if(e.tabs){e.tabs.tabs("destroy");e.tabs.off();if(e.tabsContainer){e.tabsContainer.removeData();e.tabsContainer.remove();e.tabsContainer=null}if(e.tabsPanels){for(var t=0;t<e.tabsPanels.length;t++){e.tabsPanels[t].remove();e.tabsPanels[t]=null}e.tabsPanels=[]}e.getElement().empty();e.tabs.remove();e.tabs=null;e.tabItems=null}},"Dispose the tabs")};r.prototype.setupKeyboardNavigation=function(o){var i=this;o.on("keydown",function(t){var e=t.which||t.keyCode;var n;if(i.internalTabulationEnabled&&e===a.Tab&&t.shiftKey){n=o.length===0?i.tabsContainer.children("li").last():o.prevAll(":visible").first();if(n.length===0){return}else{t.preventDefault();t.stopImmediatePropagation();i.focusNextElement(n);return}}if(i.internalTabulationEnabled&&e===a.Tab){n=o.length===0?i.tabsContainer.children("li").first():o.nextAll(":visible").first();if(n.length===0){return}else{t.preventDefault();t.stopImmediatePropagation();i.focusNextElement(n);return}}if(e===a.Up||e===a.Down||e===a.Left||e===a.Right){t.stopImmediatePropagation();t.preventDefault()}if(e===a.Up||e===a.Left){n=o.length===0?i.tabsContainer.children("li").last():o.prevAll(":visible").first();i.focusNextElement(n);return}if(e===a.Right||e===a.Down){n=o.length===0?i.tabsContainer.children("li").first():o.nextAll(":visible").first();i.focusNextElement(n);return}if(e===a.Enter){o.children(r.designerTabContainerSelector).click()}})};r.prototype.focusNextElement=function(t){if(d.CommonUtils.isEdge()){t.children("."+d.CommonConstants.designerTabContainer).focus()}else{t.focus()}};r.prototype.renderContainer=function(){var t=this.getElement();t.hide();this.tabsContainer=$("<ul>");this.tabsPanels=this.renderTabsPanel();t.append(this.tabsContainer);t.append(this.tabsPanels)};r.prototype.initializeControl=function(){var e=this;this.tabs=this.getElement().tabs();if(!l.isNullOrUndefined(this.tabButtonsContainerId)){d.CommonUtils.getById(this.tabButtonsContainerId).append(this.tabsContainer)}this.getElement().show();this.tabItems.each(function(t){if(!l.isNullOrUndefined(e.tabVisibilityManager)){e.hideTab(t)}t.init()})};r.prototype.activateSelectedTab=function(t,e){var n=e.newPanel;var o=n.attr("id");if(this.tabItems.where(function(t){return t.tabContentElementId===o}).count()===0){return}this.tabItems.each(function(t){if(t.tabContentElementId===o){t.activate()}else{t.deactivate()}});this.eventBroker.notify(d.TabControlEventConstants.tabsStateUpdated)};r.prototype.activateTabById=function(t){var e=this.getTabButton(t).index();if(e!==-1){this.tabs.tabs("option","active",e)}};r.prototype.renderTabsPanel=function(){var s=this;var l=[];var c=[];this.tabItems.each(function(e,t){var n=$("<li/>");var o=$("<a/>");o.attr("href","#"+e.tabContentElementId);if(e.tabContentElementDataId&&e.tabContentElementDataId!==""){o.attr(d.Contract.dataIdAttrName,e.tabContentElementDataId)}o.addClass(d.CommonConstants.designerTabAnchor);var i=$("<div/>");i.attr("role","tab");i.attr("tabindex","-1");i.addClass(d.CommonConstants.designerTabContainer);i.click(function(t){s.activateTabById(e.tabContentElementId)});var r=$("<span/>");r.addClass(d.CommonConstants.designerTabPaneLabel+" ellipsis");i.append(r);n.append(i);n.append(o);if(t==0){i.attr("aria-selected","true");n.attr("aria-selected","true")}n.find("."+d.CommonConstants.designerTabPaneLabel).attr("title",e.caption).text(e.caption);n.on("click",function(t){t.preventDefault();t.stopImmediatePropagation();c.forEach(function(t){t.attr("aria-selected","false");t.children("."+d.CommonConstants.designerTabContainer).attr("aria-selected","false")});i.attr("aria-selected","true");n.attr("aria-selected","true")});c.push(n);s.setupKeyboardNavigation(n);s.tabsContainer.append(n);var a=$('<div id="'+e.tabContentElementId+'"></div>');if(e.tabContentElementStyle){n.find("div").addClass(d.CommonConstants.tabButtonPreClassName+e.tabContentElementStyle);a.addClass(e.tabContentElementStyle)}l.push(a)});return l};r.prototype.activateFirstTab=function(){var t=this.tabItems.firstOrDefault();if(!l.isNullOrUndefined(t)){t.activate()}};r.prototype.showTab=function(t){var e=this.getTabButton(t.tabContentElementId);var n=e.index();if(n!==-1){if(n===this.getSelectedTabIndex()){d.CommonUtils.getById(t.tabContentElementId).show()}e.show()}};r.prototype.hideTab=function(t){var e=this.getTabButton(t.tabContentElementId);var n=e.index();if(n!==-1){d.CommonUtils.getById(t.tabContentElementId).hide();e.hide()}};r.prototype.getTabButton=function(t){return $(e.Format("[aria-controls={0}]",t))};r.prototype.getSelectedTabIndex=function(){return this.tabs.tabs("option","active")};r.prototype.selectedTabIsVisible=function(){return this.tabItems.items()[this.getSelectedTabIndex()].isEnabled()};r.prototype.getTabIndex=function(t){return this.getTabButton(t).index()};r.prototype.getFirstVisibleTab=function(){var e=[];this.tabItems.each(function(t){if(t.isEnabled()){e.push(t)}});return e[0]};r.prototype.focusFirstElement=function(){var t=this.tabsContainer.find("li:visible:first a");if(t.length!==0&&this.tabsContainer.parent().is(".menuBar")){$(t).focus();this.eventBroker.unsubscribe(d.DesignerInternalEventConstants.designerReady,this.onFocusFirstElement);this.onFocusFirstElement=null}};r.tabActivatedEventName="tabsactivate";r.designerTabContainerSelector="."+d.CommonConstants.designerTabContainer;return r}(d.Control);d.TabControl=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}return t}();t.ImageData=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.prototype.getAttributes=function(){return{href:this.href}};return t}();t.LinkData=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(d){"use strict";var n=MktSvc.Controls.Common.Object;var u=MktSvc.Controls.Common.DelayScheduler;var e=MktSvc.Controls.Common.KeyboardCommand;var o=MktSvc.Controls.Common.KeyboardKeyCodes;var i=MktSvc.Controls.Common.KeyboardModifierType;var t=function(){function t(t,e,n,o,i,r,a,s,l){var c=this;this.isFullscreen=false;this.onMaximizeExecuted=function(t){c.isFullscreen=t.isFullscreen};this.controls=o;this.layoutRenderer=e;this.layoutConfiguration=n;this.eventBroker=i;this.undoRedoManager=s;this.editorContentModel=r;this.keyboardCommandManager=a;this.executionContext=t;this.accessibilityInstructionsPopup=l;d.CommonUtils.localizationProvider=t.getLocalizationProvider();u.defaultSchedulerDelay=t.getDelaySchedulerTime()}t.prototype.init=function(t){var e=this;this.container=t;this.keyboardCommandManager.init(t);this.layoutRenderer.render(t,this.layoutConfiguration);this.controls.each(function(t){return t.init(e.eventBroker)});this.editorContentModel.init();this.undoRedoManager.init(this);this.regsterGlobalShortcuts();this.registerGlobalKeyEvent();this.eventBroker.subscribe(d.EventConstants.maximizeExecuted,this.onMaximizeExecuted);if(d.CommonUtils.isIOS()&&n.isNullOrUndefined(this.onEditorVisibilityChanged)){this.eventBroker.subscribe(d.EventConstants.editorVisibilityChanged,this.onEditorVisibilityChanged=function(t){if(t.isVisible){e.container.click();e.eventBroker.unsubscribe(d.EventConstants.editorVisibilityChanged,e.onEditorVisibilityChanged)}})}};t.prototype.setContent=function(n,o){var i=this;this.editorContentModel.setContent(n,o,"editorControl",function(t){if(t){var e=new d.ContentChangedEventArgs(n,o);i.eventBroker.notify(d.EventConstants.contentChanged,e)}})};t.prototype.getContent=function(){return this.editorContentModel.getContent()};t.prototype.getEventBroker=function(){return this.eventBroker};t.prototype.regsterGlobalShortcuts=function(){var t=this;this.keyboardCommandManager.registerCommand(new e(o.zeroKey,[i.Alt],function(){t.accessibilityInstructionsPopup.show()}))};t.prototype.registerGlobalKeyEvent=function(){var e=this;if(!this.onKeyUpEventFired){$(document).on("keyup",this.onKeyUpEventFired=function(t){if(e.isFullscreen&&t.keyCode===MktSvc.Controls.Common.KeyCodes.Tab&&!e.isActiveElementInsideControl()){if(t.shiftKey){e.getTabbableElements().last().focus()}else{e.getTabbableElements().first().focus()}}})}};t.prototype.isActiveElementInsideControl=function(){return this.container.has(document.activeElement).length>0};t.prototype.getTabbableElements=function(){return this.container.find(":tabbable")};t.prototype.dispose=function(){var t=this;this.executionContext.tryExecute(function(){if(t.onEditorVisibilityChanged){t.eventBroker.unsubscribe(d.EventConstants.editorVisibilityChanged,t.onEditorVisibilityChanged)}if(t.onKeyUpEventFired){$(document).off("keyup",t.onKeyUpEventFired)}t.eventBroker.unsubscribe(d.EventConstants.maximizeExecuted,t.onMaximizeExecuted);t.accessibilityInstructionsPopup.dispose();t.layoutRenderer.dispose();t.controls.each(function(t){return t.dispose()});t.undoRedoManager.dispose();t.editorContentModel.dispose();t.keyboardCommandManager.dispose();t.eventBroker.dispose()},"Dispose the editor control");this.executionContext.dispose();if(this.container){this.container.empty()}this.container=null;this.controls=null;this.layoutRenderer=null;this.layoutConfiguration=null;this.undoRedoManager=null;this.editorContentModel=null;this.keyboardCommandManager=null;this.eventBroker=null;this.executionContext=null;this.onEditorVisibilityChanged=null;this.onKeyUpEventFired=null};t.editorContolInitCollection="Editor Init";return t}();d.EditorControl=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var t=function(n){__extends(o,n);function o(t){var e=n.call(this,t)||this;e.id=t;return e}o.prototype.init=function(){};o.prototype.activate=function(){n.prototype.activate.call(this);this.render()};o.prototype.dispose=function(){this.getElement().empty()};o.prototype.render=function(){if(this.isActive){var t=this.getElement().empty();var e=$("<p>").text(i.CommonUtils.getOfflineLocalizedString(o.offlineErrorMessage)).addClass(i.CommonConstants.editorReadonlyTitleClassName);t.append(e)}};o.offlineErrorMessage="[OfflineErrorMessage]";return o}(i.Control);i.OfflineNotSupportedPreviewView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(d){"use strict";var t=function(o){__extends(c,o);function c(t,e){var n=o.call(this,t)||this;n.isDirty=true;n.previewResizePostMessageDelay=100;n.contentChangedHandler=function(t){if(n.html===t.html){return}n.getElement().empty();n.setContent(t.html)};n.id=t;n.executionContext=e;n.contentSanitizer=e.getContentSanitizer();return n}c.prototype.init=function(t){this.eventBroker=t;this.eventBroker.subscribe(d.EventConstants.contentResolved,this.contentChangedHandler)};c.prototype.activate=function(){o.prototype.activate.call(this);this.render()};c.prototype.dispose=function(){if(this.eventBroker){this.eventBroker.unsubscribe(d.EventConstants.contentResolved,this.contentChangedHandler)}$(window).off("resize",this.setPreviewContentSize);$(this.iframe).off();$(this.iframe).remove();this.iframe=null;this.getElement().empty()};c.prototype.setContent=function(t){this.html=t;this.refreshView()};c.prototype.render=function(){if(this.isActive&&this.isDirty){this.setupContent(this.html)}};c.prototype.onContentSetupCompleted=function(){this.isDirty=false;this.eventBroker.notify(d.EventConstants.controlRendered,new d.ControlRenderedEventArgs(this.id))};c.prototype.setupContent=function(t){var n=this;var e=this.getElement().empty();var o=document.createElement("iframe");$(o).addClass(d.BrowserPreviewConstants.browserPreviewFrameClassName).addClass(d.BrowserPreviewConstants.tabletPortraitPreviewCssClass);var i=$("<div>").addClass(d.BrowserPreviewConstants.browserPreviewFrameContainerCssClass).addClass(d.BrowserPreviewConstants.tabletPortraitPreviewCssClass).addClass(d.BrowserPreviewConstants.lightweightMode);var r=$("<div>").addClass(d.BrowserPreviewConstants.browserPreviewFrameBorderClassName).addClass(d.BrowserPreviewConstants.tabletPortraitPreviewCssClass);d.CommonUtils.setTabIndex(r,0);if(d.CommonUtils.isIOS()){i.addClass(d.CommonConstants.iosScrollClassName)}var a=$("<div>").addClass(d.BrowserPreviewConstants.browserPreviewContentCssClass);var s=$("<span>").addClass(d.BrowserPreviewConstants.browserPreviewContentTitleCssClass).addClass(d.BrowserPreviewConstants.browserPreviewContentTitleWarningCssClass).text(d.CommonUtils.getOfflineLocalizedString(c.offlineWarningMessage));i.append(r);a.append(s);a.append(i);e.append(a);r.append($(o));$(window).on("resize",this.setPreviewContentSize);this.setPreviewContentSize();var l=this.executionContext.getLocalizationProvider().isRtl();this.contentSanitizer.init(function(){n.contentSanitizer.getSanitizedContent(t,function(t){var e=d.CommonUtils.getByClass(d.BrowserPreviewConstants.browserPreviewFrameClassName).get(0);if(e){d.CommonUtils.writeFrameContent(e,t.html());e.tabIndex=-1;$(t).remove();if(l){d.CommonUtils.getBySelector("html",$(o).contents()).attr("dir","rtl")}setTimeout(function(){if(n.iframe&&n.iframe.contentDocument&&n.iframe.contentDocument.body){var t=n.iframe.contentDocument.body.getClientRects()[0].top+n.iframe.contentDocument.body.getClientRects()[0].bottom;n.resizeIframe(t)}},n.previewResizePostMessageDelay);$(n.iframe).contents().find("img").each(function(t,e){$(e).one("load",function(){var t=n.iframe.contentDocument.body.getClientRects()[0].top+n.iframe.contentDocument.body.getClientRects()[0].bottom;n.resizeIframe(t)})});n.onContentSetupCompleted()}})})};c.prototype.setPreviewContentSize=function(){var t=$("."+d.BrowserPreviewConstants.browserPreviewFrameContainerCssClass+":visible");var e=$("."+d.BrowserPreviewConstants.browserPreviewContentTitleCssClass+":visible");if(t.length){e.width(t.width()-50)}};c.prototype.resizeIframe=function(t){if(t===$(this.iframe).height()){return}var e=$("."+d.BrowserPreviewConstants.browserPreviewFrameBorderClassName+":visible");var n=e.innerHeight()-e.height()+(e.outerHeight()-e.innerHeight())+($(this.iframe).outerHeight()-$(this.iframe).innerHeight());var o=$("."+d.BrowserPreviewConstants.browserPreviewFrameContainerCssClass+":visible").height()-n;if(o<t){$(this.iframe).height(t)}else{$(this.iframe).height(o)}};c.prototype.refreshView=function(){this.isDirty=true;if(this.isActive){this.render()}};c.offlineWarningMessage="[OfflineWarningMessage]";return c}(d.Control);d.OfflineBrowserPreviewView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t,e){this.titleDescription=t;this.icons=e}return t}();t.HeaderItemDescription=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t,e,n,o,i){this.src=t;this.cssClass=e;this.cssClassForIframe=n;this.altTextForImage=o;this.title=i}return t}();t.IconDescription=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t,e){this.title=t;this.cssClass=e}return t}();t.TitleDescription=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(d){"use strict";var u=MktSvc.Controls.Common.Object;var a=MktSvc.Controls.Common.String;var e=MktSvc.Controls.Common.KeyboardCommand;var n=MktSvc.Controls.Common.KeyboardKeyCodes;var o=MktSvc.Controls.Common.KeyboardModifierType;var t=function(c){__extends(t,c);function t(t,e,n,o,i,r,a,s){var l=c.call(this,t)||this;l.enterKeyCode=13;l.isDirty=true;l.sandboxAttributes="allow-scripts";l.setRtlMessage="setRtl";l.getHeightMessage="getHeight";l.setHeightMessage="setHeight";l.setContentMessage="setContent";l.previewResizePostMessageDelay=100;l.onIconSelected=function(t,e){l.changeBrowserPreviewIframeCssClasses(t.cssClassForIframe,e);l.changeActiveIcon(t.cssClass);l.changeIFrameHeight();l.eventBroker.notify(d.EventConstants.basicPreviewModeSwitched)};l.contentChangedHandler=function(t){if(t.sourceId===d.BrowserPreviewConstants.lightweightMode){l.getElement().empty();l.setContent(t.html);return}if(!l.documentContentModel){return}var e=d.CommonUtils.getNewContentDocument(t.html);l.documentContentModel.runPostProcessors(e,d.CommonConstants.browserPreviewComponentName).done(function(){var t=d.CommonUtils.getDocumentContent(e);if(l.html===t){return}l.getElement().empty();l.setContent(t)})};l.refreshView=function(){l.isDirty=true;if(l.isActive){l.loadingModal.addLoadingModal();l.render()}};l.onContentModelInitialized=function(t){l.documentContentModel=t.documentContentModel};l.defaultIcon=a||new d.IconDescription(d.BrowserPreviewConstants.tabletPortraitIcon,d.BrowserPreviewConstants.tabletPortraitPreviewIconCssClass,d.BrowserPreviewConstants.tabletPortraitPreviewCssClass,d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.tabletPortraitPreviewIconAltText),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.tabletPortraitPreviewIconTitle));l.id=t;l.showHeader=e;l.loadingModal=n;l.keyboardCommandManager=o;l.basicPreviewProvider=r;l.executionContext=i;l.contentSanitizer=i.getContentSanitizer();l.accessibilityInstructions=s;return l}t.prototype.init=function(t){this.eventBroker=t;this.eventBroker.subscribe(d.EventConstants.contentModelInitialized,this.onContentModelInitialized);this.eventBroker.subscribe(d.EventConstants.contentResolved,this.contentChangedHandler);this.registerKeyboardShortcuts();if(!u.isNullOrUndefined(this.basicPreviewProvider)){this.basicPreviewProvider.init(t,this.refreshView)}this.loadingModal.init(this.getElement(),this.eventBroker);this.activeIcon=this.defaultIcon};t.prototype.activate=function(){var t=this;this.loadingModal.addLoadingModal();c.prototype.activate.call(this);if(!u.isNullOrUndefined(this.basicPreviewProvider)){this.basicPreviewProvider.getProviderReadyPromise().done(function(){t.loadingModal.hide();t.render()})}else{this.render()}d.AccessibilityInstructionsPopup.accessibilityInstructions=this.accessibilityInstructions||d.EditorAccessibilityInstructions.basePreviewAccessibilityInstructions};t.prototype.dispose=function(){if(this.eventBroker){this.eventBroker.unsubscribe(d.EventConstants.contentResolved,this.contentChangedHandler);this.eventBroker.unsubscribe(d.EventConstants.contentModelInitialized,this.onContentModelInitialized)}if(this.basicPreviewProvider){this.basicPreviewProvider.dispose()}if(this.onWindowSizeChanged){$(window).off("resize",this.onWindowSizeChanged)}if(this.onMessageReceived){window.removeEventListener("message",this.onMessageReceived);this.onMessageReceived=null}this.onWindowSizeChanged=null;$(this.iframe).off();$(this.iframe).remove();this.iframe=null;this.loadingModal.dispose();this.getElement().empty()};t.prototype.setContent=function(t){this.html=t;this.refreshView()};t.prototype.render=function(){var e=this;if(this.isActive&&this.isDirty){if(!MktSvc.Controls.Common.Object.isNullOrUndefined(this.basicPreviewProvider)){this.basicPreviewProvider.resolveMessageTemplate(this.html,function(t){e.setupContent(t,function(){return e.onContentSetupCompleted()})})}else{this.setupContent(this.html,function(){return e.onContentSetupCompleted()})}}};t.prototype.onContentSetupCompleted=function(){this.isDirty=false;this.eventBroker.notify(d.EventConstants.controlRendered,new d.ControlRenderedEventArgs(this.id));this.eventBroker.notify(d.EventConstants.browserPreviewReady,new d.ControlRenderedEventArgs(this.id))};t.prototype.setupContent=function(t,n){var o=this;var e=this.getElement().empty();this.iframe=document.createElement("iframe");var i=$(this.iframe);i.find("html").attr("lang",this.executionContext.getLocalizationProvider().getLanguageName());i.addClass(d.BrowserPreviewConstants.browserPreviewFrameClassName).addClass(this.activeIcon.cssClassForIframe);var r=$("<div>").addClass(d.BrowserPreviewConstants.browserPreviewFrameContainerCssClass).addClass(this.activeIcon.cssClassForIframe).addClass(this.showHeader?d.BrowserPreviewConstants.editorMode:d.BrowserPreviewConstants.lightweightMode);var a=$("<div>").addClass(d.BrowserPreviewConstants.browserPreviewFrameBorderClassName).addClass(this.activeIcon.cssClassForIframe);d.CommonUtils.setTabIndex(a,0);if(d.CommonUtils.isIOS()){r.addClass(d.CommonConstants.iosScrollClassName)}if(this.showHeader){e.append(this.createHeaderElements())}var s=$("<div>").addClass(d.BrowserPreviewConstants.browserPreviewContentCssClass);var l=$("<span>").addClass(d.BrowserPreviewConstants.browserPreviewContentTitleCssClass).text(d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.browserPreviewContentTitle));r.append(a);s.append(l);s.append(r);e.append(s);if(!this.onWindowSizeChanged){$(window).on("resize",this.onWindowSizeChanged=function(){o.setPreviewContentSize()})}this.setPreviewContentSize();if(u.isNullOrUndefined(t)){return}if(this.executionContext.shouldPreviewBeSanitized()){this.contentSanitizer.init(function(){o.contentSanitizer.getSanitizedContent(t,function(t){var e=t.html();o.applyContent(e,a,n)})})}else{this.applyContent(t,a,n)}};t.prototype.applyContent=function(t,e,n){var o=this;var i=this.executionContext.getLocalizationProvider().isRtl();if(this.executionContext.isSandboxed()){if(a.isNullUndefinedOrWhitespace(this.executionContext.getBasePath())){this.executionContext.getLogger().log(MktSvc.Controls.Common.TraceLevel.Error,"Editor.BrowserPreviewView.pathNotSet",new MktSvc.Controls.Common.Dictionary({Message:"Cdn Path is null or undefined"}))}else{var r=this.executionContext.getBasePath();$(this.iframe).on("load",function(){o.iframe.contentWindow.postMessage(new d.BrowserPreviewMessage(o.setContentMessage,t),"*");if(i){o.iframe.contentWindow.postMessage(new d.BrowserPreviewMessage(o.setRtlMessage,a.Empty),"*")}if(!o.onMessageReceived){window.addEventListener("message",o.onMessageReceived=function(t){if(t.origin==="null"||t.origin===d.CommonUtils.getDomainFromUrl(r)){if(!t.data||!t.data.message){return}var e=t.data;if(e&&e.message===o.setHeightMessage&&e.content){var n=parseFloat(MktSvcCommon.HtmlEncode.encode(e.content));o.resizeIframe(n)}}})}o.changeIFrameHeight();n()});this.iframe.sandbox=this.sandboxAttributes;this.iframe.src=r+"/Preview/browserPreivewFrame.html";this.iframe.tabIndex=-1;e.append($(this.iframe))}}else{$(this.iframe).on("load",function(){d.CommonUtils.writeFrameContent(o.iframe,t);o.iframe.tabIndex=-1;if(i){d.CommonUtils.getBySelector("html",$(o.iframe).contents()).attr("dir","rtl")}o.changeIFrameHeight();n()});e.append($(this.iframe))}};t.prototype.changeIFrameHeight=function(){var n=this;if(this.executionContext.isSandboxed()){setTimeout(function(){if(n.iframe&&n.iframe.contentWindow){n.iframe.contentWindow.postMessage(new d.BrowserPreviewMessage(n.getHeightMessage,a.Empty),"*")}},this.previewResizePostMessageDelay)}else{setTimeout(function(){if(n.iframe&&n.iframe.contentDocument&&n.iframe.contentDocument.body){var t=n.iframe.contentDocument.body.getClientRects()[0].top+n.iframe.contentDocument.body.getClientRects()[0].bottom;n.resizeIframe(t)}},this.previewResizePostMessageDelay);$(this.iframe).contents().find("img").each(function(t,e){$(e).one("load",function(){var t=n.iframe.contentDocument.body.getClientRects()[0].top+n.iframe.contentDocument.body.getClientRects()[0].bottom;n.resizeIframe(t)})})}};t.prototype.resizeIframe=function(t){var e=$("."+d.BrowserPreviewConstants.browserPreviewFrameBorderClassName+":visible");var n=e.innerHeight()-e.height()+(e.outerHeight()-e.innerHeight())+($(this.iframe).outerHeight()-$(this.iframe).innerHeight());var o=$("."+d.BrowserPreviewConstants.browserPreviewFrameContainerCssClass+":visible").height()-n;if(o<t){if(t!==$(this.iframe).height()){$(this.iframe).height(t)}}else{$(this.iframe).height(o)}this.eventBroker.notify(d.EventConstants.previewSizeChanged)};t.prototype.changeBrowserPreviewIframeCssClasses=function(t,e){this.getElement().find(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.browserPreviewFrameClassName)).removeClass(e).addClass(t);this.getElement().find(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.browserPreviewFrameBorderClassName)).removeClass(e).addClass(t);this.getElement().find(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.browserPreviewFrameContainerCssClass)).removeClass(e).addClass(t)};t.prototype.setPreviewContentSize=function(){var t=$("."+d.BrowserPreviewConstants.browserPreviewFrameContainerCssClass+":visible");var e=$("."+d.BrowserPreviewConstants.browserPreviewContentTitleCssClass+":visible");if(t.length){e.width(t.width()-50);if(this.showHeader){var n=t.position().top+(t.innerHeight()-t.height());t.css("height","calc(100% - "+n+"px)")}}};t.prototype.changeActiveIcon=function(t){var e=this.getElement().find(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.headerIconCssClass));var n=e.filter(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.activeCssClass));var o=a.Format("{0}. {1} {2}",n.parent().attr("title"),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.ariaNotSelected),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.ariaOptionToActivate));n.parent().attr("aria-label",o);e.removeClass(d.BrowserPreviewConstants.activeCssClass);var i=e.filter(d.CommonUtils.getClassSelector(t)).addClass(d.BrowserPreviewConstants.activeCssClass);var r=a.Format("{0}. {1}",i.parent().attr("title"),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.ariaSelected));i.parent().attr("aria-label",r)};t.prototype.createHeaderElements=function(){var t=this.getHeaderPreviewTypesDescription();return this.createHeaderColumn(t)};t.prototype.createHeaderColumn=function(t){var i=this;var r=this.getAllPreviewTypeCssClassesForIframe(t);var e=t.map(function(t){var e=$("<span>").addClass(d.BrowserPreviewConstants.headerTitleCssClass).addClass(t.titleDescription.cssClass).text(t.titleDescription.title);var n=t.icons.map(function(e){var t=$("<span>").addClass(d.BrowserPreviewConstants.headerIconCssClass).addClass(e.cssClass).addClass(d.CommonConstants.editorFontCssClass).attr("alt",e.altTextForImage);var n=$("<button>").addClass(d.BrowserPreviewConstants.previewButtonContainerCssClass).attr("title",e.title).attr("type",d.CommonConstants.buttonType).keypress(function(t){if(t.which===i.enterKeyCode){i.onIconSelected(e,r);i.activeIcon=e}}).on("click",function(){i.onIconSelected(e,r);i.activeIcon=e}).append(t);var o=a.Format("{0}. {1} {2}",e.title,d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.ariaNotSelected),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.ariaOptionToActivate));d.CommonUtils.setAriaAttribute(n,"aria-label",o);return n}).reduce(function(t,e){return t.add(e)});var o=$("<div>").addClass(d.BrowserPreviewConstants.headerIconButtonsContainerCssClass).append(n);return e.add(o)}).reduce(function(t,e){return t.add(i.createDivider()).add(e)});var n=a.Format("{0}. {1}",this.activeIcon.title,d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.ariaSelected));e.find(d.CommonUtils.getClassSelector(this.activeIcon.cssClass)).addClass(d.BrowserPreviewConstants.activeCssClass);e.find(d.CommonUtils.getClassSelector(this.activeIcon.cssClass)).attr("aria-label",n);return $("<div>").addClass(d.BrowserPreviewConstants.headerCssClass).append(e)};t.prototype.createDivider=function(){return $("<div>").addClass(d.BrowserPreviewConstants.headerDividerCssClass)};t.prototype.getAllPreviewTypeCssClassesForIframe=function(t){return t.map(function(t){return t.icons}).reduce(function(t,e){return t.concat(e)}).map(function(t){return t.cssClassForIframe}).join(" ")};t.prototype.getHeaderPreviewTypesDescription=function(){return[new d.HeaderItemDescription(new d.TitleDescription(d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.desktopTitle),d.BrowserPreviewConstants.desktopTitleCssClass),[new d.IconDescription(d.BrowserPreviewConstants.desktopIcon,d.BrowserPreviewConstants.desktopPreviewIconCssClass,d.BrowserPreviewConstants.desktopPreviewCssClass,d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.desktopPreviewIconAltText),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.desktopPreviewIconTitle))]),new d.HeaderItemDescription(new d.TitleDescription(d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.tabletTitle),d.BrowserPreviewConstants.tabletTitleCssClass),[new d.IconDescription(d.BrowserPreviewConstants.tabletPortraitIcon,d.BrowserPreviewConstants.tabletPortraitPreviewIconCssClass,d.BrowserPreviewConstants.tabletPortraitPreviewCssClass,d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.tabletPortraitPreviewIconAltText),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.tabletPortraitPreviewIconTitle)),new d.IconDescription(d.BrowserPreviewConstants.tabletLandscapeIcon,d.BrowserPreviewConstants.tabletLandscapePreviewIconCssClass,d.BrowserPreviewConstants.tabletLandscapePreviewCssClass,d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.tabletLandscapePreviewIconAltText),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.tabletLandscapePreviewIconTitle))]),new d.HeaderItemDescription(new d.TitleDescription(d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.mobileTitle),d.BrowserPreviewConstants.mobileTitleCssClass),[new d.IconDescription(d.BrowserPreviewConstants.mobilePortraitIcon,d.BrowserPreviewConstants.mobilePortraitPreviewIconCssClass,d.BrowserPreviewConstants.mobilePortraitPreviewCssClass,d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.mobilePortraitPreviewIconAltText),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.mobilePortraitPreviewIconTitle)),new d.IconDescription(d.BrowserPreviewConstants.mobileLandscapeIcon,d.BrowserPreviewConstants.mobileLandscapePreviewIconCssClass,d.BrowserPreviewConstants.mobileLandscapePreviewCssClass,d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.mobileLandscapePreviewIconAltText),d.CommonUtils.getLocalizedString(d.BrowserPreviewConstants.mobileLandscapePreviewIconTitle))])]};t.prototype.registerKeyboardShortcuts=function(){this.keyboardCommandManager.registerCommand(new e(n.bKey,[o.Alt],function(){$(d.CommonUtils.getClassSelector(d.CommonConstants.tabButtonPreClassName+d.CommonConstants.browserPreviewTabContentClassName)).focus().click()}));this.keyboardCommandManager.registerCommand(new e(n.threeKey,[o.Alt],function(){$(d.CommonUtils.getClassSelector(d.CommonConstants.tabButtonPreClassName+d.CommonConstants.previewViewClassName)).focus().click()}));this.keyboardCommandManager.registerCommand(new e(n.oneKey,[o.Alt,o.Control],function(){$(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.desktopPreviewIconCssClass)).focus().click()}));this.keyboardCommandManager.registerCommand(new e(n.twoKey,[o.Alt,o.Control],function(){$(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.tabletPortraitPreviewIconCssClass)).focus().click()}));this.keyboardCommandManager.registerCommand(new e(n.threeKey,[o.Alt,o.Control],function(){$(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.tabletLandscapePreviewIconCssClass)).focus().click()}));this.keyboardCommandManager.registerCommand(new e(n.fourKey,[o.Alt,o.Control],function(){$(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.mobilePortraitPreviewIconCssClass)).focus().click()}));this.keyboardCommandManager.registerCommand(new e(n.fiveKey,[o.Alt,o.Control],function(){$(d.CommonUtils.getClassSelector(d.BrowserPreviewConstants.mobileLandscapePreviewIconCssClass)).focus().click()}))};return t}(d.Control);d.BrowserPreviewView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(r){"use strict";var a=MktSvc.Controls.Common.Object;var e=MktSvc.Controls.Common.KeyboardCommand;var n=MktSvc.Controls.Common.KeyboardKeyCodes;var o=MktSvc.Controls.Common.KeyboardModifierType;var t=function(i){__extends(t,i);function t(t,e,n){var o=i.call(this,t)||this;o.onSelectionChanged=function(t){o.setupDetailsView(t);if(!a.isNullOrUndefined(o.blockDetailsView)){o.activate()}};o.onContentChanged=function(t){if(o.selectedBlock){if(r.CommonUtils.getById(r.CommonUtils.getId(o.selectedBlock)).length===0){o.cleanDetailsViewContent()}else{o.selectedBlock=r.CommonUtils.getById(r.CommonUtils.getId(o.selectedBlock));if(o.isActive){o.render(t.originalSourceId)}}}};o.blockDetailsViewMapping=e;o.keyboardCommandManager=n;return o}t.prototype.init=function(t){this.eventBroker=t;this.eventBroker.subscribe(r.DesignerInternalEventConstants.selectionChanged,this.onSelectionChanged);this.eventBroker.subscribe(r.EventConstants.contentChanged,this.onContentChanged);this.keyboardCommandManager.registerCommand(new e(n.fiveKey,[o.Alt],function(){$(r.CommonUtils.getClassSelector(r.CommonConstants.tabButtonPreClassName+r.CommonConstants.detailsTabContentClassName)).parent().focus();$(r.CommonUtils.getClassSelector(r.CommonConstants.tabButtonPreClassName+r.CommonConstants.detailsTabContentClassName)).click()}))};t.prototype.dispose=function(){if(!a.isNullOrUndefined(this.blockDetailsView)){this.blockDetailsView.dispose();this.blockDetailsView=null}this.eventBroker.unsubscribe(r.DesignerInternalEventConstants.selectionChanged,this.onSelectionChanged);this.eventBroker.unsubscribe(r.EventConstants.contentChanged,this.onContentChanged);this.blockDetailsViewMapping=null;this.keyboardCommandManager=null;this.selectedBlock=null;this.eventBroker=null};t.prototype.activate=function(){if(!this.isActive){i.prototype.activate.call(this)}if(!a.isNullOrUndefined(this.selectedBlock)&&r.CommonUtils.getById(r.CommonUtils.getId(this.selectedBlock)).length){this.render()}else{this.cleanDetailsViewContent()}};t.prototype.setupDetailsView=function(t){this.cleanDetailsViewContent();var e=t.blockDefinition;this.blockDetailsView=this.blockDetailsViewMapping.get(e.getType());this.selectedBlock=t.blockElement};t.prototype.render=function(t){if(!a.isNullOrUndefined(this.blockDetailsView)&&!a.isNullOrUndefined(this.selectedBlock)){if(t!==this.id&&t!==r.CommonUtils.getId(this.selectedBlock)){this.blockDetailsView.init(this.eventBroker,this.id);this.blockDetailsView.render(this.selectedBlock);this.eventBroker.notify(r.EventConstants.controlRendered,new r.ControlRenderedEventArgs(this.id))}}};t.prototype.cleanDetailsViewContent=function(){if(!a.isNullOrUndefined(this.blockDetailsView)){this.blockDetailsView.dispose()}this.blockDetailsView=this.selectedBlock=null};return t}(r.Control);r.DetailsView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(h){"use strict";var t=MktSvc.Controls.Common.ArrayQuery;var a=MktSvc.Controls.Common.Object;var d=MktSvc.Controls.Common.String;var g=MktSvc.Controls.Common.UniqueId;var u=MktSvc.Controls.Common.Dictionary;var i=MktSvc.Controls.Common.TraceLevel;var e=MktSvc.Controls.Common.KeyboardCommand;var n=MktSvc.Controls.Common.KeyboardKeyCodes;var o=MktSvc.Controls.Common.KeyboardModifierType;var l=MktSvc.Controls.Common.KeyCodes;var r=function(c){__extends(f,c);function f(t,e,n,o,i,r,a,s){var l=c.call(this,t)||this;l.toolboxId=t;l.tools=e;l.toolBlockMapping=n;l.keyboardAccessibilityManager=o;l.keyboardCommandManager=i;l.executionContext=r;l.sections=a;l.accessibleItemList=new Array;l.draggableSelector=d.Format("#{0} .{1}",t,h.CommonConstants.toolboxItemClassName);l.renderedToolIdToToolMapping=new u;l.ensureDefaultSection();l.setToolSectionMapping(s);l.keyboardCommandManager=i;return l}f.prototype.ensureDefaultSection=function(){this.sections=this.sections||new t([]);this.defaultSection=this.sections.firstOrDefault(function(t){return t.getName()===h.CommonConstants.toolboxDefaultSectionName});if(!this.defaultSection){this.defaultSection=new h.Section(h.CommonConstants.toolboxDefaultSectionName,h.CommonConstants.toolboxDefaultSectionLabel);this.sections=this.sections.clone().addAt(this.defaultSection,0)}};f.prototype.setToolSectionMapping=function(t){var n=this;this.toolSectionMapping=new u;if(t){t.getKeys().items().forEach(function(e){t.get(e).forEach(function(t){n.toolSectionMapping.addOrUpdate(t,e)})})}};f.prototype.init=function(t){this.eventBroker=t;this.keyboardAccessibilityManager.initialize(this);this.eventBroker.subscribe(h.EventConstants.onToolboxAccessibleContainerRendered,this.keyboardAccessibilityManager.onContainerRenderedHandler);this.eventBroker.subscribe(h.EventConstants.onToolboxAccessibleItemRendered,this.keyboardAccessibilityManager.onItemRenderedHandler);this.render();this.keyboardCommandManager.registerCommand(new e(n.fourKey,[o.Alt],function(){$(h.CommonUtils.getClassSelector(h.CommonConstants.tabButtonPreClassName+h.CommonConstants.toolboxTabContentClassName)).parent().focus();$(h.CommonUtils.getClassSelector(h.CommonConstants.tabButtonPreClassName+h.CommonConstants.toolboxTabContentClassName)).click()}))};f.prototype.activate=function(){c.prototype.activate.call(this)};f.prototype.getAllAccessibleItems=function(){return this.accessibleItemList};f.prototype.getSelectedAccesibleItem=function(){var t=document.activeElement;if($(t).hasClass(f.toolItemCellCssClass)){return t}else{return null}};f.prototype.dispose=function(){this.eventBroker.unsubscribe(h.EventConstants.sectionToolsPublishStarted,this.sectionToolsPublishStartedEventHandler);this.eventBroker.unsubscribe(h.EventConstants.sectionToolsPublishCompleted,this.sectionToolsPublishEndedEventHandler);this.eventBroker.unsubscribe(h.EventConstants.toolPublished,this.toolPublishedEventHandler);this.eventBroker.unsubscribe(h.DesignerInternalEventConstants.designerAddEnd,this.designerAddEndEventHandler);this.eventBroker.unsubscribe(h.EventConstants.onToolboxAccessibleContainerRendered,this.keyboardAccessibilityManager.onContainerRenderedHandler);this.eventBroker.unsubscribe(h.EventConstants.onToolboxAccessibleItemRendered,this.keyboardAccessibilityManager.onItemRenderedHandler);h.CommonUtils.getBySelector(this.draggableSelector).off("click dragstart");this.renderedToolIdToToolMapping=null;this.keyboardAccessibilityManager=null;this.keyboardCommandManager=null;this.sections=null;this.accessibleItemList=null};f.prototype.render=function(){h.CommonUtils.getById(this.toolboxId).empty().append(this.renderToolbox());this.setupSectionToolsPublishStartedEvent();this.setupSectionToolsPublishEndedEvent();this.setupToolPublishedEvent();this.eventBroker.notify(h.EventConstants.controlRendered,new h.ControlRenderedEventArgs(this.id))};f.prototype.setupSectionToolsPublishStartedEvent=function(){var e=this;this.sectionToolsPublishStartedEventHandler=function(t){e.setSectionIsLoading(t.getSectionName(),true)};this.eventBroker.subscribe(h.EventConstants.sectionToolsPublishStarted,this.sectionToolsPublishStartedEventHandler)};f.prototype.setupSectionToolsPublishEndedEvent=function(){var e=this;this.sectionToolsPublishEndedEventHandler=function(t){e.setSectionIsLoading(t.getSectionName(),false)};this.eventBroker.subscribe(h.EventConstants.sectionToolsPublishCompleted,this.sectionToolsPublishEndedEventHandler)};f.prototype.setupToolPublishedEvent=function(){var o=this;this.toolPublishedEventHandler=function(t){var e=t.getTool();var n=t.getSectionName()||o.defaultSection.getName();if(o.sections.where(function(t){return t.getName()===n}).count()===0){n=o.defaultSection.getName()}o.toolSectionMapping.addOrUpdate(e.getType(),n);o.renderTool(e);o.tools.add(e)};this.eventBroker.subscribe(h.EventConstants.toolPublished,this.toolPublishedEventHandler)};f.prototype.renderToolbox=function(){this.toolboxContainer=$("<div></div>").addClass(h.CommonConstants.contentViewBlocksClassName).addClass(h.CommonUtils.localizationProvider.isRtl()?h.CommonConstants.rightToLeftTextDirectionCssClass:h.CommonConstants.leftToRightTextDirectionCssClass);this.renderAllSections();this.renderTools();this.eventBroker.notify(h.EventConstants.onToolboxAccessibleContainerRendered,new h.ContainerRenderedEventArgs(this.toolboxContainer));return this.toolboxContainer};f.prototype.renderTools=function(){var e=this;this.tools.items().forEach(function(t){e.renderTool(t)})};f.prototype.renderTool=function(t){var e=this.toolSectionMapping.get(t.getType());var n;n=e?this.sections.firstOrDefault(function(t){return t.getName()===e}):this.defaultSection;if(a.isNullOrUndefined(n)){var o="No toolbox section name '"+e+"' was found for tool '"+t.getType()+"'.";this.executionContext.getLogger().log(i.Error,"Editor.ToolboxView.renderTool",new u({Message:o,SectionName:e,ToolType:t.getType()}));n=this.defaultSection}this.renderToolInSection(t,n);return true};f.prototype.renderToolInSection=function(t,e){var n=this.getOrRenderSection(e);var o=$("<span>").addClass(f.toolItemIconCssClass).addClass(h.CommonConstants.iconContainerCssClass).attr("draggable","false");var i=$("<span>").addClass(h.CommonConstants.editorFontCssClass).addClass(t.getCssClass()).addClass(h.CommonConstants.fontIconSizeCssClass).attr("draggable","false");o.append(i);var r=$("<span>").addClass(f.toolItemLabelCssClass).text(t.getLabel());var a=g.generate();var s=$("<div>").addClass(h.CommonConstants.toolboxItemClassName).attr("data-"+h.CommonConstants.toolboxItemTypeDataAttr,t.getType()).attr("data-"+h.CommonConstants.toolboxItemIdDataAttr,a);var l=$("<button>").addClass(h.CommonConstants.toolboxItemButtonCssClassName).attr("type",h.CommonConstants.buttonType).attr("title",t.getTitle()).append(o,r);s.append(l);var c=$("<div>").attr("title",t.getLabel()).addClass(f.toolItemCellCssClass).css("width",100/f.buttonsPerRow+"%").append(s);var d=this.getSectionToolsCount(e.getName());var u=n.find("."+f.toolItemRowCssClass+":last");if(u.length===0||d%f.buttonsPerRow===0){u=$("<div>").addClass(f.toolItemRowCssClass);n.find("."+h.CommonConstants.contentBlockItemsCssClass).append(u)}if(d===0){this.setSectionIsEmpty(e.getName(),false)}u.append(c);this.setupEventsOnTools(s);this.renderedToolIdToToolMapping.addOrUpdate(a,t);var m=function(){l.click()};var p=new h.ToolboxAccessibleItem(l,m);this.accessibleItemList.push(p);this.eventBroker.notify(h.EventConstants.onToolboxAccessibleItemRendered,new h.ElementRenderedEventArgs(p))};f.prototype.getOrRenderSection=function(t){var e=this.getSectionContainer(t.getName());if(e.length>0){return e}e=this.renderSection(t);return e};f.prototype.renderAllSections=function(){var e=this;this.sections.items().forEach(function(t){return e.renderSection(t)})};f.prototype.renderSection=function(t){var e=$("<div></div>").addClass(h.CommonConstants.treeViewCssClass);var n=$("<div>").addClass(h.CommonConstants.contentBlockItemsCssClass);e.append(n);var o=$("<span></span>").addClass(h.CommonConstants.extrasToggleCssClass).addClass(h.CommonConstants.editorFontCssClass);var i=$("<button></button>").attr("type",h.CommonConstants.buttonType).addClass(h.CommonConstants.propertiesTitleButtonCssClass).attr("aria-expanded","true");var r=$("<p></p>").addClass(h.CommonConstants.propertiesTitleCssClass).text(t.getLabel());i.append(r);var a=o.add(i).on("click",function(){e.toggle();o.toggleClass(h.CommonConstants.collapsedCssClass);i.attr("aria-expanded")==="true"?i.attr("aria-expanded","false"):i.attr("aria-expanded","true")});i.on("keypress",function(t){if(t.keyCode===l.Enter){a.click()}});var s=$("<div></div>").addClass(h.CommonConstants.contentBlockSectionCssClass).attr("data-"+h.CommonConstants.toolboxSectionNameDataAttr,t.getName()).append(a).append(e);this.toolboxContainer.append(s);this.setSectionIsEmpty(t.getName(),true);return s};f.prototype.setSectionIsEmpty=function(t,e){var n=this.getSectionContainer(t);if(n.length===0){n=this.getSectionContainer(h.CommonConstants.toolboxDefaultSectionName)}var o=n.find("."+h.CommonConstants.treeViewCssClass);n.removeClass(h.CommonConstants.contentBlockSectionEmptyCssClass);o.find("."+h.CommonConstants.contentBlockSectionEmptyMessageCssClass).remove();if(e){n.addClass(h.CommonConstants.contentBlockSectionEmptyCssClass);var i=$("<div></div>").addClass(h.CommonConstants.contentBlockSectionEmptyMessageCssClass).text(h.CommonUtils.getLocalizedString(h.CommonConstants.contentBlockSectionEmptyMessage));o.append(i)}return this};f.prototype.setSectionIsLoading=function(t,e){var n=this.getSectionContainer(t);if(n.length===0){n=this.getSectionContainer(h.CommonConstants.toolboxDefaultSectionName)}var o=n.find("."+h.CommonConstants.treeViewCssClass);n.removeClass(h.CommonConstants.contentBlockSectionLoadingCssClass);o.find("."+h.CommonConstants.contentBlockSectionLoadingMessageCssClass).remove();if(e){n.addClass(h.CommonConstants.contentBlockSectionLoadingCssClass);var i=$("<div></div>").addClass(h.CommonConstants.contentBlockSectionLoadingMessageCssClass).text(h.CommonUtils.getLocalizedString(h.CommonConstants.contentBlockSectionLoadingMessage));o.append(i)}else{var r=this.getSectionToolsCount(t);this.setSectionIsEmpty(t,r===0)}return this};f.prototype.getSectionToolsCount=function(t){return this.getSectionContainer(t).find("."+f.toolItemCellCssClass).length};f.prototype.getSectionContainer=function(t){return this.toolboxContainer.find("."+h.CommonConstants.contentBlockSectionCssClass+"[data-"+h.CommonConstants.toolboxSectionNameDataAttr+'="'+t+'"]')};f.prototype.getToolById=function(t){return this.renderedToolIdToToolMapping.get(t)};f.prototype.setupEventsOnTools=function(t){var o=this;t.attr("draggable","true");t.on("dragstart",function(t){t.stopPropagation();var e=t.originalEvent.dataTransfer;o.eventBroker.notify(h.DesignerInternalEventConstants.designerDragStart);var n=o.getBlockFromToolEvent(t);if(n.length){e.setData("Text",n.get(0).outerHTML)}});this.eventBroker.subscribe(h.DesignerInternalEventConstants.designerAddEnd,this.designerAddEndEventHandler=function(){return o.removeSelectionsOnTools()});t.on("click",function(t){var e=$(t.target).hasClass(h.CommonConstants.toolboxItemClassName)?$(t.target):$(t.target).closest(o.draggableSelector);if(!e.hasClass(h.CommonConstants.toolboxSelectedToolItemClassName)){o.removeSelectionsOnTools();e.addClass(h.CommonConstants.toolboxSelectedToolItemClassName);var n=o.getBlockFromToolEvent(t);if(n.length){o.eventBroker.notify(h.DesignerInternalEventConstants.designerAddStart,new h.DesignerAddStartEventArgs(n))}}else{o.eventBroker.notify(h.DesignerInternalEventConstants.designerAddEnd)}})};f.prototype.removeSelectionsOnTools=function(){h.CommonUtils.getByClass(h.CommonConstants.toolboxItemClassName).removeClass(h.CommonConstants.toolboxSelectedToolItemClassName)};f.prototype.getBlockFromToolEvent=function(t){var e=$(t.target).hasClass(h.CommonConstants.toolboxItemClassName)?$(t.target):$(t.target).closest(this.draggableSelector);return this.getBlockFromTool.apply(this,[e])};f.prototype.getBlockFromTool=function(t){var e=this.getToolById(t.data(h.CommonConstants.toolboxItemIdDataAttr).toString());if(a.isNullOrUndefined(e)){return $()}var n=this.toolBlockMapping.get(e.getType());if(a.isNullOrUndefined(n)){return $()}var o=n.getType();var i=$("<div>");i.attr(h.Contract.blockTypeAttrName,o);var r=e.getContentTransformation();i.append(r);return i};f.toolItemCellCssClass="toolItemCell";f.toolItemRowCssClass="toolItemRow";f.toolItemLabelCssClass="toolItemLabel";f.toolItemIconCssClass="toolItemIcon";f.buttonsPerRow=2;return f}(h.Control);h.ToolboxView=r})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.prototype.getContentTransformation=function(){return'<div class="imageWrapper"><img src="" /></div>'};t.prototype.getLabel=function(){return e.CommonUtils.getLocalizedString(e.CommonConstants.imageToolLabel)};t.prototype.getType=function(){return e.CommonConstants.imageToolType};t.prototype.getTitle=function(){return e.CommonUtils.getLocalizedString(e.CommonConstants.imageToolTitle)};t.prototype.getCssClass=function(){return"imageTool"};return t}();e.ImageTool=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.prototype.getLabel=function(){return e.CommonUtils.getLocalizedString(e.CommonConstants.buttonToolLabel)};t.prototype.getType=function(){return e.CommonConstants.buttonToolType};t.prototype.getContentTransformation=function(){return'<a href="'+e.CommonConstants.buttonEmptyHref+'" style="display: block">Click me</a>'};t.prototype.getTitle=function(){return e.CommonUtils.getLocalizedString(e.CommonConstants.buttonToolTitle)};t.prototype.getCssClass=function(){return"buttonTool"};return t}();e.ButtonTool=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.prototype.getLabel=function(){return e.CommonUtils.getLocalizedString(e.CommonConstants.textToolLabel)};t.prototype.getType=function(){return e.CommonConstants.textToolType};t.prototype.getContentTransformation=function(){return"<p>"+e.CommonUtils.getLocalizedString("Please input your text here...")+"</p>"};t.prototype.getTitle=function(){return e.CommonUtils.getLocalizedString(e.CommonConstants.textToolTitle)};t.prototype.getCssClass=function(){return"textTool"};return t}();e.TextTool=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.prototype.getLabel=function(){return e.CommonUtils.getLocalizedString(e.CommonConstants.dividerToolLabel)};t.prototype.getType=function(){return e.CommonConstants.dividerToolType};t.prototype.getContentTransformation=function(){return'<div class="dividerWrapper" align="center"><table style="padding: 0px; margin: 0px; width: 100%" aria-role="presentation"><tbody><tr style="padding: 0px;"><td style="margin:0px; padding-left: 0px; padding-right: 0px; padding-top: 5px; padding-bottom: 5px; vertical-align:top;"><p style="margin: 0px; padding: 0px; border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: rgb(0, 0, 0); line-height: 0px; width: 100%;"><span>&nbsp;</span></p></td></tr></tbody></table></div>'};t.prototype.getTitle=function(){return e.CommonUtils.getLocalizedString(e.CommonConstants.dividerToolTitle)};t.prototype.getCssClass=function(){return"dividerTool"};return t}();e.DividerTool=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(a){"use strict";var o=MktSvc.Controls.Common.Object;var t=function(){function t(t,e,n,o,i,r){this.ckEditorKeyboardAdapter=new a.CkEditorKeyboardAdapter;this._CKEDITOR=t;this.plugin=e;this.eventBroker=n;this.getElementFunction=o;this.getWrappedBlockFunction=i;this.executionContext=r}t.prototype.init=function(n){var o=this;this.executionContext.tryExecute(function(){$.each(o.plugin.getCommands(),function(t,e){o.registerCommand(e,n)});$.each(o.plugin.getToolbarButtons(),function(t,e){o.registerButton(e,n)});$.each(o.plugin.getToolbarCombos(),function(t,e){o.registerCombo(e,n)})},"Initialize the ckeditor",true)};t.prototype.dispose=function(){var t=this;this.executionContext.tryExecute(function(){$.each(t.plugin.getCommands(),function(t,e){e.dispose()})},"Dispose the ckeditor commands");this.getWrappedBlockFunction=null;this.ckEditorKeyboardAdapter=null;this.getElementFunction=null;this.eventBroker=null;this.plugin=null};t.prototype.registerCommand=function(t,e){e.addCommand(t.getName(),new a.CKEditorCommandAdapter(t,this.getElementFunction,this.getWrappedBlockFunction,this.executionContext))};t.prototype.registerButton=function(t,e){e.ui.addButton(t.getName(),new a.CKEditorButtonAdapter(t));var n=t.getKeyboardShortcut();if(!o.isNullOrUndefined(n)){e.setKeystroke(this.ckEditorKeyboardAdapter.getCkEditorKeyCode(n),t.getCommand().getName())}};t.prototype.registerCombo=function(t,e){e.ui.addRichCombo(t.getName(),new a.CKEditorComboAdapter(this._CKEDITOR.skin.getPath("editor"),t,e,this.executionContext))};return t}();a.CKEditorPluginAdapter=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(t){this.button=t;this.label=e.CommonUtils.getLocalizedString(t.getLabel());this.command=t.getCommand().getName();this.iconSrc=t.getIconSrc()}t.prototype.getName=function(){return this.button.getName()};return t}();e.CKEditorButtonAdapter=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(r){"use strict";var t=function(){function t(t,n,e,o){var i=this;this.multiSelect=false;this.saveEditorState="saveSnapshot";this.combo=n;this.editor=e;this.executionContext=o;this.executionContext.tryExecute(function(){i.readOnly=i.combo.getCommand().enabledOnReadOnly()?1:0;var e=[t];if(Array.isArray(i.editor.config.contentsCss)){i.editor.config.contentsCss.forEach(function(t){e.push(t)})}else{e.push(i.editor.config.contentsCss)}i.panel={css:e};i.label=r.CommonUtils.getLocalizedString(i.combo.getLabel());i.command=n.getCommand().getName()},"Initialize ckeditor combo",true)}t.prototype.startGroup=function(t){};t.prototype.add=function(t,e,n){};t.prototype.setValue=function(t,e){};t.prototype.init=function(){var o=this;this.content=this.combo.getItems();this.startGroup(r.CommonUtils.getLocalizedString(this.combo.getGroup()));$.each(this.content,function(t,e){var n=r.CommonUtils.getLocalizedString(e.text);o.executionContext.tryExecute(function(){o.add(e.value,n,n)},"Add ckeditor combo elements")})};t.prototype.onClick=function(e){var t=this;var n=this.content.filter(function(t){if(t.value==e)return true})[0];var o=r.CommonUtils.getLocalizedString(n.text);this.label=o;this.executionContext.tryExecute(function(){t.setValue(n.value,o);t.editor.focus();t.combo.getCommand().exec($(t.editor.element.$),null,null,e);t.editor.focus();t.editor.fire(t.saveEditorState)},"Set ckeditor combo value",true,function(){t.editor.focus()})};t.prototype.getName=function(){return this.combo.getName()};return t}();r.CKEditorComboAdapter=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var l=MktSvc.Controls.Common.Object;var e=MktSvc.Controls.Common.Dictionary;var n=function(){function t(t,e,n,o){this.readOnly=t.enabledOnReadOnly()?1:0;this.command=t;this.getElementFunction=e;this.getWrappedBlockFunction=n;this.executionContext=o}t.prototype.getName=function(){return this.command.getName()};t.prototype.exec=function(r,t){var a=this;var s=false;this.executionContext.tryExecute(function(){var t=a.getElementFunction();var e=a.getWrappedBlockFunction(t);var n=r.getSelectedHtml();var o=l.isNullOrUndefined(n)?$():$(n.$);var i=!l.isNullOrUndefined(o.prop)&&o.prop("nodeName")==="#document-fragment"?o.contents():o;s=a.command.exec(t,e,i)},"Execute CKEditor command",false,null,new e({CommandName:this.getName()}));return s};return t}();t.CKEditorCommandAdapter=n})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t,e,n){this.instanceConfiguration=t;this.globalConfiguration=e;this.ckeditorSettings=n}return t}();t.CustomCkEditorConfiguration=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.ckEditorImageSrcAttribute="data-cke-saved-src";t.ckEditorHrefAttribute="data-cke-saved-href";t.ckEditorSharedResourceAttribute="ckEditorSharedResource";t.ckEditorNativeListeners="_cke_nativeListeners";t.ckEditorDialogTextAreaSelector="span.cke_dialog_ui_html";t.ckEditorDialogPasteFrameSelector=".cke_pasteframe";t.ckEditorInstanceReadyInternalEventName="instanceReady";t.ckEditorContentDomInternalEventName="contentDom";t.ckEditorInputInternalEventName="input";t.ckEditorChangeInternalEventName="change";t.ckEditorFocusInternalEventName="focus";t.ckEditorLoadedStatus="loaded";t.ckEditorReadyStatus="ready";t.ckEditorButtonSelector="a.cke_button";t.ckEditorComboButtonSelector="a.cke_combo_button";t.ckEditorButtonLabelSelector=".cke_button_label[id$='label']";return t}();t.CkEditorConstants=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(t){"use strict";var e;(function(t){t.listbox="listbox";t.option="option";t.document="document";t.presentation="presentation";t.textbox="textbox"})(e=t.AriaRoleConstants||(t.AriaRoleConstants={}))})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=MktSvc.Controls.Common.Object;var n=function(){function t(t,e,n){this.eventBroker=t;this.elementFocusedInEvConstant=e;this.elementToFocusEvConstant=n}t.prototype.init=function(){var e=this;this.eventBroker.subscribe(this.elementFocusedInEvConstant,this.onSetLastFocusedElement=function(t){return e.setLastFocusedElement(t.element)});this.eventBroker.subscribe(this.elementToFocusEvConstant,this.onFocusLastElement=function(){return e.focusLastElement()})};t.prototype.dispose=function(){this.eventBroker.unsubscribe(this.elementFocusedInEvConstant,this.onSetLastFocusedElement);this.eventBroker.unsubscribe(this.elementToFocusEvConstant,this.onFocusLastElement);this.lastFocusedElement=null};t.prototype.setLastFocusedElement=function(t){this.lastFocusedElement=t};t.prototype.focusLastElement=function(){if(!e.isNullOrUndefined(this.lastFocusedElement)){this.lastFocusedElement.focus()}};return t}();t.FocusManager=n})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var t=function(){function t(){}t.prototype.create=function(t,e,n){return new o.FocusManager(t,e,n)};return t}();o.FocusManagerFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(n){"use strict";var r=MktSvc.Controls.Common.Object;var a=MktSvc.Controls.Common.KeyCodes;var t=function(){function t(){var o=this;this.onContainerRenderedHandler=function(t){o.listContainer=t.element;o.itemsList=o.accessibleContainer.getAllAccessibleItems();o.listContainer.off("keydown.baseAccessibleList");o.listContainer.on("keydown.baseAccessibleList",function(t){return o.handlerInnerContainerKeyDown(t)})};this.onItemRenderedHandler=function(t){var e=t.element;var n=e.getJQueryElement();n.off("keydown.baseAccessibleList");n.on("keydown.baseAccessibleList",function(t){return o.handlerItemControlKeyDown(t,e)})}}t.prototype.initialize=function(t){this.accessibleContainer=t};t.prototype.dispose=function(){if(!r.isNullOrUndefined(this.itemsList)){this.itemsList.forEach(function(t){t.getJQueryElement().off("keydown.baseAccessibleList")})}if(!r.isNullOrUndefined(this.listContainer)){this.listContainer.off("keydown.baseAccessibleList")}this.accessibleContainer=null;this.itemsList=null;this.listContainer=null};t.prototype.handlerInnerContainerKeyDown=function(t){if(t.keyCode!==a.Left&&t.keyCode!==a.Up&&t.keyCode!==a.Right&&t.keyCode!==a.Down){return}if(t.altKey||t.shiftKey||t.ctrlKey||this.itemsList.length===0){return}t.preventDefault();var e=$(t.target).parents().addBack();if(this.itemsList.some(function(t){return t.getJQueryElement().is(e)})){return}var n=this.accessibleContainer.getSelectedAccesibleItem();if(!r.isNullOrUndefined(n)){this.handlerItemControlKeyDown(t,n);return}var o=0;switch(t.keyCode){case a.Right:case a.Down:o=0;break;case a.Left:case a.Up:o=this.itemsList.length-1;break}var i=this.itemsList[o];i.focus()};t.prototype.handlerItemControlKeyDown=function(t,n){if(t.keyCode!==a.Enter&&t.keyCode!==a.Space&&t.keyCode!==a.Left&&t.keyCode!==a.Up&&t.keyCode!==a.Right&&t.keyCode!==a.Down){return}if(t.altKey||t.shiftKey||t.ctrlKey||!this.itemsList.length){return}var o=-1;this.itemsList.some(function(t,e){if(n.getJQueryElement()===t.getJQueryElement()){o=e;return true}});var e=0;switch(t.keyCode){case a.Space:case a.Enter:this.itemsList[o].click();break;case a.Right:e=o+1;if(e>=this.itemsList.length){e=0}this.itemsList[e].focus();break;case a.Left:e=o-1;if(e<0){e=this.itemsList.length-1}this.itemsList[e].focus();break;case a.Up:case a.Down:var i=this.itemsList[0];var r=0;this.itemsList.forEach(function(t){if(t.getJQueryElement().position().top===i.getJQueryElement().position().top){r++}});if(this.itemsList.length===r){break}e=t.keyCode===a.Up?o-r:o+r;if(e<0){e=this.itemsList.length-1}else if(e>=this.itemsList.length){if(n.getJQueryElement().position().top===this.itemsList[this.itemsList.length-1].getJQueryElement().position().top){e=0}else{e=this.itemsList.length-1}}this.itemsList[e].focus();break}};t.prototype.SetTabIndex=function(t,e){n.CommonUtils.setTabIndex(t,e===undefined?0:e)};return t}();n.KeyboardAccessibilityManager=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t,e){this.itemInnerContainer=t;this.onClickHandler=e}t.prototype.focus=function(){this.itemInnerContainer.focus()};t.prototype.getJQueryElement=function(){return this.itemInnerContainer};t.prototype.click=function(){this.onClickHandler()};return t}();t.ToolboxAccessibleItem=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var t=function(){function t(){this.blockProvider=new o.BlockProvider}t.prototype.process=function(t,e){var n=$(t).contents();this.blockProvider.getBlocksOfType(n,o.TextBlock.type).find("p:empty").append("<br>");e()};t.prototype.getName=function(){return"AddTextBreakContentModelProcessor"};t.prototype.dispose=function(){};return t}();o.AddTextBreakContentModelProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var t=function(){function t(){}t.prototype.setup=function(t){this.eventBroker=t};t.prototype.addStopEventPropogationWhileInput=function(t){var e=this;t.focusin(function(t){e.eventBroker.notify(n.DesignerInternalEventConstants.designerNonEventPropagationStart,new n.EventArgs(n.CommonConstants.userDetailsViewSimpleInput))});t.focusout(function(t){e.eventBroker.notify(n.DesignerInternalEventConstants.designerNonEventPropagationEnd,new n.EventArgs(n.CommonConstants.userDetailsViewSimpleInput))})};return t}();n.IgnoreChangesWhileInputStrategy=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function o(){}o.getLocalizedString=function(t,e){var n=e in o.localeMapping?e:"1033";if(!(t in o.localeMapping[n])){return t}return o.localeMapping[n][t]};o.messages1025={"[OfflineErrorMessage]":"مصمم المحتوى غير متوفر دون الاتصال. الرجاء المحاولة مرة أخرى عندما تتصل بالإنترنت.","[OfflineWarningMessage]":"بعض الميزات غير متوفرة أثناء العمل دون اتصال. الرجاء المحاولة مرة أخرى عندما تتصل بالإنترنت."};o.messages1026={"[OfflineErrorMessage]":"Дизайнерът на съдържание не е достъпен, докато сте офлайн. Опитайте отново, когато сте свързани.","[OfflineWarningMessage]":"Някои функции не са достъпни офлайн. Опитайте отново, когато се свържете."};o.messages1027={"[OfflineErrorMessage]":"El dissenyador de contingut no està disponible fora de línia. Torneu-ho a provar quan tingueu connexió.","[OfflineWarningMessage]":"Algunes característiques no estan disponibles fora de línia. Torneu-ho a provar quan tingueu connexió."};o.messages1028={"[OfflineErrorMessage]":"內容設計師無法離線使用。請於連線時再試一次。","[OfflineWarningMessage]":"離線時無法使用部分功能。請於連線時再試一次。"};o.messages1029={"[OfflineErrorMessage]":"Návrhář obsahu není v offline režimu dostupný. Zkuste to prosím znovu, až budete připojeni.","[OfflineWarningMessage]":"Některé funkce nejsou v offline režimu dostupné. Zkuste to prosím znovu, až budete připojeni."};o.messages1030={"[OfflineErrorMessage]":"Indholdsdesigneren kan ikke bruges offline. Prøv igen, når du atter er online.","[OfflineWarningMessage]":"Nogle funktioner er ikke tilgængelige, når du er offline. Prøv igen, når du er online."};o.messages1031={"[OfflineErrorMessage]":"Der Inhaltsdesigner ist offline nicht verfügbar. Wiederholen Sie den Vorgang, wenn eine Onlineverbindung besteht.","[OfflineWarningMessage]":"Einige Funktionen sind offline nicht verfügbar. Versuchen Sie es noch einmal, wenn eine Verbindung besteht."};o.messages1032={"[OfflineErrorMessage]":"Η σχεδίαση περιεχομένου δεν είναι διαθέσιμη χωρίς σύνδεση. Δοκιμάστε ξανά, όταν είστε συνδεδεμένοι.","[OfflineWarningMessage]":"Ορισμένες δυνατότητες δεν είναι διαθέσιμες εκτός σύνδεσης. Προσπαθήστε ξανά όταν συνδεθείτε."};o.messages1033={"[OfflineErrorMessage]":"The content designer isn't available offline. Please try again when you're connected.","[OfflineWarningMessage]":"Some features aren't available offline. Please try again when you're connected."};o.messages1035={"[OfflineErrorMessage]":"Sisällön suunnitteluohjelma ei ole käytettävissä offline-tilassa. Yritä uudelleen, kun yhteys on muodostettu.","[OfflineWarningMessage]":"Joitakin ominaisuuksia ei voi käyttää offline-tilassa. Yritä uudelleen, kun yhteys on muodostettu."};o.messages1036={"[OfflineErrorMessage]":"Le concepteur de contenu n’est pas disponible hors connexion. Ressayez lorsque vous serez connecté.","[OfflineWarningMessage]":"Certaines fonctionnalités ne sont pas disponibles hors ligne. Réessayez lorsque vous serez connecté."};o.messages1037={"[OfflineErrorMessage]":"‏‫מעצב התוכן אינו זמין כשאתה במצב לא מקוון. נסה שוב כשתהיה מחובר.‬","[OfflineWarningMessage]":"תכונות מסוימות אינן זמינות כשאתה במצב לא מקוון. נסה שוב כשתהיה מחובר."};o.messages1038={"[OfflineErrorMessage]":"A tartalomtervező nem érhető el kapcsolat nélküli módban. Próbálja meg újra, miután csatlakozott.","[OfflineWarningMessage]":"Egyes szolgáltatások nem érhetők el kapcsolat nélküli módban. Próbálja meg újra, miután csatlakozott!"};o.messages1040={"[OfflineErrorMessage]":"La finestra di progettazione del contenuto non è disponibile in modalità offline. Riprova quando sei connesso.","[OfflineWarningMessage]":"Alcune funzionalità non sono disponibili in modalità offline. Riprova quando sei connesso."};o.messages1041={"[OfflineErrorMessage]":"コンテンツ デザイナーはオフラインで使用できません。接続しているときにやり直してください。","[OfflineWarningMessage]":"一部の機能は、オフライン時には使用できません。接続しているときにもう一度お試しください。"};o.messages1042={"[OfflineErrorMessage]":"오프라인 상태에서는 콘텐츠 디자이너를 사용할 수 없습니다. 접속되면 다시 시도하십시오.","[OfflineWarningMessage]":"일부 기능은 오프라인 상태에서는 사용할 수 없습니다. 접속되면 다시 시도하십시오."};o.messages1043={"[OfflineErrorMessage]":"De functie voor contentontwerp is niet offline beschikbaar. Probeer het opnieuw als u bent verbonden.","[OfflineWarningMessage]":"Sommige functies zijn niet offline beschikbaar. Probeer het opnieuw als u verbonden bent."};o.messages1044={"[OfflineErrorMessage]":"Innholdsutforming er ikke tilgjengelig i frakoblet modus. Prøv på nytt når du er tilkoblet.","[OfflineWarningMessage]":"Noen funksjoner er ikke tilgjengelige i frakoblet modus. Prøv på nytt når du er tilkoblet."};o.messages1045={"[OfflineErrorMessage]":"Projektant zawartości jest niedostępny w trybie offline. Spróbuj ponownie, gdy nawiążesz połączenie.","[OfflineWarningMessage]":"Niektóre funkcje są niedostępne w trybie offline. Spróbuj ponownie, gdy nawiążesz połączenie."};o.messages1046={"[OfflineErrorMessage]":"O designer de conteúdo não está disponível offline. Tente novamente quando você estiver conectado.","[OfflineWarningMessage]":"Alguns recursos do designer não estão disponíveis offline. Tente novamente quando estiver conectado."};o.messages1048={"[OfflineErrorMessage]":"Proiectantul de conținut nu este disponibil offline. Încercați din nou când sunteți conectat.","[OfflineWarningMessage]":"Unele caracteristici nu sunt disponibile offline. Încercați din nou când sunteți conectat."};o.messages1049={"[OfflineErrorMessage]":"Конструктор содержимого недоступен в автономном режиме. Повторите попытку при наличии подключения.","[OfflineWarningMessage]":"Некоторые функции недоступны при работе в автономном режиме. Повторите попытку при наличии подключения."};o.messages1050={"[OfflineErrorMessage]":"Dizajner sadržaja nije dostupan izvan mreže. Ponovno se povežite pa pokušajte ponovno.","[OfflineWarningMessage]":"Neke značajke nisu dostupne izvan mreže. Ponovno se povežite pa pokušajte ponovno."};o.messages1051={"[OfflineErrorMessage]":"Návrhár obsahu nie je v režime offline k dispozícii. Skúste to znova po pripojení.","[OfflineWarningMessage]":"Niektoré funkcie nie sú v režime offline k dispozícii. Skúste to znova po pripojení."};o.messages1053={"[OfflineErrorMessage]":"Innehållsverktyget är inte tillgängligt offline. Försök igen när du är ansluten.","[OfflineWarningMessage]":"En del funktioner är inte tillgängliga offline. Försök igen när du är ansluten."};o.messages1054={"[OfflineErrorMessage]":"ไม่สามารถใช้ตัวออกแบบเนื้อหาขณะออฟไลน์ โปรดลองอีกครั้งเมื่อคุณเชื่อมต่อ","[OfflineWarningMessage]":"ไม่สามารถใช้คุณลักษณะบางอย่างขณะออฟไลน์ โปรดลองอีกครั้งเมื่อคุณเชื่อมต่อ"};o.messages1055={"[OfflineErrorMessage]":"İçerik tasarımcısı çevrimdışı kullanılamaz. Lütfen bağlandığınızda yeniden deneyin.","[OfflineWarningMessage]":"Bazı özellikler çevrimdışı olarak kullanılamaz. Lütfen bağlandığınızda yeniden deneyin."};o.messages1057={"[OfflineErrorMessage]":"Desainer konten tidak tersedia offline. Coba lagi setelah Anda tersambung.","[OfflineWarningMessage]":"Fitur tertentu tidak tersedia secara offline. Coba lagi setelah Anda tersambung."};o.messages1058={"[OfflineErrorMessage]":"Конструктор вмісту недоступний в автономному режимі. Підключіться до Інтернету та повторіть спробу.","[OfflineWarningMessage]":"Певні функції недоступні в автономному режимі. Підключіться до Інтернету та повторіть спробу."};o.messages1060={"[OfflineErrorMessage]":"Oblikovalnik vsebine ni na voljo brez povezave. Poskusite znova, ko vzpostavite povezavo.","[OfflineWarningMessage]":"Nekatere funkcije niso na voljo brez povezave. Poskusite znova, ko vzpostavite povezavo."};o.messages1061={"[OfflineErrorMessage]":"Sisudisainerit ei saa ühenduseta kasutada. Proovige uuesti, kui olete ühendatud.","[OfflineWarningMessage]":"Mõni funktsioon pole ühenduseta kättesaadav. Proovige uuesti, kui olete ühendatud."};o.messages1062={"[OfflineErrorMessage]":"Satura noformētājs nav pieejams bezsaistē. Lūdzu, mēģiniet vēlreiz, kad būs izveidots savienojums.","[OfflineWarningMessage]":"Daži līdzekļi nav pieejami bezsaistē. Mēģiniet vēlreiz pēc savienojuma izveides."};o.messages1063={"[OfflineErrorMessage]":"Neprisijungę negalėsite naudoti turinio dizaino įrankio. Bandykite dar kartą, kai būsite prisijungę.","[OfflineWarningMessage]":"Neprisijungę negalėsite naudoti kai kurių funkcijų. Bandykite dar kartą, kai būsite prisijungę."};o.messages1066={"[OfflineErrorMessage]":"Không thể sử dụng công cụ thiết kế nội dung ở chế độ ngoại tuyến. Vui lòng thử lại khi bạn đã kết nối.","[OfflineWarningMessage]":"Không thể sử dụng một số tính năng ở chế độ ngoại tuyến. Vui lòng thử lại khi bạn đã kết nối."};o.messages1069={"[OfflineErrorMessage]":"Eduki diseinatzailea ez dago erabilgarri lineaz kanpo bazaude. Saiatu berriro Interneteko konexioa duzunean.","[OfflineWarningMessage]":"Zenbait eginbide ez daude erabilgarri lineaz kanpo zaudenean. Saiatu berriro Internetera konektatuta zaudenean."};o.messages1081={"[OfflineErrorMessage]":"सामग्री डिज़ाइनर ऑफ़लाइन उपलब्ध नहीं है. कृपया कनेक्ट होने पर पुनः प्रयास करें.","[OfflineWarningMessage]":"कुछ सुविधाएँ ऑफ़लाइन उपलब्ध नहीं हैं. कृपया कनेक्ट होने पर पुनः प्रयास करें."};o.messages1086={"[OfflineErrorMessage]":"Pereka kandungan tidak tersedia secara luar talian. Sila cuba lagi apabila anda kembali dalam talian.","[OfflineWarningMessage]":"Beberapa ciri tidak akan tersedia sewaktu anda bekerja di luar talian. Sila cuba lagi apabila anda kembali dalam talian."};o.messages1087={"[OfflineErrorMessage]":"Мазмұн құрастырғыш офлайн режимде қолжетімді емес. Желіге қосылған кезіңізде әрекетті қайталаңыз.","[OfflineWarningMessage]":"Кейбір мүмкіндіктер офлайн режимде қолжетімді емес. Желіге қосылған кезіңізде әрекетті қайталаңыз."};o.messages1110={"[OfflineErrorMessage]":"O deseñador de contidos non está dispoñible sen conexión. Ténteo de novo cando se conecte.","[OfflineWarningMessage]":"Algunhas funcionalidades non están dispoñibles sen conexión. Ténteo de novo cando se conecte."};o.messages2052={"[OfflineErrorMessage]":"内容设计器在脱机状态时不可用。请在连接后重试。","[OfflineWarningMessage]":"某些功能在脱机状态时不可用。请在连接后重试。"};o.messages2057={"[OfflineErrorMessage]":"The content designer isn't available offline. Please try again when you're connected.","[OfflineWarningMessage]":"Some features aren't available offline. Please try again when you're connected."};o.messages2070={"[OfflineErrorMessage]":"O estruturador de conteúdos não está disponível offline. Tente novamente quando estiver ligado.","[OfflineWarningMessage]":"Algumas funcionalidades não estão disponíveis offline. Tente novamente quando estiver ligado."};o.messages2074={"[OfflineErrorMessage]":"Dizajner sadržaja nije dostupan van mreže. Pokušajte ponovo kad se povežete.","[OfflineWarningMessage]":"Neke funkcije nisu dostupne van mreže. Pokušajte ponovo kad se povežete."};o.messages3076={"[OfflineErrorMessage]":"內容設計師無法離線使用。請於連線時再試一次。","[OfflineWarningMessage]":"離線時無法使用部分功能。請於連線時再試一次。"};o.messages3081={"[OfflineErrorMessage]":"The content designer isn't available offline. Please try again when you're connected.","[OfflineWarningMessage]":"Some features aren't available offline. Please try again when you're connected."};o.messages3082={"[OfflineErrorMessage]":"El diseñador de contenido no está disponible sin conexión. Vuelva a intentarlo cuando esté conectado.","[OfflineWarningMessage]":"Algunas características no están disponibles sin conexión. Vuelva a intentarlo cuando esté conectado."};o.messages3084={"[OfflineErrorMessage]":"Le concepteur de contenu n’est pas disponible hors connexion. Ressayez lorsque vous serez connecté.","[OfflineWarningMessage]":"Certaines fonctionnalités ne sont pas disponibles hors ligne. Réessayez lorsque vous serez connecté."};o.messages3098={"[OfflineErrorMessage]":"Дизајнер садржаја није доступан ван мреже. Покушајте поново кад се повежете.","[OfflineWarningMessage]":"Неке функције нису доступне ван мреже. Покушајте поново кад се повежете."};o.messages4105={"[OfflineErrorMessage]":"The content designer isn't available offline. Please try again when you're connected.","[OfflineWarningMessage]":"Some features aren't available offline. Please try again when you're connected."};o.localeMapping={1025:o.messages1025,1026:o.messages1026,1027:o.messages1027,1028:o.messages1028,1029:o.messages1029,1030:o.messages1030,1031:o.messages1031,1032:o.messages1032,1033:o.messages1033,1035:o.messages1035,1036:o.messages1036,1037:o.messages1037,1038:o.messages1038,1040:o.messages1040,1041:o.messages1041,1042:o.messages1042,1043:o.messages1043,1044:o.messages1044,1045:o.messages1045,1046:o.messages1046,1048:o.messages1048,1049:o.messages1049,1050:o.messages1050,1051:o.messages1051,1053:o.messages1053,1054:o.messages1054,1055:o.messages1055,1057:o.messages1057,1058:o.messages1058,1060:o.messages1060,1061:o.messages1061,1062:o.messages1062,1063:o.messages1063,1066:o.messages1066,1069:o.messages1069,1081:o.messages1081,1086:o.messages1086,1087:o.messages1087,1110:o.messages1110,2052:o.messages2052,2057:o.messages2057,2070:o.messages2070,2074:o.messages2074,3076:o.messages3076,3081:o.messages3081,3082:o.messages3082,3084:o.messages3084,3098:o.messages3098,4105:o.messages4105};return o}();t.OfflineMessages=e})(Editor||(Editor={}));var Editor;(function(d){"use strict";var t=function(){function c(t,e){this.popupRenderer=t;this.detailsViewControl=e}c.prototype.setup=function(t){this.eventBroker=t;this.popupRenderer.setup(this.eventBroker)};c.prototype.render=function(e,t,n){var o=this;var i=function(){o.dispose();n()};var r=function(){o.dispose();if(!MktSvc.Controls.Common.String.isNullUndefinedOrWhitespace(e.href)){t(e)}else{n()}return true};var a=this.popupRenderer.render(d.CommonUtils.getLocalizedString("[Link]"),r,i,true);this.detailsViewControl.init(a,this.eventBroker);var s=this.detailsViewControl.createSection(d.CommonUtils.getLocalizedString("["+d.DetailsViewConstants.linkSectionTitle+"]"));var l=this.detailsViewControl.createLinkField(s,d.CommonUtils.getLocalizedString("[Link]"),MktSvc.Controls.Common.String.Empty,MktSvc.Controls.Common.String.Empty,e.href,{for:c.urlInputId,id:c.urlInputId,"placeholder-text":d.CommonUtils.getLocalizedString("[Link]")},function(t){e.href=d.CommonUtils.getLinkWithProtocol(t.val())},{hasFocus:true});setTimeout(function(){l.find("input").focus()},0);this.setupSaveOnEnter(r);this.eventBroker.notify("linkPopupRendered")};c.prototype.setupSaveOnEnter=function(t){var e=this;var n=function(){t();e.popupRenderer.close()};this.enterKeyDownDelegate=this.eventBroker.subscribe(MktSvcCommon.AssistEdit.AssistEditEventConstants.assistEditEnterKeyDown,n)};c.prototype.dispose=function(){this.eventBroker.unsubscribe(MktSvcCommon.AssistEdit.AssistEditEventConstants.assistEditEnterKeyDown,this.enterKeyDownDelegate);this.detailsViewControl.dispose();this.popupRenderer.dispose()};c.urlInputId="formEditor_linkpopup_urlInput";return c}();d.LinkPopupRenderer=t})(Editor||(Editor={}));var Editor;(function(s){"use strict";var l=MktSvc.Controls.Common.Object;var c=MktSvc.Controls.Common.String;var d=MktSvc.Controls.Common.Dictionary;var t=function(){function t(t,e){this.popupRenderer=t;this.detailsViewControl=e}t.prototype.setup=function(t){this.eventBroker=t;this.popupRenderer.setup(this.eventBroker)};t.prototype.render=function(e,t,n){var o=this;var i=this.popupRenderer.render(s.CommonUtils.getLocalizedString("[Image]"),function(){e.src=l.isNullOrUndefined(e.src)?c.Empty:e.src;e.alt=l.isNullOrUndefined(e.alt)?c.Empty:e.alt;e.alignment=c.isNullUndefinedOrWhitespace(e.alignment)?"Left":e.alignment;t(e);return true},function(){n()},true);s.CommonUtils.getById(i).empty();this.detailsViewControl.init(i,this.eventBroker);var r=this.detailsViewControl.createSection(s.CommonUtils.getLocalizedString("["+s.DetailsViewConstants.imageSectionTitle+"]"));var a=this.detailsViewControl.createImageField(r,s.CommonUtils.getLocalizedString(s.DetailsViewConstants.srcLabel),s.DetailsViewConstants.inputTypeText,s.DetailsViewConstants.srcInputCssClass,e.src,{"placeholder-text":s.CommonUtils.getLocalizedString(s.DetailsViewConstants.srcLabel)},function(t){e.src=t.val()});this.detailsViewControl.createInputField(r,s.CommonUtils.getLocalizedString(s.DetailsViewConstants.altLabel),s.DetailsViewConstants.inputTypeText,s.DetailsViewConstants.altInputCssClass,e.alt,{placeholder:s.CommonUtils.getLocalizedString(s.DetailsViewConstants.altLabel)},function(t){e.alt=t.val()});this.detailsViewControl.createInputField(r,s.CommonUtils.getLocalizedString(s.DetailsViewConstants.buttonWidthLabel),s.DetailsViewConstants.inputTypeNumber,s.DetailsViewConstants.imageWidthInputCssClass,parseInt(e.width,10).toString(),{placeholder:s.CommonUtils.getLocalizedString(s.DetailsViewConstants.buttonWidthLabel)},function(t){e.width=o.getValueWithMeasurementUnit(t.val())});this.detailsViewControl.createInputField(r,s.CommonUtils.getLocalizedString(s.DetailsViewConstants.buttonHeightLabel),s.DetailsViewConstants.inputTypeNumber,s.DetailsViewConstants.imageHeightInputCssClass,parseInt(e.height,10).toString(),{placeholder:s.CommonUtils.getLocalizedString(s.DetailsViewConstants.buttonHeightLabel)},function(t){e.height=o.getValueWithMeasurementUnit(t.val())});this.detailsViewControl.createInputField(r,s.CommonUtils.getLocalizedString(s.DetailsViewConstants.hSpaceLabel),s.DetailsViewConstants.inputTypeNumber,s.DetailsViewConstants.imageHSpaceInputCssClass,e.hSpace,{placeholder:s.CommonUtils.getLocalizedString(s.DetailsViewConstants.hSpaceLabel)},function(t){e.hSpace=t.val()});this.detailsViewControl.createInputField(r,s.CommonUtils.getLocalizedString(s.DetailsViewConstants.vSpaceLabel),s.DetailsViewConstants.inputTypeNumber,s.DetailsViewConstants.imageVSpaceInputCssClass,e.vSpace,{placeholder:s.CommonUtils.getLocalizedString(s.DetailsViewConstants.vSpaceLabel)},function(t){e.vSpace=t.val()});this.detailsViewControl.createDropdownList(r,s.CommonUtils.getLocalizedString(s.DetailsViewConstants.buttonAlignmentLabel),new d({Left:s.CommonUtils.getLocalizedString("[Left]"),Center:s.CommonUtils.getLocalizedString("[Center]"),Right:s.CommonUtils.getLocalizedString("[Right]")}),s.DetailsViewConstants.imageAlignmentDropDownCssClass,c.isNullUndefinedOrWhitespace(e.alignment)?"Left":e.alignment,function(t){e.alignment=t.val()});setTimeout(function(){a.find("input").focus()},0);this.eventBroker.notify(s.EventConstants.imagePopupRendered)};t.prototype.getValueWithMeasurementUnit=function(t){return t+"px"};t.prototype.dispose=function(){this.detailsViewControl.dispose();this.popupRenderer.dispose()};return t}();s.ImagePopupRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t,e){this.message=t;this.content=e}return t}();t.BrowserPreviewMessage=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.sortablePlaceholderId="placeholder-tool-block";return t}();t.TestabilityConstants=e})(Editor||(Editor={}));var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var r=MktSvc.Controls.Common.Object;var a=MktSvc.Controls.Common.String;var s=MktSvc.Controls.Common.UniqueId;var l=MktSvc.Controls.Common.Dictionary;var t=function(){function t(t){this.detailsViewControl=t;this.buttonBackgroundColorInputId=s.generate(i.DetailsViewConstants.buttonBackgroundColorInputCssClass);this.buttonTextColorInputId=s.generate(i.DetailsViewConstants.buttonTextColorInputCssClass)}t.prototype.init=function(t,e){this.eventBroker=t;this.containerId=e};t.prototype.dispose=function(){this.detailsViewControl.dispose()};t.prototype.render=function(e){var n=this;var t=this.detailsViewControl.createSection(i.CommonUtils.getLocalizedString(i.DetailsViewConstants.stylesSectionTitle));this.detailsViewControl.createInputColorField(t,i.CommonUtils.getLocalizedString(i.DetailsViewConstants.buttonBackgroundColorLabel),i.DetailsViewConstants.inputTypeText,i.DetailsViewConstants.buttonBackgroundColorInputCssClass,this.getBackgroundColor(e),{id:this.buttonBackgroundColorInputId},function(t){n.onBackgroundColorFieldUpdated(e,t)});this.detailsViewControl.createInputColorField(t,i.CommonUtils.getLocalizedString(i.DetailsViewConstants.buttonTextColorLabel),i.DetailsViewConstants.inputTypeText,i.DetailsViewConstants.buttonTextColorInputCssClass,this.getTextColor(e),{id:this.buttonTextColorInputId},function(t){n.onTextColorFieldUpdated(e,t)});this.detailsViewControl.createDropdownList(t,i.CommonUtils.getLocalizedString(i.DetailsViewConstants.buttonAlignmentLabel),new l({Left:i.CommonUtils.getLocalizedString("[Left]"),Center:i.CommonUtils.getLocalizedString("[Center]"),Right:i.CommonUtils.getLocalizedString("[Right]")}),i.DetailsViewConstants.buttonAlignmentDropDownCssClass,this.getButtonAlignment(e),function(t){n.onButtonAlignmentUpdated(e,t)});var o=this.detailsViewControl.createSection(i.CommonUtils.getLocalizedString(i.DetailsViewConstants.buttonSizeSectionTitle));this.detailsViewControl.createInputField(o,i.CommonUtils.getLocalizedString(i.DetailsViewConstants.buttonWidthLabel),i.DetailsViewConstants.inputTypeNumber,i.DetailsViewConstants.buttonWidthInputCssClass,this.getButtonWidth(e),{min:"1",max:"3840",role:"spinbutton",id:s.generate(i.DetailsViewConstants.buttonWidthInputCssClass)},function(t){n.onWidthFieldUpdated(e,t)});this.detailsViewControl.createInputField(o,i.CommonUtils.getLocalizedString(i.DetailsViewConstants.buttonHeightLabel),i.DetailsViewConstants.inputTypeNumber,i.DetailsViewConstants.buttonHeightInputCssClass,this.getButtonHeight(e),{min:"1",max:"3840",role:"spinbutton",id:s.generate(i.DetailsViewConstants.buttonHeightInputCssClass)},function(t){n.onHeightFieldUpdated(e,t)})};t.prototype.getAnchor=function(t){return t.find(i.DetailsViewConstants.anchorTag)};t.prototype.getBackgroundColor=function(t){var e=this.getAnchor(t).css(i.DetailsViewConstants.backgroundColorAttribute);if(r.isNullOrUndefined(e)){e=a.Empty}return i.ColorUtils.rgbToHex(e)};t.prototype.onBackgroundColorFieldUpdated=function(t,e){var n=e.val();var o=this.getAnchor(t);o.css(i.DetailsViewConstants.backgroundColorAttribute,n);this.eventBroker.notify(i.DesignerInternalEventConstants.contentBlockChanged,new i.BlockChangedEventArgs(this.containerId,t))};t.prototype.getTextColor=function(t){var e=this.getAnchor(t).css(i.DetailsViewConstants.textColorAttribute);if(r.isNullOrUndefined(e)){e=a.Empty}return i.ColorUtils.rgbToHex(e)};t.prototype.onTextColorFieldUpdated=function(t,e){var n=e.val();var o=this.getAnchor(t);o.css(i.DetailsViewConstants.textColorAttribute,n);this.eventBroker.notify(i.DesignerInternalEventConstants.contentBlockChanged,new i.BlockChangedEventArgs(this.containerId,t))};t.prototype.getButtonAlignment=function(t){var e=this.getAnchor(t).get(0);if(!r.isNullOrUndefined(e)){var n=e.style.marginLeft;var o=e.style.marginRight;if(n==="0px"&&o==="auto"){return"Left"}if(n==="auto"&&o==="0px"){return"Right"}if(n==="auto"&&o==="auto"){return"Center"}}return a.Empty};t.prototype.onButtonAlignmentUpdated=function(t,e){var n=e.val();var o=this.getAnchor(t);switch(n){case"Left":o.css(i.DetailsViewConstants.marginLeftAttribute,"0px");o.css(i.DetailsViewConstants.marginRightAttribute,"auto");break;case"Right":o.css(i.DetailsViewConstants.marginLeftAttribute,"auto");o.css(i.DetailsViewConstants.marginRightAttribute,"0px");break;case"Center":o.css(i.DetailsViewConstants.marginLeftAttribute,"auto");o.css(i.DetailsViewConstants.marginRightAttribute,"auto");break}this.getUnconfiguredOverlay(t).attr(i.DetailsViewConstants.alignAttribute,n);this.eventBroker.notify(i.DesignerInternalEventConstants.contentBlockChanged,new i.BlockChangedEventArgs(this.containerId,t))};t.prototype.getButtonWidth=function(t){var e=this.getAnchor(t).width().toString();return e};t.prototype.onWidthFieldUpdated=function(t,e){var n=e.val();if(r.isNullOrUndefined(n)||n<1){n=a.Empty}var o=this.getAnchor(t);o.width(n);this.eventBroker.notify(i.DesignerInternalEventConstants.contentBlockChanged,new i.BlockChangedEventArgs(this.containerId,t))};t.prototype.getButtonHeight=function(t){var e=this.getAnchor(t).height().toString();return e};t.prototype.onHeightFieldUpdated=function(t,e){var n=e.val();if(r.isNullOrUndefined(n)||n<1){n=a.Empty}var o=this.getAnchor(t);o.css(i.DetailsViewConstants.lineHeightAttribute,n+"px");this.eventBroker.notify(i.DesignerInternalEventConstants.contentBlockChanged,new i.BlockChangedEventArgs(this.containerId,t))};t.prototype.getUnconfiguredOverlay=function(t){return t.find("."+i.CommonConstants.designerUnconfiguredContentOverlayCssClassName)};return t}();i.ButtonStylesDetailsViewRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var t=function(){function t(){}t.prototype.create=function(t){var e=new n.ButtonStylesDetailsViewRenderer(t);return new n.ButtonDetailsView(n.CommonUtils.getLocalizedString(n.CommonConstants.buttonToolLabel),e,t)};return t}();n.ButtonDetailsViewFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var t=function(){function n(){}n.createProperty=function(t,e){t.addClass(o.DetailsViewConstants.propertyNameCssClass).addClass(o.DetailsViewConstants.inputItemField);e.addClass(o.DetailsViewConstants.inputAttributeClassName);return n.createItemContainer().append(t).append(n.createItemField().append(e))};n.createItemContainer=function(){return $("<div>").addClass(o.DetailsViewConstants.inputControlContainerClassName)};n.createItemField=function(){return $("<div>").addClass(o.DetailsViewConstants.inputItemField)};return n}();o.DetailsViewHelper=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(d){"use strict";var o=MktSvc.Controls.Common.Dictionary;var t=function(){function t(t,e,n){this.inputFieldRenderer=t;this.buttonRenderer=e;this.galleryButtonFactory=n;this.galleryButtonDisposeDictionary=new o}t.prototype.setup=function(t){this.eventBroker=t};t.prototype.render=function(t,e,n,o,i,r,a){var s=n+" "+d.DetailsViewConstants.inputImageCssClass;var l=this.inputFieldRenderer.render(t,e,s,o,i,r,a);var c=l.find(d.CommonUtils.getClassSelector(d.DetailsViewConstants.inputItemField)).last();this.renderImageGalleryButton(c);return l};t.prototype.dispose=function(){};t.prototype.renderImageGalleryButton=function(n){var o=this;var i=MktSvc.Controls.Common.UniqueId.generate();var r=function(t){if(i===t.sourceId){o.inputFieldRenderer.updateValue(t.imageUrl,n);o.cleanGalleryButton(i)}};var a=this.galleryButtonFactory.create(i);var t=this.buttonRenderer.renderButton(a).addClass(d.DetailsViewConstants.imgGalleryCssClass).appendTo(n).on("click",function(){a.getCommand().setup(o.eventBroker);var t=o.eventBroker.subscribe(MktSvcCommon.EventConstants.GalleryImageSelected,function(t){o.getActiveDialog().show();r(t)});var e=o.eventBroker.subscribe(MktSvcCommon.EventConstants.GalleryPopupClosed,function(){o.getActiveDialog().show()});o.galleryButtonDisposeDictionary.addOrUpdate(i,function(){o.eventBroker.unsubscribe(MktSvcCommon.EventConstants.GalleryImageSelected,t);o.eventBroker.unsubscribe(MktSvcCommon.EventConstants.GalleryPopupClosed,e);a.getCommand().dispose()});o.getActiveDialog().hide();a.getCommand().exec(n,null,null,null);return false});n.on("remove",function(){o.cleanGalleryButton(i)});return t};t.prototype.getActiveDialog=function(){return $("."+d.CommonConstants.popupCssClassName).add("."+d.CommonConstants.overlayCssClassName)};t.prototype.cleanGalleryButton=function(t){if(this.galleryButtonDisposeDictionary.hasKey(t)){this.galleryButtonDisposeDictionary.get(t)();this.galleryButtonDisposeDictionary.remove(t)}};return t}();d.InputBrowseImageFieldRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(c){"use strict";var t=function(){function t(t){this.inputFieldRenderer=t;this.linkValueUpdatedEventName="linkValueUpdated"}t.prototype.setup=function(t){};t.prototype.updateValue=function(t,e){var n=e.find(c.DetailsViewConstants.inputTag);if(n.length>0){n.val(t);n.trigger(this.linkValueUpdatedEventName)}};t.prototype.render=function(t,e,n,o,i,r,a){var s=this.inputFieldRenderer.render(t,e,n,o,i,r);var l=o;s.find(c.DetailsViewConstants.inputTag).on(this.linkValueUpdatedEventName,function(t){var e=$(t.target).val();if(l!==e){l=e;if(r){r($(t.target))}}});return s};t.prototype.dispose=function(){};return t}();c.LinkFieldRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t){this.inputFieldRenderer=t}t.prototype.setup=function(t){};t.prototype.render=function(t,e,n,o,i,r){return this.inputFieldRenderer.render(t,e,n,o,i,r)};t.prototype.dispose=function(){};return t}();t.InputImageFieldRenderer=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(u){"use strict";var a=MktSvc.Controls.Common.Object;var t=function(){function t(t){this.inputFieldRenderer=t}t.prototype.render=function(t,e,n,o,i,r){var a=this;var s;var l;var c;var d=this.inputFieldRenderer.render(t,e,u.DetailsViewConstants.inputColorCssClass+" "+n,o,i,function(){a.update(l.val(),l,c,s,r)},u.CommonConstants.colorFieldAriaLabel);l=d.find(u.DetailsViewConstants.inputTag);c=this.renderColorFilledRectangle(l,o);if(u.BrowserFeatureSupport.html5ColorPickerSupported){s=this.renderColorPicker(c,t,o);s.on("change",function(){a.update(s.val(),l,c,s,r)});s.focus(function(){c.addClass(u.DetailsViewConstants.colorPickerFocusedCssClass)});s.focusout(function(){c.removeClass(u.DetailsViewConstants.colorPickerFocusedCssClass)})}return d};t.prototype.renderColorFilledRectangle=function(t,e){var n=$("<div>").addClass(u.DetailsViewConstants.colorFilledRectangleCssClass).insertAfter(t);this.setColorFilledRectangle(n,e);return n};t.prototype.renderColorPicker=function(t,e,n){var o=$('<input type="color">').addClass(u.DetailsViewConstants.colorPickerInputCssClassName).insertAfter(t);o.attr("aria-label",e);this.setColorPicker(o,n);return o};t.prototype.update=function(t,e,n,o,i){e.val(t);this.setColorFilledRectangle(n,t);if(!a.isNullOrUndefined(o)){this.setColorPicker(o,t)}if(!a.isNullOrUndefined(i)){i(e)}var r=$("#"+e.attr("id"));r.focus()};t.prototype.setColorFilledRectangle=function(t,e){t.css(u.DetailsViewConstants.backgroundColorAttribute,e)};t.prototype.setColorPicker=function(t,e){t.val(u.ColorUtils.toHex(e))};return t}();u.InputColorFieldRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(s){"use strict";var a=MktSvc.Controls.Common.UniqueId;var t=function(){function t(){}t.prototype.render=function(t,e,n,o){var i=$("<div>",{class:s.DetailsViewConstants.inputControlContainerClassName});var r=a.generate(n);this.renderDropdownLabel(i,t,n,r);this.renderDropdownList(i,e,n,o,r);return i};t.prototype.renderDropdownLabel=function(t,e,n,o){var i=$("<label>",{class:s.DetailsViewConstants.inputItemField+" "+s.DetailsViewConstants.propertyNameCssClass,for:o}).text(e);t.append(i)};t.prototype.renderDropdownList=function(t,n,e,o,i){var r=$("<select />");r.attr("id",i);r.addClass(s.DetailsViewConstants.inputAttributeClassName+" "+e);n.getKeys().each(function(t){var e=$("<option></option>");e.val(t);e.text(n.get(t));r.append(e)});r.val(o);var a=$("<div>",{class:s.DetailsViewConstants.inputItemField});a.append(r);t.append(a)};return t}();s.DropdownListRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(r){"use strict";var t=function(){function t(){}t.prototype.render=function(t,e,n){var o=$("<div>",{class:r.DetailsViewConstants.inputControlContainerClassName});this.renderLookupLabel(o,t);this.renderLookupContainer(o,n,e);return o};t.prototype.renderLookupLabel=function(t,e){var n=$("<label>",{class:r.DetailsViewConstants.inputItemField+" "+r.DetailsViewConstants.propertyNameCssClass}).text(e);t.append(n)};t.prototype.renderLookupContainer=function(t,e,n){var o=$("<div />");o.attr("id",e);o.addClass(r.DetailsViewConstants.inputAttributeClassName+" "+n);var i=$("<div>",{class:r.DetailsViewConstants.inputItemField});i.append(o);t.append(i)};return t}();r.LookupContainerRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.prototype.renderButton=function(t){return $("<button/>").addClass(t.getName()).attr("title",e.CommonUtils.getLocalizedString(t.getLabel())).attr("type",e.CommonConstants.buttonType).css("background-image",'url("'+MktSvcCommon.HtmlEncode.encode(t.getIconSrc())+'")')};return t}();e.ButtonRenderer=t})(Editor||(Editor={}));var Editor;(function(t){"use strict";var e=function(){function t(t){this.command=t}t.prototype.getName=function(){return t.buttonName};t.prototype.getLabel=function(){return"[Align Center]"};t.prototype.getCommand=function(){return this.command};t.prototype.getIconSrc=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAQAAABjX+2PAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfgBgMHAQayUmmdAAAApklEQVQY06WQrQ7CQBCEvysLQZ4Cg0AgIEGieAseGsszIBpIqkoVLeQG0R96TYrhxuzt5L6dW/jnuK6aR/1A1b+uE00bmRBl3bbWPwFq6jcpl76tAYznd+oWjah+fcBIeilF4EnGDQMFih/fUiJ/3FNGesjLg4EL5PjdzBq8eHHH5XHyLOJWrsNvOAPJYHAAlgaYX0x6S2lXU9RwBdKx5A5krEbs6wcyZEaBNz8cjAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wNi0wM1QwNzowMTowNi0wNDowMBTGlrgAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTYtMDYtMDNUMDc6MDE6MDYtMDQ6MDBlmy4EAAAAAElFTkSuQmCC"};t.prototype.getKeyboardShortcut=function(){return null};t.buttonName="dividerAlignCenterBtn";return t}();t.DividerAlignCenterButton=e})(Editor||(Editor={}));var Editor;(function(t){"use strict";var e=function(){function t(t){this.command=t}t.prototype.getName=function(){return t.buttonName};t.prototype.getLabel=function(){return"[Align Left]"};t.prototype.getCommand=function(){return this.command};t.prototype.getIconSrc=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAARCAQAAAB+puRPAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfgBgMFKRVoNVKHAAAAfUlEQVQoz7XRMQrCQBCF4W9hVSxEBLX2Ct7/DLmGTcDCKhplLRKUURNB8JXzlv3nZ/h7EigfZn0y7K1lCa2j6v11OYfR7BsidBl2Nj2iy02jdhhCRFSGNH0tyzxYrGxNHmWrlpoRi2gyZkHqESyCBVydnjuUy/Aduh+Wfs8dd/kYRlCIrXcAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMDYtMDNUMDU6NDE6MjEtMDQ6MDBDwWmCAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE2LTA2LTAzVDA1OjQxOjIxLTA0OjAwMpzRPgAAAABJRU5ErkJggg=="};t.prototype.getKeyboardShortcut=function(){return null};t.buttonName="dividerAlignLeftBtn";return t}();t.DividerAlignLeftButton=e})(Editor||(Editor={}));var Editor;(function(t){"use strict";var e=function(){function t(t){this.command=t}t.prototype.getName=function(){return t.buttonName};t.prototype.getLabel=function(){return"[Align Right]"};t.prototype.getCommand=function(){return this.command};t.prototype.getIconSrc=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAARCAQAAAB+puRPAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfgBgMHAh6KE6IIAAAAf0lEQVQoz7WRPQqEQAxGn7iilQuCjdfw/mfwCta6sIWFqAOxUJzJzNgIpgv58r38wOuReLn41Y+ut1RkgGD40YUOsiiD3Aq0dYhoqClInVEMI71FaOsIQgpI5hjCGbKSmuzKNgb+WhBiLCK+g7tF6V1MMEzAKZD1/g9H45fnsQPdyxwmlPvPHAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wNi0wM1QwNzowMjozMC0wNDowMBKuH2IAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTYtMDYtMDNUMDc6MDI6MzAtMDQ6MDBj86feAAAAAElFTkSuQmCC"};t.prototype.getKeyboardShortcut=function(){return null};t.buttonName="dividerAlignRightBtn";return t}();t.DividerAlignRightButton=e})(Editor||(Editor={}));var Editor;(function(t){"use strict";var e=MktSvc.Controls.Common.KeyboardCommand;var n=MktSvc.Controls.Common.KeyboardKeyCodes;var o=MktSvc.Controls.Common.KeyboardModifierType;var i=function(){function t(t){this.command=t}t.prototype.getName=function(){return"moveBlockBtn"};t.prototype.getLabel=function(){return"[Move Block]"};t.prototype.getCommand=function(){return this.command};t.prototype.getIconSrc=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xMkMEa+wAAAF6SURBVDhPhZHNS8NAEMXzt/oBiqkgiodEiLQa/CoUawRJL6WXXDz34KkHjwXb0lspVaw2jYcGL00qPPetJIZsxMKvTN7M7s680QD8yWg0xuv0TYTFeVIokn5/iGq1DvOoAl6UzycUit3uE1y3KUJgtfqC47gYjyf8VGoVgZR2DzEYDDEPPjCdvqPXG0DXD0RKrVUE0m4/oNXyYFk2NjZLMu50HkVKrU0Dts2XeTjRrGMbW9t76ffl1bXiifyjYZyZbfO1JJm/QNf34fsBypULTJ5fpC5XRbf548xsWyIOe9496jd3MpYIPY5jRFGMU7uKQNRr3DPbots0jDPzVcLDhllOv9fWd7BcRgjDT3HmBItF+NMau3BuXen2fyNwnWfnNcxmvtRlgjDBVWXdzl/QaDRhGGX48yDV0guy0G2+xpnZNmMeztcRRSCmWZFu0zDOzO74cr6OKAKhJ1wV3aZhnDnbdhZFSOCeuSq6nRhWRKGYwD1zVXn9F2jfTdAByZ8nSAIAAAAASUVORK5CYII="};t.prototype.getKeyboardShortcut=function(){return new e(n.mKey,[o.Alt])};return t}();t.MoveBlockButton=i})(Editor||(Editor={}));var Editor;(function(i){"use strict";var r=MktSvc.Controls.Common.Object;var t=function(){function t(){}t.prototype.getName=function(){return t.getName()};t.prototype.enabledOnReadOnly=function(){return true};t.getName=function(){return"moveBlockCommand"};t.prototype.setup=function(t){this.eventBroker=t};t.prototype.exec=function(t,e,n){if(r.isNullOrUndefined(t)){return false}if(r.isNullOrUndefined(this.eventBroker)){return false}var o=new i.DesignerAddStartEventArgs(e,true);this.eventBroker.notify(i.DesignerInternalEventConstants.designerAddStart,o);return true};t.prototype.dispose=function(){};t.prototype.cleanup=function(t){};return t}();i.MoveBlockCommand=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var n=MktSvc.Controls.Common.String;var t=function(){function t(){this.cleanedUpImage="about:blank";this.imagePlaceholder=e.CommonUtils.getLocalizedImagePlaceholder()}t.prototype.isImageConfigured=function(t){return t!==this.imagePlaceholder&&!n.isNullUndefinedOrWhitespace(t)&&t!==this.cleanedUpImage};t.prototype.isPlaceholderNeeded=function(t){return!this.isImageConfigured(t)};t.prototype.getImagePlaceholder=function(t){return this.imagePlaceholder};return t}();e.ImagePlaceholderHelper=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.prototype.getName=function(){return"BasicFullPageToolbar"};t.prototype.getConfig=function(){return[["Cut","Copy","Paste","PasteFromWord","PasteText"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Find","Replace"],["SelectAll"],["BidiLtr","BidiRtl"],["Link","Unlink","Anchor"],["NumberedList","BulletedList"],["HorizontalRule"],"/",["Bold","Italic","Underline","Strike","Subscript","Superscript"],["RemoveFormat"],["Styles","Font","FontSize"],["TextColor","BGColor"],["SpecialChar"]]};return t}();t.BasicFullPageToolbar=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t){this.tabItem=t}t.prototype.isTabEnabled=function(t){return!t.isDesignerContent()};t.prototype.getTabItem=function(){return this.tabItem};return t}();t.FullPageTabItemVisibility=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t){this.tabItem=t}t.prototype.isTabEnabled=function(t){return t.isDesignerContent()};t.prototype.getTabItem=function(){return this.tabItem};return t}();t.DesignerTabItemVisibility=e})(Editor||(Editor={}));var Editor;(function(e){"use strict";var n=MktSvc.Controls.Common.String;var t=function(){function t(){var t=e.CommonUtils.getByClass(e.CommonConstants.fullPageContentEditorFrameClassName);this.editorContents=t.contents()}t.prototype.getButton=function(t){return new e.ToolbarButton(this.getButtonElement(t))};t.prototype.getButtonElement=function(t){return this.editorContents.find(n.Format(".cke_button__{0}",t.toLocaleLowerCase()))};return t}();e.StandardToolbar=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(t,e){this.name=t;this.label=e}t.prototype.getName=function(){return this.name};t.prototype.getLabel=function(){return e.CommonUtils.getLocalizedString(this.label)};return t}();e.Section=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var e=MktSvc.Controls.Common.ArrayQuery;var o=MktSvc.Controls.Common.Object;var i=MktSvc.Controls.Common.String;var t=function(){function t(t){this.supported=new e([n.Contract.blockTypeAttrName,n.Contract.containerAttrName,n.CommonConstants.dataTrackAttributeName,n.CommonConstants.dataTrackIdAttributeName,"data-form-block-id","data-formControlsPrefix","data-for","data-requiredErrorMessage","data-captchaObjectName","data-makeeditable","data-type","data-entity-id","data-lookup-name","data-lookup-id"]);this.attributePrefix="jSanity";this.jSanity=null;this.initDeferred=$.Deferred();this.jsanityDependencyId="designer-dependency-jsanity";this.executionContext=t}t.prototype.init=function(t){var e=this;if(window.jSanity){t();return}if(o.isNullOrUndefined(this.jSanity)){this.jSanity=n.CommonUtils.createScriptElementFromUrl(this.jsanityDependencyId,i.Format("{0}/{1}/{2}",this.executionContext.getLibsPath(),"jSanity","jsanity.min.js"),document);this.jSanity.onload=function(){e.initDeferred.resolve()};document.head.appendChild(this.jSanity)}this.initDeferred.done(t)};t.prototype.getSanitizedContent=function(t,e){e(this.sanitize(t))};t.prototype.sanitize=function(t){var o=this;if(i.isNullUndefinedOrWhitespace(t)){return $()}var e=window.jSanity.sanitize({inputString:n.CommonUtils.getWithDoctype(t),overflow:"scroll",allowLinks:true,attributePrefix:this.attributePrefix,debugLevel:0,dataAttributeCallback:function(e,t){if(o.supported.contains(function(t){return t.toLowerCase()===e.toLowerCase()})){return t}return null},customProtocols:{"{{":1,"#":1},linkClickCallback:function(){return false}});n.CommonUtils.walkTree($(e),function(t){var e=t.attr("name");var n=t.attr("id");if(!i.isNullUndefinedOrWhitespace(e)){t.attr("name",e.replace(o.attributePrefix+"_",i.Empty))}if(!i.isNullUndefinedOrWhitespace(n)){t.attr("id",n.replace(o.attributePrefix+"_",i.Empty))}});return $(e)};t.prototype.dispose=function(){this.jSanity=null;this.executionContext=null;n.CommonUtils.getById(this.jsanityDependencyId).remove()};return t}();n.jSanityContentSanitizer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=MktSvc.Controls.Common.Object;var n=function(){function t(){var o=this;this.onControlFocused=function(t){o.getFirstTabbableEditorElement(o.controlContainer).focus();t.preventDefault()};this.onContainerKeyDown=function(t){if(t.which===9&&t.shiftKey&&o.getFirstTabbableEditorElement(o.controlContainer).is(t.target)){var e=$(o.controlContainer.get(0).ownerDocument.body).find('[tabindex]:not([tabindex="0"]):not([tabindex^="-"])').toArray().map(function(t){return $(t)});var n=e.reduce(function(t,e){var n=Number(e.attr("tabindex"));return n>=Number(t.attr("tabindex"))&&n<o.assignedTabIndex?e:t});if(!o.controlContainer.is(n)){n.focus();t.preventDefault()}}}}t.prototype.init=function(t,e){if(e>0){this.assignedTabIndex=e;this.controlContainer=$(t).attr("tabindex",e).on("focus",this.onControlFocused).on("keydown",this.onContainerKeyDown)}};t.prototype.dispose=function(){if(!e.isNullOrUndefined(this.controlContainer)){this.controlContainer.off("focus",this.onControlFocused).off("keydown",this.onContainerKeyDown)}this.controlContainer=this.assignedTabIndex=null};t.prototype.getFirstTabbableEditorElement=function(t){return t.find(":tabbable:first")};return t}();t.ControlTabbingManager=n})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(a){"use strict";var e=MktSvc.Controls.Common.Object;var s=MktSvc.Controls.Common.KeyCodes;var t=function(){function t(t,e){this.eventBroker=t;this.blockProvider=e}t.prototype.getName=function(){return"BlockTabbableController"};t.prototype.setupBlocks=function(t){var r=this;this.onBlockChangedHandler=this.eventBroker.subscribe(a.DesignerInternalEventConstants.contentBlockChanged,function(t){r.processBlock(t.block)});t.each(function(t,i){r.processBlock($(i));$(i).on("keydown",function(t){var e=t.which||t.keyCode;if(!t.shiftKey&&e===s.Tab){var n=a.CommonUtils.getByClass(a.CommonConstants.designerContentEditorFrameClassName);var o=r.blockProvider.getBlocks(n.contents()).last();if($(i).is(o)){t.preventDefault();$(a.CommonUtils.getClassSelector(a.CommonConstants.tabButtonPreClassName+a.CommonConstants.toolboxTabContentClassName)).parent().focus();$(a.CommonUtils.getClassSelector(a.CommonConstants.tabButtonPreClassName+a.CommonConstants.toolboxTabContentClassName)).click()}}})});this.eventBroker.notify(a.DesignerInternalEventConstants.controllerReady,new a.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupBlocks=function(t){t.each(function(t,e){$(e).find("a").removeAttr("tabindex");$(e).find("img").removeAttr("tabindex")})};t.prototype.disposeBlocks=function(t){if(!e.isNullOrUndefined(t)){t.off("keydown")}};t.prototype.dispose=function(){this.eventBroker.unsubscribe(a.DesignerInternalEventConstants.contentBlockChanged,this.onBlockChangedHandler)};t.prototype.processBlock=function(t){$(t).find("a").attr("tabindex","-1");var e=$(t.closest("["+a.Contract.blockTypeAttrName+"]")).attr(a.Contract.blockTypeAttrName);if(e===a.CommonConstants.textToolType){$(t).find("img").attr("tabindex","-1")}};return t}();a.BlockTabbableController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=MktSvc.Controls.Common.KeyboardModifierType;var n=function(){function t(){}t.prototype.getCkEditorKeyCode=function(t){return t.modifiers.map(function(t){switch(t){case e.Alt:return CKEDITOR.ALT;case e.Control:return CKEDITOR.CTRL;case e.Shift:return CKEDITOR.SHIFT;default:throw new Error("Unknown keyboard modifier - "+t)}}).reduce(function(t,e){return t+e},t.inputKeyCode)};return t}();t.CkEditorKeyboardAdapter=n})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var i=MktSvc.Controls.Common.String;var r=MktSvc.Controls.Common.UniqueId;var t=function(){function t(t){this.eventBroker=t}t.prototype.getName=function(){return"ContainerIdController"};t.prototype.setupContainers=function(t){t.each(function(t,e){if(i.isNullOrWhitespace(o.CommonUtils.getId($(e)))){var n=r.generate("container");o.CommonUtils.setId($(e),n)}});this.eventBroker.notify(o.DesignerInternalEventConstants.controllerReady,new o.ControllerReadyEventArgs(this.getName()))};t.prototype.cleanupContainers=function(t){t.removeAttr("id")};t.prototype.disposeContainers=function(t){};t.prototype.dispose=function(){this.eventBroker=null};return t}();o.ContainerIdController=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var t=function(){function t(){}t.prototype.process=function(t,e){var n=$(t).contents();var o=n.find("a");o.each(function(t,e){var n=$(e);n.attr(i.CommonConstants.dataTrackAttributeName,i.CommonUtils.getNormalizedTrackAttributeValue(n))});e()};t.prototype.getName=function(){return"DataTrackingAttributeContentProcessor"};t.prototype.dispose=function(){};return t}();i.DataTrackingAttributeContentProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var t=function(){function t(){}t.prototype.process=function(t,e){var n=$(t).contents();var o=n.find("a");o.each(function(t,e){var n=$(e);n.attr("href",i.CommonUtils.getLinkWithProtocol(n.attr("href")))});e()};t.prototype.getName=function(){return"LinkContentProcessor"};t.prototype.dispose=function(){};return t}();i.LinkContentProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(l){"use strict";var t=function(){function t(){this.containerProvider=new l.ContainerProvider;this.contentChangedByHtmlMetaAttrName="html-editor"}t.prototype.process=function(t,e,n,o,i){var r=$(t).contents().find("head");var a=r.find("meta[name="+this.contentChangedByHtmlMetaAttrName+"]").length>0;if(i===l.CommonConstants.htmlEditorComponentName||this.isContentChangedByHtml||a){this.isContentChangedByHtml=true;if(!a){var s=$("<meta>").attr("name",this.contentChangedByHtmlMetaAttrName);r.append(s)}}e()};t.prototype.getName=function(){return"HandleChangesFromHtmlContentModelProcessor"};t.prototype.dispose=function(){};return t}();l.HandleChangesFromHtmlContentModelProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var t=function(){function t(){}t.prototype.process=function(t,e){var n=$(t).contents();var o=i.CommonUtils.getBySelector("table, th",n);o.each(function(t,e){var n=$(e).find(i.CommonUtils.getAttrSelector(i.Contract.blockTypeAttrName));var o=$(e).find(i.CommonUtils.getAttrSelector(i.Contract.containerAttrName));if(o.length!==0||n.length!==0){$(e).attr("aria-role","presentation")}});e()};t.prototype.getName=function(){return"TableDecoratorContentModelProcessor"};t.prototype.dispose=function(){};return t}();i.TableDecoratorContentModelProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(r){"use strict";var t=function(){function t(){this.blockProvider=new r.BlockProvider}t.prototype.process=function(t,e){var n=$(t).contents();var o=this.blockProvider.getBlocks(n);o.each(function(t,e){var n=$(e);var o=n.closest(r.CommonUtils.getAttrSelector(r.Contract.containerAttrName));if(o.length===0){var i=$("<div>").attr(r.Contract.containerAttrName,"true");$(e).wrap(i)}});e()};t.prototype.getName=function(){return"SetOrphanBlockContainerWrapContentModelProcessor"};t.prototype.dispose=function(){};return t}();r.SetOrphanBlockContainerWrapContentModelProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.block=t;return e}return t}(t.EventArgs);t.BlockMovedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.editorId=t;return e}return t}(t.EventArgs);t.FullPageEditorRenderedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.isFullscreen=t;return e}return t}(t.EventArgs);t.FullScreenChangedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.isVisible=t;return e}return t}(t.EventArgs);t.VisibilityChangedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){this.localizedTitle=e.CommonUtils.getLocalizedString("[Add]");this.addButtonImageCssClass="addButtonImage";this.addButtonCssClass="addButton";this.addButtonLabelCssClass="addButtonLabel"}t.prototype.getLabel=function(){return this.localizedTitle};t.prototype.getType=function(){return e.CommonConstants.buttonType};t.prototype.getClass=function(){return this.addButtonCssClass};t.prototype.getButtonImageClass=function(){return this.addButtonImageCssClass};t.prototype.getButtonLabelClass=function(){return this.addButtonLabelCssClass};t.prototype.getTitle=function(){return this.localizedTitle};return t}();e.AddToolsDropdownButton=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var o=MktSvc.Controls.Common.KeyCodes;var t=function(n){__extends(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;e.isFullscreen=false;e.minimizeTitle="[Minimize]";e.maximizeTitle="[Full Screen]";e.onClick=function(){e.updateFullscreenState(!e.isFullscreen)};e.closeButtonClicked=function(){e.updateFullscreenState(false)};e.escKeyHandler=function(t){if(t.which===o.Esc){e.updateFullscreenState(false)}};return e}t.prototype.init=function(t){n.prototype.init.call(this,t);this.render()};t.prototype.activate=function(){};t.prototype.render=function(){var t=$("<span>").addClass(e.CommonConstants.maximizeButtonImageCssClass).addClass(e.CommonConstants.editorFontCssClass);this.maximizeButtonContainer=$("<button></button>").addClass(e.CommonConstants.toolbarButtonCssClass).addClass(e.CommonConstants.maximizeButtonCssClass).attr("title",e.CommonUtils.getLocalizedString(this.maximizeTitle)).attr("aria-label",e.CommonUtils.getLocalizedString(this.maximizeTitle)).attr("aria-pressed",this.isFullscreen.toString()).attr("type",e.CommonConstants.buttonType).append(t);e.CommonUtils.getByClass(e.CommonConstants.menuBarItemsCssClass).append(this.maximizeButtonContainer);this.maximizeButtonContainer.on("click",this.onClick);this.eventBroker.subscribe(e.EventConstants.exitFullScreenButtonClicked,this.closeButtonClicked)};t.prototype.updateFullscreenState=function(t){if(this.isFullscreen===t)return;this.isFullscreen=t;this.updateButtonStyles();this.eventBroker.notify(e.EventConstants.maximizeExecuted,new e.FullScreenChangedEventArgs(this.isFullscreen));if(this.isFullscreen){$(document).on("keyup",this.escKeyHandler)}else{$(document).off("keyup",this.escKeyHandler)}};t.prototype.updateButtonStyles=function(){var t=this.maximizeButtonContainer.hasClass(e.CommonConstants.maximizeActiveCssClass)?this.maximizeTitle:this.minimizeTitle;this.maximizeButtonContainer.toggleClass(e.CommonConstants.maximizeActiveCssClass,this.isFullscreen);this.maximizeButtonContainer.attr("aria-pressed",this.isFullscreen.toString());this.maximizeButtonContainer.attr("title",e.CommonUtils.getLocalizedString(t));e.CommonUtils.setAriaAttribute(this.maximizeButtonContainer,"aria-label",e.CommonUtils.getLocalizedString(t))};t.prototype.deactivate=function(){};t.prototype.dispose=function(){$(document).off("keyup",this.escKeyHandler);this.maximizeButtonContainer.off("click");this.maximizeButtonContainer.remove();this.eventBroker.unsubscribe(e.EventConstants.exitFullScreenButtonClicked,this.closeButtonClicked)};return t}(e.Control);e.MaximizeButton=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(l){"use strict";var a=MktSvc.Controls.Common.Object;var s=MktSvc.Controls.Common.String;var c=MktSvc.Controls.Common.UniqueId;var d=MktSvc.Controls.Common.TraceLevel;var u=MktSvc.Controls.Common.Dictionary;var t=function(){function t(t,e,n,o,i){var r=this;this.html=s.Empty;this.doctypeString=s.Empty;this.id=c.generate();this.initialized=false;this.executionContext=t;this.eventBroker=n;this.metadataParser=e;this.documentPreProcessors=o;this.documentPostProcessors=i;this.contentChangedHandler=this.eventBroker.subscribe(l.EventConstants.contentChanged,function(t){var e=!a.isNullOrUndefined(t)&&!a.isNullOrUndefined(t.html)?t.html:s.Empty;var n=!a.isNullOrUndefined(t)&&!a.isNullOrUndefined(t.sourceId)?t.sourceId:s.Empty;r.setContent(e,n,t.component)})}t.prototype.init=function(){this.initialized=true;var t=new l.DocumentContentModelInitializedEventArgs(this.id);t.documentContentModel=this;this.eventBroker.notify(l.EventConstants.contentModelInitialized,t)};t.prototype.setContent=function(t,e,n,o){var i=this;this.html=t;this.doctypeString=l.CommonUtils.getDocTypeFromString(this.html);if(this.initialized){this.sourceDocument=l.CommonUtils.getNewContentDocument(this.html);this.onContentModelUpdated(e);this.designerResolvedDocument=l.CommonUtils.getNewContentDocument(this.html);this.runPreProcessors(this.designerResolvedDocument,n).done(function(){i.onPreProcessorsProcessed(e);i.finalizedDocument=l.CommonUtils.getNewContentDocument(l.CommonUtils.getDocumentContent(i.designerResolvedDocument,i.doctypeString));i.runPostProcessors(i.finalizedDocument,n).done(function(){i.onPostProcessorsProcessed(e)})});if(l.CommonUtils.isFunction(o)){o(true)}}else{if(l.CommonUtils.isFunction(o)){o(false)}}};t.prototype.runPreProcessors=function(t,e){var n=$.Deferred();this.runProcessor(t,this.documentPreProcessors,e,n);return n.promise()};t.prototype.runPostProcessors=function(t,e){var n=$.Deferred();this.runProcessor(t,this.documentPostProcessors,e,n);return n.promise()};t.prototype.getContentVersion=function(){return this.metadataParser.getValue(l.Contract.metadataDocumentVersionName,this.getContentNode())};t.prototype.getContentType=function(){return this.metadataParser.getValue(l.Contract.metadataDocumentTypeName,this.getContentNode())};t.prototype.getContent=function(){return this.html};t.prototype.extractContentFromDocument=function(t){if(t){return l.CommonUtils.getDocumentContent(t,this.doctypeString)}return s.Empty};t.prototype.getResolvedContent=function(){if(this.designerResolvedDocument){return l.CommonUtils.getDocumentContent(this.designerResolvedDocument,this.doctypeString)}return s.Empty};t.prototype.getFinalizedContent=function(){if(this.finalizedDocument){return l.CommonUtils.getDocumentContent(this.finalizedDocument,this.doctypeString)}return s.Empty};t.prototype.getContentNode=function(){return this.sourceDocument};t.prototype.getResolvedContentNode=function(){return this.designerResolvedDocument};t.prototype.getFinalizedContentNode=function(){return this.finalizedDocument};t.prototype.getDoctype=function(){return this.doctypeString};t.prototype.getStyleMetaEntries=function(){return this.metadataParser.getStyleMetaEntries(this.getContentNode())};t.prototype.updateStyleMetaValue=function(t,e){this.metadataParser.updateStyleMetaValue(this.getContentNode(),t,e)};t.prototype.isDesignerContent=function(){return this.getContentType()===l.Contract.metadataDocumentTypeDesignerValue};t.prototype.dispose=function(){this.eventBroker.unsubscribe(l.EventConstants.contentChanged,this.contentChangedHandler);this.documentPreProcessors.each(function(t){t.dispose()});this.documentPostProcessors.each(function(t){t.dispose()});this.eventBroker=null;this.documentPreProcessors=null;this.documentPostProcessors=null;this.sourceDocument=null;this.designerResolvedDocument=null;this.finalizedDocument=null};t.prototype.runProcessor=function(t,n,o,i){var r=this;var a=0;var s=function(t,e){r.eventBroker.notify(l.EventConstants.contentModelProcessCompleted,new l.ContentModelProcessorCompletedEventArgs(t,e));if(e){r.executionContext.getLogger().log(d.Error,"Editor.BaseEditorContentModel.runProcessor",new u({Processor:t,Message:"Failed to process content successfully"}))}else{r.executionContext.getLogger().log(d.Verbose,"Editor.BaseEditorContentModel.runProcessorFinished",new u({Processor:t,Message:"Finished content processing"}))}a++;if(a===n.count()){i.resolve()}};n.each(function(e){r.executionContext.getLogger().log(d.Verbose,"Editor.BaseEditorContentModel.runProcessorProcessing",new u({Processor:e.getName(),Message:"Executing content processing"}));r.executionContext.tryExecute(function(){e.process(t,function(t){return s(e.getName(),t)},r.executionContext,r.eventBroker,o)},"Run the "+e.getName()+" processor",false,function(){s(e.getName(),true)})})};t.prototype.onContentModelUpdated=function(t){this.eventBroker.notify(l.EventConstants.contentModelUpdated,new l.ContentChangedEventArgs(this.getContent(),this.id,t))};t.prototype.onPreProcessorsProcessed=function(t){this.eventBroker.notify(l.EventConstants.contentResolved,new l.ContentChangedEventArgs(this.getResolvedContent(),this.id,t))};t.prototype.onPostProcessorsProcessed=function(t){this.eventBroker.notify(l.EventConstants.contentFinalized,new l.ContentChangedEventArgs(this.getFinalizedContent(),this.id,t))};return t}();l.BaseEditorContentModel=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(a){"use strict";var s=MktSvc.Controls.Common.String;var n=MktSvc.Controls.Common.Object;var t=function(r){__extends(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}t.prototype.setContent=function(t,e,n,o){var i=this.getFragmentContent(a.CommonUtils.getNewContentDocument(t));if(s.isNullOrWhitespace(this.getContent())||this.getContent()!==i){r.prototype.setContent.call(this,i,e,n,o)}else{if(a.CommonUtils.isFunction(o)){o(false)}}};t.prototype.getContent=function(){return this.getFragmentContent(this.getContentNode())};t.prototype.extractContentFromDocument=function(t){return this.getFragmentContent(t)};t.prototype.getResolvedContent=function(){return this.getFragmentContent(this.getResolvedContentNode())};t.prototype.getFinalizedContent=function(){return this.getFragmentContent(this.getFinalizedContentNode())};t.prototype.getFragmentContent=function(t){if(!n.isNullOrUndefined(t)){var e=$(t).contents().find("head").find("title");if(e.length&&s.isNullOrWhitespace(e.html())){e.remove()}return($(t).contents().find("head").html()?$(t).contents().find("head").html().trim():s.Empty)+($(t).contents().find("body").html()?$(t).contents().find("body").html():s.Empty)}return s.Empty};return t}(a.BaseEditorContentModel);a.FragmentContentModel=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(r){"use strict";var t=function(i){__extends(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}t.prototype.setContent=function(t,e,n,o){if(this.html!==t){i.prototype.setContent.call(this,t,e,n,o)}else{if(r.CommonUtils.isFunction(o)){o(false)}}};return t}(r.BaseEditorContentModel);r.DocumentContentModel=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(o){__extends(t,o);function t(t,e){var n=o.call(this)||this;n.processName=t;n.processFailed=e;return n}return t}(t.EventArgs);t.ContentModelProcessorCompletedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){var t=function(){function t(){}t.prototype.create=function(){return new e.ImageGalleryCommand(new e.RandomImagePicker,new e.PopupRenderer)};return t}();e.BasicImageGalleryCommandFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var t=function(){function t(t){this.imagePickerFactory=t}t.prototype.create=function(t){var e=this.imagePickerFactory.create(t);var n=new o.ImageGalleryCommand(e,new o.PopupRenderer);return new o.ImageGalleryButton(n)};return t}();o.GalleryButtonFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var o=MktSvc.Controls.Common.UniqueId;var i=MktSvc.Controls.Common.LoadingModal;var t=function(){function t(){}t.prototype.create=function(t,e){return new n.HtmlContentEditor(o.generate("htmlEditorId"),new i,new n.MonacoLocaleProvider(e.getLocalizationProvider().getLocaleId()),t,e)};return t}();n.HtmlContentEditorFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t){this.defaultCode="1033";this.mapping={1036:"fr",1031:"de",1033:"",1040:"it",1041:"ja",1042:"ko",1049:"ru"};this.microsoftLocaleId=t}t.prototype.getLanguageCode=function(){return this.microsoftLocaleId in this.mapping?this.mapping[this.microsoftLocaleId]:this.mapping[this.defaultCode]};t.prototype.getLanguageDirection=function(){return"ltr"};return t}();t.MonacoLocaleProvider=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t,e){this.defaultCode="1033";this.mapping={1025:"ar",1026:"bg",1027:"ca",1028:"zh",1029:"cs",1030:"da",1031:"de",1032:"el",1033:"en",1035:"fi",1036:"fr",1037:"he",1038:"hu",1040:"it",1041:"ja",1042:"ko",1043:"nl",1044:"nb",1045:"pl",1046:"pt-br",1048:"ro",1049:"ru",1050:"hr",1051:"sk",1053:"sv",1054:"th",1055:"tr",1057:"id",1058:"uk",1060:"sl",1061:"et",1062:"lv",1063:"lt",1066:"vi",1069:"eu",1081:"hi",1086:"ms",1087:"kk",1110:"gl",2052:"zh-cn",2070:"pt",2074:"sr-latn",3076:"zh-hk",3082:"es",3098:"sr"};this.microsoftLocaleId=t;this.isRtl=e}t.prototype.getLanguageCode=function(){return this.microsoftLocaleId in this.mapping?this.mapping[this.microsoftLocaleId]:this.mapping[this.defaultCode]};t.prototype.getLanguageDirection=function(){return this.isRtl?"rtl":"ltr"};return t}();t.CkEditorLocaleProvider=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(o){__extends(t,o);function t(t,e){var n=o.call(this,t)||this;n.block=e;return n}return t}(t.EventArgs);t.BlockChangedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(t.EventArgs);t.DocumentContentModelInitializedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){this.containerProvider=new e.ContainerProvider}t.prototype.process=function(t,e){var n=$(t).contents();this.containerProvider.getContainers(n).removeAttr("id");e()};t.prototype.getName=function(){return"RemoveContainerIdContentModelProcessor"};t.prototype.dispose=function(){};return t}();e.RemoveContainerIdContentModelProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){this.blockProvider=new e.BlockProvider}t.prototype.process=function(t,e){var n=$(t).contents();this.blockProvider.getBlocks(n).removeAttr("id");e()};t.prototype.getName=function(){return"RemoveBlockIdContentModelProcessor"};t.prototype.dispose=function(){};return t}();e.RemoveBlockIdContentModelProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var r=MktSvc.Controls.Common.String;var a=MktSvc.Controls.Common.UniqueId;var t=function(){function t(){this.containerProvider=new i.ContainerProvider}t.prototype.process=function(t,e){var n=$(t).contents();var o=this.containerProvider.getContainers(n);o.each(function(t,e){if(r.isNullUndefinedOrWhitespace(i.CommonUtils.getId($(e)))){var n=a.generate("container");i.CommonUtils.setId($(e),n)}});e()};t.prototype.getName=function(){return"SetContainerIdContentModelProcessor"};t.prototype.dispose=function(){};return t}();i.SetContainerIdContentModelProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(i){"use strict";var r=MktSvc.Controls.Common.String;var a=MktSvc.Controls.Common.UniqueId;var t=function(){function t(){this.blockProvider=new i.BlockProvider}t.prototype.process=function(t,e){var n=$(t).contents();var o=this.blockProvider.getBlocks(n);o.each(function(t,e){if(r.isNullUndefinedOrWhitespace(i.CommonUtils.getId($(e)))){var n=a.generate("block");i.CommonUtils.setId($(e),n)}});e()};t.prototype.getName=function(){return"SetBlockIdContentModelProcessor"};t.prototype.dispose=function(){};return t}();i.SetBlockIdContentModelProcessor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){var e=function(){function t(){}t.prototype.createStyleSet=function(){return[{name:"Italic Title",element:"h2",styles:{"font-style":"italic"}},{name:"Subtitle",element:"h3",styles:{color:"#aaa","font-style":"italic"}},{name:"Special Container",element:"div",styles:{padding:"5px 10px",background:"#eee",border:"1px solid #ccc"}},{name:"Big",element:"big"},{name:"Small",element:"small"},{name:"Typewriter",element:"tt"},{name:"Computer Code",element:"code"},{name:"Keyboard Phrase",element:"kbd"},{name:"Sample Text",element:"samp"},{name:"Variable",element:"var"},{name:"Deleted Text",element:"del"},{name:"Inserted Text",element:"ins"},{name:"Cited Work",element:"cite"},{name:"Inline Quotation",element:"q"},{name:"Language: RTL",element:"span",attributes:{dir:"rtl"}},{name:"Language: LTR",element:"span",attributes:{dir:"ltr"}},{name:"Compact table",element:"table",attributes:{cellpadding:"5",cellspacing:"0",border:"1",bordercolor:"#ccc"},styles:{"border-collapse":"collapse"}},{name:"Borderless Table",element:"table",styles:{"border-style":"hidden","background-color":"#E6E6FA"}},{name:"Square Bulleted List",element:"ul",styles:{"list-style-type":"square"}}]};return t}();t.CkEditorContentStyleSetFactory=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.enterBrTagList=["div","a","img"];return t}();t.CkEditorEnterModeExceptions=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.element=t;return e}return t}(t.EventArgs);t.ContainerRenderedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this,null)||this;e.block=t;return e}return t}(t.EventArgs);t.DesignerDragStartEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.element=t;return e}return t}(t.EventArgs);t.ElementFocusedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.element=t;return e}return t}(t.EventArgs);t.ElementRenderedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.sectionName=t;return e}t.prototype.getSectionName=function(){return this.sectionName};return t}(t.EventArgs);t.SectionToolsPublishCompletedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.sectionName=t;return e}t.prototype.getSectionName=function(){return this.sectionName};return t}(t.EventArgs);t.SectionToolsPublishStartedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(o){__extends(t,o);function t(t,e){var n=o.call(this)||this;n.tool=t;n.sectionName=e;return n}t.prototype.getTool=function(){return this.tool};t.prototype.getSectionName=function(){return this.sectionName};return t}(t.EventArgs);t.ToolPublishedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(c){"use strict";var n=MktSvc.Controls.Common.DelayScheduler;var e=MktSvc.Controls.Common.ArrayQuery;var d=MktSvc.Controls.Common.Object;var r=MktSvc.Controls.Common.String;var a=MktSvc.Controls.Common.UniqueId;var i=MktSvc.Controls.Common.KeyboardCommand;var s=MktSvc.Controls.Common.KeyCodes;var u=MktSvc.Controls.Common.KeyboardKeyCodes;var m=MktSvc.Controls.Common.KeyboardModifierType;var t=function(l){__extends(o,l);function o(t,e,n,o,i,r,a){var s=l.call(this,t)||this;s.minHeight=540;s.fullPageSuffix="FullPage_";s.ckEditorProxy=null;s.iframe=null;s.innerIFrame=null;s.fullPageToolbarConfig=new c.BasicFullPageToolbar;s.modifiedElementIds=[];s.firefoxKeydownEventDelay=300;s.onContentModelInitialized=function(t){s.documentContentModel=t.documentContentModel};s.onContentModelUpdated=function(t){s.documentContentModel.isDesignerContent()?s.keyboardCommandManager.unregisterCommand(s.keyboardCommand):s.keyboardCommandManager.registerCommand(s.keyboardCommand);s.setContent(t)};s.onMaximizeExecuted=function(t){s.isFullScreen=t.isFullscreen;$(window).one("animationstart",s.onAnimationStart);$(window).one("animationend",s.onAnimationEnd);s.resizeTimer.schedule()};s.onAnimationStart=function(t){if($(t.target).find("#"+s.id).length){s.resizeTimer.stop(true)}};s.onAnimationEnd=function(t){if($(t.target).find("#"+s.id).length){s.resizeTimer.stop(true);s.resizeEditor()}};s.ckEditorProxy=e;if(!d.isNullOrUndefined(i)){s.fullPageToolbarConfig=i}if(d.isNullOrUndefined(r)){r=new c.ImagePlaceholderHelper}s.imagePlaceholderHelper=r;s.keyboardCommandManager=n;s.executionContext=o;s.accessibilityInstructions=a;return s}o.prototype.init=function(t){var e=this;this.eventBroker=t;this.eventBroker.subscribe(c.EventConstants.fullPageEditorContentChanged,function(){var t=e.ckEditorProxy.getChildEditableElementId(null,e.fullPageSuffix);if(!r.isNullUndefinedOrWhitespace(t)){if(e.modifiedElementIds.indexOf(t)===-1){e.modifiedElementIds.push(t)}e.changeTimer.schedule()}});this.eventBroker.subscribe(c.EventConstants.contentModelInitialized,this.onContentModelInitialized);this.eventBroker.subscribe(c.EventConstants.maximizeExecuted,this.onMaximizeExecuted);this.changeTimer=new n(this.eventBroker,c.DesignerInternalEventConstants.fullPageNonEventPropagationStart,c.DesignerInternalEventConstants.fullPageNonEventPropagationEnd);this.changeTimer.init(function(){e.broadcastContentChanged()});this.resizeTimer=new n(this.eventBroker);this.resizeTimer.init(function(){$(window).off("animationstart",e.onAnimationStart);$(window).off("animationend",e.onAnimationEnd);e.resizeEditor()});this.keyboardCommand=new i(u.oneKey,[m.Alt],function(){if(!e.documentContentModel.isDesignerContent()){$(c.CommonUtils.getClassSelector(c.CommonConstants.tabButtonPreClassName+c.CommonConstants.fullPageContentEditorcssClass)).focus().click()}});this.eventBroker.subscribe(c.EventConstants.contentModelUpdated,this.onContentModelUpdated);if(d.isNullOrUndefined(this.onImageSourceChanged)){this.eventBroker.subscribe(c.EventConstants.imageAttributeChanged,this.onImageSourceChanged=function(t){return e.updateImageSource(t)})}};o.prototype.activate=function(){l.prototype.activate.call(this);this.render();this.resizeEditor();c.AccessibilityInstructionsPopup.accessibilityInstructions=this.accessibilityInstructions||c.EditorAccessibilityInstructions.baseFullPageAccessibilityInstructions;if(c.CommonUtils.isIOS()&&this.iframe){$(this.iframe).contents().find("html").show()}};o.prototype.deactivate=function(){l.prototype.deactivate.call(this);if(c.CommonUtils.isIOS()&&this.iframe){$(this.iframe).contents().find("html").hide()}};o.prototype.setContent=function(t){if(t.sourceId===this.id||t.originalSourceId===this.id){return}if(t.html===this.sourceHtml){return}this.sourceHtml=t.html;if(!this.isActive){return}this.render()};o.prototype.render=function(){var i=this;if(d.isNullOrUndefined(this.iframe)){this.fullPageEditorIsLoading=true;var t=a.generate("foreignContentEditor");this.setupEditorIframe(t);this.ckEditorProxy.init(this.iframe,function(){var o=i.ckEditorProxy.createEditor(c.CommonUtils.getById(t,$($(i.iframe)).contents()),i.fullPageToolbarConfig);i.onCkEditorInitialized=i.eventBroker.subscribe(c.EventConstants.standardCkEditorInitialized,function(t){i.ckEditorProxy.registerPlugins();i.keyboardCommandManager.registerCommandsInIframe(i.iframe);i.innerIFrame=$(i.iframe).contents().find("iframe").get(0);$(i.iframe).on("focus",function(){i.ckEditorProxy.setEditorFocus(t.ckEditorInstanceName)});if(c.CommonUtils.isFirefox()){var e=i.innerIFrame.contentDocument;var n=new MktSvcCommon.SelectionManager;n.setup(e);$(i.iframe).contents().on("focus",function(){i.ckEditorProxy.setEditorFocus(t.ckEditorInstanceName,function(){var t=$(e).find("body").find(":not(:has(*))").get(0);if(t){n.setCaretPosition(t,0)}})});$(i.innerIFrame).on("load",function(){setTimeout(function(){$(i.innerIFrame).contents().on("keydown",function(t){var e=t.which||t.keyCode;if(e===s.Tab&&t.shiftKey){t.preventDefault();$("."+c.CommonConstants.menuBarCssClass+" :tabbable:last").focus()}})},i.firefoxKeydownEventDelay)})}i.elementId=o.element.getId();i.updateContent();c.CommonUtils.appendElementToHead($(i.iframe).contents(),i.getCustomCkEditorStylesElement());i.eventBroker.notify(c.EventConstants.controlRendered,new c.ControlRenderedEventArgs(i.id));i.fullPageEditorIsLoading=false})})}else if(!this.fullPageEditorIsLoading){this.ckEditorProxy.registerPlugins();this.updateContent()}};o.prototype.setupEditorIframe=function(t){this.iframe=document.createElement("iframe");var e=$(this.iframe);e.attr("title",this.executionContext.getLocalizationProvider().getLocalizedString("[FULL PAGE]"));e.addClass(c.CommonConstants.fullPageContentEditorFrameClassName);var n=this.getElement();n.empty();n[0].appendChild(this.iframe);this.initialHeight=this.isFullScreen?this.minHeight:e.height();this.iframe.contentWindow.document.open();this.iframe.contentWindow.document.write(r.Format('{0}<html lang="{1}"><head></head><body tabindex="-1"><textarea style="display:none" id={2} contenteditable="true">'+this.getFullPageHtmlDocument().outerHTML+"</textarea></body></html>",o.safeDocumentDoctype,this.executionContext.getLocalizationProvider().getLanguageName(),t));this.iframe.contentWindow.document.close()};o.prototype.updateContent=function(){var o=this;var t=this.getFullPageHtmlDocument();$(t).find("img").each(function(t,e){var n=$(e);n.attr(c.CommonConstants.designerImageSourceAttributeName,n.attr("src"));o.decorateImageOverlay(n,n.attr("src"))});this.ckEditorProxy.setContent(t.outerHTML,null,function(){o.cancelPendingOperations();$(o.innerIFrame).ready(function(){$(o.innerIFrame.contentDocument).off("keydown");o.keyboardCommandManager.registerCommandsInIframe(o.innerIFrame)});o.eventBroker.notify(c.EventConstants.fullPageEditorRendered,new c.FullPageEditorRenderedEventArgs(o.elementId))})};o.prototype.broadcastContentChanged=function(){var t=c.CommonUtils.getNewContentDocument(this.ckEditorProxy.getContent());var e=$(t).find("img");var n=e.filter(c.CommonUtils.getClassSelector(c.CommonConstants.designerUnconfiguredContentOverlayCssClassName));n.each(function(t,e){var n=$(e);c.CommonUtils.removeImageOverlay(n)});e.removeAttr(c.CommonConstants.designerImageSourceAttributeName);this.mergeUpdatedNodes(t);this.removeFullPageSuffixFromIds(t);this.modifiedElementIds=[];this.sourceHtml=d.isNullOrUndefined(this.documentContentModel)?c.CommonUtils.getDocumentContent(t):this.documentContentModel.extractContentFromDocument(t);this.eventBroker.notify(c.EventConstants.contentChanged,new c.ContentChangedEventArgs(this.sourceHtml,this.id,null,c.CommonConstants.fullPageEditorComponentName))};o.prototype.dispose=function(){var t=this;this.executionContext.tryExecute(function(){if(!d.isNullOrUndefined(t.eventBroker)){t.eventBroker.unsubscribe(c.EventConstants.contentModelInitialized,t.onContentModelInitialized);t.eventBroker.unsubscribe(c.EventConstants.standardCkEditorInitialized,t.onCkEditorInitialized);t.eventBroker.unsubscribe(c.EventConstants.contentModelUpdated,t.onContentModelUpdated);t.eventBroker.unsubscribe(c.EventConstants.maximizeExecuted,t.onMaximizeExecuted);t.eventBroker.unsubscribe(c.EventConstants.imageAttributeChanged,t.onImageSourceChanged);t.onImageSourceChanged=null}if(!d.isNullOrUndefined(t.keyboardCommandManager)){t.keyboardCommandManager.unregisterCommandsInIframe(t.innerIFrame);t.keyboardCommandManager.unregisterCommandsInIframe(t.iframe)}t.cancelPendingOperations();t.ckEditorProxy.dispose();t.documentContentModel=null;t.keyboardCommandManager=null;t.modifiedElementIds=null;t.eventBroker=null;t.elementId=null;$(t.innerIFrame).off();$(t.innerIFrame).remove();$(t.iframe).off();$(t.iframe).remove();t.fullPageEditorIsLoading=false;t.getElement().empty();if(!d.isNullOrUndefined(t.changeTimer)){t.changeTimer.dispose()}if(!d.isNullOrUndefined(t.resizeTimer)){t.resizeTimer.stop(true);t.resizeTimer.dispose()}},"Dispose the full page content editor")};o.prototype.cancelPendingOperations=function(){this.changeTimer.stop(true)};o.prototype.updateImageSource=function(t){if(t.attributeName===c.CommonConstants.designerTextBlockImageSourceAttributeName){t.imageElement.attr(c.CommonConstants.designerImageSourceAttributeName,t.attributeValue);this.decorateImageOverlay(t.imageElement,t.attributeValue)}};o.prototype.decorateImageOverlay=function(t,e){if(this.imagePlaceholderHelper.isPlaceholderNeeded(e)){c.CommonUtils.overlayImageElement(t,this.imagePlaceholderHelper.getImagePlaceholder(e))}else{c.CommonUtils.removeImageOverlay(t)}};o.prototype.mergeUpdatedNodes=function(o){var t=o.documentElement.outerHTML;var i=$(c.CommonUtils.getNewContentDocument(t).documentElement);new e(this.modifiedElementIds).each(function(t){var e=i.find("#"+t);var n=c.CommonUtils.getById(t,$(o).contents());if(n.length){n.get(0).outerHTML=e.get(0)?e.get(0).outerHTML:r.Empty}})};o.prototype.getFullPageHtmlDocument=function(){var i=this;var t=c.CommonUtils.getNewContentDocument(c.CommonUtils.getWithDoctype(this.sourceHtml));$(t).find("html").attr("lang",this.executionContext.getLocalizationProvider().getLanguageName());c.CommonUtils.walkTree($(t.documentElement),function(t){var e=MktSvc.Controls.Common.UniqueId.generate(i.fullPageSuffix);var n=t.attr("id");if(r.isNullUndefinedOrWhitespace(n)){n=r.Empty}var o=n+e;t.attr("id",o)});return t.documentElement};o.prototype.removeFullPageSuffixFromIds=function(t){var i=this;c.CommonUtils.walkTree($(t.documentElement),function(t){var e=t.attr("id");if(!r.isNullUndefinedOrWhitespace(e)){var n=e.indexOf(i.fullPageSuffix,0);if(n!==-1){var o=e.substring(0,n);if(r.isNullOrEmpty(o)){t.removeAttr("id")}else{t.attr("id",o)}}}})};o.prototype.resizeEditor=function(){this.ckEditorProxy.resizeEditor(this.isFullScreen?-1:this.initialHeight)};o.prototype.getCustomCkEditorStylesElement=function(){return $("<style>").attr("id",c.DesignerContentEditorStyles.ckEditorStylesId).text(c.DesignerContentEditorStyles.ckEditorStyles)};o.safeDocumentDoctype="<!DOCTYPE html>";return o}(c.Control);c.FullPageContentEditor=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(h){"use strict";var g=MktSvc.Controls.Common.ArrayQuery;var C=MktSvc.Controls.Common.UniqueId;var t=function(){function t(){}t.prototype.create=function(t,e,n,o,i,r,a,s){var l=new h.BlockProvider;r=r||(new h.BlockDefinitionFactory).create(t);var c=new h.ContainerProvider;var d=new h.AdditionalFontsProvider(e);var u=new h.CkEditorProxy(e,new h.CkEditorLocaleProvider(e.getLocalizationProvider().getLocaleId(),e.getLocalizationProvider().isRtl()),d,s);var m=new h.InlineCkEditorProxy(n,u,t,e,s);var p=new g([new h.BlockIdController(n),new h.BlockEditableController(l,n),new h.BlockDroppableController(n),new h.BlockDraggableController(n),new h.BlockInlineToolbarController(n,l,r,m,t.getCommands()),new h.BlockLoadedController(n,r),new h.BlockClickedController(n),new h.BlockTabbableController(n,l),new h.BlockAddModeController(n,l)]);var f=new g([new h.ContainerIdController(n),new h.ContainerDroppableController(n),new h.ContainerSortableController(n),new h.ContainerDragModeController(n),new h.ContainerAddModeController(n,c)]);return new h.DesignerContentEditor(C.generate("designerEditorId"),p,f,l,r,c,o,i,e,a)};return t}();h.DesignerContentEditorFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(r){"use strict";var t=function(){function t(t){this.eventBroker=t}t.prototype.convert=function(t,e,n,o){var i=this;return new r.TabControlItem(e,t.id,function(){return t.init(i.eventBroker)},function(){return t.activate()},function(){return t.deactivate()},function(){return t.dispose()},n,o)};return t}();r.ControlToTabItemConverter=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(u){"use strict";var m=MktSvc.Controls.Common.UniqueId;var t=function(){function t(){}t.prototype.create=function(t,e,n,o,i,r,a,s){var l=new u.AdditionalFontsProvider(e);var c=new u.CkEditorProxy(e,new u.CkEditorLocaleProvider(e.getLocalizationProvider().getLocaleId(),e.getLocalizationProvider().isRtl()),l,s);var d=new u.StandardCkEditorProxy(n,c,t,e,s);return new u.FullPageContentEditor(m.generate("fullPageEditorId"),d,o,e,i,r,a)};return t}();u.FullPageContentEditorFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));var Editor;(function(e){"use strict";var t=function(){function t(){}t.prototype.create=function(){return new e.ButtonRenderer};return t}();e.ButtonRendererFactory=t})(Editor||(Editor={}));var Editor;(function(t){"use strict";var e=function(){function t(t){this.command=t}t.prototype.getName=function(){return"dividerBorderStyleCombo"};t.prototype.getLabel=function(){return"[Border]"};t.prototype.getGroup=function(){return"[Set border]"};t.prototype.getCommand=function(){return this.command};t.prototype.getItems=function(){return new Array({value:"Solid",text:"[Solid]"},{value:"Dotted",text:"[Dotted]"},{value:"Dashed",text:"[Dashed]"},{value:"Double",text:"[Double]"},{value:"None",text:"[None]"})};return t}();t.DividerBorderStyleCombo=e})(Editor||(Editor={}));var Editor;(function(t){"use strict";var e=function(){function t(t){this.numberOfItems=20;this.command=t}t.prototype.getName=function(){return"dividerHeightCombo"};t.prototype.getLabel=function(){return"[Height]"};t.prototype.getGroup=function(){return"[Set height]"};t.prototype.getCommand=function(){return this.command};t.prototype.getItems=function(){var t=new Array;for(var e=1;e<=this.numberOfItems;e++){t.push({value:e.toString(),text:e.toString()})}return t};return t}();t.DividerHeightCombo=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));var Editor;(function(i){"use strict";var r=MktSvc.Controls.Common.Object;var t=function(){function t(){}t.prototype.getName=function(){return t.getName()};t.prototype.enabledOnReadOnly=function(){return true};t.getName=function(){return"borderStyleCommand"};t.prototype.setup=function(t){this.eventBroker=t};t.prototype.exec=function(t,e,n,o){if(r.isNullOrUndefined(t)){return false}if(r.isNullOrUndefined(this.eventBroker)){return false}t.find("p").css("border-bottom-style",o);this.eventBroker.notify(i.DesignerInternalEventConstants.contentChanged);return true};t.prototype.dispose=function(){};t.prototype.cleanup=function(t){};return t}();i.SetDividerBorderStyleCommand=t})(Editor||(Editor={}));var Editor;(function(i){"use strict";var r=MktSvc.Controls.Common.Object;var t=function(){function t(){}t.prototype.getName=function(){return t.getName()};t.prototype.enabledOnReadOnly=function(){return true};t.getName=function(){return"heightCommand"};t.prototype.setup=function(t){this.eventBroker=t};t.prototype.exec=function(t,e,n,o){if(r.isNullOrUndefined(t)){return false}if(r.isNullOrUndefined(this.eventBroker)){return false}t.find("p").css("border-bottom-width",o+"px");this.eventBroker.notify(i.DesignerInternalEventConstants.contentChanged);return true};t.prototype.dispose=function(){};t.prototype.cleanup=function(t){};return t}();i.SetDividerHeightCommand=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));var Editor;(function(n){"use strict";var o=MktSvc.Controls.Common.String;var t=function(){function t(t){var e=n.CommonUtils.getByClass(n.CommonConstants.designerContentEditorFrameClassName);this.toolbar=e.contents().find(o.Format("#cke_{0}",t))}t.prototype.getButton=function(t){return new n.ToolbarButton(this.getButtonElement(t))};t.prototype.getButtonElement=function(t){return this.toolbar.find(o.Format(".cke_button__{0}",t.toLocaleLowerCase()))};return t}();n.InlineToolbar=t})(Editor||(Editor={}));var Editor;(function(t){"use strict";var o=MktSvc.Controls.Common.Object;var e=function(){function t(t,e,n){this.buttonCssOnClass="cke_button_on";this.buttonCssOffClass="cke_button_off";if(!o.isNullOrUndefined(e)){this.buttonCssOnClass=e}if(!o.isNullOrUndefined(n)){this.buttonCssOffClass=n}this.button=t}t.prototype.isSelected=function(){return this.button.hasClass(this.buttonCssOnClass)};t.prototype.turnOn=function(){if(!this.isSelected()){this.button.removeClass(this.buttonCssOffClass);this.button.addClass(this.buttonCssOnClass)}};t.prototype.turnOff=function(){if(this.isSelected()){this.button.removeClass(this.buttonCssOnClass);this.button.addClass(this.buttonCssOffClass)}};t.prototype.getButton=function(){return this.button};return t}();t.ToolbarButton=e})(Editor||(Editor={}));var Editor;(function(t){"use strict";var e=MktSvc.Controls.Common.KeyboardCommand;var n=MktSvc.Controls.Common.KeyboardKeyCodes;var o=MktSvc.Controls.Common.KeyboardModifierType;var i=function(){function t(t){this.command=t}t.prototype.getName=function(){return"cloneBlockBtn"};t.prototype.getLabel=function(){return"[Clone Block]"};t.prototype.getCommand=function(){return this.command};t.prototype.getIconSrc=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEQAACxEBf2RfkQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC42/Ixj3wAAAG5JREFUOE+1jMEJwDAMAzNSl8pe3bAjuHag5YrikBD6OCOsQ8XMtmin1moDTudwLvwaswNBd0QGIhPKjoyEszIQPCOvvzrQHObhAKHDLGUGHWYpM+gwS5lBh1nKDDrMUmbQYf6UM/wzsEP3OY+VG3Syl/7fyVvFAAAAAElFTkSuQmCC"};t.prototype.getKeyboardShortcut=function(){return new e(n.cKey,[o.Alt,o.Shift])};return t}();t.CloneBlockButton=i})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));var Editor;(function(t){"use strict";var e=function(){function t(t){this.command=t}t.prototype.getName=function(){return"imgGalleryBtn"};t.prototype.getLabel=function(){return"[Image Gallery]"};t.prototype.getCommand=function(){return this.command};t.prototype.getIconSrc=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwwAADsMBx2+oZAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC45bDN+TgAAAVVJREFUOE+lkj1Lw1AUhoNSEMU6q6OC4CJCf4GLCFJdMiVYCPkiEBQcHQKCk3/BRd0VxE1wFHEUO4ijIFWQDgpSFOJzmhMUbFLFAw839z3veZObxPB9P/0NnuctGb1Km+OswwXcgYR84Kvr2Fdpc0y3P4rerXqEjuu6i9rKShtlAatBEKwJXD+Dqa2s+gV8L3y7UNNtVmUB3HWSc+/DA7ThJAzDeW1nVRTgOM4oA03owDkc43tlfSR4Tm3FAWgb8M7Aummag6IxuML+Bf0gSZKB3FgUIOdt8SQTKhmWZVUJuISLRqMx1BWLAjBtoctnW1DJ4PwzaPf0TlkrXbEkYAq9LQOQsN9kvYGUUE9txQFSGJcZvFaP8ARvcAbZjDZ6BkjRq0RRNM0LnLVte4TAbTT5rY/iOK7mATU5Xz/wXTFYhx2QL3SYB/wFU59kj+uWkabpP0iNT82hN14/Ux1SAAAAAElFTkSuQmCC"};t.prototype.getKeyboardShortcut=function(){return null};return t}();t.ImageGalleryButton=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));var Editor;(function(r){"use strict";var a=MktSvc.Controls.Common.Object;var t=function(){function t(){}t.prototype.getName=function(){return t.getName()};t.prototype.enabledOnReadOnly=function(){return true};t.getName=function(){return"cloneElementCommand"};t.prototype.setup=function(t){this.eventBroker=t};t.prototype.exec=function(t,e,n){var o=this;if(a.isNullOrUndefined(t)){return false}if(a.isNullOrUndefined(this.eventBroker)){return false}var i=new r.BlockCleanupRequestedEventArgs;i.block=t.clone(false,false);i.onAfterBlockCleanup=function(t){t.insertAfter(e);o.eventBroker.notify(r.EventConstants.blockAdded,i)};this.eventBroker.notify(r.DesignerInternalEventConstants.blockCleanupRequested,i);return true};t.prototype.dispose=function(){};t.prototype.cleanup=function(t){};return t}();r.CloneBlockCommand=t})(Editor||(Editor={}));var Editor;(function(o){"use strict";var i=MktSvc.Controls.Common.Object;var t=function(){function t(t,e){this.imagePicker=t}t.prototype.getName=function(){return t.getName()};t.prototype.enabledOnReadOnly=function(){return true};t.getName=function(){return"imageGalleryCommand"};t.prototype.setup=function(t){var e=this;this.eventBroker=t;this.imagePicker.setup(this.eventBroker);this.galleryImageSelectedDelegate=this.eventBroker.subscribe(MktSvcCommon.EventConstants.GalleryImageSelected,function(t){if(t.sourceId===e.imagePicker.getId()){e.changeImageSource(t)}})};t.prototype.exec=function(t,e,n){if(i.isNullOrUndefined(t)){return false}if(i.isNullOrUndefined(this.eventBroker)){return false}this.selectedItem=t;this.eventBroker.notify(o.EventConstants.imageGalleryCommandExecuted);this.imagePicker.open();return true};t.prototype.dispose=function(){if(!i.isNullOrUndefined(this.eventBroker)){this.eventBroker.unsubscribe(MktSvcCommon.EventConstants.GalleryImageSelected,this.galleryImageSelectedDelegate)}};t.prototype.cleanup=function(t){};t.prototype.changeImageSource=function(t){var e=this.selectedItem.find("img");var n=this.selectedItem.find(o.CommonUtils.getClassSelector(o.DetailsViewConstants.inputImageCssClass));if(e.length>0){e.attr(o.CommonConstants.designerImageSourceAttributeName,t.imageUrl);this.eventBroker.notify(o.EventConstants.imageAttributeChanged,new o.ImageAttributeChangedEventArgs(e,o.CommonConstants.designerImageSourceAttributeName,t.imageUrl,null));this.imagePicker.dispose();this.eventBroker.notify(o.DesignerInternalEventConstants.contentChanged);return}if(n.length){n.val(t.imageUrl);n.focusout();this.eventBroker.notify(o.EventConstants.imageInputChanged)}this.imagePicker.dispose()};return t}();o.ImageGalleryCommand=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.designerStylesId="designerStyles";t.ckEditorStylesId="ckEditorStyles";t.ckEditorSkinStylesId="ckEditorSkinStyles";t.designerStyles="\n[data-editorBlockType]:hover {\n    outline: 1px solid #8CBFE5;\n    border-radius:4px;\n    cursor:default;\n}\n\n.editorAccessibilityButton {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    top: 0;\n    left: 0;\n    z-index: -1;\n}\n\n.containerDragMode {\n    outline: 1px dotted #ddd;\n    min-height:5px;\n}\n\n.selectedDataContainer {\n    outline: 1px solid #8CBFE5;\n}\n\n.sort-highlight {\n    min-height: 15px !important;\n    display: inline-block !important;\n    width: 98% !important;\n    background-color: #95DCEF !important;\n    color: #000000 !important;\n    margin: 1% !important;\n    text-align: center !important;\n    cursor: pointer !important;\n}\n\n.regular-sort-highlight {\n    opacity: 0.6 !important;\n}\n\n.selected-sort-highlight {\n    border: 1px dotted grey !important;\n    opacity: 1 !important;\n}\n\n.handleWrapper {\n    position:relative;\n    width:100%;\n    margin-bottom:1px;\n}\n\n.handleWrapper .handle {\n    display:none;\n}\n\n.grab {\n    display: inline;\n    position: absolute;\n    margin-top: -10px;\n    right: 5px;\n    cursor: move;\n    font-size:22px;\n    color:#0072C6;\n    z-index:5;\n}\n\n[data-container] [contenteditable]:focus {\n    outline: 0 transparent;\n}\n\n.designer-unconfiguredcontent-overlay {\n    width:100%;\n}\n\n.unconfigured-overlay-icon {\n    width: 100%;\n    max-width: 125px;\n}\n\n.designer-content-editor-hidden {\n    display:none !important;\n}\n\n.iosScroll {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n}\n";t.ckEditorStyles='\n/* CKEditor dialog title */\n.cke_dialog_body .cke_dialog_title {\n    background-color: rgb(255,255,255);\n    border-bottom: none;\n    font-family: "Segoe UI Regular","Segoe UI";\n    font-feature-settings: "kern";\n    font-kerning: normal;\n    font-size: 30px;\n    font-style: normal;\n    font-weight: 400;\n    color: #267CD7;\n    padding-bottom: 0px;\n    padding-top: 6px;\n}\n\n/* CKEditor dialog body */\n.cke_dialog_body .cke_dialog_contents_body {\n    border-bottom: none;\n}\n\n/* CKEditor dialog footer */\n.cke_dialog_contents .cke_dialog_footer {\n    background-color: rgb(255,255,255);\n    border-top: none;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n/* CKEditor footer designer - should not be displayed */\n.cke_dialog_contents .cke_dialog_footer .cke_resizer {\n    display: none;\n}\n\n/* CKEditor footer buttons block */\ntable.cke_dialog_footer_buttons {\n    position: relative;\n    bottom: 3px;\n    margin-right: 0;\n}\n\n/* CKEditor footer buttons */\n.cke_dialog_footer_buttons a.cke_dialog_ui_button {\n    border-radius: 0px;\n    min-width: 90px;\n}\n\n/* CKEditor footer buttons text */\n.cke_dialog_footer_buttons a.cke_dialog_ui_button .cke_dialog_ui_button {\n    font-family:\'Segoe UI Regular\', \'Segoe UI\';\n    font-size: 14px;\n    font-style: normal;\n    font-feature-settings: "kern";\n    font-kerning: normal;\n    font-weight: 400;\n}\n\n/* CKEditor footer OK button */\n.cke_dialog_ui_button.cke_dialog_ui_button_ok,\n.cke_dialog_ui_button.cke_dialog_ui_button_ok:hover,\n.cke_dialog_ui_button.cke_dialog_ui_button_ok:focus\n{\n    border-color: #216AB7;\n    background-color: #216AB7;\n}\n\n/* CKEditor footer Cancel button */\n.cke_dialog_ui_button.cke_dialog_ui_button_cancel,\n.cke_dialog_ui_button.cke_dialog_ui_button_cancel:hover,\n.cke_dialog_ui_button.cke_dialog_ui_button_cancel:focus\n{\n    border-color: #BBBBBB;\n    background-color: #FFFFFF;\n}\n\n/* CKEditor footer OK button text */\n.cke_dialog_ui_button.cke_dialog_ui_button_ok .cke_dialog_ui_button {\n    color: #FFFFFF;\n}\n\n/* CKEditor footer Cancel button text */\n.cke_dialog_ui_button.cke_dialog_ui_button_cancel .cke_dialog_ui_button {\n    color: rgb(80, 80, 80)\n}\n\n/* CKEditor paste iframe (for paste dialogs) */\n.cke_dialog .cke_dialog_ui_html iframe.cke_pasteframe {\n    border-radius: 0px;\n    width: 100%;\n    box-sizing: border-box;\n}\n\n/* Fix opportunity to set focus(special characters dialog) */\nspan.cke_dialog_ui_html{\n    display:block\n}\n\n/* CKEditor dialog close button */\n.cke_dialog .cke_dialog_body .cke_dialog_close_button,\n.cke_dialog .cke_dialog_body .cke_dialog_close_button:hover {\n    opacity: 1;\n    top: 22px;\n    right: 22px;\n}\n\n/* CKEditor dialog contents text, legends and labels */\n.cke_dialog_body table.cke_dialog_contents .cke_dialog_ui_html,\n.cke_dialog_page_contents .cke_dialog_ui_labeled_label,\n.cke_dialog_contents .cke_dialog_ui_fieldset legend,\n.cke_dialog_contents .cke_dialog_ui_fieldset label {\n    font-family: "Segoe UI Regular","Segoe UI";\n    font-feature-settings: "kern";\n    font-kerning: normal;\n    font-size: 13px;\n    font-style: normal;\n    font-weight: 400;\n    color: rgb(80, 80, 80);\n}\n\n/* CKEditor dialog contents */\n.cke_dialog_body .cke_dialog_contents_body {\n    padding-top: 0px;\n    padding-bottom: 0px;\n}\n\n/* CKEditor dialog tabs */\n.cke_dialog_tabs .cke_dialog_tab,\n.cke_dialog_tabs .cke_dialog_tab:hover {\n    font-family: "Segoe UI Regular","Segoe UI";\n    font-feature-settings: "kern";\n    font-kerning: normal;\n    font-size: 13px;\n    font-style: normal;\n    font-weight: 400;\n    border-radius: 0px;\n    color: rgb(80, 80, 80);\n}\n\n/* CKEditor dialog body buttons */\n.cke_dialog_contents_body .cke_dialog_ui_button {\n    font-family: "Segoe UI Regular","Segoe UI";\n    font-feature-settings: "kern";\n    font-kerning: normal;\n    font-size: 13px;\n    font-style: normal;\n    font-weight: 400;\n    border-radius: 0px;\n    color: rgb(80, 80, 80);\n    background-color: #FFFFFF;\n}\n\n/* CKEditor dialog body inputs */\n.cke_dialog_contents_body .cke_dialog_ui_input_text {\n    font-family: "Segoe UI Regular","Segoe UI";\n    font-feature-settings: "kern";\n    font-kerning: normal;\n    font-style: normal;\n    font-weight: 400;\n    border-radius: 0px;\n}\n\n/* CKEditor dialog body focused inputs */\n.cke_dialog_contents_body .cke_dialog_ui_input_text:focus {\n    border-width: 1px;\n}\n\n.cke_dialog .cke_dialog_body {\n    box-shadow: 3px 3px 5px #888888;\n}\n\n.cke_dialog .cke_dialog_body .cke_dialog_title {\n    padding: 30px 20px 20px 20px;\n}\n\n.cke_dialog .cke_dialog_body .cke_dialog_close_button {\n    background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcTDR4qLT7wGQAAAVZJREFUOMuNU0Fqw0AMHGnX4HwlLwgklxYCxYdCoJBD6e96bCA5lEKhPfWSByTPyLULtqReLHvr2KU62asZaaTZpaqq4GFmV9/M/OufiJAH448YgseCp0BT57lKIpouMEUaNmFm7roR0RcAU9W7kV1UAKzFOLlXkFKCmS3NDMz8FkK49SIhhBtVfTUzmNkypdQr8A5lWYKZn7yriHzEGOcxxrmIfGZKHsuy7NRFVUVbGWb2HGP8bprmxczQNM0pHyPG+CAiO1emqr0CDxHZFUWxcqLni6JY5WTPj94DIrrk7hARiOjy33uwruv6PLyVdV2fAaxHbeyqMd8DeHdyCGERQlhke3hvMY7vR0gpQUQO2bY3InIUkSMzbzJ3Dm4jALCqdjYCOLXkraru29mhqntm3rack9uoqqCqqrptExFSSl7sKjznWCJCHD7T2Wx29QbynJM9/wO7NtviVH40xgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wNy0xOVQxMzozMDo0MiswMjowMBiQd3gAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTYtMDctMTlUMTM6MzA6NDIrMDI6MDBpzc/EAAAAAElFTkSuQmCC\');\n}\n\n.cke_dialog .cke_dialog_body .cke_dialog_contents .cke_dialog_contents_body {\n    padding: 0px 20px 30px 20px;\n}\n\n.cke_dialog .cke_dialog_body .cke_dialog_contents .cke_dialog_footer {\n    background-color: #dddddd;\n    padding: 10px 20px 10px 0px;\n}\n\n.cke_dialog .cke_dialog_body .cke_dialog_contents .cke_dialog_footer .cke_dialog_footer_buttons {\n    margin: 0px;\n    bottom: 0px;\n}\n\n.cke_float .cke_top {\n    border: 1px solid #d1d1d1;\n    box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.3);\n}\n';t.ckEditorSkinStyles="\n.cke_browser_ios .cke_contents\n{\n    overflow: auto !important;\n    -webkit-overflow-scrolling: touch !important;\n}\n\n.cke_button_icon.cke_button__about_icon {\n    background: url({0}/icons.png) no-repeat 0 -0px !important;\n}\n\n.cke_button_icon.cke_button__bold_icon {\n    background: url({0}/icons.png) no-repeat 0 -24px !important;\n}\n\n.cke_button_icon.cke_button__italic_icon {\n    background: url({0}/icons.png) no-repeat 0 -48px !important;\n}\n\n.cke_button_icon.cke_button__strike_icon {\n    background: url({0}/icons.png) no-repeat 0 -72px !important;\n}\n\n.cke_button_icon.cke_button__subscript_icon {\n    background: url({0}/icons.png) no-repeat 0 -96px !important;\n}\n\n.cke_button_icon.cke_button__superscript_icon {\n    background: url({0}/icons.png) no-repeat 0 -120px !important;\n}\n\n.cke_button_icon.cke_button__underline_icon {\n    background: url({0}/icons.png) no-repeat 0 -144px !important;\n}\n\n.cke_button_icon.cke_button__bidiltr_icon {\n    background: url({0}/icons.png) no-repeat 0 -168px !important;\n}\n\n.cke_button_icon.cke_button__bidirtl_icon {\n    background: url({0}/icons.png) no-repeat 0 -192px !important;\n}\n\n.cke_button_icon.cke_button__blockquote_icon {\n    background: url({0}/icons.png) no-repeat 0 -216px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__copy_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__copy_icon {\n    background: url({0}/icons.png) no-repeat 0 -240px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__copy_icon {\n    background: url({0}/icons.png) no-repeat 0 -264px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__cut_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__cut_icon {\n    background: url({0}/icons.png) no-repeat 0 -288px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__cut_icon {\n    background: url({0}/icons.png) no-repeat 0 -312px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__paste_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__paste_icon {\n    background: url({0}/icons.png) no-repeat 0 -336px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__paste_icon {\n    background: url({0}/icons.png) no-repeat 0 -360px !important;\n}\n\n.cke_button_icon.cke_button__bgcolor_icon {\n    background: url({0}/icons.png) no-repeat 0 -384px !important;\n}\n\n.cke_button_icon.cke_button__textcolor_icon {\n    background: url({0}/icons.png) no-repeat 0 -408px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__templates_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__templates_icon {\n    background: url({0}/icons.png) no-repeat 0 -432px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__templates_icon {\n    background: url({0}/icons.png) no-repeat 0 -456px !important;\n}\n\n.cke_button_icon.cke_button__copyformatting_icon {\n    background: url({0}/icons.png) no-repeat 0 -480px !important;\n}\n\n.cke_button_icon.cke_button__creatediv_icon {\n    background: url({0}/icons.png) no-repeat 0 -504px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__find_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__find_icon {\n    background: url({0}/icons.png) no-repeat 0 -528px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__find_icon {\n    background: url({0}/icons.png) no-repeat 0 -552px !important;\n}\n\n.cke_button_icon.cke_button__replace_icon {\n    background: url({0}/icons.png) no-repeat 0 -576px !important;\n}\n\n.cke_button_icon.cke_button__flash_icon {\n    background: url({0}/icons.png) no-repeat 0 -600px !important;\n}\n\n.cke_button_icon.cke_button__button_icon {\n    background: url({0}/icons.png) no-repeat 0 -624px !important;\n}\n\n.cke_button_icon.cke_button__checkbox_icon {\n    background: url({0}/icons.png) no-repeat 0 -648px !important;\n}\n\n.cke_button_icon.cke_button__form_icon {\n    background: url({0}/icons.png) no-repeat 0 -672px !important;\n}\n\n.cke_button_icon.cke_button__hiddenfield_icon {\n    background: url({0}/icons.png) no-repeat 0 -696px !important;\n}\n\n.cke_button_icon.cke_button__imagebutton_icon {\n    background: url({0}/icons.png) no-repeat 0 -720px !important;\n}\n\n.cke_button_icon.cke_button__radio_icon {\n    background: url({0}/icons.png) no-repeat 0 -744px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__select_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__select_icon {\n    background: url({0}/icons.png) no-repeat 0 -768px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__select_icon {\n    background: url({0}/icons.png) no-repeat 0 -792px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__textarea_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__textarea_icon {\n    background: url({0}/icons.png) no-repeat 0 -816px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__textarea_icon {\n    background: url({0}/icons.png) no-repeat 0 -840px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__textfield_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__textfield_icon {\n    background: url({0}/icons.png) no-repeat 0 -864px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__textfield_icon {\n    background: url({0}/icons.png) no-repeat 0 -888px !important;\n}\n\n.cke_button_icon.cke_button__horizontalrule_icon {\n    background: url({0}/icons.png) no-repeat 0 -912px !important;\n}\n\n.cke_button_icon.cke_button__iframe_icon {\n    background: url({0}/icons.png) no-repeat 0 -936px !important;\n}\n\n.cke_button_icon.cke_button__image_icon {\n    background: url({0}/icons.png) no-repeat 0 -960px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__indent_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__indent_icon {\n    background: url({0}/icons.png) no-repeat 0 -984px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__indent_icon {\n    background: url({0}/icons.png) no-repeat 0 -1008px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__outdent_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__outdent_icon {\n    background: url({0}/icons.png) no-repeat 0 -1032px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__outdent_icon {\n    background: url({0}/icons.png) no-repeat 0 -1056px !important;\n}\n\n.cke_button_icon.cke_button__smiley_icon {\n    background: url({0}/icons.png) no-repeat 0 -1080px !important;\n}\n\n.cke_button_icon.cke_button__justifyblock_icon {\n    background: url({0}/icons.png) no-repeat 0 -1104px !important;\n}\n\n.cke_button_icon.cke_button__justifycenter_icon {\n    background: url({0}/icons.png) no-repeat 0 -1128px !important;\n}\n\n.cke_button_icon.cke_button__justifyleft_icon {\n    background: url({0}/icons.png) no-repeat 0 -1152px !important;\n}\n\n.cke_button_icon.cke_button__justifyright_icon {\n    background: url({0}/icons.png) no-repeat 0 -1176px !important;\n}\n\n.cke_button_icon.cke_button__language_icon {\n    background: url({0}/icons.png) no-repeat 0 -1200px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__anchor_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__anchor_icon {\n    background: url({0}/icons.png) no-repeat 0 -1224px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__anchor_icon {\n    background: url({0}/icons.png) no-repeat 0 -1248px !important;\n}\n\n.cke_button_icon.cke_button__link_icon {\n    background: url({0}/icons.png) no-repeat 0 -1272px !important;\n}\n\n.cke_button_icon.cke_button__unlink_icon {\n    background: url({0}/icons.png) no-repeat 0 -1296px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__bulletedlist_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__bulletedlist_icon {\n    background: url({0}/icons.png) no-repeat 0 -1320px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__bulletedlist_icon {\n    background: url({0}/icons.png) no-repeat 0 -1344px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__numberedlist_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__numberedlist_icon {\n    background: url({0}/icons.png) no-repeat 0 -1368px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__numberedlist_icon {\n    background: url({0}/icons.png) no-repeat 0 -1392px !important;\n}\n\n.cke_button_icon.cke_button__maximize_icon {\n    background: url({0}/icons.png) no-repeat 0 -1416px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__newpage_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__newpage_icon {\n    background: url({0}/icons.png) no-repeat 0 -1440px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__newpage_icon {\n    background: url({0}/icons.png) no-repeat 0 -1464px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__pagebreak_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__pagebreak_icon {\n    background: url({0}/icons.png) no-repeat 0 -1488px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__pagebreak_icon {\n    background: url({0}/icons.png) no-repeat 0 -1512px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__pastetext_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__pastetext_icon {\n    background: url({0}/icons.png) no-repeat 0 -1536px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__pastetext_icon {\n    background: url({0}/icons.png) no-repeat 0 -1560px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__pastefromword_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__pastefromword_icon {\n    background: url({0}/icons.png) no-repeat 0 -1584px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__pastefromword_icon {\n    background: url({0}/icons.png) no-repeat 0 -1608px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__preview_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__preview_icon {\n    background: url({0}/icons.png) no-repeat 0 -1632px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__preview_icon {\n    background: url({0}/icons.png) no-repeat 0 -1656px !important;\n}\n\n.cke_button_icon.cke_button__print_icon {\n    background: url({0}/icons.png) no-repeat 0 -1680px !important;\n}\n\n.cke_button_icon.cke_button__removeformat_icon {\n    background: url({0}/icons.png) no-repeat 0 -1704px !important;\n}\n\n.cke_button_icon.cke_button__save_icon {\n    background: url({0}/icons.png) no-repeat 0 -1728px !important;\n}\n\n.cke_button_icon.cke_button__selectall_icon {\n    background: url({0}/icons.png) no-repeat 0 -1752px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__showblocks_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__showblocks_icon {\n    background: url({0}/icons.png) no-repeat 0 -1776px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__showblocks_icon {\n    background: url({0}/icons.png) no-repeat 0 -1800px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__source_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__source_icon {\n    background: url({0}/icons.png) no-repeat 0 -1824px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__source_icon {\n    background: url({0}/icons.png) no-repeat 0 -1848px !important;\n}\n\n.cke_button_icon.cke_button__specialchar_icon {\n    background: url({0}/icons.png) no-repeat 0 -1872px !important;\n}\n\n.cke_button_icon.cke_button__scayt_icon {\n    background: url({0}/icons.png) no-repeat 0 -1896px !important;\n}\n\n.cke_button_icon.cke_button__table_icon {\n    background: url({0}/icons.png) no-repeat 0 -1920px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__redo_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__redo_icon {\n    background: url({0}/icons.png) no-repeat 0 -1944px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__redo_icon {\n    background: url({0}/icons.png) no-repeat 0 -1968px !important;\n}\n\n.cke_rtl .cke_button_icon.cke_button__undo_icon,\n.cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__undo_icon {\n    background: url({0}/icons.png) no-repeat 0 -1992px !important;\n}\n\n.cke_ltr .cke_button_icon.cke_button__undo_icon {\n    background: url({0}/icons.png) no-repeat 0 -2016px !important;\n}\n\n.cke_button_icon.cke_button__spellchecker_icon {\n    background: url({0}/icons.png) no-repeat 0 -2040px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__about_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -0px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__bold_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -24px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__italic_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -48px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__strike_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -72px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__subscript_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -96px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__superscript_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -120px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__underline_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -144px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__bidiltr_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -168px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__bidirtl_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -192px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__blockquote_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -216px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__copy_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__copy_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -240px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__copy_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__copy_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -264px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__cut_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__cut_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -288px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__cut_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__cut_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -312px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__paste_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__paste_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -336px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__paste_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__paste_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -360px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__bgcolor_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -384px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__textcolor_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -408px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__templates_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__templates_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -432px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__templates_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__templates_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -456px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__copyformatting_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -480px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__creatediv_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -504px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__find_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__find_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -528px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__find_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__find_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -552px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__replace_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -576px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__flash_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -600px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__button_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -624px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__checkbox_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -648px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__form_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -672px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__hiddenfield_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -696px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__imagebutton_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -720px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__radio_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -744px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__select_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__select_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -768px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__select_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__select_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -792px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__textarea_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__textarea_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -816px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__textarea_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__textarea_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -840px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__textfield_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__textfield_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -864px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__textfield_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__textfield_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -888px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__horizontalrule_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -912px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__iframe_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -936px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__image_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -960px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__indent_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__indent_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -984px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__indent_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__indent_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1008px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__outdent_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__outdent_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1032px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__outdent_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__outdent_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1056px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__smiley_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1080px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__justifyblock_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1104px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__justifycenter_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1128px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__justifyleft_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1152px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__justifyright_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1176px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__language_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1200px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__anchor_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__anchor_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1224px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__anchor_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__anchor_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1248px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__link_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1272px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__unlink_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1296px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__bulletedlist_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__bulletedlist_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1320px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__bulletedlist_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__bulletedlist_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1344px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__numberedlist_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__numberedlist_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1368px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__numberedlist_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__numberedlist_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1392px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__maximize_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1416px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__newpage_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__newpage_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1440px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__newpage_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__newpage_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1464px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__pagebreak_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__pagebreak_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1488px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__pagebreak_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__pagebreak_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1512px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__pastetext_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__pastetext_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1536px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__pastetext_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__pastetext_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1560px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__pastefromword_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__pastefromword_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1584px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__pastefromword_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__pastefromword_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1608px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__preview_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__preview_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1632px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__preview_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__preview_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1656px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__print_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1680px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__removeformat_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1704px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__save_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1728px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__selectall_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1752px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__showblocks_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__showblocks_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1776px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__showblocks_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__showblocks_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1800px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__source_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__source_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1824px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__source_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__source_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1848px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__specialchar_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1872px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__scayt_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1896px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__table_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1920px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__redo_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__redo_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1944px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__redo_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__redo_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1968px !important;\n    background-size: 16px !important;\n}\n\n.cke_rtl.cke_hidpi .cke_button_icon.cke_button__undo_icon,\n.cke_hidpi .cke_mixed_dir_content .cke_rtl .cke_button_icon.cke_button__undo_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -1992px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_ltr .cke_button_icon.cke_button__undo_icon,\n.cke_ltr.cke_hidpi .cke_button_icon.cke_button__undo_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -2016px !important;\n    background-size: 16px !important;\n}\n\n.cke_hidpi .cke_button_icon.cke_button__spellchecker_icon {\n    background: url({0}/icons_hidpi.png) no-repeat 0 -2040px !important;\n    background-size: 16px !important;\n}\n\n.cke_button_on:focus {\n    outline: 1px solid lightgrey;\n}\n\n.cke_dialog_close_button:focus {\n    outline: #3961C6 1px solid !important;\n}\n";return t}();t.DesignerContentEditorStyles=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(t.EventArgs);t.BlockClickedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(o){__extends(t,o);function t(t,e){var n=o.call(this,e)||this;n.block=t;return n}return t}(t.EventArgs);t.BlockLoadedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(e){__extends(t,e);function t(t){return e.call(this,t)||this}return t}(t.EventArgs);t.DesignerInternalContentChangedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(t.EventArgs);t.BlockDeletedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.editor=t;return e}return t}(t.EventArgs);t.MonacoEditorCreatedEventArgs=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.monacoEditorCreated="htmlContentEditor.monacoEditorCreated";t.monacoEditorValueSet="monacoEditorValueUpdated";return t}();t.HtmlContentEditorInternalEventConstants=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.desktopTitle="[Desktop]";t.tabletTitle="[Tablet]";t.mobileTitle="[Mobile]";t.desktopPreviewCssClass="desktopPreview";t.tabletPortraitPreviewCssClass="tabletPortraitPreview";t.tabletLandscapePreviewCssClass="tabletLandscapePreview";t.mobilePortraitPreviewCssClass="mobilePortraitPreview";t.mobileLandscapePreviewCssClass="mobileLandscapePreview";t.desktopPreviewIconCssClass="desktopPreviewIcon";t.tabletPortraitPreviewIconCssClass="tabletPortraitPreviewIcon";t.tabletLandscapePreviewIconCssClass="tabletLandscapePreviewIcon";t.mobilePortraitPreviewIconCssClass="mobilePortraitPreviewIcon";t.mobileLandscapePreviewIconCssClass="mobileLandscapePreviewIcon";t.desktopPreviewIconAltText="[Desktop Preview]";t.tabletPortraitPreviewIconAltText="[Tablet Portrait Preview]";t.tabletLandscapePreviewIconAltText="[Tablet Landscape Preview]";t.mobilePortraitPreviewIconAltText="[Mobile Portrait Preview]";t.mobileLandscapePreviewIconAltText="[Mobile Landscape Preview]";t.desktopPreviewIconTitle="[Desktop Preview]";t.tabletPortraitPreviewIconTitle="[Tablet Portrait Preview]";t.tabletLandscapePreviewIconTitle="[Tablet Landscape Preview]";t.mobilePortraitPreviewIconTitle="[Mobile Portrait Preview]";t.mobileLandscapePreviewIconTitle="[Mobile Landscape Preview]";t.browserPreviewContentTitle="[User or external content rendered below]";t.browserPreviewContentTitleCssClass="browserPreviewContentTitle";t.browserPreviewContentTitleWarningCssClass="browserPreviewContentTitleWarning";t.browserPreviewContentCssClass="browserPreviewContent";t.desktopTitleCssClass="desktopTitle";t.tabletTitleCssClass="tabletTitle";t.mobileTitleCssClass="mobileTitle";t.activeCssClass="active";t.browserPreviewFrameClassName="browserPreviewFrame";t.browserPreviewFrameContainerCssClass="browserPreviewFrameContainer";t.browserPreviewFrameBorderClassName="browserPreviewFrameBorder";t.editorMode="editorMode";t.lightweightMode="lightweightMode";t.headerCssClass="browserPreviewHeader";t.headerIconButtonsContainerCssClass="browserPreviewHeaderIconButtonsGroup";t.headerIconCssClass="browserPreviewIcon";t.headerTitleCssClass="browserPreviewTitle";t.headerDividerCssClass="browserPreviewDivider";t.previewButtonContainerCssClass="previewButtonContainer";t.desktopIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAAkCAYAAAApbHJOAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8wOS8xNLgEYzwAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAACI0lEQVRYhe3Zv2sUQRQH8M+ciQR/IGpvZyFopYWCYpqAdRCrFBamsLCSiJVdChvRwkZL7bRKY5FKK8kfkEIQBAsVBBWSkHgxYzG73N7dnh65S+4W9guP2dl5N/P97sy8g/dCjFEnQghwCcs4jCZCl+P+I2ISm7iGt2X8Gz1+fAS3JEEx8wtjYA3sYAq3cbSM/EQPUQ2cyJ4/YiWbaJS7FbGB8ziDkzhQ5thLFGxn7VKM8e5Q6Q2AEMKiJKop7VoXeh2/4tjUkHkNismsza9EF/4lKsc4BIgi/su5H1GVQy2qKqhFVQW1qKqgFlUV1KKqglpUVVCLqgpqUVVBLaoq6CUqamVqfu0Tl37xM2tLM0n0TpFtYT17vhhCmDceeb9NXMn661m/xDPGLsMpfM4milIOcGcMbLvA6QtOl/EPnbnoEMIU3mA6e/VOOqaTRo8m/uBq1n+PmRjjWtGpTNQLzElfYwEv86G9ZNsncrKzeCpxehVjvNHu1X7sFrXSuQ9xsGx7R21SLHgg7do2HreNFxznpAT8bzwbNfE+xT2Rgtom5tvuVAhhGktSaaSJVXyXSjm7OSINHMPzGOOjTocQwn3cxI9dzJ9jA8dxVrrva5iNMS7DDD5oRZU8ygwaqSK+4h7O4ULWLuBbYa1Bo2G+VsQnXIfX0tmMe2A7Wv95uW11EBn2eisTUkUu4nK26LCiXNSq/uVll+Lu5OPDWuuQVBy88xeWMBjDkBnq5QAAAABJRU5ErkJggg==";t.tabletPortraitIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAfCAYAAAASsGZ+AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8wOS8xNLgEYzwAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAABDUlEQVRIie3WO0sDQRQF4G+SID4qSSfpbFL5jy3FH6CNraBolZSCtmJhZ6XkMRaZXceQwK5ZlCweuMzu2bn3zLkDy4U+7hAxaTAiRhjARUY2HVOMAp5xhDeMLRD8HIXACQ4L8jGR1xBj3KD+Ij/VuEp1Jz1fp+4WApsKJXTSGjoZGUL49t6UiCaLLqNsx9aLlNh6kf921UJ72vUrTso/+dY7ac/Ft0fk7+5kFmOcN1h7Wjz0MnIvhDC0sLnOYUAXM1k7ljBPcZAnPeE4ffhI3Kq5K2IX79m6bl/ETnagcu6qEucY4rRGzqSD/TW2V+E2xviAmxo5PbhUfRZ+xRleKu6fSqNvH/c17NeJMQafukOvoGFlOPUAAAAASUVORK5CYII=";t.tabletLandscapeIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAZCAYAAADJ9/UkAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8wOS8xNLgEYzwAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAABCklEQVRIie3WO04DMRSF4e8mFDxKamjYABIboGMJlBQshA2wBrITJBoQNKBsghIJiYfIJKYYCyaTQRRMXKBc6WjG9tX8tuW5PrCDeyRUmC5RVeaMsQsPjc5SqjCO3IAn3GGQlRpjfnhPiI7cZk6FLRxi2MoxyYlXkFLqXdjDS3sHBo1JRNYyYtj17TZ8WTH4DV48VvB/D0+tZzF4YAMXOMVjSfgQ7zhPKY1wCWuF4FOs4ywirnFUEp7whuMslD1wqwq3gs+d9q/KE9Hf7ZrNxMyi01n41SKDe9uRiJj5tmXzY43OZ7Wr7HQdf4ipurTu61jUDT6Uda8T3Aa2McIBXntedTsSNtV2/eQTkdzLYNJlu7AAAAAASUVORK5CYII=";t.mobilePortraitIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAZCAYAAADuWXTMAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8wOS8xNLgEYzwAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAA7ElEQVQ4je3UPUoEQRAF4K/Hdf030dBQT6AH8k7G3mAjT2CyiCsihouGpoKIoMz+tMH2QDPMjJMKW1DQVfXe66KhH5zgCRGzHhlxhyN4xjw1++YMNyEV8IFHhJT1WKLAOQ7xJlO7jTHqyhSThJ8WmfKg4bZ6FNhI55CTm1atxyDHFR3AXmusyWvyPyDP/wLHGEssqjr/hjshhLNMNKR55TILbGKrIuROskSZiW3jC/v4SbiAYRJ/od2nrnCK65b5tOvBxjHGV9y3zPfgQbN7vmNkZYz1WYlRwHFa7QLf2TsMcYBPK6ut+rsY4/IXtTt0+9qSD30AAAAASUVORK5CYII=";t.mobileLandscapeIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAPCAYAAAARZmTlAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwNy8wOS8xNLgEYzwAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAA90lEQVQ4jbXUPU4DMRAF4G9CUBRBCR0tUEAFN+AgtLSciAsgCk4ABUWQEKKkoaeMQKLJElOso7XCNuwuT5pixj/P73nswA6ucIIvhP5I2MIjzmGGRR4YOha4iZzAB16x0VHNNyY4xqiovytU3KWUZILNv0Zee6i2vFTzNi4YlxERqZ696KAEKo0zK0Qpa6Q/SqtXZGmIjUsEpupuvcBcbWdzJ4iUkq6BI3xiP+fXmI9/naUfKmzjMiIecJZJB1VyoKW7yjtZ74ouWLbUorSrfiQRfb6VtrVpjBXRKe5z3oWoUnfWZK0+hWfNIxo6KtzCHl7+ieQJuz95n93WFSrOpgAAAABJRU5ErkJggg==";t.ariaSelected="Selected.";t.ariaNotSelected="Not selected.";t.ariaOptionToActivate="Press enter or space to activate.";return t}();t.BrowserPreviewConstants=e})(Editor||(Editor={}));var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){"use strict";var t=function(){function t(){}t.entryName="additional-fonts";t.entryDataType=e.Contract.styleMetadataFontDataType;return t}();e.AdditionalFontsContract=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var i=MktSvc.Controls.Common.ArrayQuery;var a=MktSvc.Controls.Common.Object;var r=MktSvc.Controls.Common.String;var t=function(){function t(t){this.executionContext=t}t.prototype.getAdditionalFontsString=function(t){var e=this;var n=new i([]);this.executionContext.tryExecute(function(){n=t.where(function(t){return t.name===o.AdditionalFontsContract.entryName&&t.dataType.toLowerCase()===o.AdditionalFontsContract.entryDataType.toLowerCase()&&!a.isNullOrUndefined(t.value)}).select(function(t){return e.sanitizeUserFontDataString(t.value)}).where(function(t){return!r.isNullOrWhitespace(t)})},"Get additional fonts");return n};t.prototype.sanitizeUserFontDataString=function(t){var r=this;return t.split(";").map(function(t){var e=t.split("/").map(function(t){return t.trim()}).filter(function(t){return t!==""});var n;var o;switch(e.length){case 0:return null;case 1:o=r.getFilteredFontNamesList(e[0]);n=null;break;case 2:n=e[0];o=r.getFilteredFontNamesList(e[1]);break;default:return null}if(o.length>0){var i=o.join(", ");if(a.isNullOrUndefined(n)){n=i}return n+"/"+i}else{return null}}).filter(function(t){return!a.isNullOrUndefined(t)}).join(";").trim()};t.prototype.getFilteredFontNamesList=function(t){return t.split(",").map(function(t){return t.trim()}).filter(function(t){return t!==""})};return t}();o.AdditionalFontsProvider=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(u){"use strict";var e=MktSvc.Controls.Common.ArrayQuery;var s=MktSvc.Controls.Common.Object;var l=MktSvc.Controls.Common.String;var t=function(){function t(t){this.executionContext=t}t.prototype.getValue=function(n,o){var i=this;var r=null;this.executionContext.tryExecute(function(){var t=i.getStyleMetaEntries(o);var e=t.firstOrDefault(function(t){return t.name===n});if(!s.isNullOrUndefined(e)&&!l.isNullOrEmpty(e.value)){r=e.value}},"Get metadata value");return r};t.prototype.getStyleMetaEntries=function(l){var c=this;var d=new e([]);u.CommonUtils.getBySelector('meta[type="'+u.Contract.styleMetadataTypeAttr+'"]',$(l).contents()).each(function(t,e){var n=$(e).attr(u.Contract.metadataNameAttr);var o=$(e).attr(u.Contract.metadataValueAttr);var i=$(e).attr(u.Contract.metadataDatatypeAttr);var r=$(e).attr(u.Contract.metadataLabelAttr);var a=$(e).attr(u.Contract.metadataFormatAttr);var s=$(e).attr(u.Contract.metadataGroupAttr);d.add(new u.MetaStyle(o,n,r,i,c.isReferencedInDocument($(l),n,a),a,s))});return d};t.prototype.updateStyleMetaValue=function(e,i,r){var a=this;this.executionContext.tryExecute(function(){i.value=r;var t=$(e);u.CommonUtils.getBySelector('meta[name="'+i.name+'"]',t.contents()).attr("value",r);var n=s.isNullOrUndefined(i.format)||l.isNullOrWhitespace(i.format)?r:l.Format(i.format,r);var o="/* @"+i.name+" */ "+n+" /* @"+i.name+" */";t.contents().find("style").contents().each(function(t,e){if(e&&e.textContent){e.textContent=l.Replace(e.textContent,a.getMatchExpression(i.name),o)}});a.getReferencesInElements(t,i.name).each(function(t){var e=t.attributeValue.match(a.getInlineMatchExpression(i.name))?l.Replace(t.attributeValue,a.getInlineMatchExpression(i.name),n):n;t.element.attr(t.attributeName,e)})},"Update style meta value")};t.prototype.isReferencedInDocument=function(t,n,e){var o=this;var i=false;var r=t.contents().find("style").contents();r.each(function(t,e){if(e&&e.textContent&&e.textContent.match(o.getMatchExpression(n))){i=true;return false}return true});return i||this.getReferencesInElements(t,n).count()>0};t.prototype.getMatchExpression=function(t){return"/\\*([\\s])*@"+t+"([\\s])*\\*/[^;]*/\\*([\\s])*@"+t+"([\\s])*\\*/"};t.prototype.getInlineMatchExpression=function(t){return"/\\*([\\s])*@"+t+"([\\s])*\\*\\/"};t.prototype.getReferencesInElements=function(t,i){var r=this;var a=new e([]);u.CommonUtils.getBySelector("*[property-reference*="+i+"]",t.contents().children()).each(function(t,o){var e=$(o).attr("property-reference").split(";");e.forEach(function(t){var e=t.split(":")[0];var n=t.split(":")[1];if(!l.isNullOrWhitespace(n)&&(n.trim()==="@"+i.trim()||n.trim().match(r.getInlineMatchExpression(i)))){a.add(new u.MetaStyleReference(e.trim(),n.trim(),$(o)))}})});return a};return t}();u.MetadataParser=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(t,e,n){this.attributeName=t;this.attributeValue=e;this.element=n}return t}();t.MetaStyleReference=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var s=MktSvc.Controls.Common.String;var e=function(){function t(t,e,n,o,i,r,a){this.isReferenced=false;this.format=s.Empty;this.group=s.Empty;this.value=t;this.name=e;this.label=n;this.dataType=o;this.isReferenced=i;this.format=s.isNullOrWhitespace(r)?this.format:r;this.group=s.isNullOrWhitespace(a)?this.group:a}return t}();t.MetaStyle=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(n){"use strict";var t=function(){function t(t,e){this.metadataStylesRendererMapping=t;this.detailsViewControl=e;this.defaultMetaStyleRenderer=new n.MetadataTextFieldRenderer(this.detailsViewControl);this.setDefaultRendererMapping()}t.prototype.create=function(t){var e=this.defaultMetaStyleRenderer;if(this.metadataStylesRendererMapping.hasKey(t)){e=this.metadataStylesRendererMapping.get(t)}return e};t.prototype.setDefaultRendererMapping=function(){if(!this.metadataStylesRendererMapping.hasKey(n.Contract.styleMetadataColorDataType)){this.metadataStylesRendererMapping.addOrUpdate(n.Contract.styleMetadataColorDataType,new n.MetadataColorFieldRenderer(this.detailsViewControl))}if(!this.metadataStylesRendererMapping.hasKey(n.Contract.styleMetadataPictureDataType)){this.metadataStylesRendererMapping.addOrUpdate(n.Contract.styleMetadataPictureDataType,new n.MetadataImageFieldRenderer(this.detailsViewControl))}if(!this.metadataStylesRendererMapping.hasKey(n.Contract.styleMetadataNumberDataType)){this.metadataStylesRendererMapping.addOrUpdate(n.Contract.styleMetadataNumberDataType,this.defaultMetaStyleRenderer)}};return t}();n.MetadataFieldRendererFactory=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(r){"use strict";var a=MktSvc.Controls.Common.String;var t=function(){function t(t){this.detailsViewControl=t}t.prototype.render=function(t,e,n){var o=r.DetailsViewConstants.inputTypeText;var i={id:e.name};if(e.dataType===r.Contract.styleMetadataNumberDataType){o=r.DetailsViewConstants.inputTypeNumber;i["min"]=0}this.detailsViewControl.createInputField(t,r.CommonUtils.getLocalizedString("["+e.label+"]"),o,a.Empty,e.value,i,n)};return t}();r.MetadataTextFieldRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var t=function(){function t(t){this.detailsViewControl=t}t.prototype.render=function(t,e,n){this.detailsViewControl.createImageField(t,o.CommonUtils.getLocalizedString("["+e.label+"]"),o.DetailsViewConstants.inputTypeText,o.DetailsViewConstants.srcInputCssClass,e.value,{id:e.name},n,{hasFocus:false})};return t}();o.MetadataImageFieldRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var i=MktSvc.Controls.Common.String;var t=function(){function t(t){this.detailsViewControl=t}t.prototype.render=function(t,e,n){this.detailsViewControl.createInputColorField(t,o.CommonUtils.getLocalizedString("["+e.label+"]"),o.DetailsViewConstants.inputTypeText,i.Empty,e.value,{id:e.name},n)};return t}();o.MetadataColorFieldRenderer=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(s){"use strict";var l=MktSvc.Controls.Common.Object;var e=MktSvc.Controls.Common.KeyboardCommand;var n=MktSvc.Controls.Common.KeyboardKeyCodes;var o=MktSvc.Controls.Common.KeyboardModifierType;var t=function(r){__extends(t,r);function t(t,e,n,o){var i=r.call(this,t)||this;i.contentChangedHandler=function(t){if(t.sourceId!==i.id){i.setContent(t.html)}};i.onContentModelInitialized=function(t){i.documentContentModel=t.documentContentModel};i.id=t;i.detailsViewControl=e;i.keyboardCommandManager=o;i.metadataFieldRendererFactory=n;return i}t.prototype.init=function(t){this.eventBroker=t;this.detailsViewControl.init(this.id,t);this.eventBroker.subscribe(s.EventConstants.contentChanged,this.contentChangedHandler);this.eventBroker.subscribe(s.EventConstants.contentModelInitialized,this.onContentModelInitialized);this.keyboardCommandManager.registerCommand(new e(n.sixKey,[o.Alt],function(){$(s.CommonUtils.getClassSelector(s.CommonConstants.tabButtonPreClassName+s.CommonConstants.stylesTabContentClassName)).parent().focus();$(s.CommonUtils.getClassSelector(s.CommonConstants.tabButtonPreClassName+s.CommonConstants.stylesTabContentClassName)).click()}))};t.prototype.activate=function(){r.prototype.activate.call(this);this.render()};t.prototype.dispose=function(){this.eventBroker.unsubscribe(s.EventConstants.contentChanged,this.contentChangedHandler);this.eventBroker.unsubscribe(s.EventConstants.contentModelInitialized,this.onContentModelInitialized);this.detailsViewControl.dispose();this.getElement().empty();this.keyboardCommandManager=null;this.documentContentModel=null;this.detailsViewControl=null;this.eventBroker=null};t.prototype.setContent=function(t){this.html=t;if(this.isActive){this.render()}this.eventBroker.notify(s.DesignerInternalEventConstants.stylesViewContentUpdated,new s.ContentChangedEventArgs(this.html,this.id))};t.prototype.render=function(){var o=this;if(l.isNullOrUndefined(this.documentContentModel)){return}this.getElement().empty();var i=this.detailsViewControl.createSection(s.CommonUtils.getLocalizedString(s.DetailsViewConstants.stylesSectionTitle));var t=this.documentContentModel.getStyleMetaEntries();var e=this.documentContentModel.getContentNode();var r=false;t.each(function(n){var t=function(t){var e=t.val();o.documentContentModel.updateStyleMetaValue(n,e);o.html=s.CommonUtils.getDocumentContent(o.documentContentModel.getContentNode(),o.documentContentModel.getDoctype());o.eventBroker.notify(s.EventConstants.contentChanged,new s.ContentChangedEventArgs(o.html,o.id))};if(n.isReferenced&&!l.isNullOrUndefined(n.dataType)&&!l.isNullOrUndefined(n.value)){var e=o.metadataFieldRendererFactory.create(n.dataType);e.render(i,n,t);r=true}});if(!r){var n=s.CommonUtils.getLocalizedString("[Empty Styles View Message]");var a=$("<div>").addClass(s.DetailsViewConstants.emptyWatermarkClassName).text(n);this.getElement().append(a)}this.getElement().find("."+s.DetailsViewConstants.sectionContainerClassName).toggle(r);this.eventBroker.notify(s.EventConstants.controlRendered,new s.ControlRenderedEventArgs(this.id,s.CommonUtils.getDocumentContent(e,this.documentContentModel.getDoctype())))};return t}(s.Control);s.StylesView=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(e){var t=function(){function t(t,e){var n=this;this.contentResolvedHandler=function(){n.tabItemsVisibility.each(function(t){var e=t.getTabItem();if(t.isTabEnabled(n.documentContentModel)){e.enable()}else{e.disable()}});n.onVisibilityUpdated()};this.onContentModelInitialized=function(t){n.documentContentModel=t.documentContentModel};this.tabItemsVisibility=t;this.eventBroker=e}t.prototype.init=function(t){this.onVisibilityUpdated=t;this.eventBroker.subscribe(e.EventConstants.contentModelInitialized,this.onContentModelInitialized);this.eventBroker.subscribe(e.EventConstants.contentResolved,this.contentResolvedHandler)};t.prototype.dispose=function(){this.eventBroker.unsubscribe(e.EventConstants.contentModelInitialized,this.onContentModelInitialized);this.eventBroker.unsubscribe(e.EventConstants.contentResolved,this.contentResolvedHandler);this.documentContentModel=null;this.tabItemsVisibility=null};return t}();e.TabControlVisibilityManager=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.tabsStateUpdated="tabcontrol.tabsStateUpdated";return t}();t.TabControlEventConstants=e})(Editor||(Editor={}));var Editor;(function(t){"use strict";var e=MktSvc.Controls.Common.KeyboardCommand;var n=MktSvc.Controls.Common.KeyboardKeyCodes;var o=MktSvc.Controls.Common.KeyboardModifierType;var i=function(){function t(t){this.command=t}t.prototype.getName=function(){return"deleteBlockBtn"};t.prototype.getLabel=function(){return"[Delete Block]"};t.prototype.getCommand=function(){return this.command};t.prototype.getIconSrc=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEQAACxEBf2RfkQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC42/Ixj3wAAAHlJREFUOE+1k9ENgCAMRBnBkVym+49QPeLV0jRWMJK80DO+80NoqtpEZMM+Ax3/QGeg96mgLxasMoTsSxne+a1gv0izd9KCtxnYACohZmADqISYwfArKyFmYAOohJiBDaASYgY2AL5Q0UWu1QJCsV/Nc+eBeeQu0HYAkd+Ad00/Q7UAAAAASUVORK5CYII="};t.prototype.getKeyboardShortcut=function(){return new e(n.dKey,[o.Alt,o.Shift])};return t}();t.DeleteBlockButton=i})(Editor||(Editor={}));var Editor;(function(r){"use strict";var a=MktSvc.Controls.Common.Object;var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getName=function(){return e.getName()};e.prototype.enabledOnReadOnly=function(){return true};e.getName=function(){return"deleteBlockCommand"};e.prototype.setup=function(t){this.eventBroker=t};e.prototype.exec=function(t,e,n){if(a.isNullOrUndefined(t)){return false}if(a.isNullOrUndefined(this.eventBroker)){return false}var o=this.ckEditorProxy.getCkEditorId(t);this.ckEditorProxy.destroyEditor(o);e.remove();var i=new r.BlockDeletedEventArgs;i.block=t;this.eventBroker.notify(r.EventConstants.blockDeleted,i);return true};e.prototype.dispose=function(){};e.prototype.cleanup=function(t){};return e}(r.CkEditorCommand);r.DeleteBlockCommand=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict"})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(o){"use strict";var e=MktSvc.Controls.Common.String;var t=function(n){__extends(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}t.prototype.init=function(t){var e=this;n.prototype.init.call(this,t);this.onContentChanged=function(t){if(t.sourceId===e.Id){return}e.saveState(t.html)};this.control.getEventBroker().subscribe(o.EventConstants.contentChanged,this.onContentChanged);this.savedStates=new Array;this.currentStateIndex=-1;this.saveState(this.control.getContent())};t.prototype.isStateValidForSave=function(t){return!(e.isNullOrWhitespace(t)||this.savedStates.length>0&&this.savedStates[this.currentStateIndex]===t)};t.prototype.restoreState=function(t){if(!e.isNullOrWhitespace(t)){this.control.setContent(t,this.Id)}};t.prototype.dispose=function(){n.prototype.dispose.call(this);this.control.getEventBroker().unsubscribe(o.EventConstants.contentChanged,this.onContentChanged)};return t}(MktSvcCommon.UndoRedo.UndoRedoManagerBase);o.UndoRedoManager=t})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){}t.html5ColorPickerSupported=function(){var t=document.createElement("input");t.setAttribute("type","color");return t.type.toLowerCase()==="color"}();return t}();t.BrowserFeatureSupport=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var Editor;(function(t){"use strict";var i=MktSvc.Controls.Common.Object;var r=MktSvc.Controls.Common.String;var e=function(){function e(){}e.rgbToHex=function(t){if(i.isNullOrUndefined(t)){return r.Empty}var e=t.replace(/\s/g,r.Empty).match(/^rgba?\((\d+),(\d+),(\d+)/i);if(e&&e.length===4){var n="#";for(var o=1;o<e.length;o++){n+=("0"+parseInt(e[o]).toString(16)).slice(-2)}return n}return t};e.toHex=function(t){e.converterCanvasContext.fillStyle=t;return e.converterCanvasContext.fillStyle};e.converterCanvasContext=document.createElement("canvas").getContext("2d");return e}();t.ColorUtils=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var Editor;(function(t){"use strict";var e=function(){function t(){this.imagePickerId=MktSvc.Controls.Common.UniqueId.generate()}t.prototype.setup=function(t){this.emailEventBroker=t};t.prototype.open=function(t){this.galleryControlCallback(this.getNewImageSource())};t.prototype.getId=function(){return this.imagePickerId};t.prototype.dispose=function(){};t.prototype.galleryControlCallback=function(t){var e=new MktSvcCommon.EventArgs.GalleryImageSelectedEventArgs(this.imagePickerId);e.imageUrl=t;this.emailEventBroker.notify(MktSvcCommon.EventConstants.GalleryImageSelected,e)};t.prototype.getNewImageSource=function(){var t=["https://c.s-microsoft.com/da-dk/CMSImages/MMD_Lumia950Hol_1127_540x304_EN_US.jpg?version=1cf993b2-dcfb-fde5-9910-40d857d2bab5","https://c.s-microsoft.com/en-gb/CMSImages/WinPCs_3rdParty_1201_540x304_EN_US.jpg?version=cbda645e-081d-2a1e-4259-13b337738575","https://c.s-microsoft.com/da-dk/CMSImages/OFC_OutlookRefreshBG_1201_540x304_EN_US.jpg?version=6b0ffa34-7f6a-678e-8e3f-797cfbbd7254","https://c.s-microsoft.com/da-dk/CMSImages/Apps_Edge_0729_540x304_EN_US.jpg?version=d8aba226-9774-3d28-4191-0730f4b8df9f"];this.lastSelectedImageIndex=this.getRandomIndexWithoutTheSpecified(t.length-1,this.lastSelectedImageIndex);return t[this.lastSelectedImageIndex]};t.prototype.getRandomIndexWithoutTheSpecified=function(t,e){var n=Math.floor(Math.random()*t);if(n===e){return this.getRandomIndexWithoutTheSpecified(t,e)}return n};return t}();t.RandomImagePicker=e})(Editor||(Editor={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MscrmControls;(function(C){var t;(function(t){"use strict";var e=function(){function t(){}t.prototype.init=function(l,c,d,u,m){var p=this;var f=window.location.protocol+"//"+window.location.host+"/js/BaseHtmlContentDesigner/Libs/msdyncrm_";var h=$("html").attr("crm-lcid");var t={reporting:{reportFailure:function(t,e,n,o){}.bind(this),reportSuccess:function(t,e){}.bind(this)}};var g=new MktSvcCommon.Logger.TelemetryLogger("Portals",t);var e=new MktSvc.Controls.Common.LabelsProvider(h,new MktSvc.Controls.Common.AjaxCall,g,f).getLabels();$.when(e).then(function(t){var e=new MktSvc.Controls.Common.LocalizationProvider(t,h,false,g);var n=new C.CkEditorCustomControl.EditorExecutionContext(e,g,f);Editor.CommonUtils.localizationProvider=n.getLocalizationProvider();var o=new Editor.BasicPlugin(new Editor.RandomImagePicker);var i=new C.CkEditorCustomControl.CkEditorCustomControlFactory;p.editorControl=i.create(o,n,d,u);p.editorControl.init($("#"+l));p.editorControl.setContent(c);i.getEditorComposeControl().activate();for(var r=0,a=m;r<a.length;r++){var s=a[r];p.editorControl.getEventBroker().subscribe(s.EventName,s.SubscriberFunc)}})};Object.defineProperty(t.prototype,"EditorControl",{get:function(){return this.editorControl},enumerable:true,configurable:true});return t}();t.CkEditorCustomControl=e})(t=C.CkEditorCustomControl||(C.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MscrmControls;(function(t){var e;(function(p){"use strict";var f=MktSvc.Controls.Common.ArrayQuery;var h=MktSvc.Controls.Common.UniqueId;var g=MktSvc.Controls.Common.EventBroker;var t=function(){function t(){}t.prototype.create=function(t,e,n,o){Editor.CommonUtils.localizationProvider=e.getLocalizationProvider();var i=new g(e.getLogger());var r=new MktSvc.Controls.Common.KeyboardCommandManager;var a=new Editor.AccessibilityInstructionsPopup(e.getLogger());var s=new p.CustomFullPageContentEditorFactory(o).create(t,e,i,r,n);var l=new Editor.LayoutRenderer;var c=new Editor.LayoutConfiguration;c.cssClass=Editor.CommonConstants.fullPageContentEditorcssClass;var d=new Editor.ComponentLayoutConfiguration;d.cssClass="fullPageEditorContainer";d.id=s.id;c.components=new f([new f([d])]);this.contentEditorControl=new Editor.ComposeControl(h.generate("contentEditorTab"),new f([s]),l,c);var u=new Editor.LayoutConfiguration;u.cssClass=Editor.CommonConstants.editorContainerCssClass;u.components=new f([new f([d])]);var m=new p.CustomContentModel(e,new Editor.MetadataParser(e),i,new f([new Editor.SetOrphanBlockContainerWrapContentModelProcessor,new Editor.SetContainerIdContentModelProcessor,new Editor.SetBlockIdContentModelProcessor]),new f([new Editor.RemoveContainerIdContentModelProcessor,new Editor.RemoveBlockIdContentModelProcessor]));return new Editor.EditorControl(e,l,u,new f([this.contentEditorControl]),i,m,r,new Editor.UndoRedoManager,a)};t.prototype.getEditorComposeControl=function(){return this.contentEditorControl};return t}();p.CkEditorCustomControlFactory=t})(e=t.CkEditorCustomControl||(t.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MscrmControls;(function(t){var e;(function(t){"use strict";var e=function(){function t(t,e){this.name=t;this.config=e}t.prototype.getName=function(){return this.name};t.prototype.getConfig=function(){return this.config};return t}();t.CKEditorCustomToolbar=e})(e=t.CkEditorCustomControl||(t.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MscrmControls;(function(t){var e;(function(u){"use strict";var t=function(){function t(){}t.prototype.create=function(t,e,n,o,i,r,a){var s=this;this.contentsCss=o;this.textAreaId=e;this.ckEditorControl=new u.CkEditorCustomControl;var l=new u.EventListener(Editor.EventConstants.contentFinalized,this.UpdateContent.bind(this));var c=new u.EventListener(Editor.EventConstants.controlRendered,this.AddCustomCssOnControlRendered.bind(this));var d=new u.EventListener(Editor.EventConstants.standardCkEditorInitialized,function(t){s.ckEditorInstance=CKEDITOR.instances[t.ckEditorInstanceName];if(!s.ckEditorInstance){var e=$("."+Editor.CommonConstants.fullPageContentEditorFrameClassName);for(var n=0;n<e.length;n++){var o=e.get(n);s.ckEditorInstance=o.contentWindow.CKEDITOR.instances[t.ckEditorInstanceName];if(s.ckEditorInstance){break}}}if(s.ckEditorInstance){s.ckEditorInstance.getContent=function(){return s.ckEditorControl.EditorControl.getContent()};s.ckEditorInstance.setContent=function(t){s.ckEditorControl.EditorControl.setContent(t);s.AddCustomCssOnControlChanged();s.ckEditorInstance.focus()};var i=s.ckEditorInstance;if(i.commands.source){i.commands.source.on("state",function(t){if(i.commands.source.state==CKEDITOR.TRISTATE_ON){var e=s.ckEditorControl.EditorControl.getContent();i.setData(e)}else if(i.commands.source.state==CKEDITOR.TRISTATE_OFF){s.AddCustomCssOnControlChanged()}})}}});if(r==null||r==undefined){r=new Array}r.push(d);r.push(c);r.push(l);this.ckEditorControl.init(t,i,n,a,r)};Object.defineProperty(t.prototype,"CKEditorInstance",{get:function(){return this.ckEditorInstance},enumerable:true,configurable:true});t.prototype.UpdateContent=function(){var t=this.ckEditorControl.EditorControl.getContent();$("#"+this.textAreaId).val(t)};t.prototype.AddCustomCssOnControlRendered=function(t){var e=$($("#"+t.viewId)[0].getElementsByClassName("fullPageContentEditorFrame")[0]).contents().find(".cke_contents");if(e){e.height(e.height()+17)}var n=$($("#"+t.viewId)[0].getElementsByClassName("fullPageContentEditorFrame")[0]).contents().find(".cke_wysiwyg_frame").contents()[0];if(n){this.AddCustomCss(n)}var o=$("#"+this.textAreaId).attr("title");if(o){var i=$("iframe.cke_wysiwyg_frame",$($("#"+t.viewId)[0].getElementsByClassName("fullPageContentEditorFrame")[0]).contents());if(i){i.attr("aria-label",o)}}};t.prototype.AddCustomCssOnControlChanged=function(){var t=$(".fullPageContentEditorFrame").contents().find(".cke_wysiwyg_frame").contents()[0];if(t){this.AddCustomCss(t)}};t.prototype.AddCustomCss=function(t){if(t){if(t.head){for(var e=0,n=this.contentsCss;e<n.length;e++){var o=n[e];var i=document.createElement("link");i.href=o;i.rel="stylesheet";i.setAttribute("data-cke-temp","1");t.head.appendChild(i)}}}};return t}();u.CKEditorFactory=t})(e=t.CkEditorCustomControl||(t.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n]};return function(t,e){o(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MscrmControls;(function(t){var e;(function(t){"use strict";var e=function(s){__extends(t,s);function t(t,e,n,o,i){var r=s.call(this,t,e,n,o)||this;r.configureCKEditor=i;return r}t.prototype.init=function(r,a){var e=this;s.prototype.init.call(this,r,function(){var i=window.location.protocol+"//"+window.location.host;var t=document.createElement("script");t.src=i+"/js/jquery-1.12.4.min.js";t.onload=function(){var t=document.createElement("script");t.src=i+"/js/select2/select2.min.js";$(r).contents()[0].head.appendChild(t);var e=["/css/bootstrap.min.css","/css/specialcharacter.css","/xrm-adx/js/ckeditor_plugins/select2/styles/plugin.css","/xrm-adx/js/ckeditor_plugins/cmstemplate/styles/plugin.css","/js/select2/select2.css","/xrm-adx/css/editable.css"];for(var n=0;n<e.length;n++){var o=document.createElement("link");o.href=i+e[n];o.rel="stylesheet";$(r).contents()[0].head.appendChild(o)}a()};$(r).contents()[0].head.appendChild(t);r.contentWindow.ResourceManager=window.ResourceManager;e.configureCKEditor()})};return t}(Editor.StandardCkEditorProxy);t.CustomCKEditorProxy=e})(e=t.CkEditorCustomControl||(t.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));
/**
* @license Copyright (c) Microsoft Corporation. All rights reserved.
*/var MscrmControls;(function(t){var e;(function(t){"use strict";var n=MktSvc.Controls.Common.String;var o=MktSvc.Controls.Common.Object;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.getContent=function(){return this.getBodyContent(this.getContentNode())};e.prototype.extractContentFromDocument=function(t){return this.getBodyContent(t)};e.prototype.getResolvedContent=function(){return this.getBodyContent(this.getResolvedContentNode())};e.prototype.getFinalizedContent=function(){return this.getBodyContent(this.getFinalizedContentNode())};e.prototype.getBodyContent=function(t){if(!o.isNullOrUndefined(t)){return $(t).contents().find("body").html()?$(t).contents().find("body").html():n.Empty}return n.Empty};return e}(Editor.FragmentContentModel);t.CustomContentModel=e})(e=t.CkEditorCustomControl||(t.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MscrmControls;(function(t){var e;(function(d){"use strict";var u=MktSvc.Controls.Common.UniqueId;var t=function(n){__extends(t,n);function t(t){var e=n.call(this)||this;e.configureCkeditor=t;return e}t.prototype.create=function(t,e,n,o,i,r,a){var s=new Editor.AdditionalFontsProvider(e);var l=new Editor.CkEditorProxy(e,new Editor.CkEditorLocaleProvider(e.getLocalizationProvider().getLocaleId(),e.getLocalizationProvider().isRtl()),s);var c=new d.CustomCKEditorProxy(n,l,t,e,this.configureCkeditor);return new Editor.FullPageContentEditor(u.generate("fullPageEditorId"),c,o,e,i,r,a)};return t}(Editor.FullPageContentEditorFactory);d.CustomFullPageContentEditorFactory=t})(e=t.CkEditorCustomControl||(t.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MscrmControls;(function(t){var e;(function(t){"use strict";var e=function(){function t(t,e,n){this.libsFolder="libs";this.defaultContextExecution=new Editor.DefaultExecutionContext(t,e,n,this.libsFolder)}t.prototype.getLogger=function(){return this.defaultContextExecution.getLogger()};t.prototype.getLocalizationProvider=function(){return this.defaultContextExecution.getLocalizationProvider()};t.prototype.getDelaySchedulerTime=function(){return this.defaultContextExecution.getDelaySchedulerTime()};t.prototype.getBasePath=function(){return this.defaultContextExecution.getBasePath()};t.prototype.getLibsPath=function(){return this.defaultContextExecution.getLibsPath()};t.prototype.getContentSanitizer=function(){return this.defaultContextExecution.getContentSanitizer()};t.prototype.getConfigurationProvider=function(){return null};t.prototype.isSandboxed=function(){return true};t.prototype.isShimApp=function(){return false};t.prototype.isFocused=function(){return false};t.prototype.shouldPreviewBeSanitized=function(){return true};t.prototype.tryExecute=function(t,e,n,o){this.defaultContextExecution.tryExecute(t,e,n,o)};t.prototype.dispose=function(){this.defaultContextExecution.dispose();this.defaultContextExecution=null};return t}();t.EditorExecutionContext=e})(e=t.CkEditorCustomControl||(t.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MscrmControls;(function(t){var e;(function(t){"use strict";var e=function(){function t(t,e){this.eventName=t;this.subscriberFunc=e}Object.defineProperty(t.prototype,"EventName",{get:function(){return this.eventName},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"SubscriberFunc",{get:function(){return this.subscriberFunc},enumerable:true,configurable:true});return t}();t.EventListener=e})(e=t.CkEditorCustomControl||(t.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));
/**
* @license Copyright (c) Microsoft Corporation.  All rights reserved.
*/var MscrmControls;(function(t){var e;(function(t){"use strict"})(e=t.CkEditorCustomControl||(t.CkEditorCustomControl={}))})(MscrmControls||(MscrmControls={}));